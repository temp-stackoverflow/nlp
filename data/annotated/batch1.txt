Anything/NN
that/WDT
uses/VBZ
regular/JJ
expressions/NNS
(/-LRB-
particularly/RB
the/DT
RegularExpressionValidator/C
)/-RRB-
./.

To/TO
see/VB
this/DT
,/,
run/VBP
a/DT
RegularExpressionValidator/C
with/IN
the/DT
regex/NN
^/C
(/C
\/C
d/C
+/C
)/C
+/C
$/C
and/CC
give/VB
it/PRP
30/CD
digits/NNS
and/CC
an/DT
alpha/NN
character/NN
to/TO
validate/VB
against/IN
./.

Some/DT
posts/NNS
:/:
http://msdn.microsoft.com/en-us/magazine/ff646973.aspx/URI
http://www.abemiester.com/abemiester/post/RegEx-DOS-attack-Regular-Expressions-Now-you-have-3-problems.aspx/URI
(/-LRB-
this/DT
is/VBZ
a/DT
blog/NN
post/NN
from/IN
my/PRP$
own/JJ
blog/NN
going/VBG
into/IN
more/JJR
detail/NN
about/IN
the/DT
MSDN/NNP
article/NN
)/-RRB-
./.

This/DT
is/VBZ
called/VBN
a/DT
Regular/JJ
Expression/NN
Denial/NN
of/IN
Service/NN
attack/NN
and/CC
it/PRP
can/MD
bring/VB
a/DT
website/NN
to/TO
its/PRP$
knees/NNS
./.

I/PRP
'm/VBP
aware/JJ
of/IN
that/DT
./.

Did/VBD
you/PRP
look/VBP
at/IN
either/DT
of/IN
the/DT
links/NNS
I/PRP
posted/VBD
?/.

Regex/NN
can/MD
be/VB
done/VBN
safely/RB
with/IN
out/RP
that/DT
./.

You/PRP
just/RB
need/VBP
to/TO
write/VB
it/PRP
in/IN
a/DT
safe/JJ
way/NN
./.

No/DT
its/PRP$
not/RB
specific/JJ
to/TO
.NET/NNP
regex/NN
./.

Try/VB
adding/VBG
a/DT
"/``
z/C
"/''
to/TO
the/DT
end/NN
of/IN
your/PRP$
string/NN
of/IN
numbers/NNS
./.

Only/RB
languages/NNS
that/WDT
use/VBP
an/DT
NFA/NN
regex/NN
engine/NN
are/VBP
vulnerable/JJ
./.

This/DT
is/VBZ
the/DT
best/JJS
you/PRP
can/MD
do/VB
with/IN
legacy/NN
mysql/NNP
extension/NN
./.

For/IN
new/JJ
code/NN
,/,
you/PRP
're/VBP
advised/VBN
to/TO
switch/VB
to/TO
mysqli/NNP
or/CC
PDO/NN
./.

The/DT
simple/JJ
alternative/NN
to/TO
this/DT
problem/NN
could/MD
be/VB
solved/VBN
by/IN
granting/VBG
appropriate/JJ
permissions/NNS
in/IN
the/DT
database/NN
itself/PRP
./.

For/IN
example/NN
:/:
if/IN
you/PRP
are/VBP
using/VBG
mysql/NNP
database/NN
./.

then/RB
enter/VB
into/IN
the/DT
database/NN
through/IN
terminal/NN
or/CC
the/DT
ui/NN
provided/VBN
and/CC
just/RB
follow/VB
this/DT
command/NN
:/.

GRANT/C
SELECT/C
,/C
INSERT/C
,/C
DELETE/C
ON/C
database/C
TO/C
username@'localhost'/C
IDENTIFIED/C
BY/C
'password'/C
;/C

This/DT
will/MD
restrict/VB
the/DT
user/NN
to/TO
only/RB
get/VB
confined/VBN
with/IN
the/DT
specified/VBN
query/NN
's/VBZ
only/RB
./.

Remove/VB
the/DT
delete/JJ
permission/NN
and/CC
so/IN
the/DT
data/NNS
would/MD
never/RB
get/VB
deleted/VBN
from/IN
the/DT
query/NN
fired/VBD
from/IN
the/DT
php/NNP
page/NN
./.

The/DT
second/JJ
thing/NN
to/TO
do/VB
is/VBZ
to/TO
flush/VB
the/DT
privileges/NNS
so/IN
that/IN
the/DT
mysql/NNP
refreshes/VBZ
the/DT
permissions/NNS
and/CC
updates/NNS
./.

FLUSH/C
PRIVILEGES/C
;/C

more/JJR
information/NN
about/IN
flush/NN
./.

To/TO
see/VB
the/DT
current/JJ
privileges/NNS
for/IN
the/DT
user/NN
fire/VB
the/DT
following/JJ
query/NN
./.

select/C
*/C
from/C
mysql/C
./C
user/C
where/C
User/C
=/C
'username'/C
;/C

Learn/VB
more/RB
about/IN
GRANT/C
./.

The/DT
whole/JJ
point/NN
in/IN
salting/VBG
is/VBZ
to/TO
prevent/VB
you/PRP
from/IN
being/VBG
able/JJ
to/TO
look/VB
at/IN
the/DT
hashed/VBN
password/NN
and/CC
see/VBP
that/IN
multiple/JJ
users/NNS
have/VBP
the/DT
same/JJ
hash/NN
(/-LRB-
and/CC
thus/RB
the/DT
same/JJ
password/NN
)/-RRB-
./.

Without/IN
salting/NN
you/PRP
could/MD
just/RB
use/VB
the/DT
hashing/NN
algorithm/NN
and/CC
generate/VB
every/DT
possible/JJ
hash/NN
and/CC
then/RB
do/VB
a/DT
brute/JJ
search/NN
for/IN
that/DT
hash/NN
./.

Since/IN
the/DT
algorithm/NN
never/RB
changes/VBZ
it/PRP
makes/VBZ
it/PRP
predictable/JJ
for/IN
attackers/NNS
,/,
salting/NN
just/RB
makes/VBZ
it/PRP
that/IN
much/RB
more/RBR
difficult/JJ
./.

Yes/UH
but/CC
if/IN
you/PRP
use/VBP
a/DT
complicated/JJ
enough/RB
hashing/NN
algorithm/NN
with/IN
a/DT
good/JJ
pseudo/JJ
random/JJ
salt/NN
then/RB
you/PRP
can/MD
push/VB
the/DT
complexity/NN
of/IN
solving/VBG
the/DT
problem/NN
into/IN
the/DT
realms/NNS
of/IN
physical/JJ
impossibility/NN
on/IN
any/DT
modern/JJ
//CC
future/JJ
hardware/NN
./.

2/CD
^/SYM
128/CD
is/VBZ
a/DT
really/RB
big/JJ
number/NN
!/.

I/PRP
did/VBD
n't/RB
realize/VB
you/PRP
were/VBD
assuming/VBG
the/DT
salt/NN
had/VBD
been/VBN
compromised/VBN
as/RB
well/RB
./.

Whilst/IN
technically/RB
you/PRP
are/VBP
correct/JJ
the/DT
real/JJ
issue/NN
is/VBZ
that/IN
the/DT
hacker/NN
has/VBZ
compromised/VBN
the/DT
entire/JJ
database/NN
before/IN
we/PRP
begin/VBP
./.

This/DT
is/VBZ
a/DT
much/RB
larger/JJR
issue/NN
than/IN
the/DT
fact/NN
he/PRP
can/MD
crack/VB
common/JJ
passwords/NNS
in/IN
3/CD
days/NNS
;)/UH

Salting/NN
is/VBZ
not/RB
meant/VBN
to/TO
prevent/VB
what/WP
you/PRP
are/VBP
talking/VBG
about/IN
,/,
but/CC
instead/RB
to/TO
prevent/VB
the/DT
hacker/NN
from/IN
gaining/VBG
access/NN
to/TO
every/DT
password/NN
in/IN
your/PRP$
database/NN
in/IN
one/CD
go/NN
./.

It/PRP
is/VBZ
-/--
as/IN
is/VBZ
every/DT
form/NN
of/IN
encryption/NN
-/--
merely/RB
a/DT
method/NN
to/TO
INCONVENIENCE/VB
the/DT
attacker/NN

@erickson/USR
key/NN
stengthening/VBG
is/VBZ
another/DT
good/JJ
point/NN
./.

Make/VB
the/DT
hashing/NN
algorithm/NN
computationally/RB
expensive/JJ
and/CC
you/PRP
again/RB
make/VB
cracking/VBG
less/RBR
likely/JJ
./.

This/DT
answer/NN
is/VBZ
bad/JJ
!/.

YourCommonSense/USR
outlined/VBD
most/JJS
of/IN
the/DT
reasons/NNS
,/,
but/CC
I/PRP
'm/VBP
throwing/VBG
a/DT
downvote/NN
in/IN
for/IN
the/DT
thought/NN
that/IN
beginners/NNS
ca/MD
n't/RB
use/VB
a/DT
prepared/JJ
statement/NN
./.

Ridiculous/JJ
./.

I/PRP
would/MD
argue/VB
that/IN
it/PRP
's/VBZ
probably/RB
easier/JJR
to/TO
use/VB
prepared/JJ
statements/NNS
than/IN
concatenate/VB
garbage/NN
into/IN
a/DT
query/NN
in/IN
the/DT
first/JJ
place/NN
./.

You/PRP
should/MD
delete/VB
your/PRP$
answer/NN
./.

Nearly/RB
7/CD
years/NNS
later/RB
,/,
this/DT
answer/NN
is/VBZ
still/RB
wrong/JJ
and/CC
still/RB
misleading/JJ
./.

@JoelCoehoorn/USR
your/PRP$
intentions/NNS
with/IN
this/DT
post/NN
are/VBP
good/JJ
,/,
and/CC
while/IN
you/PRP
are/VBP
getting/VBG
at/IN
the/DT
right/JJ
things/NNS
,/,
the/DT
way/NN
it/PRP
's/VBZ
worded/VBN
makes/VBZ
people/NNS
believe/VBP
that/IN
there/EX
is/VBZ
some/DT
sort/NN
of/IN
difference/NN
between/IN
injection/NN
and/CC
injection/NN
./.

As/IN
you/PRP
know/VBP
,/,
the/DT
issue/NN
is/VBZ
about/IN
bringing/VBG
data/NNS
into/IN
the/DT
correct/JJ
context/NN
,/,
which/WDT
when/WRB
done/VBN
correctly/RB
removes/VBZ
any/DT
chance/NN
of/IN
SQL/NNP
injection/NN
attacks/NNS
./.

Data/NNS
from/IN
user/NN
or/CC
no/DT
,/,
separating/VBG
the/DT
data/NNS
from/IN
the/DT
command/NN
is/VBZ
required/VBN
for/IN
an/DT
application/NN
that/IN
functions/NNS
correctly/RB
./.

@Pacerier/USR
Joel/NNP
made/VBD
an/DT
edit/NN
after/IN
my/PRP$
comment/NN
on/IN
March/NNP
8th/JJ
,/,
emphasizing/VBG
a/DT
sentence/NN
in/IN
what/WP
he/PRP
already/RB
wrote/VBD
./.

It/PRP
's/VBZ
clear/JJ
that/IN
the/DT
post/NN
has/VBZ
the/DT
content/NN
he/PRP
intends/VBZ
./.

I/PRP
'm/VBP
not/RB
going/VBG
to/TO
edit/VB
someone/NN
's/POS
post/NN
to/TO
change/VB
the/DT
meaning/NN
of/IN
it/PRP
,/,
and/CC
other/JJ
answers/NNS
already/RB
answer/VBP
the/DT
question/NN
./.

@Pacerier/USR
I/PRP
disagree/VBP
with/IN
you/PRP
there/RB
./.

The/DT
system/NN
is/VBZ
set/VBN
up/RP
in/IN
a/DT
way/NN
that/IN
we/PRP
can/MD
edit/VB
everone/NN
's/POS
posts/NNS
,/,
yes/UH
,/,
but/CC
it/PRP
is/VBZ
good/JJ
etiquette/NN
and/CC
rule/NN
to/TO
not/RB
drastically/RB
change/VB
the/DT
original/JJ
meaning/NN
./.

I/PRP
've/VBP
had/VBD
the/DT
same/JJ
issue/NN
and/CC
have/VBP
been/VBN
searching/VBG
around/RP
for/IN
some/DT
time/NN
for/IN
an/DT
answer/NN
./.

Here/RB
's/POS
one/CD
thing/NN
that/IN
I/PRP
've/VBP
learned/VBN
./.

I/PRP
am/VBP
running/VBG
jenkins/NNP
as/IN
the/DT
jenkins/NNP
user/NN
,/,
user/NN
created/VBN
by/IN
the/DT
installer/NN
,/,
and/CC
as/IN
everyone/NN
else/RB
has/VBZ
mentioned/VBN
he/PRP
does/VBZ
n't/RB
have/VB
access/NN
to/TO
the/DT
same/JJ
keychain/NN
that/IN
your/PRP$
normal/JJ
user/NN
does/VBZ
./.

Instead/RB
of/IN
trying/VBG
to/TO
login/VB
as/IN
the/DT
jenkins/NNP
user/NN
,/,
I/PRP
created/VBD
a/DT
second/JJ
build/VB
project/NN
that/WDT
simply/RB
has/VBZ
one/CD
build/VB
step/NN
that/WDT
is/VBZ
"/``
Execute/C
Shell/C
"/''
in/IN
which/WDT
I/PRP
run/VBP
commands/NNS
I/PRP
want/VBP
to/TO
test/VB
as/IN
the/DT
jenkins/NNP
user/NN
./.

Once/RB
I/PRP
had/VBD
that/IN
set/VBN
up/RP
,/,
I/PRP
could/MD
run/VB
the/DT
command/NN
security/C
list-keychains/C

And/CC
this/DT
revealed/VBD
to/TO
me/PRP
that/IN
the/DT
only/JJ
thing/NN
that/IN
jenkins/NNP
could/MD
see/VB
was/VBD
the/DT
system/NN
keychain/NN
./.

+/C
security/C
list-keychains/C
"/Library/Keychains/System.keychain"/C
"/Library/Keychains/System.keychain"/C

With/IN
that/DT
knowledge/NN
,/,
I/PRP
then/RB
opened/VBD
the/DT
Keychain/NN
Access/NN
app/NN
and/CC
copied/VBD
my/PRP$
"/``
iPhone/NNP
Developer/NN
:/:
xxxx/CD
"/''
certificate/NN
into/IN
the/DT
System/NN
keychain/NN
(/-LRB-
Right-click/VB
,/,
copy/VB
from/IN
the/DT
"/``
login/NN
"/''
keychain/NN
)/-RRB-
./.

This/DT
got/VBD
me/PRP
passed/VBD
the/DT
certificate/NN
//CC
private/NN
key/JJ
pair/NN
code/NN
sign/NN
error/NN
but/CC
opened/VBD
up/RP
another/DT
one/NN
with/IN
the/DT
provisioning/VBG
profile/NN
(/-LRB-
seems/VBZ
like/IN
a/DT
similar/JJ
,/,
but/CC
different/JJ
,/,
issue/NN
)/-RRB-
./.

I/PRP
found/VBD
that/IN
the/DT
provisioning/NN
profiles/NNS
for/IN
the/DT
Jenkins/NNP
user/NN
are/VBP
stored/VBN
in/IN
'/``
/Users/Shared/Jenkins/Library/MobileDevice/Provisioning/C
Profiles/C
'/''
and/CC
so/RB
put/VB
a/DT
step/NN
into/IN
my/PRP$
build/VB
to/TO
copy/VB
a/DT
provisioning/NN
profile/NN
from/IN
inside/IN
my/PRP$
git/NN
repo/NN
to/TO
that/DT
location/NN
./.

This/DT
allows/VBZ
me/PRP
to/TO
update/VB
the/DT
provisioning/NN
profile/NN
and/CC
push/VB
it/PRP
into/IN
SCM/NN
and/CC
Jenkins/NNP
automatically/RB
picks/VBZ
up/RP
that/DT
change/NN
./.

I/PRP
've/VBP
written/VBN
this/DT
little/JJ
function/NN
several/JJ
years/NNS
ago/RB
:/.

function/C
sqlvprintf/C
(/C
$/C
query/C
,/C
$/C
args/C
)/C
{/C
global/C
$/C
DB_LINK/C
;/C
$/C
ctr/C
=/C
0/C
;/C
ensureConnection/C
(/C
)/C
;/C
///CCM
Connect/VB|CCM
to/TO|CCM
database/NN|CCM
if/IN|CCM
not/RB|CCM
connected/VBN|CCM
already/RB|CCM
./.|CCM
$/C
values/C
=/C
array/C
(/C
)/C
;/C
foreach/C
(/C
$/C
args/C
as/C
$/C
value/C
)/C
{/C
if/C
(/C
is_string/C
(/C
$/C
value/C
)/C
)/C
{/C
$/C
value/C
=/C
"'"/C
./C
mysqli_real_escape_string/C
(/C
$/C
DB_LINK/C
,/C
$/C
value/C
)/C
./C
"'"/C
;/C
}/C
else/C
if/C
(/C
is_null/C
(/C
$/C
value/C
)/C
)/C
{/C
$/C
value/C
=/C
'NULL'/C
;/C
}/C
else/C
if/C
(/C
!/C
is_int/C
(/C
$/C
value/C
)/C
&&/C
!/C
is_float/C
(/C
$/C
value/C
)/C
)/C
{/C
die/C
(/C
'Only numeric, string, array and NULL arguments allowed in a query. Argument '/C
./C
(/C
$/C
ctr/C
+/C
1/C
)/C
./C
'is not a basic type, it\'s type is '/C
./C
gettype/C
(/C
$/C
value/C
)/C
./C
'.'/C
)/C
;/C
}/C
$/C
values/C
[/C
]/C
=/C
$/C
value/C
;/C
$/C
ctr/C
++/C
;/C
}/C
$/C
query/C
=/C
preg_replace_callback/C
(/C
'/{(\\d+)}/'/C
,/C
function/C
(/C
$/C
match/C
)/C
use/C
(/C
$/C
values/C
)/C
{/C
if/C
(/C
isset/C
(/C
$/C
values/C
[/C
$/C
match/C
[/C
1/C
]/C
]/C
)/C
)/C
{/C
return/C
$/C
values/C
[/C
$/C
match/C
[/C
1/C
]/C
]/C
;/C
}/C
else/C
{/C
return/C
$/C
match/C
[/C
0/C
]/C
;/C
}/C
}/C
,/C
$/C
query/C
)/C
;/C
return/C
$/C
query/C
;/C
}/C
function/C
runEscapedQuery/C
(/C
$/C
preparedQuery/C
//CCM
*/C|CCM
,/C|CCM
.../C|CCM
*/C|CCM
)/C
{/C
$/C
params/C
=/C
array_slice/C
(/C
func_get_args/C
(/C
)/C
,/C
1/C
)/C
;/C
$/C
results/C
=/C
runQuery/C
(/C
sqlvprintf/C
(/C
$/C
preparedQuery/C
,/C
$/C
params/C
)/C
)/C
;/C
///CCM
Run/VBP|CCM
query/NN|CCM
and/CC|CCM
fetch/VBP|CCM
results/NNS|CCM
./.|CCM
return/C
$/C
results/C
;/C
}/C

This/DT
allows/VBZ
running/VBG
statements/NNS
in/IN
an/DT
one-liner/NN
C#/NNP
-/SYM
ish/FW
String.Format/C
like/IN
:/.

runEscapedQuery/C
(/C
"/C
INSERT/C
INTO/C
Whatever/C
(/C
id/C
,/C
foo/C
,/C
bar/C
)/C
VALUES/C
(/C
{/C
0/C
}/C
,/C
{/C
1/C
}/C
,/C
{/C
2/C
}/C
)/C
"/C
,/C
$/C
numericVar/C
,/C
$/C
stringVar1/C
,/C
$/C
stringVar2/C
)/C
;/C

It/PRP
escapes/VBZ
considering/VBG
the/DT
variable/JJ
type/NN
./.

If/IN
you/PRP
try/VBP
to/TO
parameterize/VB
table/NN
,/,
column/NN
names/NNS
,/,
it/PRP
would/MD
fail/VB
as/IN
it/PRP
puts/VBZ
every/DT
string/NN
in/IN
quotes/NNS
which/WDT
is/VBZ
invalid/JJ
syntax/NN
./.

SECURITY/NN
UPDATE/VB
:/:
The/DT
previous/JJ
str_replace/C
version/NN
allowed/VBD
injections/NNS
by/IN
adding/VBG
{/-LRB-
#/C
}/-RRB-
tokens/NNS
into/IN
user/NN
data/NNS
./.

This/DT
preg_replace_callback/C
version/NN
does/VBZ
n't/RB
cause/VB
problems/NNS
if/IN
the/DT
replacement/NN
contains/VBZ
these/DT
tokens/NNS
./.

@YourCommonSense/USR
Hmmm/UH
sprintf/C
is/VBZ
useful/JJ
./.

But/CC
not/RB
necessarily/RB
here/RB
,/,
as/IN
strings/NNS
need/VBP
to/TO
be/VB
properly/RB
escaped/VBN
and/CC
wrapped/VBN
with/IN
quotes/NNS
./.

If/IN
the/DT
caller/NN
casts/VBZ
the/DT
parameter/NN
to/TO
int/C
it/PRP
wo/MD
n't/RB
get/VB
quoted/VBN
so/IN
it/PRP
can/MD
be/VB
used/VBN
with/IN
the/DT
LIMIT/C
clause/NN
as/RB
well/RB
../.

@YourCommonSense/USR
Whatever/WDT
SQL/NNP
preparing/VBG
library/NN
you/PRP
use/VBP
you/PRP
'll/MD
need/VB
to/TO
tell/VB
it/PRP
somehow/RB
how/WRB
to/TO
handle/VB
the/DT
supplied/VBN
parameters/NNS
./.

If/IN
it/PRP
maps/VBZ
to/TO
the/DT
SQL/NNP
prepare/JJ
statement/NN
,/,
you/PRP
still/RB
need/VB
to/TO
tell/VB
it/PRP
whether/IN
it/PRP
should/MD
quote/VB
the/DT
value/NN
or/CC
not/RB
(/-LRB-
string/NN
or/CC
number/NN
)/-RRB-
./.

Otherwise/RB
it/PRP
will/MD
need/VB
to/TO
parse/VB
the/DT
statement/NN
and/CC
decide/VB
based/VBN
on/IN
that/DT
./.

Anyway/RB
MySQL/NNP
is/VBZ
happy/JJ
if/IN
you/PRP
quote/VBP
everything/NN
./.

@Kermani/USR
It/PRP
escapes/VBZ
quotes/NNS
correctly/RB
./.

If/IN
you/PRP
can/MD
find/VB
a/DT
security/NN
hole/NN
in/IN
it/PRP
,/,
let/VB
me/PRP
know/VB
./.

I/PRP
had/VBD
previously/RB
answered/VBN
a/DT
very/RB
similar/JJ
question/NN
over/IN
at/IN
How/WRB
can/MD
I/PRP
throttle/VB
user/NN
login/NN
attempts/NNS
in/IN
PHP/NNP
./.

I/PRP
'll/MD
reiterate/VB
the/DT
proposed/VBN
solution/NN
here/RB
as/IN
I/PRP
believe/VBP
many/JJ
of/IN
you/PRP
will/MD
find/VB
it/PRP
informational/JJ
and/CC
useful/JJ
to/TO
see/VB
some/DT
actual/JJ
code/NN
./.

Please/VB
bare/JJ
in/IN
mind/NN
that/IN
using/VBG
a/DT
CAPTCHA/NN
might/MD
not/RB
be/VB
the/DT
best/JJS
solution/NN
due/JJ
to/TO
the/DT
increasingly/RB
accurate/JJ
algorithms/NNS
being/VBG
used/VBN
in/IN
CAPTCHA/NN
busters/NNS
nowadays/RB
:/.

You/PRP
can/MD
not/RB
simply/RB
prevent/VB
DoS/NN
attacks/NNS
by/IN
chaining/VBG
throttling/NN
down/RP
to/TO
a/DT
single/JJ
IP/NNP
or/CC
username/JJ
./.

Hell/UH
,/,
you/PRP
ca/MD
n't/RB
even/RB
really/RB
prevent/VB
rapid-fire/JJ
login/NN
attempts/NNS
using/VBG
this/DT
method/NN
./.

Why/WRB
?/.

Because/IN
the/DT
attack/NN
can/MD
span/VB
multiple/JJ
IPs/NNS
and/CC
user/NN
accounts/NNS
for/IN
the/DT
sake/NN
of/IN
bypassing/VBG
your/PRP$
throttling/NN
attempts/NNS
./.

I/PRP
have/VBP
seen/VBN
posted/VBN
elsewhere/RB
that/IN
ideally/RB
you/PRP
should/MD
be/VB
tracking/VBG
all/DT
failed/VBN
login/NN
attempts/NNS
across/IN
the/DT
site/NN
and/CC
associating/VBG
them/PRP
to/TO
a/DT
timestamp/NN
,/,
perhaps/RB
:/.

CREATE/C
TABLE/C
failed_logins/C
(/C
id/C
INT/C
(/C
11/C
)/C
UNSIGNED/C
NOT/C
NULL/C
AUTO_INCREMENT/C
PRIMARY/C
KEY/C
,/C
username/C
VARCHAR/C
(/C
16/C
)/C
NOT/C
NULL/C
,/C
ip_address/C
INT/C
(/C
11/C
)/C
UNSIGNED/C
NOT/C
NULL/C
,/C
attempted/C
DATETIME/C
NOT/C
NULL/C
)/C
engine/C
=/C
InnoDB/C
charset/C
=/C
UTF8/C
;/C

Decide/VB
on/IN
certain/JJ
delays/NNS
based/VBN
on/IN
the/DT
overall/JJ
number/NN
of/IN
failed/JJ
logins/NNS
in/IN
a/DT
given/VBN
amount/NN
of/IN
time/NN
./.

You/PRP
should/MD
base/VB
this/DT
on/IN
statistical/JJ
data/NNS
pulled/VBN
from/IN
your/PRP$
failed_logins/C
table/NN
as/IN
it/PRP
will/MD
change/VB
over/IN
time/NN
based/VBN
on/IN
the/DT
number/NN
of/IN
users/NNS
and/CC
how/WRB
many/JJ
of/IN
them/PRP
can/MD
recall/VB
(/-LRB-
and/CC
type/NN
)/-RRB-
their/PRP$
password/NN
./.

10/CD
failed/JJ
attempts/NNS
=/SYM
1/CD
second/JJ

20/CD
failed/JJ
attempts/NNS
=/SYM
2/CD
seconds/NNS

30/CD
failed/JJ
attempts/NNS
=/SYM
reCaptcha/NN

Query/NN
the/DT
table/NN
on/IN
every/DT
failed/VBN
login/NN
attempt/NN
to/TO
find/VB
the/DT
number/NN
of/IN
failed/JJ
logins/NNS
for/IN
a/DT
given/VBN
period/NN
of/IN
time/NN
,/,
say/VBP
15/CD
minutes/NNS
:/.

SELECT/C
COUNT/C
(/C
1/C
)/C
AS/C
failed/C
FROM/C
failed_logins/C
WHERE/C
attempted/C
>/C
DATE_SUB/C
(/C
NOW/C
(/C
)/C
,/C
INTERVAL/C
15/C
minute/C
)/C
;/C

If/IN
the/DT
number/NN
of/IN
attempts/NNS
over/IN
the/DT
given/VBN
period/NN
of/IN
time/NN
is/VBZ
over/IN
your/PRP$
limit/NN
,/,
either/CC
enforce/VB
throttling/NN
or/CC
force/VB
all/DT
user/NN
's/POS
to/TO
use/VB
a/DT
captcha/NN
(/-LRB-
i.e./FW
reCaptcha/NN
)/-RRB-
until/IN
the/DT
number/NN
of/IN
failed/JJ
attempts/NNS
over/IN
the/DT
given/VBN
time/NN
period/NN
is/VBZ
less/JJR
than/IN
the/DT
threshold/NN
./.

///CCM
array/NN|CCM
of/IN|CCM
throttling/NN|CCM
$/C
throttle/C
=/C
array/C
(/C
10/C
=>/C
1/C
,/C
20/C
=>/C
2/C
,/C
30/C
=>/C
'/C
recaptcha/C
'/C
)/C
;/C

///CCM
assume/VB|CCM
query/JJ|CCM
result/NN|CCM
of/IN|CCM
$/C|CCM
sql/C|CCM
is/VBZ|CCM
stored/VBN|CCM
in/IN|CCM
$/C|CCM
row/C|CCM
$/C
sql/C
=/C
'/C
SELECT/C
MAX/C
(/C
attempted/C
)/C
AS/C
attempted/C
FROM/C
failed_logins/C
'/C
;/C

$/C
latest_attempt/C
=/C
(/C
int/C
)/C
date/C
(/C
'/C
U/C
'/C
,/C
strtotime/C
(/C
$/C
row/C
[/C
'/C
attempted/C
'/C
]/C
)/C
)/C
;/C

///CCM
get/VB|CCM
the/DT|CCM
number/NN|CCM
of/IN|CCM
failed/JJ|CCM
attempts/NNS|CCM
$/C
sql/C
=/C
'/C
SELECT/C
COUNT/C
(/C
1/C
)/C
AS/C
failed/C
FROM/C
failed_logins/C
WHERE/C
attempted/C
>/C
DATE_SUB/C
(/C
NOW/C
(/C
)/C
,/C
INTERVAL/C
15/C
minute/C
)/C
'/C
;/C

///CCM
assume/VB|CCM
the/DT|CCM
number/NN|CCM
of/IN|CCM
failed/VBN|CCM
attempts/NNS|CCM
was/VBD|CCM
stored/VBN|CCM
in/IN|CCM
$/C|CCM
failed_attempts/C|CCM
krsort/C
(/C
$/C
throttle/C
)/C
;/C

foreach/C
(/C
$/C
throttle/C
as/C
$/C
attempts/C
=>/C
$/C
delay/C
)/C
{/C
if/C
(/C
$/C
failed_attempts/C
>/C
$/C
attempts/C
)/C
{/C
///CCM
we/PRP|CCM
need/VBP|CCM
to/TO|CCM
throttle/VB|CCM
based/VBN|CCM
on/IN|CCM
delay/NN|CCM
if/C
(/C
is_numeric/C
(/C
$/C
delay/C
)/C
)/C
{/C
$/C
remaining_delay/C
=/C
time/C
(/C
)/C
-/C
$/C
latest_attempt/C
-/C
$/C
delay/C
;/C
///CCM
output/NN|CCM
remaining/VBG|CCM
delay/NN|CCM
echo/C
'You must wait '/C
./C
$/C
remaining_delay/C
./C
' seconds before your next login attempt'/C
;/C
}/C
else/C
{/C
///CCM
code/NN|CCM
to/TO|CCM
display/VB|CCM
recaptcha/NN|CCM
on/IN|CCM
login/NN|CCM
form/NN|CCM
goes/VBZ|CCM
here/RB|CCM
}/C
break/C
;/C
}/C
}/C

Using/VBG
reCaptcha/NN
at/IN
a/DT
certain/JJ
threshold/NN
would/MD
ensure/VB
that/IN
an/DT
attack/NN
from/IN
multiple/JJ
fronts/NNS
would/MD
be/VB
minimized/VBN
and/CC
normal/JJ
site/NN
users/NNS
would/MD
not/RB
experience/VB
a/DT
significant/JJ
delay/NN
for/IN
legitimate/JJ
failed/JJ
login/NN
attempts/NNS
./.

I/PRP
ca/MD
n't/RB
gaurantee/VB
prevention/NN
,/,
as/IN
it/PRP
's/VBZ
already/RB
been/VBN
expanded/VBN
upon/IN
that/DT
CAPTCHA/NN
's/POS
can/MD
be/VB
busted/VBN
./.

There/EX
are/VBP
alternative/JJ
solutions/NNS
,/,
perhaps/RB
a/DT
variant/NN
of/IN
"/``
Name/VB
this/DT
animal/NN
"/''
,/,
which/WDT
could/MD
work/VB
quite/RB
well/RB
as/IN
a/DT
substitute/NN
./.

Parameterized/JJ
query/NN
AND/CC
input/NN
validation/NN
is/VBZ
the/DT
way/NN
to/TO
go/VB
./.

There/EX
is/VBZ
many/JJ
scenarios/NNS
under/IN
which/WDT
SQL/NNP
injection/NN
may/MD
occur/VB
,/,
even/RB
though/IN
mysql_real_escape_string/C
(/C
)/C
has/VBZ
been/VBN
used/VBN
./.

Those/DT
examples/NNS
are/VBP
vulnerable/JJ
to/TO
SQL/NNP
injection/NN
:/.

$/C
offset/C
=/C
isset/C
(/C
$/C
_GET/C
[/C
'o'/C
]/C
)/C
?/C
$/C
_GET/C
[/C
'o'/C
]/C
:/C
0/C
;/C

$/C
offset/C
=/C
mysql_real_escape_string/C
(/C
$/C
offset/C
)/C
;/C

RunQuery/C
(/C
"/C
SELECT/C
userid/C
,/C
username/C
FROM/C
sql_injection_test/C
LIMIT/C
$/C
offset/C
,/C
10/C
"/C
)/C
;/C

or/CC

$/C
order/C
=/C
isset/C
(/C
$/C
_GET/C
[/C
'o'/C
]/C
)/C
?/C
$/C
_GET/C
[/C
'o'/C
]/C
:/C
'userid'/C
;/C

$/C
order/C
=/C
mysql_real_escape_string/C
(/C
$/C
order/C
)/C
;/C

RunQuery/C
(/C
"/C
SELECT/C
userid/C
,/C
username/C
FROM/C
sql_injection_test/C
ORDER/C
BY/C
'/C
$/C
order/C
'/C
"/C
)/C
;/C

In/IN
both/DT
cases/NNS
,/,
you/PRP
ca/MD
n't/RB
use/VB
'/''
to/TO
protect/VB
the/DT
encapsulation/NN
./.

Source/NN
:/:
The/DT
Unexpected/JJ
SQL/NNP
Injection/NN
(/-LRB-
When/WRB
Escaping/VBG
Is/VBZ
Not/RB
Enough/RB
)/-RRB-

There/EX
are/VBP
so/RB
many/JJ
answers/NNS
for/IN
PHP/NNP
and/CC
MySQL/NNP
,/,
but/CC
here/RB
is/VBZ
code/NN
for/IN
PHP/NNP
and/CC
Oracle/NNP
for/IN
preventing/VBG
SQL/NNP
injection/NN
as/RB
well/RB
as/IN
regular/JJ
use/NN
of/IN
oci8/C
drivers/NNS
:/.

$/C
c/C
=/C
oci_connect/C
(/C
$/C
userName/C
,/C
$password/C
,/C
"/C
(/C
DESCRIPTION/C
=/C
(/C
ADDRESS_LIST/C
=/C
(/C
ADDRESS/C
=/C
(/C
PROTOCOL/C
=/C
TCP/C
)/C
(/C
HOST/C
=/C
$/C
serverName/C
)/C
(/C
PORT/C
=/C
1521/C
)/C
)/C
)/C
(/C
CONNECT_DATA/C
=/C
(/C
SID/C
=/C
$/C
databaseName/C
)/C
)/C
)/C
"/C
)/C
;/C

$/C
strQuery/C
=/C
"/C
UPDATE/C
table/C
SET/C
field/C
=/C
:/C
xx/C
WHERE/C
ID/C
=/C
123/C
"/C

$/C
stmt/C
=/C
OCIParse/C
(/C
$/C
c/C
,/C
$/C
strQuery/C
)/C
;/C

OCIBindByName/C
(/C
$stmt/C
,/C
'/C
:/C
xx/C
'/C
,/C
$/C
fieldval/C
)/C
;/C

$/C
ok/C
=/C
OCIExecute/C
(/C
$/C
stmt/C
)/C
;/C

@cryptic?/USR
this/DT
code/NN
is/VBZ
for/IN
Oracle/NNP
PHP/NNP
connection/NN
simple/NN
update/VBP
query/NN
using/VBG
help/NN
of/IN
query/NN
parse/NN
which/WDT
is/VBZ
used/VBN
to/TO
privent/VB
sq-Injection/NN
Used/VBN
in/IN
Oci8/C
driver/NN
php.net/manual/en/function.oci-parse.php/URI

1/LS
./SYM
Not/RB
using/VBG
appropriate/JJ
indices/NNS

This/DT
is/VBZ
a/DT
relatively/RB
easy/JJ
one/CD
but/CC
still/RB
it/PRP
happens/VBZ
all/PDT
the/DT
time/NN
./.

Foreign/JJ
keys/NNS
should/MD
have/VB
indexes/NNS
on/IN
them/PRP
./.

If/IN
you/PRP
're/VBP
using/VBG
a/DT
field/NN
in/IN
a/DT
WHERE/C
you/PRP
should/MD
(/-LRB-
probably/RB
)/-RRB-
have/VBP
an/DT
index/NN
on/IN
it/PRP
./.

Such/JJ
indexes/NNS
should/MD
often/RB
cover/VB
multiple/JJ
columns/NNS
based/VBN
on/IN
the/DT
queries/NNS
you/PRP
need/VBP
to/TO
execute/VB
./.

2/LS
./SYM
Not/RB
enforcing/VBG
referential/JJ
integrity/NN

Your/PRP$
database/NN
may/MD
vary/VB
here/RB
but/CC
if/IN
your/PRP$
database/NN
supports/VBZ
referential/JJ
integrity/NN
--/--
meaning/VBG
that/IN
all/DT
foreign/JJ
keys/NNS
are/VBP
guaranteed/VBN
to/TO
point/NN
to/TO
an/DT
entity/NN
that/WDT
exists/VBZ
--/--
you/PRP
should/MD
be/VB
using/VBG
it/PRP
./.

It/PRP
's/VBZ
quite/RB
common/JJ
to/TO
see/VB
this/DT
failure/NN
on/IN
MySQL/NNP
databases/NNS
./.

I/PRP
do/VBP
n't/RB
believe/VB
MyISAM/NNP
supports/VBZ
it/PRP
./.

InnoDB/NNP
does/VBZ
./.

You/PRP
'll/MD
find/VB
people/NNS
who/WP
are/VBP
using/VBG
MyISAM/NNP
or/CC
those/DT
that/WDT
are/VBP
using/VBG
InnoDB/NNP
but/CC
are/VBP
n't/RB
using/VBG
it/PRP
anyway/RB
./.

More/RBR
here/RB
:/.

How/WRB
important/JJ
are/VBP
constraints/NNS
like/IN
NOT/C
NULL/C
and/CC
FOREIGN/C
KEY/C
if/IN
I/PRP
'll/MD
always/RB
control/VB
my/PRP$
database/NN
input/NN
with/IN
php/NNP
?/.

Are/VBP
foreign/JJ
keys/NNS
really/RB
necessary/JJ
in/IN
a/DT
database/NN
design/NN
?/.

Are/VBP
foreign/JJ
keys/NNS
really/RB
necessary/JJ
in/IN
a/DT
database/NN
design/NN
?/.

3/LS
./SYM
Using/VBG
natural/JJ
rather/RB
than/IN
surrogate/JJ
(/-LRB-
technical/JJ
)/-RRB-
primary/JJ
keys/NNS

Natural/JJ
keys/NNS
are/VBP
keys/NNS
based/VBN
on/IN
externally/RB
meaningful/JJ
data/NNS
that/WDT
is/VBZ
(/-LRB-
ostensibly/RB
)/-RRB-
unique/JJ
./.

Common/JJ
examples/NNS
are/VBP
product/NN
codes/NNS
,/,
two-letter/JJ
state/NN
codes/NNS
(/-LRB-
US/NNP
)/-RRB-
,/,
social/JJ
security/NN
numbers/NNS
and/CC
so/RB
on/RB
./.

Surrogate/NN
or/CC
technical/JJ
primary/JJ
keys/NNS
are/VBP
those/DT
that/WDT
have/VBP
absolutely/RB
no/DT
meaning/NN
outside/IN
the/DT
system/NN
./.

They/PRP
are/VBP
invented/VBN
purely/RB
for/IN
identifying/VBG
the/DT
entity/NN
and/CC
are/VBP
typically/RB
auto-incrementing/JJ
fields/NNS
(/-LRB-
SQL/NNP
Server/NN
,/,
MySQL/NNP
,/,
others/NNS
)/-RRB-
or/CC
sequences/NNS
(/-LRB-
most/RBS
notably/RB
Oracle/NNP
)/-RRB-
./.

In/IN
my/PRP$
opinion/NN
you/PRP
should/MD
always/RB
use/VB
surrogate/JJ
keys/NNS
./.

This/DT
issue/NN
has/VBZ
come/VBN
up/RP
in/IN
these/DT
questions/NNS
:/.

How/WRB
do/VBP
you/PRP
like/VB
your/PRP$
primary/JJ
keys/NNS
?/.

What/WP
's/VBZ
the/DT
best/JJS
practice/NN
for/IN
primary/JJ
keys/NNS
in/IN
tables/NNS
?/.

Which/WDT
format/NN
of/IN
primary/JJ
key/NN
would/MD
you/PRP
use/VB
in/IN
this/DT
situation/NN
./.

Surrogate/NN
vs./IN
natural/business/JJ
keys/NNS

Should/MD
I/PRP
have/VB
a/DT
dedicated/JJ
primary/JJ
key/JJ
field/NN
?/.

This/DT
is/VBZ
a/DT
somewhat/RB
controversial/JJ
topic/NN
on/IN
which/WDT
you/PRP
wo/MD
n't/RB
get/VB
universal/JJ
agreement/NN
./.

While/IN
you/PRP
may/MD
find/VB
some/DT
people/NNS
,/,
who/WP
think/VBP
natural/JJ
keys/NNS
are/VBP
in/IN
some/DT
situations/NNS
OK/JJ
,/,
you/PRP
wo/MD
n't/RB
find/VB
any/DT
criticism/NN
of/IN
surrogate/JJ
keys/NNS
other/JJ
than/IN
being/VBG
arguably/RB
unnecessary/JJ
./.

That/DT
's/VBZ
quite/RB
a/DT
small/JJ
downside/NN
if/IN
you/PRP
ask/VBP
me/PRP
./.

Remember/VB
,/,
even/RB
countries/NNS
can/MD
cease/VB
to/TO
exist/VB
(/-LRB-
for/IN
example/NN
,/,
Yugoslavia/NNP
)/-RRB-
./.

4/LS
./SYM
Writing/VBG
queries/NNS
that/WDT
require/VBP
DISTINCT/C
to/TO
work/VB
You/PRP
often/RB
see/VBP
this/DT
in/IN
ORM-generated/VBN
queries/NNS
./.

Look/VB
at/IN
the/DT
log/NN
output/NN
from/IN
Hibernate/C
and/CC
you/PRP
'll/MD
see/VB
all/PDT
the/DT
queries/NNS
begin/VBP
with/IN
:/:

SELECT/C
DISTINCT/C
.../F

This/DT
is/VBZ
a/DT
bit/NN
of/IN
a/DT
shortcut/NN
to/TO
ensuring/VBG
you/PRP
do/VBP
n't/RB
return/VB
duplicate/VB
rows/NNS
and/CC
thus/RB
get/VBP
duplicate/VB
objects/NNS
./.

You/PRP
'll/MD
sometimes/RB
see/VB
people/NNS
doing/VBG
this/DT
as/RB
well/RB
./.

If/IN
you/PRP
see/VBP
it/PRP
too/RB
much/RB
it/PRP
's/VBZ
a/DT
real/JJ
red/JJ
flag/NN
./.

Not/RB
that/IN
DISTINCT/C
is/VBZ
bad/JJ
or/CC
does/VBZ
n't/RB
have/VB
valid/JJ
applications/NNS
./.

It/PRP
does/VBZ
(/-LRB-
on/IN
both/DT
counts/NNS
)/-RRB-
but/CC
it/PRP
's/VBZ
not/RB
a/DT
surrogate/NN
or/CC
a/DT
stopgap/C
for/IN
writing/VBG
correct/JJ
queries/NNS
./.

From/IN
Why/WRB
I/PRP
Hate/VBP
DISTINCT/C
:/.

Where/WRB
things/NNS
start/VBP
to/TO
go/VB
sour/JJ
in/IN
my/PRP$
opinion/NN
is/VBZ
when/WRB
a/DT
developer/NN
is/VBZ
building/VBG
substantial/JJ
query/NN
,/,
joining/VBG
tables/NNS
together/RB
,/,
and/CC
all/DT
of/IN
a/DT
sudden/JJ
he/PRP
realizes/VBZ
that/IN
it/PRP
looks/VBZ
like/IN
he/PRP
is/VBZ
getting/VBG
duplicate/VB
(/-LRB-
or/CC
even/RB
more/JJR
)/-RRB-
rows/NNS
and/CC
his/PRP$
immediate/JJ
response/NN
.../:
his/PRP$
"/``
solution/NN
"/''
to/TO
this/DT
"/``
problem/NN
"/''
is/VBZ
to/TO
throw/VB
on/IN
the/DT
DISTINCT/C
keyword/NN
and/CC
POOF/UH
all/PDT
his/PRP$
troubles/NNS
go/VB
away/RB
./.

5/LS
./SYM
Favouring/VBG
aggregation/NN
over/IN
joins/VBZ

Another/DT
common/JJ
mistake/NN
by/IN
database/NN
application/NN
developers/NNS
is/VBZ
to/TO
not/RB
realize/VB
how/WRB
much/RB
more/RBR
expensive/JJ
aggregation/NN
(/-LRB-
ie/FW
the/DT
GROUP/C
BY/C
clause/NN
)/-RRB-
can/MD
be/VB
compared/VBN
to/TO
joins/C
./.

To/TO
give/VB
you/PRP
an/DT
idea/NN
of/IN
how/WRB
widespread/JJ
this/DT
is/VBZ
,/,
I/PRP
've/VBP
written/VBN
on/IN
this/DT
topic/NN
several/JJ
times/NNS
here/RB
and/CC
been/VBN
downvoted/VBN
a/DT
lot/NN
for/IN
it/PRP
./.

For/IN
example/NN
:/.

From/IN
SQL/NNP
statement/NN
-/:
"/``
join/C
"/''
vs/C
"/``
group/C
by/C
and/C
having/C
"/''
:/C

First/JJ
query/NN
:/.

SELECT/C
userid/C
FROM/C
userrole/C
WHERE/C
roleid/C
IN/C
(/C
1/C
,/C
2/C
,/C
3/C
)/C
GROUP/C
by/C
userid/C
HAVING/C
COUNT/C
(/C
1/C
)/C
=/C
3/CD

Query/NN
time/NN
:/:
0.312/CD
s/NN

Second/JJ
query/NN
:/.

SELECT/C
t1/C
./C
userid/C
FROM/C
userrole/C
t1/C
JOIN/C
userrole/C
t2/C
ON/C
t1/C
./C
userid/C
=/C
t2.userid/C
AND/C
t2.roleid/C
=/C
2/C
JOIN/C
userrole/C
t3/C
ON/C
t2/C
./C
userid/C
=/C
t3.userid/C
AND/C
t3/C
./C
roleid/C
=/C
3/C
AND/C
t1/C
./C
roleid/C
=/C
1/CD

Query/NN
time/NN
:/:
0.016/CD
s/NN

That/DT
's/VBZ
right/JJ
./.

The/DT
join/VBP
version/NN
I/PRP
proposed/VBD
is/VBZ
twenty/CD
times/NNS
faster/RBR
than/IN
the/DT
aggregate/JJ
version/NN
./.

6/LS
./SYM
Not/RB
simplifying/VBG
complex/JJ
queries/NNS
through/IN
views/NNS

Not/RB
all/DT
database/NN
vendors/NNS
support/VBP
views/NNS
but/CC
for/IN
those/DT
that/WDT
do/VBP
,/,
they/PRP
can/MD
greatly/RB
simplify/VB
queries/NNS
if/IN
used/VBN
judiciously/RB
./.

For/IN
example/NN
,/,
on/IN
one/CD
project/NN
I/PRP
used/VBD
a/DT
generic/JJ
Party/NN
model/NN
for/IN
CRM/NN
./.

This/DT
is/VBZ
an/DT
extremely/RB
powerful/JJ
and/CC
flexible/JJ
modelling/NN
technique/NN
but/CC
can/MD
lead/VB
to/TO
many/JJ
joins/VBZ
./.

In/IN
this/DT
model/NN
there/EX
were/VBD
:/:

Party/NN
:/:
people/NNS
and/CC
organisations/NNS
;/.

Party/NN
Role/NN
:/:
things/NNS
those/DT
parties/NNS
did/VBD
,/,
for/IN
example/NN
Employee/NN
and/CC
Employer/NN
;/.

Party/NN
Role/NN
Relationship/NN
:/:
how/WRB
those/DT
roles/NNS
related/VBN
to/TO
each/DT
other/JJ
./.

Example/NN
:/.

Ted/NNP
is/VBZ
a/DT
Person/NN
,/,
being/VBG
a/DT
subtype/NN
of/IN
Party/NN
;/.

Ted/NNP
has/VBZ
many/JJ
roles/NNS
,/,
one/CD
of/IN
which/WDT
is/VBZ
Employee/NN
;/.

Intel/NNP
is/VBZ
an/DT
organisation/NN
,/,
being/VBG
a/DT
subtype/NN
of/IN
a/DT
Party/NN
;/.

Intel/NNP
has/VBZ
many/JJ
roles/NNS
,/,
one/CD
of/IN
which/WDT
is/VBZ
Employer/NN
;/.

Intel/NNP
employs/VBZ
Ted/NNP
,/,
meaning/VBG
there/EX
is/VBZ
a/DT
relationship/NN
between/IN
their/PRP$
respective/JJ
roles/NNS
./.

So/RB
there/EX
are/VBP
five/CD
tables/NNS
joined/VBD
to/TO
link/VB
Ted/NNP
to/TO
his/PRP$
employer/NN
./.

You/PRP
assume/VBP
all/DT
employees/NNS
are/VBP
Persons/NNS
(/-LRB-
not/RB
organisations/NNS
)/-RRB-
and/CC
provide/VB
this/DT
helper/NN
view/NN
:/.

CREATE/C
VIEW/C
vw_employee/C
AS/C
SELECT/C
p/C
./C
title/C
,/C
p/C
./C
given_names/C
,/C
p/C
./C
surname/C
,/C
p/C
./C
date_of_birth/C
,/C
p2/C
./C
party_name/C
employer_name/C
FROM/C
person/C
p/C
JOIN/C
party/C
py/C
ON/C
py/C
./C
id/C
=/C
p/C
./C
id/C
JOIN/C
party_role/C
child/C
ON/C
p/C
./C
id/C
=/C
child/C
./C
party_id/C
JOIN/C
party_role_relationship/C
prr/C
ON/C
child/C
./C
id/C
=/C
prr/C
./C
child_id/C
AND/C
prr/C
./C
type/C
=/C
'EMPLOYMENT'/C
JOIN/C
party_role/C
parent/C
ON/C
parent/C
./C
id/C
=/C
prr/C
./C
parent_id/C
=/C
parent/C
./C
id/C
JOIN/C
party/C
p2/C
ON/C
parent/C
./C
party_id/C
=/C
p2/C
./C
id/C

And/CC
suddenly/RB
you/PRP
have/VBP
a/DT
very/RB
simple/JJ
view/NN
of/IN
the/DT
data/NNS
you/PRP
want/VBP
but/CC
on/IN
a/DT
highly/RB
flexible/JJ
data/NNS
model/NN
./.

7/LS
./SYM
Not/RB
sanitizing/VBG
input/NN
This/DT
is/VBZ
a/DT
huge/JJ
one/NN
./.

Now/RB
I/PRP
like/IN
PHP/NNP
but/CC
if/IN
you/PRP
do/VBP
n't/RB
know/VB
what/WP
you/PRP
're/VBP
doing/VBG
it/PRP
's/VBZ
really/RB
easy/JJ
to/TO
create/VB
sites/NNS
vulnerable/JJ
to/TO
attack/NN
./.

Nothing/NN
sums/VBZ
it/PRP
up/RP
better/RBR
than/IN
the/DT
story/NN
of/IN
little/JJ
Bobby/NNP
Tables/NNP
./.

Data/NNS
provided/VBN
by/IN
the/DT
user/NN
by/IN
way/NN
of/IN
URLs/NNS
,/,
form/NN
data/NNS
and/CC
cookies/NNS
should/MD
always/RB
be/VB
treated/VBN
as/IN
hostile/JJ
and/CC
sanitized/VBN
./.

Make/VB
sure/JJ
you/PRP
're/VBP
getting/VBG
what/WP
you/PRP
expect/VBP
./.

8/LS
./SYM
Not/RB
using/VBG
prepared/JJ
statements/NNS

Prepared/JJ
statements/NNS
are/VBP
when/WRB
you/PRP
compile/VBP
a/DT
query/JJ
minus/NN
the/DT
data/NNS
used/VBN
in/IN
inserts/NNS
,/,
updates/NNS
and/CC
WHERE/C
clauses/NNS
and/CC
then/RB
supply/NN
that/WDT
later/RB
./.

For/IN
example/NN
:/.

SELECT/C
*/C
FROM/C
users/C
WHERE/C
username/C
=/C
'bob'/C
vs/CC
SELECT/C
*/C
FROM/C
users/C
WHERE/C
username/C
=/C
?/C
or/CC
SELECT/C
*/C
FROM/C
users/C
WHERE/C
username/C
=/C
:/C
username/C
depending/VBG
on/IN
your/PRP$
platform/NN
./.

I/PRP
've/VBP
seen/VBN
databases/NNS
brought/VBN
to/TO
their/PRP$
knees/NNS
by/IN
doing/VBG
this/DT
./.

Basically/RB
,/,
each/DT
time/NN
any/DT
modern/JJ
database/NN
encounters/VBZ
a/DT
new/JJ
query/NN
it/PRP
has/VBZ
to/TO
compile/VB
it/PRP
./.

If/IN
it/PRP
encounters/VBZ
a/DT
query/NN
it/PRP
's/VBZ
seen/VBN
before/RB
,/,
you/PRP
're/VBP
giving/VBG
the/DT
database/NN
the/DT
opportunity/NN
to/TO
cache/VB
the/DT
compiled/VBN
query/NN
and/CC
the/DT
execution/NN
plan/NN
./.

By/IN
doing/VBG
the/DT
query/NN
a/DT
lot/NN
you/PRP
're/VBP
giving/VBG
the/DT
database/NN
the/DT
opportunity/NN
to/TO
figure/VB
that/IN
out/IN
and/CC
optimize/VB
accordingly/RB
(/-LRB-
for/IN
example/NN
,/,
by/IN
pinning/VBG
the/DT
compiled/VBN
query/NN
in/IN
memory/NN
)/-RRB-
./.

Using/VBG
prepared/JJ
statements/NNS
will/MD
also/RB
give/VB
you/PRP
meaningful/JJ
statistics/NNS
about/IN
how/WRB
often/RB
certain/JJ
queries/NNS
are/VBP
used/VBN
./.

Prepared/JJ
statements/NNS
will/MD
also/RB
better/RBR
protect/VB
you/PRP
against/IN
SQL/NNP
injection/NN
attacks/NNS
./.

9/LS
./SYM
Not/RB
normalizing/VBG
enough/RB

Database/NN
normalization/NN
is/VBZ
basically/RB
the/DT
process/NN
of/IN
optimizing/VBG
database/NN
design/NN
or/CC
how/WRB
you/PRP
organize/VBP
your/PRP$
data/NNS
into/IN
tables/NNS
./.

Just/RB
this/DT
week/NN
I/PRP
ran/VBD
across/IN
some/DT
code/NN
where/WRB
someone/NN
had/VBD
imploded/VBN
an/DT
array/NN
and/CC
inserted/VBD
it/PRP
into/IN
a/DT
single/JJ
field/NN
in/IN
a/DT
database/NN
./.

Normalizing/VBG
that/DT
would/MD
be/VB
to/TO
treat/VB
element/NN
of/IN
that/DT
array/NN
as/IN
a/DT
separate/JJ
row/NN
in/IN
a/DT
child/NN
table/NN
(/-LRB-
ie/NN
a/DT
one-to-many/JJ
relationship/NN
)/-RRB-
./.

This/DT
also/RB
came/VBD
up/RP
in/IN
Best/JJ
method/NN
for/IN
storing/VBG
a/DT
list/NN
of/IN
user/NN
IDs/NNS
:/.

I/PRP
've/VBP
seen/VBN
in/IN
other/JJ
systems/NNS
that/IN
the/DT
list/NN
is/VBZ
stored/VBN
in/IN
a/DT
serialized/VBN
PHP/NNP
array/NN
./.

But/CC
lack/NN
of/IN
normalization/NN
comes/VBZ
in/IN
many/JJ
forms/NNS
./.

More/RBR
:/.

Normalization/NN
:/:
How/WRB
far/RB
is/VBZ
far/RB
enough/RB
?/.

SQL/NNP
by/IN
Design/NN
:/:
Why/WRB
You/PRP
Need/VBD
Database/NN
Normalization/NN

10/LS
./SYM
Normalizing/VBG
too/RB
much/JJ

This/DT
may/MD
seem/VB
like/IN
a/DT
contradiction/NN
to/TO
the/DT
previous/JJ
point/NN
but/CC
normalization/NN
,/,
like/IN
many/JJ
things/NNS
,/,
is/VBZ
a/DT
tool/NN
./.

It/PRP
is/VBZ
a/DT
means/NN
to/TO
an/DT
end/NN
and/CC
not/RB
an/DT
end/NN
in/IN
and/CC
of/IN
itself/PRP
./.

I/PRP
think/VBP
many/JJ
developers/NNS
forget/VBP
this/DT
and/CC
start/VB
treating/VBG
a/DT
"/``
means/NN
"/''
as/IN
an/DT
"/``
end/NN
"/''
./.

Unit/NN
testing/NN
is/VBZ
a/DT
prime/JJ
example/NN
of/IN
this/DT
./.

I/PRP
once/RB
worked/VBD
on/IN
a/DT
system/NN
that/WDT
had/VBD
a/DT
huge/JJ
hierarchy/NN
for/IN
clients/NNS
that/WDT
went/VBD
something/NN
like/IN
:/:
Licensee/NN
->/SYM
Dealer/NN
Group/NN
->/SYM
Company/NN
->/SYM
Practice/NN
->/SYM
.../F
such/JJ
that/IN
you/PRP
had/VBD
to/TO
join/VB
about/RB
11/CD
tables/NNS
together/RB
before/IN
you/PRP
could/MD
get/VB
any/DT
meaningful/JJ
data/NNS
./.

It/PRP
was/VBD
a/DT
good/JJ
example/NN
of/IN
normalization/NN
taken/VBN
too/RB
far/RB
./.

More/RBR
to/TO
the/DT
point/NN
,/,
careful/JJ
and/CC
considered/JJ
denormalization/NN
can/MD
have/VB
huge/JJ
performance/NN
benefits/NNS
but/CC
you/PRP
have/VBP
to/TO
be/VB
really/RB
careful/JJ
when/WRB
doing/VBG
this/DT
./.

More/RBR
:/.

Why/WRB
too/RB
much/JJ
Database/NN
Normalization/NN
can/MD
be/VB
a/DT
Bad/JJ
Thing/NN

How/WRB
far/RB
to/TO
take/VB
normalization/NN
in/IN
database/NN
design/NN
?/.

When/WRB
Not/RB
to/TO
Normalize/VB
your/PRP$
SQL/NNP
Database/NN

Maybe/RB
Normalizing/VBG
Is/VBZ
n't/RB
Normal/JJ

The/DT
Mother/NN
of/IN
All/DT
Database/NN
Normalization/NN
Debates/NNS
on/IN
Coding/NN
Horror/NN

11/LS
./.
Using/VBG
exclusive/JJ
arcs/NNS

An/DT
exclusive/JJ
arc/NN
is/VBZ
a/DT
common/JJ
mistake/NN
where/WRB
a/DT
table/NN
is/VBZ
created/VBN
with/IN
two/CD
or/CC
more/JJR
foreign/JJ
keys/NNS
where/WRB
one/CD
and/CC
only/RB
one/CD
of/IN
them/PRP
can/MD
be/VB
non-null/JJ
./.

Big/JJ
mistake/NN
./.

For/IN
one/CD
thing/NN
it/PRP
becomes/VBZ
that/IN
much/RB
harder/JJR
to/TO
maintain/VB
data/NNS
integrity/NN
./.

After/IN
all/DT
,/,
even/RB
with/IN
referential/JJ
integrity/NN
,/,
nothing/NN
is/VBZ
preventing/VBG
two/CD
or/CC
more/JJR
of/IN
these/DT
foreign/JJ
keys/NNS
from/IN
being/VBG
set/VBN
(/-LRB-
complex/JJ
check/NN
constraints/NNS
notwithstanding/RB
)/-RRB-
./.

From/IN
A/DT
Practical/JJ
Guide/NN
to/TO
Relational/JJ
Database/NN
Design/NN
:/.

We/PRP
have/VBP
strongly/RB
advised/VBN
against/IN
exclusive/JJ
arc/NN
construction/NN
wherever/WRB
possible/JJ
,/,
for/IN
the/DT
good/JJ
reason/NN
that/IN
they/PRP
can/MD
be/VB
awkward/JJ
to/TO
write/VB
code/NN
and/CC
pose/VB
more/JJR
maintenance/NN
difficulties/NNS
./.

12/LS
./SYM
Not/RB
doing/VBG
performance/NN
analysis/NN
on/IN
queries/NNS
at/IN
all/DT

Pragmatism/NN
reigns/VBZ
supreme/NN
,/,
particularly/RB
in/IN
the/DT
database/NN
world/NN
./.

If/IN
you/PRP
're/VBP
sticking/VBG
to/TO
principles/NNS
to/TO
the/DT
point/NN
that/IN
they/PRP
've/VBP
become/VBN
a/DT
dogma/NN
then/RB
you/PRP
've/VBP
quite/RB
probably/RB
made/VBN
mistakes/NNS
./.

Take/VB
the/DT
example/NN
of/IN
the/DT
aggregate/JJ
queries/NNS
from/IN
above/IN
./.

The/DT
aggregate/JJ
version/NN
might/MD
look/VB
"/``
nice/JJ
"/''
but/CC
its/PRP$
performance/NN
is/VBZ
woeful/JJ
./.

A/DT
performance/NN
comparison/NN
should/MD
've/VB
ended/VBN
the/DT
debate/NN
(/-LRB-
but/CC
it/PRP
did/VBD
n't/RB
)/-RRB-
but/CC
more/JJR
to/TO
the/DT
point/NN
:/:
spouting/VBG
such/JJ
ill-informed/JJ
views/NNS
in/IN
the/DT
first/JJ
place/NN
is/VBZ
ignorant/JJ
,/,
even/RB
dangerous/JJ
./.

13/LS
./SYM
Over-reliance/NN
on/IN
UNION/C
ALL/C
and/CC
particularly/RB
UNION/C
constructs/NNS

A/DT
UNION/C
in/IN
SQL/NNP
terms/NNS
merely/RB
concatenates/VBZ
congruent/JJ
data/NNS
sets/NNS
,/,
meaning/VBG
they/PRP
have/VBP
the/DT
same/JJ
type/NN
and/CC
number/NN
of/IN
columns/NNS
./.

The/DT
difference/NN
between/IN
them/PRP
is/VBZ
that/IN
UNION/C
ALL/C
is/VBZ
a/DT
simple/JJ
concatenation/NN
and/CC
should/MD
be/VB
preferred/VBN
wherever/WRB
possible/JJ
whereas/IN
a/DT
UNION/C
will/MD
implicitly/RB
do/VB
a/DT
DISTINCT/C
to/TO
remove/VB
duplicate/VB
tuples/NNS
./.

UNIONs/C
,/,
like/IN
DISTINCT/C
,/,
have/VBP
their/PRP$
place/NN
./.

There/EX
are/VBP
valid/JJ
applications/NNS
./.

But/CC
if/IN
you/PRP
find/VBP
yourself/PRP
doing/VBG
a/DT
lot/NN
of/IN
them/PRP
,/,
particularly/RB
in/IN
subqueries/NNS
,/,
then/RB
you/PRP
're/VBP
probably/RB
doing/VBG
something/NN
wrong/JJ
./.

That/DT
might/MD
be/VB
a/DT
case/NN
of/IN
poor/JJ
query/NN
construction/NN
or/CC
a/DT
poorly/RB
designed/VBN
data/NN
model/NN
forcing/VBG
you/PRP
to/TO
do/VB
such/JJ
things/NNS
./.

UNIONs/C
,/,
particularly/RB
when/WRB
used/VBN
in/IN
joins/VBZ
or/CC
dependent/JJ
subqueries/NNS
,/,
can/MD
cripple/VB
a/DT
database/NN
./.

Try/VB
to/TO
avoid/VB
them/PRP
whenever/WRB
possible/JJ
./.

14/LS
./SYM
Using/VBG
OR/C
conditions/NNS
in/IN
queries/NNS

This/DT
might/MD
seem/VB
harmless/JJ
./.

After/IN
all/DT
,/,
ANDs/C
are/VBP
OK/JJ
./.

OR/C
should/MD
be/VB
OK/JJ
too/RB
right/JJ
?/.

Wrong/JJ
./.

Basically/RB
an/DT
AND/C
condition/NN
restricts/VBZ
the/DT
data/NNS
set/VBN
whereas/IN
an/DT
OR/C
condition/NN
grows/VBZ
it/PRP
but/CC
not/RB
in/IN
a/DT
way/NN
that/WDT
lends/VBZ
itself/PRP
to/TO
optimisation/NN
./.

Particularly/RB
when/WRB
the/DT
different/JJ
OR/C
conditions/NNS
might/MD
intersect/VB
thus/RB
forcing/VBG
the/DT
optimizer/NN
to/TO
effectively/RB
to/TO
a/DT
DISTINCT/C
operation/NN
on/IN
the/DT
result/NN
./.

Bad/JJ
:/.

.../F
WHERE/C
a/C
=/C
2/C
OR/C
a/C
=/C
5/C
OR/C
a/C
=/C
11/C

Better/JJ
:/.

.../F
WHERE/C
a/C
IN/C
(/C
2/C
,/C
5/C
,/C
11/C
)/C

Now/RB
your/PRP$
SQL/NNP
optimizer/NN
may/MD
effectively/RB
turn/VB
the/DT
first/JJ
query/NN
into/IN
the/DT
second/JJ
./.

But/CC
it/PRP
might/MD
not/RB
./.

Just/RB
do/VBP
n't/RB
do/VB
it/PRP
./.

15/LS
./SYM
Not/RB
designing/VBG
their/PRP$
data/NNS
model/NN
to/TO
lend/VB
itself/PRP
to/TO
high-performing/JJ
solutions/NNS

This/DT
is/VBZ
a/DT
hard/JJ
point/NN
to/TO
quantify/VB
./.

It/PRP
is/VBZ
typically/RB
observed/VBN
by/IN
its/PRP$
effect/NN
./.

If/IN
you/PRP
find/VBP
yourself/PRP
writing/VBG
gnarly/JJ
queries/NNS
for/IN
relatively/RB
simple/JJ
tasks/NNS
or/CC
that/IN
queries/NNS
for/IN
finding/VBG
out/RP
relatively/RB
straightforward/JJ
information/NN
are/VBP
not/RB
efficient/JJ
,/,
then/RB
you/PRP
probably/RB
have/VBP
a/DT
poor/JJ
data/NN
model/NN
./.

In/IN
some/DT
ways/NNS
this/DT
point/NN
summarizes/VBZ
all/PDT
the/DT
earlier/JJR
ones/NNS
but/CC
it/PRP
's/VBZ
more/JJR
of/IN
a/DT
cautionary/JJ
tale/NN
that/IN
doing/VBG
things/NNS
like/IN
query/NN
optimisation/NN
is/VBZ
often/RB
done/VBN
first/RB
when/WRB
it/PRP
should/MD
be/VB
done/VBN
second/JJ
./.

First/JJ
and/CC
foremost/JJ
you/PRP
should/MD
ensure/VB
you/PRP
have/VBP
a/DT
good/JJ
data/NN
model/NN
before/IN
trying/VBG
to/TO
optimize/VB
the/DT
performance/NN
./.

As/IN
Knuth/NNP
said/VBD
:/:
Premature/JJ
optimization/NN
is/VBZ
the/DT
root/NN
of/IN
all/DT
evil/JJ

16/LS
./SYM
Incorrect/JJ
use/NN
of/IN
Database/NN
Transactions/NNS

All/DT
data/NNS
changes/NNS
for/IN
a/DT
specific/JJ
process/NN
should/MD
be/VB
atomic/JJ
./.

I.e./FW
If/IN
the/DT
operation/NN
succeeds/VBZ
,/,
it/PRP
does/VBZ
so/RB
fully/RB
./.

If/IN
it/PRP
fails/VBZ
,/,
the/DT
data/NN
is/VBZ
left/RB
unchanged/JJ
./.

-/F
There/EX
should/MD
be/VB
no/DT
possibility/NN
of/IN
'/``
half-done/JJ
'/''
changes/NNS
./.

Ideally/RB
,/,
the/DT
simplest/JJS
way/NN
to/TO
achieve/VB
this/DT
is/VBZ
that/IN
the/DT
entire/JJ
system/NN
design/NN
should/MD
strive/VB
to/TO
support/VB
all/DT
data/NNS
changes/NNS
through/IN
single/JJ
INSERT/C
//CC
UPDATE/C
//CC
DELETE/C
statements/NNS
./.

In/IN
this/DT
case/NN
,/,
no/DT
special/JJ
transaction/NN
handling/VBG
is/VBZ
needed/VBN
,/,
as/IN
your/PRP$
database/NN
engine/NN
should/MD
do/VB
so/RB
automatically/RB
./.

However/RB
,/,
if/IN
any/DT
processes/NNS
do/VBP
require/VB
multiple/JJ
statements/NNS
be/VB
performed/VBN
as/IN
a/DT
unit/NN
to/TO
keep/VB
the/DT
data/NNS
in/IN
a/DT
consistent/JJ
state/NN
,/,
then/RB
appropriate/JJ
Transaction/NN
Control/NN
is/VBZ
necessary/JJ
./.

Begin/VB
a/DT
Transaction/NN
before/IN
the/DT
first/JJ
statement/NN
./.

Commit/VB
the/DT
Transaction/NN
after/IN
the/DT
last/JJ
statement/NN
./.

On/IN
any/DT
error/NN
,/,
Rollback/NN
the/DT
Transaction/NN
./.

And/CC
very/JJ
NB/NN
!/.

Do/VBP
n't/RB
forget/VB
to/TO
skip/VB
//CC
abort/VB
all/DT
statements/NNS
that/WDT
follow/VBP
after/IN
the/DT
error/NN
./.

Also/RB
recommended/VBN
to/TO
pay/VB
careful/JJ
attention/NN
to/TO
the/DT
subtelties/NNS
of/IN
how/WRB
your/PRP$
database/NN
connectivity/NN
layer/NN
,/,
and/CC
database/NN
engine/NN
interact/VBP
in/IN
this/DT
regard/NN
./.

17/LS
./SYM
Not/RB
understanding/VBG
the/DT
'/``
set-based/JJ
'/''
paradigm/NN

The/DT
SQL/NNP
language/NN
follows/VBZ
a/DT
specific/JJ
paradigm/NN
suited/VBN
to/TO
specific/JJ
kinds/NNS
of/IN
problems/NNS
./.

Various/JJ
vendor-specific/JJ
extensions/NNS
notwithstanding/RB
,/,
the/DT
language/NN
struggles/VBZ
to/TO
deal/VB
with/IN
problems/NNS
that/WDT
are/VBP
trivial/JJ
in/IN
langues/NNS
like/IN
Java/NNP
,/,
C#/NNP
,/,
Delphi/NNP
etc./FW

This/DT
lack/NN
of/IN
understanding/NN
manifests/VBZ
itself/PRP
in/IN
a/DT
few/JJ
ways/NNS
./.

Inappropriately/RB
imposing/VBG
too/RB
much/RB
procedural/JJ
or/CC
imperative/JJ
logic/NN
on/IN
the/DT
databse/NN
./.

Inappropriate/JJ
or/CC
excessive/JJ
use/NN
of/IN
cursors/NNS
./.

Especially/RB
when/WRB
a/DT
single/JJ
query/NN
would/MD
suffice/VB
./.

Incorrectly/RB
assuming/VBG
that/IN
triggers/NNS
fire/VBP
once/RB
per/IN
row/NN
affected/VBN
in/IN
multi-row/JJ
updates/NNS
./.

Determine/VB
clear/JJ
division/NN
of/IN
responsibility/NN
,/,
and/CC
strive/VBP
to/TO
use/VB
the/DT
appropriate/JJ
tool/NN
to/TO
solve/VB
each/DT
problem/NN
./.

I/PRP
do/VBP
n't/RB
mean/VB
to/TO
imply/VB
that/DT
MyISAM/NNP
is/VBZ
bad/JJ
,/,
just/RB
that/IN
you/PRP
do/VBP
n't/RB
have/VB
that/DT
option/NN
if/IN
you/PRP
're/VBP
using/VBG
MyISAM/NNP
./.

This/DT
seems/VBZ
to/TO
be/VB
the/DT
issue/NN
:/.

An/DT
input/NN
is/VBZ
received/VBN
,/,
via/IN
ajax/NNP
websocket/NN
etc/FW
,/,
and/CC
it/PRP
is/VBZ
always/RB
gonna/VBG
be/VB
in/IN
String/NN
format/NN
-/:
but/CC
you/PRP
need/VBP
to/TO
know/VB
if/IN
it/PRP
is/VBZ
JSON.parsable/URI
./.

Touble/NN
is/VBZ
,/,
that/IN
if/IN
you/PRP
always/RB
run/VBP
it/PRP
through/IN
a/DT
JSON.parse/URI
,/,
the/DT
program/NN
MAY/MD
continue/VB
`/``
successfully/RB
'/''
but/CC
you/PRP
'll/MD
still/RB
see/VB
an/DT
error/NN
thrown/VBN
in/IN
the/DT
console/NN
with/IN
the/DT
dreaded/JJ
"/``
Error/ER
:/ER
unexpected/ER
token/ER
'/ER
x/ER
'/ER
"/''
./.

Here/RB
's/POS
what/WP
I/PRP
tend/VBP
to/TO
do/VB
(/-LRB-
but/CC
its/PRP$
very/RB
kludgy/JJ
)/-RRB-
:/.

var/C
data/C
=/C
(/C
data/C
[/C
0/C
]/C
===/C
'/C
{/C
'/C
||/C
data/C
[/C
0/C
]/C
===/C
'/C
[/C
'/C
)/C
?/C
JSON/C
./C
parse/C
(/C
data/C
)/C
:/C
data/C
;/C

Any/DT
insight/NN
on/IN
a/DT
sure/JJ
catch-all/JJ
way/NN
without/IN
errors/NNS
?/.

ps/UH
./:
this/DT
is/VBZ
kludgy/NN
,/,
do/VBP
n't/RB
up-vote/JJ
./.

EDIT/VB
:/.

After/IN
months/NNS
of/IN
dealing/VBG
with/IN
this/DT
issue/NN
here/RB
and/CC
there/RB
,/,
it/PRP
seems/VBZ
the/DT
best/JJS
approach/NN
is/VBZ
to/TO
use/VB
try/catch/C
(/C
)/C
and/CC
use/VB
your/PRP$
own/JJ
error/NN
handling/NN
(/-LRB-
even/RB
if/IN
initially/RB
its/PRP$
just/RB
a/DT
console/NN
log/NN
et/FW
cetera/FW
)/-RRB-
:/.

try/C
{/C
JSON/C
./C
parse/C
(/C
"a"/C
)/C
;/C
///CCM
Produces/VBZ|CCM
a/DT|CCM
SyntaxError/C|CCM
}/-RRB-
catch/C
(/C
error/C
)/C
{/-LRB-
///CCM
Handle/VB|CCM
the/DT|CCM
error/NN|CCM
console/C
./C
log/C
(/C
error/C
./C
message/C
)/C
;/C
}/C

Unfortunately/RB
,/,
there/EX
's/VBZ
not/RB
really/RB
elegant/JJ
degradation/NN
for/IN
this/DT
that/IN
I/PRP
'm/VBP
aware/JJ
of/IN
./.

Well/RB
JSON.parse/URI
scrubs/VBZ
the/DT
input/NN
of/IN
functions/NNS
(/-LRB-
which/WDT
in/IN
this/DT
case/NN
would/MD
not/RB
help/VB
as/IN
its/PRP$
an/DT
IIF/C NA
-->/SYM
object/NN
)/-RRB-
./.

It/PRP
seems/VBZ
the/DT
best/JJS
way/NN
to/TO
go/VB
about/IN
this/DT
subject/NN
is/VBZ
try/catch/C NA
./.

(/-LRB-
See/VB
edit/NN
)/-RRB-

Key/NN
database/NN
design/NN
and/CC
programming/NN
mistakes/NNS
made/VBN
by/IN
developers/NNS

Selfish/JJ
database/NN
design/NN
and/CC
usage/NN
./.

Developers/NNS
often/RB
treat/VBP
the/DT
database/NN
as/IN
their/PRP$
personal/JJ
persistent/JJ
object/NN
store/NN
without/IN
considering/VBG
the/DT
needs/NNS
of/IN
other/JJ
stakeholders/NNS
in/IN
the/DT
data/NNS
./.

This/DT
also/RB
applies/VBZ
to/TO
application/NN
architects/NNS
./.

Poor/JJ
database/NN
design/NN
and/CC
data/NN
integrity/NN
makes/VBZ
it/PRP
hard/JJ
for/IN
third/JJ
parties/NNS
working/VBG
with/IN
the/DT
data/NNS
and/CC
can/MD
substantially/RB
increase/VB
the/DT
system/NN
's/POS
life/NN
cycle/NN
costs/NNS
./.

Reporting/VBG
and/CC
MIS/NN
tends/VBZ
to/TO
be/VB
a/DT
poor/JJ
cousin/NN
in/IN
application/NN
design/NN
and/CC
only/RB
done/VBN
as/IN
an/DT
afterthought/NN
./.

Abusing/VBG
denormalised/VBN
data/NNS
./.

Overdoing/VBG
denormalised/VBN
data/NNS
and/CC
trying/VBG
to/TO
maintain/VB
it/PRP
within/IN
the/DT
application/NN
is/VBZ
a/DT
recipe/NN
for/IN
data/NNS
integrity/NN
issues/NNS
./.

Use/VB
denormalisation/NN
sparingly/RB
./.

Not/RB
wanting/VBG
to/TO
add/VB
a/DT
join/VB
to/TO
a/DT
query/NN
is/VBZ
not/RB
an/DT
excuse/NN
for/IN
denormalising/VBG
./.

Scared/VBN
of/IN
writing/VBG
SQL/NNP
./.

SQL/NNP
is/VBZ
n't/RB
rocket/NN
science/NN
and/CC
is/VBZ
actually/RB
quite/RB
good/JJ
at/IN
doing/VBG
its/PRP$
job/NN
./.

O/R/C
mapping/NN
layers/NNS
are/VBP
quite/RB
good/JJ
at/IN
doing/VBG
the/DT
95/CD
%/SYM
of/IN
queries/NNS
that/WDT
are/VBP
simple/JJ
and/CC
fit/JJ
well/RB
into/IN
that/DT
model/NN
./.

Sometimes/RB
SQL/NNP
is/VBZ
the/DT
best/JJS
way/NN
to/TO
do/VB
the/DT
job/NN
./.

Dogmatic/JJ
`/``
No/DT
Stored/JJ
Procedures/NNS
'/POS
policies/NNS
./.

Regardless/RB
of/IN
whether/IN
you/PRP
believe/VBP
stored/VBN
procedures/NNS
are/VBP
evil/JJ
,/,
this/DT
sort/NN
of/IN
dogmatic/JJ
attitude/NN
has/VBZ
no/DT
place/NN
on/IN
a/DT
software/NN
project/NN
./.

Not/RB
understanding/VBG
database/NN
design/NN
./.

Normalisation/NN
is/VBZ
your/PRP$
friend/NN
and/CC
it/PRP
's/VBZ
not/RB
rocket/NN
science/NN
./.

Joining/VBG
and/CC
cardinality/NN
are/VBP
fairly/RB
simple/JJ
concepts/NNS
-/:
if/IN
you/PRP
're/VBP
involved/VBN
in/IN
database/NN
application/NN
development/NN
there/EX
's/VBZ
really/RB
no/DT
excuse/NN
for/IN
not/RB
understanding/VBG
them/PRP
./.

Not/RB
just/RB
the/DT
poor/JJ
mug/NN
writing/VBG
the/DT
ETL/NN
-/:
anyone/NN
using/VBG
data/NNS
from/IN
the/DT
system/NN
,/,
the/DT
poor/JJ
quality/NN
data/NNS
in/IN
the/DT
MIS/NN
application/NN
that/WDT
's/VBZ
boxed/VBN
in/IN
because/IN
several/JJ
key/JJ
relationships/NNS
are/VBP
n't/RB
actually/RB
recorded/VBN
at/IN
source/NN
,/,
anyone/NN
involved/VBN
in/IN
the/DT
endless/JJ
reconciliation/NN
bun-fignts/NNS
that/WDT
ensue/VBP
from/IN
the/DT
poor/JJ
data/NNS
quality/NN
./.

From/IN
time/NN
to/TO
time/NN
I/PRP
do/VBP
too/RB
,/,
although/IN
these/DT
days/NNS
I/PRP
tend/VBP
to/TO
be/VB
drifting/VBG
further/RBR
into/IN
the/DT
dark/JJ
abyss/NN
of/IN
consultancy/NN
(/-LRB-
Your/PRP$
anger/NN
will/MD
make/VB
you/PRP
strong/JJ
.../F
)/-RRB-
./.

However/RB
,/,
all/RB
too/RB
often/RB
I/PRP
see/VBP
operational/JJ
systems/NNS
designed/VBN
with/IN
no/DT
thought/NN
to/TO
actually/RB
doing/VBG
MIS/NN
off/IN
them/PRP
./.

Trivial/JJ
example/NN
:/:
I/PRP
have/VBP
an/DT
insurance/NN
policy/NN
administration/NN
system/NN
and/CC
need/VBP
to/TO
load/VB
the/DT
state/NN
of/IN
5/CD
million/CD
claims/NNS
into/IN
a/DT
ceded/VBN
reinsurance/NN
system/NN
to/TO
calculate/VB
potential/JJ
recoveries/NNS
./.

The/DT
systems/NNS
are/VBP
older/JJR
client-server/JJ
COTS/NN
packages/NNS
,/,
designed/VBN
to/TO
interface/NN
to/TO
even/RB
older/JJR
mainframe/NN
systems/NNS
./.

Both/DT
have/VBP
to/TO
be/VB
reconciled/VBN
for/IN
financial/JJ
control/NN
purposes/NNS
./.

This/DT
job/NN
is/VBZ
done/VBN
once/RB
per/IN
month/NN
./.

By/IN
your/PRP$
logic/NN
I/PRP
would/MD
write/VB
a/DT
series/NN
of/IN
user/NN
stories/NNS
defining/VBG
the/DT
requirements/NNS
and/CC
ask/VB
the/DT
vendors/NNS
to/TO
quote/VB
on/IN
adding/VBG
a/DT
web/NN
service/NN
wrapper/NN
to/TO
their/PRP$
existing/VBG
products/NNS
./.

But/CC
then/RB
again/RB
,/,
I/PRP
do/VBP
work/NN
in/IN
companies/NNS
where/WRB
phrases/NNS
like/IN
`/``
Audit/NN
'/''
,/,
`/``
FSA/NNP
'/''
and/CC
`/``
Sarbannes-Oxley/NNP
'/''
are/VBP
somewhat/RB
common/JJ
./.

Then/RB
your/PRP$
DBA/NN
is/VBZ
either/CC
lazy/JJ
or/CC
incompetent/JJ
./.

+/SYM
1/CD
-/:
Database/NN
programming/NN
involves/VBZ
optimising/VBG
the/DT
behaviour/NN
of/IN
mechanical/JJ
components/NNS
./.

Note/VB
,/,
however/RB
,/,
that/IN
Knuth/NNP
says/VBZ
premature/JJ
optimisation/NN
is/VBZ
the/DT
root/NN
of/IN
all/DT
evil/NN
about/IN
97/CD
%/SYM
of/IN
the/DT
time/NN
(/-LRB-
or/CC
words/NNS
to/TO
that/DT
effect/NN
)/-RRB-
./.

Database/NN
design/NN
is/VBZ
one/CD
area/NN
where/WRB
you/PRP
really/RB
do/VBP
have/VB
to/TO
think/VB
about/IN
this/DT
up/RP
front/JJ
./.

Salt/NN
makes/VBZ
Rainbow/NN
table/NN
attacks/NNS
much/RB
more/RBR
difficult/JJ
since/IN
it/PRP
makes/VBZ
a/DT
single/JJ
password/NN
hash/VBP
much/RB
harder/JJR
to/TO
crack/VB
./.

Imagine/VB
you/PRP
have/VBP
a/DT
horrid/JJ
password/NN
of/IN
just/RB
the/DT
number/NN
1/CD
./.

A/DT
rainbow/NN
table/NN
attack/NN
would/MD
crack/VB
this/DT
immediately/RB
./.

Now/RB
imagine/VB
each/DT
password/NN
in/IN
the/DT
db/NN
is/VBZ
salted/VBN
with/IN
a/DT
long/JJ
random/JJ
value/NN
of/IN
many/JJ
random/JJ
characters/NNS
./.

Now/RB
your/PRP$
lousy/JJ
password/NN
of/IN
"/``
1/CD
"/''
is/VBZ
stored/VBN
in/IN
the/DT
db/NN
as/IN
a/DT
hash/NN
of/IN
1/CD
plus/CC
a/DT
bunch/NN
of/IN
random/JJ
characters/NNS
(/-LRB-
the/DT
salt/NN
)/-RRB-
,/,
so/RB
in/IN
this/DT
example/NN
the/DT
rainbow/NN
table/NN
needs/VBZ
to/TO
have/VB
the/DT
hash/NN
for/IN
something/NN
like/IN
:/:
1/CD
./.

So/RB
assuming/VBG
your/PRP$
salt/NN
is/VBZ
something/NN
secure/JJ
and/CC
random/JJ
,/,
say/VB
(/C
)/C
%/C
ISLDGHASKLU/C
(/C
%/C
#/C
%/C
#/C
,/,
the/DT
hacker/NN
's/POS
rainbow/NN
table/NN
would/MD
need/VB
to/TO
have/VB
an/DT
entry/NN
for/IN
1/C
*/C
(/C
)/C
%/C
ISLDGHASKLU/C
(/C
*/C
%/C
#/C
%/C
#/C
./.

Now/RB
using/VBG
a/DT
rainbow/NN
table/NN
on/IN
even/RB
this/DT
simple/JJ
password/NN
is/VBZ
no/RB
longer/RB
practical/JJ
./.

Sure/UH
Tom/NNP
,/,
I/PRP
agree/VBP
,/,
but/CC
the/DT
point/NN
is/VBZ
the/DT
hacker/NN
has/VBZ
to/TO
do/VB
that/DT
ugly/JJ
time-consuming/JJ
process/NN
once/RB
for/IN
each/DT
password/NN
if/IN
salt/NN
is/VBZ
used/VBN
./.

Thus/RB
,/,
salt/NN
does/VBZ
make/VB
using/VBG
a/DT
rainbow/NN
table/NN
harder/RBR
./.

On/IN
this/DT
issue/NN
with/IN
#/SYM
3/CD
./.

While/IN
I/PRP
would/MD
normally/RB
say/VB
it/PRP
's/VBZ
rarely/RB
a/DT
good/JJ
idea/NN
to/TO
say/VB
something/NN
is/VBZ
"/``
always/RB
"/''
the/DT
best/JJS
way/NN
to/TO
do/VB
something/NN
,/,
I/PRP
would/MD
say/VB
that/IN
with/IN
primary/JJ
keys/NNS
in/IN
databases/NNS
,/,
because/IN
of/IN
the/DT
way/NN
that/IN
data/NNS
is/VBZ
stored/VBN
,/,
with/IN
any/DT
table/NN
of/IN
significant/JJ
size/NN
that/WDT
is/VBZ
expected/VBN
to/TO
continue/VB
to/TO
grow/VB
,/,
surrogate/JJ
keys/NNS
are/VBP
nearly/RB
always/RB
the/DT
best/JJS
choice/NN
./.

I/PRP
sympathize/VBP
with/IN
@david-t-macknet/USR
about/IN
what/WP
the/DT
data/NN
is/VBZ
about/IN
,/,
but/CC
in/IN
large/JJ
tables/NNS
,/,
sorting/VBG
your/PRP$
physical/JJ
data/NNS
by/IN
a/DT
natural/JJ
key/NN
could/MD
end/VB
up/RP
taking/VBG
a/DT
long/JJ
time/NN
in/IN
tables/NNS
with/IN
millions/NNS
of/IN
rows/NNS
./.

A/DT
PK/NN
on/IN
a/DT
surrogate/JJ
identity/NN
always/RB
sorts/NNS
to/TO
the/DT
end/NN
./.

I/PRP
hate/VBP
it/PRP
when/WRB
developers/NNS
use/VBP
nested/VBN
select/C
statements/NNS
or/CC
even/RB
functions/VBZ
the/DT
return/NN
the/DT
result/NN
of/IN
a/DT
select/C
statement/NN
inside/IN
the/DT
"/``
SELECT/C
"/''
portion/NN
of/IN
a/DT
query/NN
./.

I/PRP
'm/VBP
actually/RB
surprised/VBN
I/PRP
do/VBP
n't/RB
see/VB
this/DT
anywhere/RB
else/RB
here/RB
,/,
perhaps/RB
I/PRP
overlooked/VBD
it/PRP
,/,
although/IN
@adam/USR
has/VBZ
a/DT
similar/JJ
issue/NN
indicated/VBD
./.

Example/NN
:/:
SELECT/C
(/C
SELECT/C
TOP/C
1/C
SomeValue/C
FROM/C
SomeTable/C
WHERE/C
SomeDate/C
=/C
c/C
./C
Date/C
ORDER/C
BY/C
SomeValue/C
desc/C
)/C
As/C
FirstVal/C
,/C
(/C
SELECT/C
OtherValue/C
FROM/C
SomeOtherTable/C
WHERE/C
SomeOtherCriteria/C
=/C
c/C
./C
Criteria/C
)/C
As/IN
SecondVal/C
FROM/C
MyTable/C
c/C

In/IN
this/DT
scenario/NN
,/,
if/IN
MyTable/C
returns/VBZ
10000/CD
rows/NNS
the/DT
result/NN
is/VBZ
as/IN
if/IN
the/DT
query/NN
just/RB
ran/VBD
20001/CD
queries/NNS
,/,
since/IN
it/PRP
had/VBD
to/TO
run/VB
the/DT
initial/JJ
query/NN
plus/CC
query/VB
each/DT
of/IN
the/DT
other/JJ
tables/NNS
once/RB
for/IN
each/DT
line/NN
of/IN
result/NN
./.

Developers/NNS
can/MD
get/VB
away/RB
with/IN
this/DT
working/NN
in/IN
a/DT
development/NN
environment/NN
where/WRB
they/PRP
are/VBP
only/RB
returning/VBG
a/DT
few/JJ
rows/NNS
of/IN
data/NNS
and/CC
the/DT
sub/NN
tables/NNS
usually/RB
only/RB
have/VBP
a/DT
small/JJ
amount/NN
of/IN
data/NNS
,/,
but/CC
in/IN
a/DT
production/NN
environment/NN
,/,
this/DT
kind/NN
of/IN
query/NN
can/MD
become/VB
exponentially/RB
costly/JJ
as/IN
more/JJR
data/NNS
is/VBZ
added/VBN
to/TO
the/DT
tables/NNS
./.

A/DT
better/JJR
(/-LRB-
not/RB
necessarily/RB
perfect/JJ
)/-RRB-
example/NN
would/MD
be/VB
something/NN
like/IN
:/.

SELECT/C
s/C
./C
SomeValue/C
As/C
FirstVal/C
,/C
o/C
./C
OtherValue/C
As/C
SecondVal/C
FROM/C
MyTable/C
c/C
LEFT/C
JOIN/C
(/C
SELECT/C
SomeDate/C
,/C
MAX/C
(/C
SomeValue/C
)/C
as/C
SomeValue/C
FROM/C
SomeTable/C
GROUP/C
BY/C
SomeDate/C
)/C
s/C
ON/C
c/C
./C
Date/C
=/C
s/C
./C
SomeDate/C
LEFT/C
JOIN/C
SomeOtherTable/C
o/C
ON/C
c/C
./C
Criteria/C
=/C
o/C
./C
SomeOtherCriteria/C

This/DT
allows/VBZ
database/NN
optimizers/NNS
to/TO
shuffle/VB
the/DT
data/NNS
together/RB
,/,
rather/RB
than/IN
requery/VB
on/IN
each/DT
record/NN
from/IN
the/DT
main/JJ
table/NN
and/CC
I/PRP
usually/RB
find/VBP
when/WRB
I/PRP
have/VBP
to/TO
fix/VB
code/NN
where/WRB
this/DT
problem/NN
has/VBZ
been/VBN
created/VBN
,/,
I/PRP
usually/RB
end/VBP
up/RP
increasing/VBG
the/DT
speed/NN
of/IN
queries/NNS
by/IN
100/CD
%/SYM
or/CC
more/JJR
while/IN
simultaneously/RB
reducing/VBG
CPU/NN
and/CC
memory/NN
usage/NN
./.

First/RB
of/IN
all/DT
(/-LRB-
as/IN
Neil/NNP
stated/VBD
)/-RRB-
,/,
SEH/NN
is/VBZ
Microsoft/NNP
's/POS
Structured/JJ
Exception/NN
Handling/NN
./.

It/PRP
is/VBZ
similar/JJ
to/TO
but/CC
not/RB
identical/JJ
to/TO
exception/NN
processing/VBG
in/IN
C++/NNP
./.

In/IN
fact/NN
,/,
you/PRP
have/VBP
to/TO
enable/VB
C++/NNP
Exception/NN
Handling/VBG
if/IN
you/PRP
want/VBP
it/PRP
in/IN
Visual/NNP
Studio/NNP
-/--
the/DT
default/NN
behavior/NN
does/VBZ
not/RB
guarantee/VB
that/IN
local/JJ
objects/NNS
are/VBP
destroyed/VBN
in/IN
all/DT
cases/NNS
!/.

In/IN
either/DT
case/NN
,/,
Exception/NN
Handling/VBG
is/VBZ
not/RB
really/RB
harder/JJR
it/PRP
is/VBZ
just/RB
different/JJ
./.

Now/RB
for/IN
your/PRP$
actual/JJ
questions/NNS
./.

Do/VBP
you/PRP
really/RB
write/VB
exception/NN
safe/JJ
code/NN
?/.

Yes/UH
./.

I/PRP
strive/VBP
for/IN
exception/NN
safe/JJ
code/NN
in/IN
all/DT
cases/NNS
./.

I/PRP
evangelize/VBP
using/VBG
RAII/NN
techniques/NNS
for/IN
scoped/JJ
access/NN
to/TO
resources/NNS
(/-LRB-
e.g./FW
,/,
boost/NN
::/:
shared_ptr/C
for/IN
memory/NN
,/,
boost/NN
::/:
lock_guard/C
for/IN
locking/VBG
)/-RRB-
./.

In/IN
general/JJ
,/,
consistent/JJ
usage/NN
of/IN
RAII/NNP
and/CC
scope/NN
guarding/VBG
techniques/NNS
will/MD
make/VB
exception/NN
safe/JJ
code/NN
much/RB
easier/JJR
to/TO
write/VB
./.

The/DT
trick/NN
is/VBZ
to/TO
learn/VB
what/WP
exists/VBZ
and/CC
how/WRB
to/TO
apply/VB
it/PRP
./.

Are/VBP
you/PRP
sure/JJ
your/PRP$
last/JJ
"/``
production/NN
ready/JJ
"/''
code/NN
is/VBZ
exception/NN
safe/NN
?/.

No/UH
./.

It/PRP
is/VBZ
as/RB
safe/JJ
as/IN
it/PRP
is/VBZ
./.

I/PRP
can/MD
say/VB
that/IN
I/PRP
have/VBP
n't/RB
seen/VBN
a/DT
process/NN
fault/NN
due/JJ
to/TO
an/DT
exception/NN
in/IN
several/JJ
years/NNS
of/IN
24/CD
//SYM
7/CD
activity/NN
./.

I/PRP
do/VBP
n't/RB
expect/VB
perfect/JJ
code/NN
,/,
just/RB
well-written/JJ
code/NN
./.

In/IN
addition/NN
to/TO
providing/VBG
exception/NN
safety/NN
,/,
the/DT
techniques/NNS
above/IN
guarantee/NN
correctness/NN
in/IN
a/DT
way/NN
that/WDT
is/VBZ
near/RB
impossible/JJ
to/TO
achieve/VB
with/IN
try/catch/C
blocks/NNS
./.

If/IN
you/PRP
are/VBP
catching/VBG
everything/NN
in/IN
your/PRP$
top/JJ
control/NN
scope/NN
(/-LRB-
thread/NN
,/,
process/NN
,/,
etc./FW
)/-RRB-
,/,
then/RB
you/PRP
can/MD
be/VB
sure/JJ
that/IN
you/PRP
will/MD
continue/VB
to/TO
run/VB
in/IN
the/DT
face/NN
of/IN
exceptions/NNS
(/-LRB-
most/JJS
of/IN
the/DT
time/NN
)/-RRB-
./.

The/DT
same/JJ
techniques/NNS
will/MD
also/RB
help/VB
you/PRP
continue/VBP
to/TO
run/VB
correctly/RB
in/IN
the/DT
face/NN
of/IN
exceptions/NNS
without/IN
try/catch/C
blocks/VBZ
everywhere/RB
./.

Can/MD
you/PRP
even/RB
be/VB
sure/JJ
that/IN
it/PRP
is/VBZ
?/.

Yes/UH
./.

You/PRP
can/MD
be/VB
sure/JJ
by/IN
a/DT
thorough/JJ
code/NN
audit/NN
but/CC
no/DT
one/NN
really/RB
does/VBZ
that/IN
do/VB
they/PRP
?/.

Regular/JJ
code/NN
reviews/NNS
and/CC
careful/JJ
developers/NNS
go/VBP
a/DT
long/JJ
way/NN
to/TO
getting/VBG
there/RB
though/IN
./.

Do/VBP
you/PRP
know/VB
and/or/CC
actually/RB
use/VBP
alternatives/NNS
that/IN
work/NN
?/.

I/PRP
have/VBP
tried/VBN
a/DT
few/JJ
variations/NNS
over/IN
the/DT
years/NNS
such/JJ
as/IN
encoding/VBG
states/NNS
in/IN
the/DT
upper/JJ
bits/NNS
(/-LRB-
ala/FW
HRESULTs/C
)/-RRB-
or/CC
that/IN
horrible/JJ
setjmp/C
(/C
)/C
.../F
longjmp/C
(/C
)/C
hack/NN
./.

Both/DT
of/IN
these/DT
break/NN
down/RP
in/IN
practice/NN
though/IN
in/IN
completely/RB
different/JJ
ways/NNS
./.

In/IN
the/DT
end/NN
,/,
if/IN
you/PRP
get/VBP
into/IN
the/DT
habit/NN
of/IN
applying/VBG
a/DT
few/JJ
techniques/NNS
and/CC
carefully/RB
thinking/VBG
about/IN
where/WRB
you/PRP
can/MD
actually/RB
do/VB
something/NN
in/IN
response/NN
to/TO
an/DT
exception/NN
,/,
you/PRP
will/MD
end/VB
up/RP
with/IN
very/RB
readable/JJ
code/NN
that/WDT
is/VBZ
exception/NN
safe/NN
./.

You/PRP
can/MD
sum/VB
this/DT
up/RP
by/IN
following/VBG
these/DT
rules/NNS
:/.

You/PRP
only/RB
want/VBP
to/TO
see/VB
try/catch/NN
when/WRB
you/PRP
can/MD
do/VB
something/NN
about/IN
a/DT
specific/JJ
exception/NN

You/PRP
almost/RB
never/RB
want/VBP
to/TO
see/VB
a/DT
raw/JJ
new/JJ
or/CC
delete/VB
in/IN
code/NN

Eschew/NN
std/C
::/C
sprintf/C
,/,
snprintf/C
,/,
and/CC
arrays/NNS
in/IN
general/JJ
-/--
use/VB
std/C
::/C
ostringstream/C
for/IN
formatting/NN
and/CC
replace/VB
arrays/NNS
with/IN
std/C
::/C
vector/C
and/CC
std/C
::/C
string/C

When/WRB
in/IN
doubt/NN
,/,
look/NN
for/IN
functionality/NN
in/IN
Boost/NN
or/CC
STL/NNP
before/IN
rolling/VBG
your/PRP$
own/JJ

I/PRP
can/MD
only/RB
recommend/VB
that/IN
you/PRP
learn/VBP
how/WRB
to/TO
use/VB
exceptions/NNS
properly/RB
and/CC
forget/VB
about/IN
result/NN
codes/NNS
if/IN
you/PRP
plan/VBP
on/IN
writing/NN
in/IN
C++/NNP
./.

If/IN
you/PRP
want/VBP
to/TO
avoid/VB
exceptions/NNS
,/,
you/PRP
might/MD
want/VB
to/TO
consider/VB
writing/VBG
in/IN
another/DT
language/NN
that/WDT
either/RB
does/VBZ
not/RB
have/VB
them/PRP
or/CC
makes/VBZ
them/PRP
safe/JJ
./.

If/IN
you/PRP
want/VBP
to/TO
really/RB
learn/VB
how/WRB
to/TO
fully/RB
utilize/VB
C++/NNP
,/,
read/VBD
a/DT
few/JJ
books/NNS
from/IN
Herb/NNP
Sutter/NNP
,/,
Nicolai/NNP
Josuttis/NNP
,/,
and/CC
Scott/NNP
Meyers/NNP
./.

@Raedwald/USR
-/--
re/IN
:/:
VC++/NNP
:/:
the/DT
VS2005/NNP
edition/NN
of/IN
VC++/NNP
will/MD
not/RB
destroy/VB
local/JJ
objects/NNS
when/WRB
an/DT
SEH/NN
exception/NN
is/VBZ
thrown/VBN
./.

Read/VB
the/DT
"/``
enable/VB
C++/NNP
Exception/NN
Handling/VBG
"/''
./.

In/IN
VS2005/NNP
,/,
SEH/NN
exceptions/NNS
do/VBP
not/RB
call/VB
the/DT
destructors/NNS
of/IN
C++/NNP
objects/NNS
by/IN
default/NN
./.

If/IN
you/PRP
call/VBP
Win32/NNP
functions/NNS
or/CC
anything/NN
defined/VBN
in/IN
a/DT
C-interface/NN
DLL/NN
,/,
then/RB
you/PRP
have/VBP
to/TO
worry/VB
about/IN
this/DT
since/IN
they/PRP
can/MD
(/-LRB-
and/CC
will/NN
on/IN
occasion/NN
)/-RRB-
throw/VBP
an/DT
SEH/NN
exception/NN
your/PRP$
way/NN
./.

@Raedwald/USR
:/:
re/IN
:/:
raw/JJ
:/:
basically/RB
,/,
delete/C
should/MD
never/RB
be/VB
used/VBN
outside/IN
of/IN
the/DT
implementation/NN
of/IN
tr1/C
::/C
shared_ptr/C
and/CC
the/DT
like/JJ
./.

new/C
can/MD
be/VB
used/VBN
provided/VBN
that/IN
its/PRP$
usage/NN
is/VBZ
something/NN
like/IN
tr1/C
::/C
shared_ptr/C
</C
X/C
>/C
ptr/C
(/C
new/C
X/C
(/C
arg/C
,/C
arg/C
)/C
)/C
;/C
./.

The/DT
important/JJ
part/NN
is/VBZ
that/IN
the/DT
result/NN
of/IN
new/JJ
goes/VBZ
directly/RB
into/IN
a/DT
managed/JJ
pointer/NN
./.

The/DT
page/NN
on/IN
boost/C
::/C
shared_ptr/C
Best/NN
Practices/NNS
describes/VBZ
the/DT
best/JJS
./.

There/EX
are/VBP
three/CD
factors/NNS
of/IN
authentication/NN
:/.

A/DT
user/NN
knows/VBZ
something/NN
(/-LRB-
ie/FW
,/,
a/DT
password/NN
)/-RRB-

A/DT
user/NN
has/VBZ
something/NN
(/-LRB-
ie/FW
,/,
a/DT
key/JJ
fob/NN
)/-RRB-

A/DT
user/NN
is/VBZ
something/NN
(/-LRB-
ie/FW
,/,
retina/NN
scan/VBP
)/-RRB-

Usually/RB
,/,
websites/NNS
only/RB
enforce/VBP
policy/NN
#/SYM
1/CD
./.

Even/RB
most/JJS
banks/NNS
only/RB
enforce/VBP
policy/NN
1/CD
./.

They/PRP
instead/RB
rely/VBP
on/IN
a/DT
"/``
knows/VBZ
something/NN
else/JJ
"/''
approach/NN
to/TO
two-factor/JJ
authentication/NN
./.

(/-LRB-
IE/FW
:/:
A/DT
user/NN
knows/VBZ
their/PRP$
password/NN
and/CC
their/PRP$
mother/NN
's/POS
maiden/JJ
name/NN
./.
)/-RRB-

If/IN
you/PRP
are/VBP
able/JJ
,/,
a/DT
way/NN
to/TO
add/VB
in/IN
a/DT
second/JJ
factor/NN
of/IN
authentication/NN
is/VBZ
not/RB
too/RB
difficult/JJ
./.

If/IN
you/PRP
can/MD
generate/VB
around/IN
256/CD
characters/NNS
of/IN
randomness/NN
,/,
you/PRP
could/MD
structure/VB
that/IN
in/IN
a/DT
16/CD
x/SYM
16/CD
table/NN
,/,
and/CC
then/RB
ask/VB
the/DT
user/NN
to/TO
give/VB
you/PRP
the/DT
value/NN
in/IN
the/DT
table/NN
of/IN
cell/NN
A-14/NN
,/,
for/IN
example/NN
./.

When/WRB
a/DT
user/NN
signs/VBZ
up/RP
or/CC
changes/NNS
their/PRP$
password/NN
,/,
give/VB
them/PRP
the/DT
table/NN
and/CC
tell/VB
them/PRP
to/TO
print/VB
it/PRP
off/RP
and/CC
save/VB
it/PRP
./.

The/DT
difficulty/NN
with/IN
that/DT
approach/NN
is/VBZ
that/IN
when/WRB
a/DT
user/NN
forgets/VBZ
their/PRP$
password/NN
,/,
as/IN
they/PRP
will/MD
,/,
you/PRP
ca/MD
n't/RB
just/RB
offer/VB
the/DT
standard/NN
"/``
answer/VB
this/DT
question/NN
and/CC
put/VBD
in/RP
a/DT
new/JJ
password/NN
"/''
,/,
since/IN
that/DT
's/VBZ
vulnerable/JJ
to/TO
brute-force/NN
as/RB
well/RB
./.

Also/RB
,/,
you/PRP
ca/MD
n't/RB
reset/VB
it/PRP
and/CC
email/VB
them/PRP
a/DT
new/JJ
one/CD
,/,
since/IN
their/PRP$
email/NN
could/MD
be/VB
compromised/VBN
as/RB
well/RB
./.

(/-LRB-
See/VB
:/:
Makeuseof.com/URI
and/CC
their/PRP$
stolen/JJ
domain/NN
./.
)/-RRB-

Another/DT
idea/NN
(/-LRB-
which/WDT
involves/VBZ
kittens/NNS
)/-RRB-
,/,
is/VBZ
what/WDT
BOA/NNP
calls/VBZ
SiteKey/C
(/-LRB-
I/PRP
believe/VBP
they/PRP
trademarked/VBD
the/DT
name/NN
)/-RRB-
./.

Briefly/RB
,/,
you/PRP
have/VBP
the/DT
user/NN
upload/NN
an/DT
image/NN
when/WRB
they/PRP
register/VBP
,/,
and/CC
when/WRB
they/PRP
attempt/VBP
to/TO
login/VB
,/,
ask/VB
them/PRP
to/TO
pick/VB
their/PRP$
image/NN
out/IN
of/IN
8/CD
or/CC
15/CD
(/-LRB-
or/CC
more/JJR
)/-RRB-
random/JJ
ones/NNS
./.

So/RB
,/,
if/IN
a/DT
user/NN
uploads/VBZ
a/DT
picture/NN
of/IN
their/PRP$
kitten/NN
,/,
theoretically/RB
only/RB
they/PRP
know/VBP
exactly/RB
which/WDT
picture/NN
is/VBZ
theirs/JJ
out/IN
of/IN
all/PDT
the/DT
other/JJ
kittens/NNS
(/-LRB-
or/CC
flowers/NNS
or/CC
whatever/WDT
)/-RRB-
./.

The/DT
only/JJ
real/JJ
vunerability/NN
this/DT
approach/NN
has/VBZ
is/VBZ
the/DT
man-in-the-middle/JJ
attack/NN
./.

One/CD
more/JJR
idea/NN
(/-LRB-
no/DT
kittens/NNS
though/IN
)/-RRB-
,/,
is/VBZ
to/TO
track/VB
IPs/NNS
that/IN
users/NNS
access/VBP
the/DT
system/NN
with/IN
,/,
and/CC
require/VB
them/PRP
to/TO
perform/VB
additional/JJ
authentication/NN
(/-LRB-
captcha/NN
,/,
pick/VBP
a/DT
kitty/NN
,/,
pick/VBP
a/DT
key/NN
from/IN
this/DT
table/NN
)/-RRB-
when/WRB
they/PRP
log/VBP
in/IN
from/IN
an/DT
address/NN
they/PRP
have/VBP
n't/RB
before/RB
./.

Also/RB
,/,
similar/JJ
to/TO
GMail/NNP
,/,
allow/VBP
the/DT
user/NN
to/TO
view/VB
where/WRB
they/PRP
have/VBP
logged/VBN
in/RP
from/IN
recently/RB
./.

Edit/C
,/,
New/JJ
Idea/NN
:/.

Another/DT
way/NN
of/IN
validating/VBG
login/NN
attempts/NNS
is/VBZ
to/TO
check/VB
whether/IN
or/CC
not/RB
the/DT
user/NN
has/VBZ
come/VBN
from/IN
your/PRP$
login/NN
page/NN
./.

You/PRP
ca/MD
n't/RB
check/VB
referrers/NNS
,/,
since/IN
they/PRP
can/MD
be/VB
easily/RB
faked/VBN
./.

What/WP
you/PRP
need/VBP
is/VBZ
to/TO
set/VB
a/DT
key/NN
in/IN
the/DT
_SESSION/C
var/C
when/WRB
the/DT
user/NN
views/VBZ
the/DT
login/NN
page/NN
,/,
and/CC
then/RB
check/VB
to/TO
make/VB
sure/JJ
that/IN
key/NN
exists/VBZ
when/WRB
they/PRP
submit/VBP
their/PRP$
login/NN
information/NN
./.

If/IN
bot/NN
does/VBZ
not/RB
submit/VB
from/IN
the/DT
login/NN
page/NN
,/,
it/PRP
will/MD
not/RB
be/VB
able/JJ
to/TO
login/VB
./.

You/PRP
can/MD
also/RB
facilitate/VB
this/DT
by/IN
involving/VBG
javascript/NNP
in/IN
the/DT
process/NN
,/,
either/CC
by/IN
using/VBG
it/PRP
to/TO
set/VB
a/DT
cookie/NN
,/,
or/CC
adding/VBG
some/DT
information/NN
to/TO
the/DT
form/NN
after/IN
it/PRP
has/VBZ
loaded/VBN
./.

Or/CC
,/,
you/PRP
can/MD
split/VB
the/DT
form/NN
up/RP
into/IN
two/CD
different/JJ
submits/VBZ
(/-LRB-
ie/FW
,/,
the/DT
user/NN
enters/VBZ
their/PRP$
username/NN
,/,
submits/VBZ
,/,
then/RB
on/IN
a/DT
new/JJ
page/NN
enters/VBZ
their/PRP$
password/NN
and/CC
submit/VB
again/RB
./.
)/-RRB-

The/DT
key/NN
,/,
in/IN
this/DT
case/NN
,/,
is/VBZ
the/DT
most/RBS
important/JJ
aspect/NN
./.

A/DT
common/JJ
method/NN
of/IN
generating/VBG
them/PRP
is/VBZ
some/DT
combination/NN
of/IN
the/DT
user/NN
's/POS
data/NNS
,/,
their/PRP$
IP/NNP
,/,
and/CC
the/DT
time/NN
it/PRP
was/VBD
submitted/VBN
./.

Yeah/UH
,/,
I/PRP
thought/VBD
of/IN
the/DT
point/NN
you/PRP
brought/VBD
up/RP
last/JJ
night/NN
after/IN
I/PRP
had/VBD
gone/VBN
home/NN
./.

I/PRP
think/VBP
the/DT
way/NN
to/TO
fix/VB
that/DT
is/VBZ
:/:
When/WRB
a/DT
user/NN
logs/NNS
in/IN
and/CC
provides/VBZ
a/DT
correct/JJ
password/NN
,/,
display/VBP
their/PRP$
image/NN
and/CC
some/DT
number/NN
of/IN
other/JJ
random/JJ
ones/NNS
./.

When/WRB
they/PRP
do/VBP
not/RB
provide/VB
the/DT
correct/JJ
password/NN
,/,
show/VBP
some/DT
number/NN
of/IN
random/JJ
That/IN
"/``
could/MD
"/''
work/NN
,/,
but/CC
I/PRP
see/VBP
a/DT
couple/NN
problems/NNS
./.

What/WP
happens/VBZ
if/IN
the/DT
photo/NN
owner/NN
removes/VBZ
the/DT
image/NN
?/.

How/WRB
can/MD
you/PRP
be/VB
sure/JJ
that/IN
images/NNS
returned/VBD
wo/MD
n't/RB
be/VB
offensive/JJ
to/TO
your/PRP$
user/NN
?/.

How/WRB
does/VBZ
a/DT
user/NN
remember/VB
where/WRB
they/PRP
clicked/VBD
?/.

(/-LRB-
It/PRP
seems/VBZ
difficult/JJ
to/TO
forget/VB
)/-RRB-
It/PRP
's/VBZ
an/DT
interesting/JJ
idea/NN
,/,
to/TO
be/VB
sure/JJ
./.

I/PRP
do/VBP
think/VB
Flickr/NNP
has/VBZ
content/NN
ratings/NNS
,/,
so/IN
it/PRP
would/MD
be/VB
mostly/RB
safe/JJ
on/IN
that/DT
front/NN
./.

Your/PRP$
production/NN
system/NN
should/MD
be/VB
fine/JJ
as/IN
the/DT
hotfix/NN
delivers/VBZ
a/DT
config/NN
file/NN
(/-LRB-
System.Web.Mvc.dll.config/URI
)/-RRB-
into/IN
the/DT
following/JJ
folder/NN
:/:
%SystemRoot%\assembly\GAC_MSIL\policy.3.0.System.Web.Mvc\3.0.0.1__31bf3856ad364e35/URI

The/DT
config/NN
file/NN
contains/VBZ
an/DT
assembly/NN
redirect/NN
to/TO
the/DT
new/JJ
version/NN
,/,
this/DT
will/MD
override/VB
anything/NN
you/PRP
have/VBP
in/IN
your/PRP$
web.config/URI
:/.

<?/C
xml/C
version/C
=/C
"1.0"/C
?>/C
<!--/C
http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx#BKMK_Redirectingassemblyversionsbyusingpublisherpolicy/C
-->/C
</C
configuration/C
>/C
</C
runtime/C
>/C
</C
assemblyBinding/C
xmlns/C
=/C
"urn:schemas-microsoft-com:asm.v1"/C
>/C
</C
dependentAssembly/C
>/C
</C
assemblyIdentity/C
name/C
=/C
"System.Web.Mvc"/C
publicKeyToken/C
=/C
"31bf3856ad364e35"/C
culture/C
=/C
"neutral"/C
/>/C
</C
bindingRedirect/C
oldVersion/C
=/C
"3.0.0.0-3.0.0.1"/C
newVersion/C
=/C
"3.0.0.1"/C
/>/C
<//C
dependentAssembly/C
>/C
<//C
assemblyBinding/C
>/C
<//C
runtime/C
>/C
<//C
configuration/C
>/C

Follow/VB
the/DT
advice/NN
by/IN
@Guffa/USR
for/IN
your/PRP$
build/VB
system/NN
,/,
or/CC
use/VB
nuget/NN
to/TO
update/VB
./.

I/PRP
believe/VBP
the/DT
solution/NN
which/WDT
works/VBZ
depends/VBZ
on/IN
how/WRB
you/PRP
deliver/VBP
the/DT
MVC/NN
binaries/NNS
to/TO
your/PRP$
system/NN
(/-LRB-
either/CC
bin/C
deploy/C
or/CC
GAC/NN
)/-RRB-
./.

@julian/USR
as/IN
it/PRP
's/VBZ
the/DT
gac/NN
you/PRP
might/MD
have/VB
to/TO
traverse/VB
the/DT
directory/NN
using/VBG
an/DT
elevated/JJ
command/NN
prompt/JJ
./.

Also/RB
I/PRP
believe/VBP
this/DT
only/RB
applies/VBZ
if/IN
you/PRP
installed/VBD
mvc/NN
,/,
if/IN
you/PRP
nuget/VBP
(/-LRB-
bin/C
deploy/C
)/-RRB-
mvc/NN
this/DT
may/MD
not/RB
be/VB
present/JJ
on/IN
your/PRP$
system/NN
./.

Regarding/VBG
#/SYM
3/CD
I/PRP
must/MD
quibble/VB
a/DT
bit/NN
./.

Sure/RB
,/,
go/VB
ahead/RB
and/CC
give/VB
yourself/PRP
a/DT
surrogate/NN
,/,
but/CC
do/VBP
n't/RB
mark/VB
that/IN
as/IN
the/DT
primary/JJ
key/NN
,/,
because/IN
that/DT
's/VBZ
not/RB
what/WP
a/DT
primary/JJ
key/NN
IS/VBZ
-/:
a/DT
primary/JJ
key/NN
is/VBZ
"/``
what/WP
the/DT
record/NN
is/VBZ
about/IN
,/,
"/''
not/RB
simply/RB
a/DT
programming/NN
aid/NN
./.

Build/VB
a/DT
unique/JJ
index/NN
on/IN
your/PRP$
surrogate/NN
key/VB
and/CC
use/VB
that/IN
for/IN
relationships/NNS
,/,
fine/RB
,/,
but/CC
it/PRP
's/VBZ
not/RB
a/DT
primary/JJ
key/NN
./.

Regarding/VBG
#/SYM
10/CD
:/:
there/EX
are/VBP
good/JJ
reasons/NNS
to/TO
normalize/VB
,/,
not/RB
least/JJS
of/IN
which/WDT
is/VBZ
that/IN
the/DT
data/NNS
structures/NNS
will/MD
then/RB
reflect/VB
the/DT
entities/NNS
you/PRP
're/VBP
trying/VBG
to/TO
model/VB
./.

You/PRP
may/MD
have/VB
to/TO
build/VB
some/DT
views/NNS
to/TO
make/VB
life/NN
easier/JJR
,/,
but/CC
do/VBP
n't/RB
be/VB
a/DT
data/NN
slob/NN
for/IN
convenience/NN
!/.

So/RB
,/,
you/PRP
'd/MD
enmesh/VB
your/PRP$
business/NN
logic/NN
in/IN
the/DT
UI/NN
,/,
where/WRB
it/PRP
was/VBD
divorced/VBN
from/IN
the/DT
data/NNS
being/VBG
manipulated/VBN
?/.

This/DT
does/VBZ
n't/RB
seem/VB
like/IN
such/PDT
a/DT
good/JJ
idea/NN
,/,
particularly/RB
as/IN
data/NNS
manipulation/NN
is/VBZ
most/RBS
efficient/JJ
when/WRB
performed/VBN
by/IN
the/DT
database/NN
server/NN
rather/RB
than/IN
by/IN
round-trips/NNS
from/IN
the/DT
UI/NN
./.

That/DT
also/RB
means/VBZ
that/IN
it/PRP
's/VBZ
more/RBR
difficult/JJ
to/TO
control/VB
the/DT
application/NN
because/IN
you/PRP
ca/MD
n't/RB
rely/VB
on/IN
the/DT
database/NN
being/VBG
in/IN
control/NN
of/IN
its/PRP$
data/NNS
and/CC
potentially/RB
have/VBP
different/JJ
versions/NNS
of/IN
a/DT
UI/NN
out/RP
there/EX
with/IN
different/JJ
data/NNS
manipulation/NN
going/VBG
on/RP
./.

Not/RB
good/JJ
./.

I/PRP
do/VBP
n't/RB
let/VB
anything/NN
touch/VB
my/PRP$
data/NNS
except/IN
through/IN
a/DT
stored/JJ
procedure/NN
./.

Agreed/VBD
!/.

I/PRP
've/VBP
only/RB
had/VBD
one/CD
case/NN
in/IN
which/WDT
a/DT
correlated/JJ
subquery/NN
was/VBD
more/RBR
efficient/JJ
,/,
and/CC
that/DT
's/VBZ
in/IN
16/CD
years/NNS
of/IN
writing/VBG
SQL/NNP
!/.

A/DT
quibble/NN
:/:
2/LS
)/-RRB-
is/VBZ
actually/RB
bad/JJ
practice/NN
./.

I/PRP
see/VBP
what/WP
you/PRP
're/VBP
getting/VBG
at/IN
-/--
you/PRP
want/VBP
an/DT
unique/JJ
index/NN
on/IN
that/DT
autonumber/NN
,/,
and/CC
to/TO
use/VB
it/PRP
as/IN
a/DT
surrogate/JJ
key/NN
./.

But/CC
the/DT
primary/JJ
key/NN
should/MD
n't/RB
be/VB
an/DT
autonumber/NN
,/,
as/IN
that/DT
's/VBZ
not/RB
what/WP
a/DT
primary/JJ
key/NN
IS/VBZ
:/:
a/DT
primary/JJ
key/NN
is/VBZ
"/``
what/WP
the/DT
record/NN
is/VBZ
about/IN
,/,
"/''
which/WDT
(/-LRB-
except/IN
for/IN
things/NNS
like/IN
sales/NNS
transactions/NNS
)/-RRB-
is/VBZ
NOT/RB
the/DT
autonumber/NN
,/,
but/CC
some/DT
unique/JJ
bit/NN
of/IN
information/NN
about/IN
the/DT
entity/NN
being/VBG
modeled/VBN
./.

It/PRP
's/VBZ
an/DT
issue/NN
of/IN
semantics/NNS
,/,
at/IN
the/DT
end/NN
of/IN
the/DT
day/NN
.../F
and/CC
Microsoft/NNP
prefers/VBZ
primary/JJ
keys/NNS
to/TO
be/VB
meaningless/JJ
,/,
rather/RB
than/IN
meaningful/JJ
./.

Debates/NNS
around/IN
it/PRP
rage/NN
on/IN
,/,
but/CC
I/PRP
fall/VBP
into/IN
the/DT
"/``
meaningful/JJ
"/''
camp/NN
./.
:)/UH

+/SYM
1/CD
for/IN
#/SYM
5/CD
./.

Truly/RB
-/--
it/PRP
's/VBZ
a/DT
horror/NN
to/TO
work/VB
with/IN
one/CD
of/IN
these/DT
apps/NNS
!/.

To/TO
be/VB
more/RBR
precise/JJ
,/,
a/DT
dictionary/NN
attack/NN
,/,
i.e./FW
an/DT
attack/NN
where/WRB
all/DT
words/NNS
in/IN
an/DT
exhaustive/JJ
list/NN
are/VBP
tried/VBN
,/,
gets/VBZ
not/RB
"/``
impossible/JJ
"/''
,/,
but/CC
it/PRP
gets/VBZ
impractical/JJ
:/:
each/DT
bit/NN
of/IN
salt/NN
doubles/VBZ
the/DT
amount/NN
of/IN
storage/NN
and/CC
computation/NN
required/VBN
./.

Of/IN
course/NN
,/,
this/DT
is/VBZ
only/RB
true/JJ
if/IN
the/DT
salt/NN
is/VBZ
not/RB
known/VBN
to/TO
the/DT
attacker/NN
./.

This/DT
is/VBZ
different/JJ
from/IN
pre-computed/VBN
dictionary/NN
attacks/NNS
like/IN
attacks/NNS
involving/VBG
rainbow/NN
tables/NNS
where/WRB
it/PRP
does/VBZ
not/RB
matter/VB
whether/IN
the/DT
salt/NN
is/VBZ
secret/JJ
or/CC
not/RB
./.

Example/NN
:/:
With/IN
a/DT
64-bit/JJ
salt/NN
(/-LRB-
i.e./FW
8/CD
bytes/NNS
)/-RRB-
you/PRP
need/VBP
to/TO
check/VB
264/CD
additional/JJ
password/NN
combinations/NNS
in/IN
your/PRP$
dictionary/NN
attack/NN
./.

With/IN
a/DT
dictionary/NN
containing/VBG
200,000/CD
words/NNS
you/PRP
will/MD
have/VB
to/TO
make/VB
200,000/CD
*/SYM
264/CD
=/SYM
3.69/CD
*/SYM
1024/CD
tests/NNS
in/IN
the/DT
worst/JJS
case/NN
-/--
instead/RB
of/IN
200,000/CD
tests/NNS
without/IN
salt/NN
./.

An/DT
additional/JJ
benefit/NN
of/IN
using/VBG
salt/NN
is/VBZ
that/IN
an/DT
attacker/NN
can/MD
not/RB
pre-compute/VB
the/DT
password/NN
hashes/VBZ
from/IN
his/PRP$
dictionary/NN
./.

It/PRP
would/MD
simply/RB
take/VB
too/RB
much/JJ
time/NN
and/or/CC
space/NN
./.

Update/VB

Your/PRP$
update/VBP
assumes/VBZ
that/IN
an/DT
attacker/NN
already/RB
knows/VBZ
the/DT
salt/NN
(/-LRB-
or/CC
has/VBZ
stolen/VBN
it/PRP
)/-RRB-
./.

This/DT
is/VBZ
of/IN
course/NN
a/DT
different/JJ
situation/NN
./.

Still/RB
it/PRP
is/VBZ
not/RB
possible/JJ
for/IN
the/DT
attacker/NN
to/TO
use/VB
a/DT
pre-computed/VBN
rainbow/NN
table/NN
./.

What/WP
matters/VBZ
here/RB
a/DT
lot/NN
is/VBZ
the/DT
speed/NN
of/IN
the/DT
hashing/NN
function/NN
./.

To/TO
make/VB
an/DT
attack/NN
impractical/JJ
,/,
the/DT
hashing/NN
function/NN
needs/VBZ
to/TO
be/VB
slow/JJ
./.

MD5/NNP
or/CC
SHA/NNP
are/VBP
not/RB
good/JJ
candidates/NNS
here/RB
because/IN
they/PRP
are/VBP
designed/VBN
to/TO
be/VB
fast/JJ
,/,
better/JJR
candidates/NNS
for/IN
hashing/NN
algorithms/NNS
are/VBP
Blowfish/NNP
or/CC
some/DT
variations/NNS
of/IN
it/PRP
./.

Update/VB
2/CD

A/DT
good/JJ
read/NN
on/IN
the/DT
matter/NN
of/IN
securing/VBG
your/PRP$
password/NN
hashes/VBZ
in/IN
general/JJ
(/-LRB-
going/VBG
much/RB
beyond/IN
the/DT
original/JJ
question/NN
but/CC
still/RB
interesting/JJ
)/-RRB-
:/.

Enough/JJ
With/IN
The/DT
Rainbow/NN
Tables/NNS
:/:
What/WP
You/PRP
Need/VBD
To/TO
Know/VB
About/IN
Secure/JJ
Password/NN
Schemes/NNS

Corollary/NN
of/IN
the/DT
article/NN
:/:
Use/VB
salted/VBN
hashes/NNS
created/VBN
with/IN
bcrypt/NN
(/-LRB-
based/VBN
on/IN
Blowfish/NNP
)/-RRB-
or/CC
Eksblowfish/NNP
that/WDT
allows/VBZ
you/PRP
to/TO
use/VB
a/DT
configurable/JJ
setup/NN
time/NN
to/TO
make/VB
hashing/NN
slow/JJ
./.

Downvoter/NN
,/,
could/MD
you/PRP
explain/VB
?/.

Especially/RB
if/IN
there/EX
is/VBZ
something/NN
incorrect/JJ
it/PRP
would/MD
be/VB
good/JJ
to/TO
know/VB
./.

@Michael/USR
Borgwart/USR
:/:
You/PRP
probably/RB
misread/VBD
my/PRP$
answer/NN
./.

I/PRP
was/VBD
referring/VBG
to/TO
the/DT
fact/NN
that/IN
the/DT
computational/JJ
amount/NN
for/IN
checking/VBG
the/DT
items/NNS
in/IN
your/PRP$
word/NN
list/NN
is/VBZ
actually/RB
increased/VBN
if/IN
the/DT
salt/NN
is/VBZ
unknown/JJ
to/TO
the/DT
attacker/NN
,/,
namely/RB
doubled/VBD
for/IN
each/DT
bit/NN
of/IN
salt/NN
./.

And/CC
you/PRP
want/VBP
the/DT
computation/NN
to/TO
be/VB
expensive/JJ
./.

@Michael/USR
Borgwardt/USR
:/:
I/PRP
agree/VBP
,/,
@erickson/USR
refers/VBZ
to/TO
pre-computed/VBN
dictionary/NN
attacks/NNS
./.

Summary/NN
:/.

Setting/VBG
up/IN
Jenkins/NNP
on/IN
OS/NN
X/CD
has/VBZ
been/VBN
made/VBN
significantly/RB
easier/JJR
with/IN
the/DT
most/RBS
recent/JJ
installer/NN
(/-LRB-
as/IN
of/IN
1.449/CD
-/--
March/NNP
9/CD
,/,
2012/CD
)/-RRB-
,/,
however/RB
managing/VBG
the/DT
process/NN
of/IN
code/NN
signing/NN
is/VBZ
still/RB
very/RB
difficult/JJ
with/IN
no/DT
straightforward/JJ
answer/NN
./.

Motivation/NN
:/.

Run/VBP
a/DT
headless/JJ
CI/NN
server/NN
that/WDT
follows/VBZ
common/JJ
best/JJS
practices/NNS
for/IN
running/VBG
services/NNS
on/IN
OS/NN
X/CD
(/-LRB-
Some/DT
of/IN
which/WDT
is/VBZ
explained/VBN
here/RB
in/IN
plain/JJ
language/NN
)/-RRB-
./.

Background/NN
:/.

October/NNP
12/CD
,/,
2009/CD
-/:
How/WRB
to/TO
automate/VB
your/PRP$
iPhone/NNP
app/NN
builds/VBZ
with/IN
Hudson/NNP

June/NNP
15/CD
,/,
2011/CD
-/:
Jenkins/NNP
on/IN
Mac/NNP
OS/NN
X/CD
;/:
git/C
w//IN
ssh/C
public/C
key/C

June/NNP
23/CD
,/,
2011/CD
-/:
Continuous/JJ
Deployment/NN
of/IN
iOS/NNP
Apps/NNS
with/IN
Jenkins/NNP
and/CC
TestFlight/NNP

July/NNP
26/CD
,/,
2011/CD
-/:
Missing/VBG
certificates/NNS
and/CC
keys/NNS
in/IN
the/DT
keychain/NN
while/IN
using/VBG
Jenkins/NNP
//CC
Hudson/NNP
as/IN
Continuous/JJ
Integration/NN
for/IN
iOS/NNP
and/CC
Mac/NNP
development/NN

August/NNP
30/CD
,/,
2011/CD
-/:
Xcode/NNP
Provisioning/VBG
File/NN
not/RB
found/VBN
with/IN
Jenkins/NNP

September/NNP
20/CD
,/,
2011/CD
-/:
How/WRB
to/TO
set/VB
up/RP
Jenkins/NNP
CI/NN
on/IN
a/DT
Mac/NNP

September/NNP
14/CD
,/,
2011/CD
-/:
Getting/VBG
Jenkins/NNP
Running/VBG
on/IN
a/DT
Mac/NNP

November/NNP
12/CD
,/,
2011/CD
-/:
How/WRB
to/TO
:/:
Install/VB
Jenkins/NNP
on/IN
OS/NN
X/CD
and/CC
make/VB
it/PRP
build/VB
Mac/NNP
stuff/NN

January/NNP
23/CD
,/,
2012/CD
-/:
Upcoming/VBG
Jenkins/NNP
OSX/NN
installer/NN
changes/NNS

March/NNP
7/CD
,/,
2012/CD
-/:
Thanks/VBZ
for/IN
using/VBG
OSX/NN
Installer/NN

Process/NN
:/:
Install/VB
Jenkins/NNP
CI/NN
via/IN
OS/NN
X/CD
installer/NN
package/NN
./.

For/IN
the/DT
"/``
Installation/NN
Type/NN
"/''
step/NN
,/,
click/VBP
the/DT
Customize/JJ
button/NN
,/,
and/CC
choose/VB
"/``
Start/VB
at/IN
boot/NN
as/IN
'/``
jenkins/NNP
./.
'/''
"/''

Discussion/NN
:/:

The/DT
naive/JJ
expectation/NN
at/IN
this/DT
point/NN
was/VBD
that/IN
a/DT
free-style/JJ
project/NN
with/IN
the/DT
build/VBP
script/NN
xcodebuild/C
-/C
target/C
MyTarget/C
-/C
sdk/C
iphoneos/C
should/MD
work/VB
./.

As/IN
indicated/VBN
by/IN
the/DT
title/NN
of/IN
this/DT
post/NN
,/,
it/PRP
does/VBZ
not/RB
and/CC
fails/VBZ
with/IN
:/:
Code/ER
Sign/ER
error/ER
:/ER
The/ER
identity/ER
`/ER
iPhone/ER
Developer/ER
'/ER
does/ER
n't/ER
match/ER
any/ER
valid/ER
certificate/private/ER
key/ER
pair/ER
in/ER
the/ER
default/ER
keychain/ER

It/PRP
is/VBZ
obvious/JJ
enough/RB
what/WP
needs/VBZ
to/TO
happen/VB
-/:
you/PRP
need/VBP
to/TO
add/VB
a/DT
valid/JJ
code/NN
signing/NN
certificate/NN
and/CC
a/DT
private/JJ
key/NN
into/IN
the/DT
default/NN
keychain/NN
./.

In/IN
researching/VBG
how/WRB
to/TO
accomplish/VB
this/DT
,/,
I/PRP
have/VBP
not/RB
found/VBN
a/DT
solution/NN
that/WDT
does/VBZ
n't/RB
open/VB
up/RP
the/DT
system/NN
to/TO
some/DT
level/NN
of/IN
vulnerability/NN
./.

Problem/NN
1/CD
:/:

No/DT
default/NN
keychain/NN
for/IN
jenkins/NNP
daemon/NN

sudo/C
-/C
u/C
jenkins/C
security/C
default-keychain/C
.../F
yields/VBZ
"/ER
A/ER
default/ER
keychain/ER
could/ER
not/ER
be/ER
found/ER
"/ER

As/IN
pointed/VBN
out/RP
below/IN
by/IN
Ivo/NNP
Dancet/NNP
,/,
the/DT
UserShell/NN
is/VBZ
set/VBN
to/TO
/usr/bin/false/URI
for/IN
the/DT
jenkins/NNP
daemon/NN
by/IN
default/NN
(/-LRB-
I/PRP
think/VBP
this/DT
is/VBZ
a/DT
feature/NN
,/,
not/RB
a/DT
bug/NN
)/-RRB-
;/:
follow/VB
his/PRP$
answer/NN
to/TO
change/VB
the/DT
UserShell/NN
to/TO
bash/NN
./.

You/PRP
can/MD
then/RB
use/VB
sudo/C
su/C
jenkins/C
to/TO
get/VB
logged/VBN
in/RP
as/IN
the/DT
jenkins/NNP
user/NN
and/CC
get/VB
a/DT
bash/NN
prompt/JJ
./.

sudo/C
su/C
jenkins/C

cd/C
~/C
/Library/C

mkdir/C
Keychains/C

cd/C
Keychains/C

security/C
create-keychain/C
</C
keychain-name/C
>/C
./C
keychain/C

security/C
default-keychain/C
-/C
s/C
</C
keychain-name/C
>/C
./C
keychain/C

Okay/UH
,/,
great/UH
./.

We/PRP
've/VBP
got/VBN
a/DT
default/NN
keychain/NN
now/RB
;/,
let/VBZ
's/PRP
move/NN
on/IN
right/NN
?/.

But/CC
,/,
first/RB
why/WRB
did/VBD
we/PRP
even/RB
bother/VBP
making/VBG
a/DT
default/JJ
keychain/NN
?/.

Almost/RB
all/DT
answers/NNS
,/,
suggestions/NNS
,/,
or/CC
conversation/NN
I/PRP
read/VBP
throughout/IN
researching/VBG
suggest/VBP
that/IN
one/PRP
should/MD
just/RB
chuck/VB
their/PRP$
code/NN
signing/NN
certs/NNS
and/CC
keys/NNS
into/IN
the/DT
system/NN
keychain/NN
./.

If/IN
you/PRP
run/VBP
security/NN
list-keychains/NNS
as/IN
a/DT
free-style/JJ
project/NN
in/IN
Jenkins/NNP
,/,
you/PRP
see/VBP
that/IN
the/DT
only/JJ
keychain/NN
available/JJ
is/VBZ
the/DT
system/NN
keychain/NN
;/:
I/PRP
think/VBP
that/DT
's/VBZ
where/WRB
most/JJS
people/NNS
came/VBD
up/RP
with/IN
the/DT
idea/NN
to/TO
put/VB
their/PRP$
certificate/NN
and/CC
key/NN
in/IN
there/RB
./.

But/CC
,/,
this/DT
just/RB
seems/VBZ
like/IN
a/DT
very/RB
bad/JJ
idea/NN
-/--
especially/RB
given/VBN
that/IN
you/PRP
'll/MD
need/VB
to/TO
create/VB
a/DT
plain/JJ
text/NN
script/NN
with/IN
the/DT
password/NN
to/TO
open/VB
the/DT
keychain/NN
./.

Problem/NN
2/CD
:/:

Adding/VBG
code/NN
signing/NN
certs/NNS
and/CC
private/JJ
key/JJ

This/DT
is/VBZ
where/WRB
I/PRP
really/RB
start/VBP
to/TO
get/VB
squeamish/JJ
./.

I/PRP
have/VBP
a/DT
gut/NN
feeling/NN
that/IN
I/PRP
should/MD
create/VB
a/DT
new/JJ
public/JJ
//CC
private/JJ
key/NN
unique/JJ
for/IN
use/NN
with/IN
Jenkins/NNP
./.

My/PRP$
thought/NN
process/NN
is/VBZ
if/IN
the/DT
jenkins/NNPS
daemon/NN
is/VBZ
compromised/VBN
,/,
then/RB
I/PRP
can/MD
easily/RB
revoke/VB
the/DT
certificate/NN
in/IN
Apple/NNP
's/POS
Provisioning/VBG
Portal/NN
and/CC
generate/VB
another/DT
public/JJ
//CC
private/JJ
key/NN
./.

If/IN
I/PRP
use/VBP
the/DT
same/JJ
key/NN
and/CC
certificate/NN
for/IN
my/PRP$
user/NN
account/NN
and/CC
Jenkins/NNP
,/,
then/RB
it/PRP
means/VBZ
more/JJR
hassle/NN
(/-LRB-
damage/NN
?/.
)/-RRB-

if/IN
the/DT
jenkins/NNP
service/NN
is/VBZ
attacked/VBN
./.

Pointing/VBG
to/TO
Simon/NNP
Urbanek/NNP
's/POS
answer/NN
you/PRP
'll/MD
be/VB
unlocking/VBG
the/DT
keychain/NN
from/IN
a/DT
script/NN
with/IN
a/DT
plain/JJ
text/NN
password/NN
./.

It/PRP
seems/VBZ
irresponsible/JJ
to/TO
keep/VB
anything/NN
but/CC
"/``
disposable/JJ
"/''
certificates/NNS
and/CC
keys/NNS
in/IN
the/DT
jenkins/NNP
daemon/NN
's/POS
keychain/NN
./.

I/PRP
am/VBP
very/RB
interested/JJ
in/IN
any/DT
discussion/NN
to/TO
the/DT
contrary/NN
./.

Am/VBP
I/PRP
being/VBG
overly/RB
cautious/JJ
?/.

To/TO
make/VB
a/DT
new/JJ
CSR/NN
as/IN
the/DT
jenkins/NNP
daemon/NN
in/IN
Terminal/NN
I/PRP
did/VBD
the/DT
following/NN
.../.

sudo/C
su/C
jenkins/C

certtool/C
r/C
CertificateSigningRequest.certSigningRequest/URI

You/PRP
'll/MD
be/VB
prompted/VBN
for/IN
the/DT
following/JJ
(/-LRB-
most/JJS
of/IN
these/DT
I/PRP
made/VBD
educated/VBN
guesses/NNS
at/IN
the/DT
correct/JJ
answer/NN
;/:
do/VBP
you/PRP
have/VB
better/JJR
insight/NN
?/.

Please/VB
share/NN
./.
)/-RRB-
.../.

Enter/VB
key/NN
and/CC
certificate/NN
label/NN
:/:

Select/VB
algorithm/NN
:/:
r/C
(/-LRB-
for/IN
RSA/NNP
)/-RRB-

Enter/VB
key/JJ
size/NN
in/IN
bits/NNS
:/:
2048/CD

Select/VB
signature/NN
algorithm/NN
:/:
5/C
(/-LRB-
for/IN
MD5/NNP
)/-RRB-

Enter/VB
challenge/NN
string/NN
:/:

Then/RB
a/DT
bunch/NN
of/IN
questions/NNS
for/IN
RDN/NN

Submit/VB
the/DT
generated/VBN
CSR/NN
file/NN
(/-LRB-
CertificateSigningRequest.certSigningRequest/URI
)/-RRB-
to/TO
Apple/NNP
's/POS
Provisioning/VBG
Portal/NN
under/IN
a/DT
new/JJ
Apple/NNP
ID/NN

Approve/VB
the/DT
request/NN
and/CC
download/VB
the/DT
.cer/URI
file/NN

security/C
unlock-keychain/C

security/C
add-certificate/C
ios_development.cer/URI

This/DT
takes/VBZ
us/PRP
one/CD
step/NN
closer/JJR
.../.

Problem/NN
3/CD
:/:

Provisioning/VBG
profile/NN
and/CC
Keychain/NN
unlocking/NN

I/PRP
made/VBD
a/DT
special/JJ
provisioning/NN
profile/NN
in/IN
the/DT
Provisioning/NN
Portal/NN
just/RB
for/IN
use/NN
with/IN
CI/NN
in/IN
hopes/NNS
that/IN
if/IN
something/NN
bad/RB
happens/VBZ
I/PRP
've/VBP
made/VBN
the/DT
impact/NN
a/DT
little/JJ
smaller/JJR
./.

Best/JJ
practice/NN
or/CC
overly/RB
cautious/JJ
?/.

sudo/C
su/C
jenkins/C

mkdir/C
~/C
/Library/MobileDevice/C

mkdir/C
~/C
//C
Library/MobileDevice/Provisioning/C
\/C
Profiles/C

Move/VBP
the/DT
provisioning/NN
profile/NN
that/IN
you/PRP
setup/NN
in/IN
the/DT
Provisioning/NN
Portal/NN
into/IN
this/DT
new/JJ
folder/NN
./.

We/PRP
're/VBP
now/RB
two/CD
short/JJ
steps/NNS
away/RB
from/IN
being/VBG
able/JJ
to/TO
run/VB
xcodebuild/C NA
from/IN
the/DT
the/DT
command/NN
line/NN
as/IN
jenkins/NNP
,/,
and/CC
so/IN
that/DT
means/VBZ
we/PRP
're/VBP
also/RB
close/RB
to/TO
being/VBG
able/JJ
to/TO
get/VB
the/DT
Jenkins/NNP
CI/NN
running/VBG
builds/NNS
./.

security/C
unlock-keychain/C
-/C
p/C
</C
keychain/C
password/C
>/C

xcodebuild/C
-/C
target/C
MyTarget/C
-/C
sdk/C
iphoneos/C

Now/RB
we/PRP
get/VBP
a/DT
successful/JJ
build/VB
from/IN
a/DT
command/NN
line/NN
when/WRB
logged/VBN
in/RP
as/IN
the/DT
jenkins/NNP
daemon/NN
,/,
so/RB
if/IN
we/PRP
create/VBP
a/DT
free-style/JJ
project/NN
and/CC
add/VB
those/DT
final/JJ
two/CD
steps/NNS
(/-LRB-
#/SYM
5/CD
and/CC
#/SYM
6/CD
above/IN
)/-RRB-
we/PRP
will/MD
be/VB
able/JJ
to/TO
automate/VB
the/DT
building/NN
of/IN
our/PRP$
iOS/NNP
project/NN
!/.

It/PRP
might/MD
not/RB
be/VB
necessary/JJ
,/,
but/CC
I/PRP
felt/VBD
better/RBR
setting/VBG
jenkins/NNP
UserShell/NN
back/RB
to/TO
/usr/bin/false/URI
after/IN
I/PRP
'd/MD
successfully/RB
gotten/VBN
all/PDT
this/DT
setup/NN
./.

Am/VBP
I/PRP
being/VBG
paranoid/JJ
?/.

Problem/NN
4/CD
:/:

Default/NN
keychain/NN
still/RB
not/RB
available/JJ
!/.

(/-LRB-
EDIT/VB
:/:
I/PRP
posted/VBD
the/DT
edits/NNS
to/TO
my/PRP$
question/NN
,/,
rebooted/VBN
to/TO
make/VB
sure/JJ
my/PRP$
solution/NN
was/VBD
100/CD
%/SYM
,/,
and/CC
of/IN
course/NN
,/,
I/PRP
'd/MD
left/VBD
out/RP
a/DT
step/NN
)/-RRB-

Even/RB
after/IN
all/PDT
the/DT
steps/NNS
above/IN
,/,
you/PRP
'll/MD
need/VB
to/TO
modify/VB
the/DT
Launch/NN
Daemon/NN
plist/C
at/C
/Library/LaunchDaemons/org.jenkins-ci.plist/URI
as/IN
stated/VBN
in/IN
this/DT
answer/NN
./.

Please/VB
note/NN
this/DT
is/VBZ
also/RB
an/DT
openrdar/C
bug/NN
./.

It/PRP
should/MD
look/VB
like/IN
this/DT
:/.

<?/C
xml/C
version/C
=/C
"1.0"/C
encoding/C
=/C
"UTF-8"/C
?>/C
<!/C
DOCTYPE/C
plist/C
PUBLIC/C
"/C
-//Apple//DTD/C
PLIST/C
1.0//EN/C
"/C
"http://www.apple.com/DTDs/PropertyList-1.0.dtd"/C
>/C
EnvironmentVariables/C
JENKINS_HOME/C
/Users/Shared/Jenkins/Home/C
GroupName/C
daemon/C
KeepAlive/C
Label/C
org.jenkins-ci/C
ProgramArguments/C
/bin/bash/C
/Library/Application/Support/Jenkins/jenkins-runner.sh/C
RunAtLoad/C
UserName/C
jenkins/C
SessionCreate/C

With/IN
this/DT
setup/NN
,/,
I/PRP
would/MD
also/RB
recommend/VB
the/DT
Xcode/NNP
plugin/NN
for/IN
Jenkins/NNP
,/,
which/WDT
makes/VBZ
setting/VBG
up/IN
the/DT
xcodebuild/C
script/NN
a/DT
little/JJ
bit/NN
easier/JJR
./.

At/IN
this/DT
point/NN
,/,
I/PRP
'd/MD
also/RB
recommend/VB
reading/VBG
the/DT
man/NN
pages/NNS
for/IN
xcodebuild/C
-/--
hell/NN
you/PRP
made/VBD
it/PRP
this/DT
far/RB
in/IN
Terminal/NN
,/,
right/RB
?/.

This/DT
setup/NN
is/VBZ
not/RB
perfect/JJ
,/,
and/CC
any/DT
advice/NN
or/CC
insight/NN
is/VBZ
greatly/RB
appreciated/VBN
./.

I/PRP
have/VBP
had/VBN
a/DT
hard/JJ
time/NN
selecting/VBG
a/DT
"/``
correct/JJ
"/''
answer/NN
since/IN
what/WP
I/PRP
've/VBP
come/VBN
to/TO
use/VB
to/TO
solve/VB
my/PRP$
problem/NN
was/VBD
a/DT
collection/NN
of/IN
just/RB
about/IN
everyone/NN
's/POS
input/NN
./.

I/PRP
've/VBP
tried/VBN
to/TO
give/VB
everyone/NN
at/IN
least/JJS
an/DT
up/RP
vote/NN
,/,
but/CC
award/NN
the/DT
answer/NN
to/TO
Simon/NNP
because/IN
he/PRP
mostly/RB
answered/VBD
the/DT
original/JJ
question/NN
./.

Furthermore/RB
,/,
Sami/NNP
Tikka/NNP
deserves/VBZ
a/DT
lot/NN
of/IN
credit/NN
for/IN
his/PRP$
efforts/NNS
getting/VBG
Jenkins/NNP
to/TO
work/VB
through/IN
AppleScript/C
as/IN
a/DT
plain/JJ
ol'/JJ
OS/NN
X/CD
app/NN
./.

If/IN
you/PRP
're/VBP
only/RB
interested/JJ
in/IN
getting/VBG
Jenkins/NNP
up/IN
and/CC
going/VBG
quickly/RB
within/IN
your/PRP$
user/NN
session/NN
(/-LRB-
i.e./FW
not/RB
as/IN
a/DT
headless/JJ
server/NN
)/-RRB-
his/PRP$
solution/NN
is/VBZ
much/RB
more/RBR
Mac-like/JJ
./.

I/PRP
hope/VBP
that/IN
my/PRP$
efforts/NNS
spark/VBP
further/JJ
discussion/NN
,/,
and/CC
help/VB
the/DT
next/JJ
poor/JJ
soul/NN
who/WP
comes/VBZ
along/IN
thinking/VBG
they/PRP
can/MD
get/VB
Jenkins/NNP
CI/NN
setup/NN
for/IN
their/PRP$
iOS/NNP
projects/NNS
in/IN
a/DT
weekend/NN
because/IN
of/IN
all/PDT
the/DT
wonderful/JJ
things/NNS
they/PRP
've/VBP
heard/VBN
about/IN
it/PRP
./.

Update/VB
:/:
August/NNP
9/CD
,/,
2013/CD

With/IN
so/RB
many/JJ
upvotes/NNS
and/CC
favorites/NNS
,/,
I/PRP
thought/VBD
I/PRP
would/MD
come/VB
back/RB
to/TO
this/DT
18/CD
months/NNS
later/RB
with/IN
some/DT
brief/JJ
lessons/NNS
learned/VBD
./.

Lesson/NN
1/CD
:/:
Do/VBP
n't/RB
expose/VB
Jenkins/NNP
to/TO
the/DT
public/JJ
internet/NN

At/IN
the/DT
2012/CD
WWDC/NNP
I/PRP
took/VBD
this/DT
question/NN
to/TO
the/DT
Xcode/NNP
and/CC
OS/NN
X/CD
Server/NN
engineers/NNS
./.

I/PRP
received/VBD
a/DT
cacophony/NN
of/IN
"/``
do/VBP
n't/RB
do/VB
that/DT
!/.
"/''
from/IN
anyone/NN
I/PRP
asked/VBD
./.

They/PRP
all/DT
agreed/VBD
that/IN
an/DT
automated/JJ
build/VBP
process/NN
was/VBD
great/JJ
,/,
but/CC
that/IN
the/DT
server/NN
should/MD
only/RB
be/VB
accessible/JJ
on/IN
the/DT
local/JJ
network/NN
./.

The/DT
OS/NN
X/CD
Server/NN
engineers/NNS
suggested/VBD
allowing/VBG
remote/JJ
access/NN
via/IN
VPN/NN
./.

Lesson/NN
2/CD
:/:
There/EX
are/VBP
new/JJ
install/VBP
options/NNS
now/RB

I/PRP
recently/RB
gave/VBD
a/DT
CocoaHeads/NNP
talk/NN
about/IN
my/PRP$
Jenkins/NNP
experience/NN
,/,
and/CC
much/RB
to/TO
my/PRP$
surprise/NN
I/PRP
found/VBD
some/DT
new/JJ
install/VB
methods/NNS
-/:
Homebrew/NNP
and/CC
even/RB
a/DT
Bitnami/NNP
Mac/NNP
App/NN
Store/NN
version/NN
./.

These/DT
are/VBP
definitely/RB
worth/JJ
checking/VBG
out/RP
./.

Jonathan/NNP
Wright/NNP
has/VBZ
a/DT
gist/NN
detailing/VBG
getting/VBG
Homebrew/NNP
Jenkins/NNP
working/NN
./.

Lesson/NN
3/CD
:/:
No/UH
,/,
seriously/RB
,/,
do/VBP
n't/RB
expose/VB
your/PRP$
build/VB
box/NN
to/TO
the/DT
internet/NN

It/PRP
's/VBZ
pretty/RB
clear/JJ
from/IN
the/DT
original/JJ
post/NN
that/IN
I/PRP
'm/VBP
neither/CC
a/DT
system/NN
administrator/NN
nor/CC
security/NN
expert/NN
./.

Common/JJ
sense/NN
about/IN
private-y/JJ
stuff/NN
(/-LRB-
keychains/NNS
,/,
credentials/NNS
,/,
certificates/NNS
,/,
etc/FW
)/-RRB-
left/VBD
me/PRP
feeling/VBG
pretty/RB
uneasy/JJ
about/IN
putting/VBG
my/PRP$
Jenkins/NNP
box/NN
on/IN
the/DT
internet/NN
./.

Nick/NNP
Arnott/NNP
at/IN
Neglected/VBN
Potential/JJ
was/VBD
able/JJ
to/TO
confirm/VB
my/PRP$
heebie-jeebies/NNS
pretty/RB
easily/RB
in/IN
this/DT
article/NN
./.

TL/UH
;/,
DR/UH

My/PRP$
recommendation/NN
to/TO
others/NNS
looking/VBG
to/TO
automate/VB
their/PRP$
build/VB
process/NN
has/VBZ
changed/VBN
over/IN
the/DT
past/JJ
year/NN
and/CC
a/DT
half/NN
./.

Make/VB
sure/JJ
your/PRP$
Jenkins/NNP
machine/NN
is/VBZ
behind/IN
your/PRP$
firewall/NN
./.

Install/VB
and/CC
set/VB
Jenkins/NNP
up/RP
as/IN
a/DT
dedicated/JJ
Jenkins/NNP
user/NN
either/CC
using/VBG
the/DT
installer/NN
,/,
Bitnami/NNP
Mac/NNP
App/NN
Store/NN
version/NN
,/,
Sami/NNP
Tikka/NNP
's/POS
AppleScript/NNP
,/,
etc/FW
;/:
this/DT
resolves/VBZ
most/JJS
of/IN
the/DT
headache/NN
I/PRP
detail/NN
above/IN
./.

If/IN
you/PRP
need/VBP
remote/JJ
access/NN
,/,
setting/VBG
up/RP
VPN/NN
services/NNS
in/IN
OS/NN
X/CD
Server/NN
takes/VBZ
ten/CD
minutes/NNS
tops/NNS
./.

I/PRP
've/VBP
been/VBN
using/VBG
this/DT
setup/NN
for/IN
over/IN
a/DT
year/NN
and/CC
am/VBP
very/RB
happy/JJ
with/IN
it/PRP
./.

Good/JJ
luck/NN
!/.

But/CC
,/,
I/PRP
'm/VBP
also/RB
having/VBG
difficulties/NNS
getting/VBG
any/DT
keychain/NN
beyond/IN
the/DT
system/NN
keychain/NN
to/TO
load/C
./C
security/C
unlock-keychain/C
-/C
p/C
password/C
-/C
k/C
/path/codesign.keychain/C
does/VBZ
n't/RB
work/VB
./.

I/PRP
've/VBP
tried/VBN
something/NN
a/DT
little/RB
different/JJ
,/,
but/CC
ultimately/RB
have/VBP
wound/VBN
up/RP
back/RB
at/IN
the/DT
same/JJ
spot/NN
./.

I/PRP
edited/VBD
my/PRP$
question/NN
,/,
hopefully/RB
it/PRP
's/VBZ
a/DT
bit/NN
clearer/JJR
?/.

The/DT
concern/NN
is/VBZ
that/IN
this/DT
Jenkins/NNP
user/NN
is/VBZ
in/IN
user/NN
space/NN
not/RB
daemon/NN
space/NN
.../F
so/RB
if/IN
an/DT
attacker/NN
were/VBD
able/JJ
to/TO
compromise/VB
your/PRP$
Jenkins/NNP
user/NN
,/,
they/PRP
would/MD
have/VB
full/JJ
access/NN
to/TO
your/PRP$
computer/NN
./.

It/PRP
seems/VBZ
like/IN
you/PRP
have/VBP
Jenkins/NNP
setup/NN
under/IN
a/DT
"/``
macbuild/NN
"/''
user/NN
;/:
I/PRP
'm/VBP
assuming/VBG
that/IN
this/DT
user/NN
is/VBZ
a/DT
user/NN
and/CC
not/RB
daemon/NN
./.

I/PRP
definitely/RB
understand/VBP
(/-LRB-
now/RB
)/-RRB-
that/IN
the/DT
keychain/NN
will/MD
need/VB
to/TO
be/VB
unlocked/VBN
via/IN
command/NN
line/NN
args/NNS
(/-LRB-
see/VB
Simon/NNP
Urbanek/NNP
's/POS
comments/NNS
)/-RRB-
,/,
but/CC
I/PRP
'm/VBP
still/RB
unsure/JJ
how/WRB
to/TO
create/VB
a/DT
default/NN
keychain/NN
for/IN
the/DT
jenkins/NNP
daemon/NN
./.

I/PRP
performed/VBD
the/DT
above/JJ
steps/NNS
on/IN
a/DT
"/``
clean/JJ
"/''
install/VB
of/IN
Lion/NNP
,/,
so/RB
maybe/RB
there/EX
was/VBD
an/DT
issue/NN
with/IN
security/NN
before/IN
you/PRP
jumped/VBD
in/IN
?/.

Another/DT
possibility/NN
is/VBZ
that/IN
there/EX
's/VBZ
been/VBN
a/DT
security/NN
//CC
OS/NN
X/CD
update/VBP
since/IN
I/PRP
initially/RB
posted/VBD
?/.

In/IN
cryptography/NN
,/,
hash/NN
functions/NNS
provide/VBP
three/CD
separate/JJ
functions/NNS
./.

Collision/NN
resistance/NN
:/:
How/WRB
hard/JJ
is/VBZ
it/PRP
for/IN
someone/NN
to/TO
find/VB
two/CD
messages/NNS
(/-LRB-
any/DT
two/CD
messages/NNS
)/-RRB-
that/WDT
hash/VBP
the/DT
same/JJ
./.

Preimage/NN
Resistance/NN
:/:
Given/VBN
a/DT
hash/NN
,/,
how/WRB
hard/JJ
is/VBZ
it/PRP
to/TO
find/VB
another/DT
message/NN
that/WDT
hashes/VBZ
the/DT
same/JJ
?/.

Also/RB
known/VBN
as/IN
a/DT
one/CD
way/NN
hash/NN
function/NN
./.

Second/JJ
preimage/NN
resistance/NN
:/:
Given/VBN
a/DT
message/NN
,/,
find/VBP
another/DT
message/NN
that/WDT
hashes/VBZ
the/DT
same/JJ
./.

These/DT
properties/NNS
are/VBP
related/JJ
but/CC
independent/JJ
./.

For/IN
example/NN
,/,
collision/NN
resistance/NN
implies/VBZ
second/JJ
preimage/NN
resistance/NN
,/,
but/CC
not/RB
the/DT
other/JJ
way/NN
around/IN
./.

For/IN
any/DT
given/VBN
application/NN
,/,
you/PRP
will/MD
have/VB
different/JJ
requirements/NNS
,/,
needing/VBG
one/CD
or/CC
more/JJR
of/IN
these/DT
properties/NNS
./.

A/DT
hash/NN
function/NN
for/IN
securing/VBG
passwords/NNS
on/IN
a/DT
server/NN
will/MD
usually/RB
only/RB
require/VB
preimage/NN
resistance/NN
,/,
while/IN
message/NN
digests/NNS
require/VBP
all/DT
three/CD
./.

It/PRP
has/VBZ
been/VBN
shown/VBN
that/IN
MD5/NNP
is/VBZ
not/RB
collision/NN
resistant/JJ
,/,
however/RB
,/,
that/WDT
does/VBZ
not/RB
preclude/VB
its/PRP$
use/NN
in/IN
applications/NNS
that/WDT
do/VBP
not/RB
require/VB
collision/NN
resistance/NN
./.

Indeed/RB
,/,
MD5/NNP
is/VBZ
often/RB
still/RB
used/VBN
in/IN
applications/NNS
where/WRB
the/DT
smaller/JJR
key/JJ
size/NN
and/CC
speed/NN
are/VBP
beneficial/JJ
./.

That/DT
said/VBD
,/,
due/JJ
to/TO
its/PRP$
flaws/NNS
,/,
researchers/NNS
recommend/VBP
the/DT
use/NN
of/IN
other/JJ
hash/NN
functions/NNS
in/IN
new/JJ
scenarios/NNS
./.

SHA1/NNP
has/VBZ
a/DT
flaw/NN
that/WDT
allows/VBZ
collisions/NNS
to/TO
be/VB
found/VBN
in/IN
theoretically/RB
far/RB
less/JJR
than/IN
the/DT
2/CD
^/SYM
80/CD
steps/NNS
a/DT
secure/JJ
hash/NN
function/NN
of/IN
its/PRP$
length/NN
would/MD
require/VB
./.

The/DT
attack/NN
is/VBZ
continually/RB
being/VBG
revised/VBN
and/CC
currently/RB
can/MD
be/VB
done/VBN
in/IN
~/NN
2/CD
^/SYM
63/CD
steps/NNS
-/:
just/RB
barely/RB
within/IN
the/DT
current/JJ
realm/NN
of/IN
computability/NN
./.

For/IN
this/DT
reason/NN
NIST/NNP
is/VBZ
phasing/VBG
out/RP
the/DT
use/NN
of/IN
SHA1/NNP
,/,
stating/VBG
that/IN
the/DT
SHA2/NNP
family/NN
should/MD
be/VB
used/VBN
after/IN
2010/CD
./.

SHA2/NNP
is/VBZ
a/DT
new/JJ
family/NN
of/IN
hash/NN
functions/NNS
created/VBN
following/VBG
SHA1/NNP
./.

Currently/RB
there/EX
are/VBP
no/DT
known/JJ
attacks/NNS
against/IN
SHA2/NNP
functions/NNS
./.

SHA256/NNP
,/,
384/CD
and/CC
512/CD
are/VBP
all/DT
part/NN
of/IN
the/DT
SHA2/NNP
family/NN
,/,
just/RB
using/VBG
different/JJ
key/JJ
lengths/NNS
./.

RIPEMD/NNP
I/PRP
ca/MD
n't/RB
comment/VB
too/RB
much/RB
on/IN
,/,
except/IN
to/TO
note/VB
that/IN
it/PRP
is/VBZ
n't/RB
as/RB
commonly/RB
used/VBN
as/IN
the/DT
SHA/NNP
families/NNS
,/,
and/CC
so/RB
has/VBZ
not/RB
been/VBN
scrutinized/VBN
as/RB
closely/RB
by/IN
cryptographic/JJ
researchers/NNS
./.

For/IN
that/DT
reason/NN
alone/RB
I/PRP
would/MD
recommend/VB
the/DT
use/NN
of/IN
SHA/NNP
functions/NNS
over/IN
it/PRP
./.

In/IN
the/DT
implementation/NN
you/PRP
are/VBP
using/VBG
it/PRP
seems/VBZ
quite/RB
slow/JJ
as/IN
well/RB
,/,
which/WDT
makes/VBZ
it/PRP
less/RBR
useful/JJ
./.

In/IN
conclusion/NN
,/,
there/EX
is/VBZ
no/DT
one/CD
best/JJS
function/NN
-/--
it/PRP
all/DT
depends/VBZ
on/IN
what/WP
you/PRP
need/VBP
it/PRP
for/IN
./.

Be/VB
mindful/JJ
of/IN
the/DT
flaws/NNS
with/IN
each/DT
and/CC
you/PRP
will/MD
be/VB
best/RB
able/JJ
to/TO
choose/VB
the/DT
right/JJ
hash/NN
function/NN
for/IN
your/PRP$
scenario/NN
./.

I/PRP
would/MD
n't/RB
put/VB
Skein/NNP
and/CC
MD6/NNP
that/WDT
high/RB
in/IN
the/DT
list/NN
;/:
there/EX
is/VBZ
a/DT
reason/NN
that/IN
the/DT
SHA-3/NNP
competition/NN
wo/MD
n't/RB
be/VB
finished/VBN
till/IN
the/DT
end/NN
of/IN
2012/CD
./.

It/PRP
takes/VBZ
a/DT
long/JJ
time/NN
and/CC
a/DT
lot/NN
of/IN
eyes/NNS
to/TO
be/VB
convinced/VBN
that/IN
a/DT
hash/NN
function/NN
is/VBZ
actually/RB
likely/JJ
to/TO
be/VB
secure/JJ
,/,
and/CC
neither/DT
of/IN
these/DT
functions/NNS
have/VBP
been/VBN
around/RB
long/RB
enough/RB
for/IN
that/DT
yet/RB
./.

@Tom/USR
Gullen/USR
-/:
you/PRP
only/RB
have/VBP
half/PDT
the/DT
picture/NN
./.

Without/IN
salt/NN
,/,
an/DT
attacker/NN
would/MD
n't/RB
use/VB
the/DT
method/NN
you/PRP
demonstrate/VBP
in/IN
"/``
Update/VB
2/CD
"/''
./.

He/PRP
'd/MD
simply/RB
do/VB
a/DT
lookup/NN
in/IN
a/DT
table/NN
and/CC
get/VB
the/DT
password/NN
in/IN
O/C NA
(/C NA
1/C NA
)/C NA
or/CC
O/C NA
(/C NA
log/C NA
n/C NA
)/C NA
time/NN
(/-LRB-
n/NN
being/VBG
the/DT
number/NN
of/IN
candidate/NN
passwords/NNS
)/-RRB-
./.

Salt/NN
is/VBZ
what/WP
prevents/VBZ
that/IN
and/CC
forces/VBZ
him/PRP
to/TO
use/VB
the/DT
O/C NA
(/C NA
n/C NA
)/C NA
approach/NN
you/PRP
demonstrate/VBP
./.

Another/DT
technique/NN
(/-LRB-
key-strengthening/NN
)/-RRB-
can/MD
cause/VB
each/DT
attempt/NN
in/IN
your/PRP$
loop/NN
to/TO
take/VB
a/DT
full/JJ
second/NN
,/,
meaning/VBG
that/IN
it/PRP
will/MD
take/VB
3/CD
years/NNS
to/TO
perform/VB
those/DT
tests/NNS
.../F
and/CC
with/IN
only/JJ
10k/CD
passwords/NNS
,/,
you/PRP
're/VBP
likely/JJ
to/TO
crack/VB
zero/CD
passwords/NNS
in/IN
that/DT
time/NN
./.

@Tom/USR
Gullen/USR
-/:
I/PRP
mean/VBP
re-hashing/VBG
the/DT
result/NN
say/VBP
2000/CD
times/NNS
(/-LRB-
you/PRP
have/VBP
to/TO
consider/VB
that/IN
an/DT
attacker/NN
is/VBZ
going/VBG
to/TO
use/VB
something/NN
fast/RB
,/,
not/RB
PHP/NNP
)/-RRB-
,/,
so/IN
that/IN
it/PRP
takes/VBZ
a/DT
good/JJ
fraction/NN
of/IN
a/DT
second/NN
to/TO
compute/VB
the/DT
hash/NN
for/IN
a/DT
single/JJ
password/NN
./.

This/DT
is/VBZ
found/VBN
in/IN
the/DT
standard/JJ
key/JJ
derivation/NN
algorithms/NNS
PBKDF1/NNP
and/CC
PBKDF2/NNP
,/,
from/IN
PKCS/NNP
#/SYM
5/CD
,/,
which/WDT
make/VBP
great/JJ
password/NN
obfuscation/NN
algorithms/NNS
(/-LRB-
the/DT
"/``
derived/VBN
key/NN
"/''
is/VBZ
the/DT
"/``
hash/NN
"/''
)/-RRB-
./.

A/DT
lot/NN
of/IN
users/NNS
on/IN
SO/NN
refer/VBP
to/TO
this/DT
article/NN
because/IN
it/PRP
was/VBD
a/DT
response/NN
to/TO
Jeff/NNP
Atwood/NNP
./.

BTW/UH
,/,
of/IN
course/NN
you/PRP
assume/VBP
the/DT
attacker/NN
has/VBZ
everything/NN
./.

Assume/VB
the/DT
attacker/NN
is/VBZ
a/DT
corrupt/JJ
hosting/VBG
company/NN
employee/NN
who/WP
dumped/VBD
the/DT
user/NN
table/NN
on/IN
your/PRP$
myprettypony.com/URI
fansite/NN
so/IN
that/IN
he/PRP
can/MD
recover/VB
passwords/NNS
and/CC
see/VB
if/IN
they/PRP
work/VBP
on/IN
people/NNS
's/POS
citibank.com/URI
accounts/NNS
./.

With/IN
a/DT
well-designed/JJ
password/NN
scheme/NN
,/,
it/PRP
will/MD
be/VB
impossible/JJ
for/IN
this/DT
guy/NN
to/TO
recover/VB
any/DT
passwords/NNS
./.

@Tom/USR
Gullen/USR
-/:
With/IN
proper/JJ
password/NN
choice/NN
policies/NNS
(/-LRB-
at/IN
least/JJS
nine/CD
characters/NNS
,/,
including/VBG
numbers/NNS
,/,
mixed/JJ
case/NN
,/,
and/CC
symbols/NNS
)/-RRB-
,/,
you/PRP
wo/MD
n't/RB
crack/VB
many/JJ
accounts/NNS
by/IN
trying/VBG
a/DT
few/JJ
thousand/CD
passwords/NNS
./.

@Tom/USR
Gullen/USR
-/:
even/RB
with/IN
reasonable/JJ
strong/JJ
password/NN
policies/NNS
,/,
a/DT
dictionary/NN
of/IN
hundreds/NNS
of/IN
millions/NNS
or/CC
a/DT
few/JJ
billion/CD
candidates/NNS
is/VBZ
likely/JJ
to/TO
get/VB
some/DT
hits/NNS
,/,
because/IN
all/DT
passwords/NNS
are/VBP
not/RB
equally/RB
likely/JJ
(/-LRB-
because/IN
people/NNS
use/VBP
mnemonics/NNS
,/,
rather/RB
than/IN
RNGs/NNS
,/,
to/TO
choose/VB
them/PRP
)/-RRB-
./.

A/DT
dictionary/NN
of/IN
that/DT
size/NN
is/VBZ
precomputable/JJ
on/IN
commodity/NN
systems/NNS
if/IN
salt/NN
is/VBZ
not/RB
used/VBN
./.

If/IN
salt/NN
is/VBZ
used/VBN
,/,
the/DT
attacker/NN
has/VBZ
to/TO
recompute/VB
hashes/NNS
every/DT
time/NN
,/,
and/CC
if/IN
enough/JJ
iterations/NNS
of/IN
the/DT
hash/NN
are/VBP
performed/VBN
,/,
the/DT
attacker/NN
's/POS
rate/NN
of/IN
attack/NN
can/MD
be/VB
slowed/VBN
to/TO
a/DT
few/JJ
attempts/NNS
per/IN
second/NN
./.

A/DT
dictionary/NN
is/VBZ
a/DT
structure/NN
where/WRB
values/NNS
are/VBP
indexed/VBN
by/IN
keys/NNS
./.

In/IN
the/DT
case/NN
of/IN
a/DT
pre-computed/VBN
dictionary/NN
attack/NN
,/,
each/DT
key/NN
is/VBZ
a/DT
hash/NN
,/,
and/CC
the/DT
corresponding/JJ
value/NN
is/VBZ
a/DT
password/NN
that/WDT
results/VBZ
in/IN
the/DT
hash/NN
./.

With/IN
a/DT
pre-computed/VBN
dictionary/NN
in/IN
hand/NN
,/,
an/DT
attacker/NN
can/MD
"/``
instantly/RB
"/''
lookup/VB
a/DT
password/NN
that/WDT
will/MD
produce/VB
the/DT
necessary/JJ
hash/NN
to/TO
log/VB
in/IN
./.

With/IN
salt/NN
,/,
the/DT
space/NN
required/VBN
to/TO
store/VB
the/DT
dictionary/NN
grows/VBZ
rapidly/RB
…/F
so/RB
rapidly/RB
,/,
that/IN
trying/VBG
to/TO
pre-compute/VB
a/DT
password/NN
dictionary/NN
soon/RB
becomes/VBZ
pointless/JJ
./.

The/DT
best/JJS
salts/NNS
are/VBP
randomly/RB
chosen/VBN
from/IN
a/DT
cryptographic/JJ
random/JJ
number/NN
generator/NN
./.

Eight/CD
bytes/NNS
is/VBZ
a/DT
practical/JJ
size/NN
,/,
and/CC
more/JJR
than/IN
16/CD
bytes/NNS
serves/VBZ
no/DT
purpose/NN
./.

Salt/NN
does/VBZ
much/RB
more/JJR
than/IN
just/RB
"/``
make/VB
an/DT
attacker/NN
's/POS
job/NN
more/RBR
irritating/JJ
./.
"/''

It/PRP
eliminates/VBZ
an/DT
entire/JJ
class/NN
of/IN
attack/NN
-/--
the/DT
use/NN
of/IN
precomputed/VBN
dictionaries/NNS
./.

Another/DT
element/NN
is/VBZ
necessary/JJ
to/TO
completely/RB
secure/VB
passwords/NNS
,/,
and/CC
that/DT
is/VBZ
"/``
key-strengthening/NN
./.
"/''

One/CD
round/NN
of/IN
SHA-1/NNP
is/VBZ
not/RB
good/JJ
enough/RB
:/:
a/DT
safe/JJ
password/NN
hashing/VBG
algorithm/NN
should/MD
be/VB
very/RB
slow/JJ
computationally/RB
./.

Many/JJ
people/NNS
use/VBP
PBKDF2/NNP
,/,
a/DT
key/JJ
derivation/NN
function/NN
,/,
that/WDT
feeds/VBZ
back/JJ
results/NNS
to/TO
the/DT
hash/NN
function/NN
thousands/NNS
of/IN
times/NNS
./.

The/DT
"/``
bcrypt/NN
"/''
algorithm/NN
is/VBZ
similar/JJ
,/,
using/VBG
an/DT
iterative/JJ
key/JJ
derivation/NN
that/WDT
is/VBZ
slow/JJ
./.

When/WRB
the/DT
hashing/VBG
operation/NN
is/VBZ
very/RB
slow/JJ
,/,
a/DT
precomputed/VBN
table/NN
becomes/VBZ
more/RBR
and/CC
more/RBR
desirable/JJ
to/TO
an/DT
attacker/NN
./.

But/CC
proper/JJ
salt/NN
defeats/VBZ
that/IN
approach/NN
./.

Comments/NNS
Below/IN
are/VBP
the/DT
comments/NNS
I/PRP
made/VBD
on/IN
the/DT
question/NN
./.

Without/IN
salt/NN
,/,
an/DT
attacker/NN
would/MD
n't/RB
use/VB
the/DT
method/NN
demonstrated/VBD
in/IN
"/``
Update/VB
2/CD
"/''
./.

He/PRP
'd/MD
simply/RB
do/VB
a/DT
lookup/NN
in/IN
a/DT
pre-computed/VBN
table/NN
and/CC
get/VB
the/DT
password/NN
in/IN
O/C
(/C
1/C
)/C
or/CC
O/C
(/C
log/C
n/C
)/C
time/NN
(/-LRB-
n/NN
being/VBG
the/DT
number/NN
of/IN
candidate/NN
passwords/NNS
)/-RRB-
./.

Salt/NN
is/VBZ
what/WP
prevents/VBZ
that/IN
and/CC
forces/VBZ
him/PRP
to/TO
use/VB
the/DT
O/NN
(/-LRB-
n/NN
)/-RRB-
approach/NN
shown/VBN
in/IN
"/``
Update/VB
2/CD
"/''
./.

Once/RB
reduced/VBN
to/TO
an/DT
O/C
(/C
n/C
)/C
attack/NN
,/,
we/PRP
have/VBP
to/TO
consider/VB
how/WRB
long/JJ
each/DT
attempt/NN
takes/VBZ
./.

Key-strengthening/NN
can/MD
cause/VB
each/DT
attempt/NN
in/IN
the/DT
loop/NN
to/TO
take/VB
a/DT
full/JJ
second/NN
,/,
meaning/VBG
that/IN
the/DT
time/NN
needed/VBN
to/TO
test/VB
10k/CD
passwords/NNS
on/IN
10k/CD
users/NNS
will/MD
stretch/VB
from/IN
3/CD
days/NNS
to/TO
3/CD
years/NNS
…/F
and/CC
with/IN
only/JJ
10k/CD
passwords/NNS
,/,
you/PRP
're/VBP
likely/JJ
to/TO
crack/VB
zero/CD
passwords/NNS
in/IN
that/DT
time/NN
./.

You/PRP
have/VBP
to/TO
consider/VB
that/IN
an/DT
attacker/NN
is/VBZ
going/VBG
to/TO
use/VB
the/DT
fastest/JJS
tools/NNS
he/PRP
can/MD
,/,
not/RB
PHP/NNP
,/,
so/IN
thousands/NNS
of/IN
iterations/NNS
,/,
rather/RB
than/IN
100/CD
,/,
would/MD
be/VB
a/DT
good/JJ
parameter/NN
for/IN
key-strengthening/NN
./.

It/PRP
should/MD
take/VB
a/DT
large/JJ
fraction/NN
of/IN
a/DT
second/NN
to/TO
compute/VB
the/DT
hash/NN
for/IN
a/DT
single/JJ
password/NN
./.

Key-strengthening/NN
is/VBZ
part/NN
of/IN
the/DT
standard/JJ
key/JJ
derivation/NN
algorithms/NNS
PBKDF1/NNP
and/CC
PBKDF2/NNP
,/,
from/IN
PKCS/NNP
#/SYM
5/CD
,/,
which/WDT
make/VBP
great/JJ
password/NN
obfuscation/NN
algorithms/NNS
(/-LRB-
the/DT
"/``
derived/VBN
key/NN
"/''
is/VBZ
the/DT
"/``
hash/NN
"/''
)/-RRB-
./.

A/DT
lot/NN
of/IN
users/NNS
on/IN
StackOverflow/NNP
refer/VBP
to/TO
this/DT
article/NN
because/IN
it/PRP
was/VBD
a/DT
response/NN
to/TO
Jeff/NNP
Atwood/NNP
's/POS
post/NN
about/IN
the/DT
dangers/NNS
of/IN
rainbow/NN
tables/NNS
./.

It/PRP
's/VBZ
not/RB
my/PRP$
favorite/JJ
article/NN
,/,
but/CC
it/PRP
does/VBZ
discuss/VB
these/DT
concepts/NNS
in/IN
more/JJR
detail/NN
./.

Of/IN
course/NN
you/PRP
assume/VBP
the/DT
attacker/NN
has/VBZ
everything/NN
:/:
salt/NN
,/,
hash/NN
,/,
user/NN
name/NN
./.

Assume/VB
the/DT
attacker/NN
is/VBZ
a/DT
corrupt/JJ
hosting/VBG
company/NN
employee/NN
who/WP
dumped/VBD
the/DT
user/NN
table/NN
on/IN
your/PRP$
myprettypony.com/URI
fansite/NN
./.

He/PRP
's/VBZ
trying/VBG
recover/VB
these/DT
passwords/NNS
because/IN
he/PRP
's/VBZ
going/VBG
to/TO
turn/VB
around/RP
and/CC
see/VB
if/IN
your/PRP$
pony/NN
fans/NNS
used/VBD
the/DT
same/JJ
password/NN
on/IN
their/PRP$
citibank.com/URI
accounts/NNS
./.

With/IN
a/DT
well-designed/JJ
password/NN
scheme/NN
,/,
it/PRP
will/MD
be/VB
impossible/JJ
for/IN
this/DT
guy/NN
to/TO
recover/VB
any/DT
passwords/NNS
./.

Salt/NN
stops/VBZ
pre-computed/VBN
dictionary/NN
attacks/NNS
./.

Key-strengthening/NN
stops/VBZ
dictionary/NN
attacks/NNS
./.

Both/DT
must/MD
be/VB
used/VBN
together/RB
for/IN
secure/JJ
password/NN
authentication/NN
./.

Update/VB
:/.

Times/NNS
have/VBP
changed/VBN
,/,
we/PRP
have/VBP
a/DT
SHA3/NNP
winner/NN
./.

I/PRP
would/MD
recommend/VB
using/VBG
keccak/NNP
(/-LRB-
aka/IN
SHA3/NNP
)/-RRB-
winner/NN
of/IN
the/DT
SHA3/NNP
contest/NN
./.

Original/JJ
Answer/NN
:/.

In/IN
order/NN
of/IN
weakest/JJS
to/TO
strongest/JJS
I/PRP
would/MD
say/VB
:/.

RIPEMD/NNP
BROKEN/JJ
,/,
Should/MD
never/RB
be/VB
used/VBN
as/IN
can/MD
be/VB
seen/VBN
in/IN
this/DT
pdf/NN

MD-5/NNP
BROKEN/JJ
,/,
Should/MD
never/RB
be/VB
used/VBN
,/,
can/MD
be/VB
broken/VBN
in/IN
2/CD
minutes/NNS
with/IN
a/DT
laptop/NN

SHA-1/NNP
BROKEN/JJ
,/,
Should/MD
never/RB
be/VB
used/VBN
,/,
is/VBZ
broken/VBN
in/IN
principal/NN
,/,
attacks/NNS
are/VBP
getting/VBG
better/RBR
by/IN
the/DT
week/NN

SHA-2/NNP
WEAK/JJ
,/,
Will/MD
probably/RB
be/VB
broken/VBN
in/IN
the/DT
next/JJ
few/JJ
years/NNS
./.

A/DT
few/JJ
weaknesses/NNS
have/VBP
been/VBN
found/VBN
./.

Note/VB
that/IN
generally/RB
the/DT
higher/JJR
key/NN
size/NN
,/,
the/DT
harder/JJR
the/DT
hash/NN
function/NN
is/VBZ
to/TO
break/VB
./.

While/IN
key/NN
size/NN
=/SYM
strength/NN
is/VBZ
not/RB
always/RB
true/JJ
,/,
it/PRP
is/VBZ
mostly/RB
true/JJ
./.

So/IN
SHA-256/NNP
is/VBZ
probably/RB
weaker/JJR
than/IN
SHA-512/NNP
./.

Skein/NNP
NO/DT
KNOWN/VBN
WEAKNESSES/NNS
,/,
is/VBZ
a/DT
candidate/NN
for/IN
SHA-3/NNP
./.

It/PRP
is/VBZ
fairly/RB
new/JJ
and/CC
thus/RB
untested/JJ
./.

It/PRP
has/VBZ
been/VBN
implemented/VBN
in/IN
a/DT
bunch/NN
of/IN
languages/NNS
./.

MD6/NNP
NO/DT
KNOWN/VBN
WEAKNESSES/NNS
,/,
is/VBZ
another/DT
a/DT
candidate/NN
for/IN
SHA-3/NNP
./.

Probably/RB
stronger/JJR
than/IN
Skien/NNP
,/,
but/CC
slower/JJR
on/IN
single/JJ
core/NN
machines/NNS
./.

Like/IN
Skien/NNP
it/PRP
is/VBZ
untested/JJ
./.

Some/DT
security/NN
minded/VBD
developers/NNS
are/VBP
using/VBG
it/PRP
,/,
in/IN
mission/NN
critical/JJ
roles/NNS
./.

Personally/RB
I/PRP
'd/MD
use/VB
MD6/NNP
,/,
because/IN
one/PRP
can/MD
never/RB
been/VBN
too/RB
paranoid/JJ
./.

If/IN
speed/NN
is/VBZ
a/DT
real/JJ
concern/NN
I/PRP
'd/MD
look/VB
at/IN
Skein/NNP
,/,
or/CC
SHA-256/NNP
./.

I/PRP
agree/VBP
with/IN
your/PRP$
sentiments/NNS
,/,
but/CC
I/PRP
think/VBP
the/DT
community/NN
is/VBZ
in/IN
a/DT
strange/JJ
position/NN
./.

All/PDT
the/DT
hash/NN
functions/NNS
in/IN
use/NN
are/VBP
dangerously/RB
close/JJ
to/TO
being/VBG
broken/VBN
(/-LRB-
maybe/RB
,/,
maybe/RB
,/,
not/RB
SHA2/NNP
256-512/CD
)/-RRB-
and/CC
yet/RB
we/PRP
have/VBP
to/TO
wait/VB
to/TO
2012/CD
to/TO
choose/VB
a/DT
replacement/NN
./.

choose/VB
your/PRP$
poison/NN
:/:
weak/JJ
//CC
broken/JJ
or/CC
untested/JJ
(/-LRB-
most/JJS
NIST/NNP
candidates/NNS
have/VBP
not/RB
been/VBN
public/JJ
for/IN
more/JJR
than/IN
6/CD
months/NNS
)/-RRB-
?/.

Tough/JJ
choice/NN
./.

@Cocowalla/USR
I/PRP
do/VBP
n't/RB
think/VB
we/PRP
are/VBP
likely/JJ
to/TO
see/VB
full/JJ
support/NN
any/DT
contestants/NNS
,/,
until/IN
one/CD
of/IN
them/PRP
is/VBZ
announced/VBN
the/DT
winner/NN
./.

hash/NN
functions/NNS
typically/RB
do/VBP
n't/RB
use/VB
keys/NNS

First/RB
we/PRP
need/VBP
to/TO
distinguish/VB
the/DT
effect/NN
of/IN
attack/NN
from/IN
the/DT
feature/NN
that/WDT
is/VBZ
exploited/VBN
./.

Particular/JJ
features/NNS
of/IN
XML/NNP
that/WDT
can/MD
be/VB
exploited/VBN
are/VBP

XML/NNP
entities/NNS

Proprietary/JJ
extension/NN
of/IN
parser/NN
and/CC
validator/NN

Cyclic/recursive/JJ
references/NNS

Remote/JJ
access/NN

The/DT
effects/NNS
can/MD
be/VB
either/CC

DOS/NNP

Information/NN
disclosure/NN

I/PRP
do/VBP
n't/RB
think/VB
there/EX
is/VBZ
percise/JJ
definition/NN
of/IN
a/DT
"/``
bomb/NN
"/''
,/,
but/CC
it/PRP
refers/VBZ
to/TO
an/DT
attack/NN
that/WDT
is/VBZ
particularly/RB
"/``
compact/JJ
"/''
and/CC
which/WDT
"/``
expands/NNS
"/''
./.

A/DT
"/``
coercive/JJ
parsing/NN
attack/NN
"/''
exploits/VBZ
the/DT
nature/NN
of/IN
the/DT
XML/NNP
model/NN
to/TO
overwhelm/VB
the/DT
parser/NN
./.

The/DT
examples/NNS
below/IN
are/VBP
taken/VBN
from/IN
XML/NNP
Denial/NN
of/IN
Service/NN
Attacks/NNS
and/CC
Defenses/NNS
./.

Also/RB
,/,
if/IN
you/PRP
understand/VBP
french/JJ
,/,
read/VB
the/DT
excellent/JJ
magazine/NN
"/``
La/FW
security/NN
des/FW
web/NN
services/NN
"/''
./.

Example/NN
1/CD

A/DT
bomb/NN
using/VBG
entities/NNS
which/WDT
result/VBP
in/IN
a/DT
DOS/NNP
because/IN
it/PRP
exhausts/VBZ
the/DT
memory/NN

<?/C
xml/C
version/C
=/C
"1.0"/C
?>/C
<!/C
DOCTYPE/C
kaboom/C
[/C
<!/C
ENTITY/C
a/C
"aaaaaaaaaaaaaaaaaa..."/C
>/C
]/C
>/C
</C
kaboom/C
>/C
&a;&a;&a;&a;&a;&a;&a;&a;&a;.../C
<//C
kaboom/C
>/C

If/IN
you/PRP
have/VBP
50'000/CD
"/``
aaaa/NN
.../F
aaa/NN
"/''
and/CC
50'0000/CD
&a:&a;/C
.../F
&a;/C
,/,
a/DT
payload/NN
of/IN
200/CD
KB/NN
expands/VBZ
to/TO
more/JJR
than/IN
2/CD
GB/NN
in/IN
memory/NN

Example/NN
2/CD

An/DT
entity/NN
could/MD
be/VB
used/VBN
to/TO
access/VB
another/DT
file/NN
in/IN
a/DT
unauthorized/JJ
way/NN
./.

This/DT
leads/VBZ
to/TO
information/NN
disclosure/NN
./.

<?/C
xml/C
version/C
=/C
"1.0"/C
?>/C
<!/C
DOCTYPE/C
letter/C
[/C
<!/C
ENTITY/C
file/C
SYSTEM/C
"/sensitive.txt"/C
>/C
]/C
>/C
</C
tag/C
>/C
&/C
file/C
;/C
<//C
tag/C
>/C

Example/NN
3/CD

Using/VBG
the/DT
ability/NN
of/IN
certain/JJ
parser/NN
to/TO
access/VB
remote/JJ
resources/NNS
(/-LRB-
see/VB
http://www.ibm.com/developerworks/xml/library/x-tipgentity.html/URI
)/-RRB-
,/,
now/RB
go/VBP
figure/NN
what/WP
happens/VBZ
if/IN
the/DT
file/NN
bigfile.xml/URI
is/VBZ
2/CD
GB/NN
./.

This/DT
probably/RB
leads/VBZ
to/TO
a/DT
DOS/NNP
./.

<?/C
xml/C
version/C
=/C
"1.0"/C
?>/C
<!/C
DOCTYPE/C
letter/C
[/C
<!/C
ENTITY/C
file/C
SYSTEM/C
"http://www.mysite.com/bigfile.xml"/C
>/C
]/C
>/C
</C
tag/C
>/C
&/C
file/C
;/C
<//C
tag/C
>/C

Example/NN
4/CD

This/DT
recursion/NN
will/MD
lead/VB
to/TO
memory/NN
exhaust/NN
and/CC
probably/RB
a/DT
DOS/NNP
./.

<!/C
ENTITY/C
companyname/C
"Contoso Inc."/C
>/C
<!/C
ENTITY/C
divisionname/C
"/C
&companyname;/C
Web/C
Products/C
Division/C
"/C
>/C

If/IN
this/DT
is/VBZ
schoolwork/NN
,/,
then/RB
you/PRP
should/MD
also/RB
think/VB
about/IN
how/WRB
you/PRP
can/MD
protect/VB
yourself/PRP
from/IN
such/JJ
attack/NN
./.

For/IN
SQL-based/JJ
databases/NNS
:/.

Not/RB
taking/VBG
advantage/NN
of/IN
CLUSTERED/C NA
INDEXES/C NA
or/CC
choosing/VBG
the/DT
wrong/JJ
column/NN
(/-LRB-
s/NNS
)/-RRB-
to/TO
CLUSTER/C NA
./.

Not/RB
using/VBG
a/DT
SERIAL/C NA
(/C NA
autonumber/C NA
)/C NA
datatype/NN
as/IN
a/DT
PRIMARY/C NA
KEY/C NA
to/TO
join/C NA
to/TO
a/DT
FOREIGN/C NA
KEY/C NA
(/C NA
INT/C NA
)/C NA
in/IN
a/DT
parent/NN
//CC
child/NN
table/NN
relationship/NN
./.

Not/RB
UPDATING/C NA
STATISTICS/C NA
on/IN
a/DT
table/NN
when/WRB
many/JJ
records/NNS
have/VBP
been/VBN
INSERTED/C NA
or/CC
DELETED/C NA
./.

Not/RB
reorganizing/VBG
(/-LRB-
i.e./FW
unloading/VBG
,/,
droping/VBG
,/,
re-creating/VBG
,/,
loading/VBG
and/CC
re-indexing/VBG
)/-RRB-
tables/NNS
when/WRB
many/JJ
rows/NNS
have/VBP
been/VBN
inserted/VBN
or/CC
deleted/VBN
(/-LRB-
some/DT
engines/NNS
physically/RB
keep/VBP
deleted/JJ
rows/NNS
in/IN
a/DT
table/NN
with/IN
a/DT
delete/NN
flag/NN
./.
)/-RRB-

Not/RB
taking/VBG
advantage/NN
of/IN
FRAGMENT/C
ON/C
EXPRESSION/C
(/-LRB-
if/IN
supported/VBN
)/-RRB-
on/IN
large/JJ
tables/NNS
which/WDT
have/VBP
high/JJ
transaction/NN
rates/NNS
./.

Choosing/VBG
the/DT
wrong/JJ
datatype/NN
for/IN
a/DT
column/NN
!/.

Not/RB
choosing/VBG
a/DT
proper/JJ
column/NN
name/NN
./.

Not/RB
adding/VBG
new/JJ
columns/NNS
at/IN
the/DT
end/NN
of/IN
the/DT
table/NN
./.

Not/RB
creating/VBG
proper/JJ
indexes/NNS
to/TO
support/VB
frequently/RB
used/VBN
queries/NNS
./.

creating/VBG
indexes/NNS
on/IN
columns/NNS
with/IN
few/JJ
possible/JJ
values/NNS
and/CC
creating/VBG
unnecessary/JJ
indexes/NNS
./.

.../F
more/JJR
to/TO
be/VB
added/VBN
./.

the/DT
main/JJ
reason/NN
for/IN
using/VBG
autonumber/NN
for/IN
primary/JJ
and/CC
foreign/JJ
key/NN
is/VBZ
to/TO
guarantee/VB
that/IN
a/DT
parent-child/JJ
join/C
can/MD
be/VB
maintained/JJ
irregardless/JJ
of/IN
changes/NNS
in/IN
any/DT
other/JJ
columns/NNS
./.

using/VBG
a/DT
different/JJ
primary/C
key/C
,/,
like/IN
customer/NN
name/NN
or/CC
other/JJ
data/NNS
can/MD
be/VB
risky/JJ
!/.

@David/USR
:/:
I/PRP
stand/VBP
corrected/VBN
!/.

../F

its/PRP$
not/RB
necessary/JJ
to/TO
use/VB
autonumber/NN
as/IN
the/DT
primary/C
key/C
,/,
one/PRP
can/MD
still/RB
have/VB
an/DT
indexed/VBN
serial/NN
column/NN
in/IN
the/DT
parent/NN
,/,
joining/VBG
the/DT
surrogate/NN
in/IN
the/DT
child/NN
to/TO
guarantee/VB
the/DT
relation/NN
will/MD
not/RB
be/VB
severed/VBN
,/,
while/IN
having/VBG
another/DT
column/NN
as/IN
a/DT
meaningful/JJ
primary/NN
to/TO
locate/VB
the/DT
row/NN
!/.

Exception/NN
handling/NN
(/-LRB-
EH/NN
)/-RRB-
seems/VBZ
to/TO
be/VB
the/DT
current/JJ
standard/NN
,/,
and/CC
by/IN
searching/VBG
the/DT
web/NN
,/,
I/PRP
can/MD
not/RB
find/VB
any/DT
novel/JJ
ideas/NNS
or/CC
methods/NNS
that/WDT
try/VBP
to/TO
improve/VB
or/CC
replace/VB
it/PRP
(/-LRB-
well/RB
,/,
some/DT
variations/NNS
exist/VBP
,/,
but/CC
nothing/NN
novel/NN
)/-RRB-
./.

Though/IN
most/JJS
people/NNS
seem/VBP
to/TO
ignore/VB
it/PRP
or/CC
just/RB
accept/VB
it/PRP
,/,
EH/NN
has/VBZ
some/DT
huge/JJ
drawbacks/NNS
:/:
exceptions/NNS
are/VBP
invisible/JJ
to/TO
the/DT
code/NN
and/CC
it/PRP
creates/VBZ
many/JJ
,/,
many/JJ
possible/JJ
exit/NN
points/NNS
./.

Joel/NNP
on/IN
software/NN
wrote/VBD
an/DT
article/NN
about/IN
it/PRP
./.

The/DT
comparison/NN
to/TO
goto/C
fits/VBZ
perfect/JJ
,/,
it/PRP
made/VBD
me/PRP
think/VB
again/RB
about/IN
EH/NN
./.

I/PRP
try/VBP
to/TO
avoid/VB
EH/NN
and/CC
just/RB
use/VB
return/NN
values/NNS
,/,
callbacks/NNS
or/CC
whatever/WDT
fits/VBZ
the/DT
purpose/NN
./.

But/CC
when/WRB
you/PRP
have/VBP
to/TO
write/VB
reliable/JJ
code/NN
,/,
you/PRP
just/RB
ca/MD
n't/RB
ignore/VB
EH/NN
these/DT
days/NNS
:/:
It/PRP
starts/VBZ
with/IN
the/DT
new/C NA
,/,
which/WDT
may/MD
throw/VB
an/DT
exception/NN
,/,
instead/RB
of/IN
just/RB
returning/VBG
0/CD
(/-LRB-
like/IN
in/IN
the/DT
old/JJ
days/NNS
)/-RRB-
./.

This/DT
makes/VBZ
about/IN
any/DT
line/NN
of/IN
C++/NNP
code/NN
vulnerable/JJ
to/TO
an/DT
exception/NN
./.

And/CC
then/RB
more/JJR
places/NNS
in/IN
the/DT
C++/NNP
foundational/JJ
code/NN
throw/VB
exceptions/NNS
.../:
std/C NA
lib/C NA
does/VBZ
it/PRP
,/,
and/CC
so/RB
on/RB
./.

This/DT
feels/VBZ
like/IN
walking/VBG
on/IN
shaky/JJ
grounds/NNS
../.

So/RB
,/,
now/RB
we/PRP
are/VBP
forced/VBN
to/TO
take/VB
care/NN
about/IN
exceptions/NNS
!/.

But/CC
its/PRP$
hard/JJ
,/,
its/PRP$
really/RB
hard/JJ
./.

You/PRP
have/VBP
to/TO
learn/VB
to/TO
write/VB
exception/NN
safe/JJ
code/NN
,/,
and/CC
even/RB
if/IN
you/PRP
have/VBP
some/DT
experience/NN
with/IN
it/PRP
,/,
it/PRP
will/MD
still/RB
be/VB
required/VBN
to/TO
double/RB
check/VB
any/DT
single/JJ
line/NN
of/IN
code/NN
to/TO
be/VB
safe/JJ
!/.

Or/CC
you/PRP
start/VBP
to/TO
put/VB
try/catch/C
blocks/NNS
everywhere/RB
,/,
which/WDT
clutters/VBZ
the/DT
code/NN
until/IN
it/PRP
reaches/VBZ
a/DT
state/NN
of/IN
unreadability/NN
./.

EH/NN
replaced/VBD
the/DT
old/JJ
clean/JJ
deterministical/JJ
approach/NN
(/-LRB-
return/NN
values/NNS
../F
)/-RRB-
,/,
which/WDT
had/VBD
just/RB
a/DT
few/JJ
but/CC
understandable/JJ
and/CC
easily/RB
solveable/JJ
drawbacks/NNS
with/IN
an/DT
approach/NN
that/WDT
creates/VBZ
many/JJ
possible/JJ
exit/NN
points/NNS
in/IN
your/PRP$
code/NN
,/,
and/CC
if/IN
you/PRP
start/VBP
writing/VBG
code/NN
that/WDT
catches/VBZ
exceptions/NNS
(/-LRB-
what/WP
you/PRP
are/VBP
forced/VBN
to/TO
do/VB
at/IN
some/DT
point/NN
)/-RRB-
,/,
then/RB
it/PRP
even/RB
creates/VBZ
a/DT
multitude/NN
of/IN
paths/NNS
through/IN
your/PRP$
code/NN
(/-LRB-
code/NN
in/IN
the/DT
catch/C
blocks/NNS
,/,
think/VBP
about/IN
a/DT
server/NN
program/NN
where/WRB
you/PRP
need/VBP
logging/VBG
facilities/NNS
other/JJ
than/IN
std/C
::/C
cerr/C
../F
)/-RRB-
./.

EH/NN
has/VBZ
advantages/NNS
,/,
but/CC
that/DT
's/VBZ
not/RB
the/DT
point/NN
./.

My/PRP$
actual/JJ
questions/NNS
:/:
Do/VBP
you/PRP
really/RB
write/VB
exception/NN
safe/JJ
code/NN
?/.

Are/VBP
you/PRP
sure/JJ
your/PRP$
last/JJ
"/``
production/NN
ready/JJ
"/''
code/NN
is/VBZ
exception/NN
safe/NN
?/.

Can/MD
you/PRP
even/RB
be/VB
sure/JJ
,/,
that/IN
it/PRP
is/VBZ
?/.

Do/VBP
you/PRP
know/VB
and/or/CC
actually/RB
use/VBP
alternatives/NNS
that/IN
work/NN
?/.

Alright/UH
,/,
my/PRP$
fault/NN
./.

That/DT
does/VBZ
not/RB
mean/VB
I/PRP
am/VBP
confused/VBN
,/,
let/VB
me/PRP
explain/VB
:/:
In/IN
german/NNP
it/PRP
is/VBZ
sometimes/RB
(/-LRB-
inaccurately/RB
)/-RRB-
called/VBN
"/``
Strukturierte/FW
Ausnahmebehandlung/FW
"/''
(/-LRB-
translates/NNS
to/TO
"/``
structured/JJ
exception/NN
handling/VBG
"/''
)/-RRB-
to/TO
avoid/VB
confusion/NN
with/IN
what/WP
is/VBZ
usually/RB
called/VBN
"/``
error/NN
handling/VBG
"/''
./.

The/DT
term/NN
"/``
exception/NN
handling/VBG
"/''
on/IN
its/PRP$
own/JJ
is/VBZ
not/RB
very/RB
precise/JJ
,/,
it/PRP
could/MD
mean/VB
anything/NN
;)/UH

@Thomas/USR
Padron-McCarthy/USR
:/:
how/WRB
else/RB
would/MD
you/PRP
abbreviate/VB
_E_xception_H_andling/C NA
?/.

My/PRP$
question/NN
is/VBZ
long/JJ
,/,
and/CC
I/PRP
did/VBD
not/RB
want/VB
to/TO
discourage/VB
people/NNS
from/IN
reading/VBG
it/PRP
,/,
so/IN
I/PRP
abbreviated/VBD
the/DT
term/NN
that/WDT
was/VBD
used/VBN
most/JJS
of/IN
the/DT
time/NN
../.

well/RB
,/,
I/PRP
used/VBD
a/DT
wrong/JJ
term/NN
first/RB
,/,
but/CC
then/RB
../.

hey/UH
,/,
why/WRB
do/VBP
I/PRP
answer/VB
this/DT
anyway/RB
,/,
you/PRP
're/VBP
just/RB
trying/VBG
to/TO
confuse/VB
me/PRP
,/,
are/VBP
n't/RB
you/PRP
?/.
:D/UH

@David/USR
Thornley/USR
:/:
yes/UH
,/,
true/JJ
,/,
return-error-code/C
and/CC
exception/NN
handling/VBG
worked/VBD
for/IN
years/NNS
,/,
whats/VBZ
next/JJ
?/.

Thanks/VBZ
a/DT
lot/NN
!/.

I/PRP
still/RB
hoped/VBD
for/IN
something/NN
different/JJ
./.

But/CC
I/PRP
accept/VBP
your/PRP$
answer/NN
for/IN
sticking/VBG
to/TO
C++/NNP
and/CC
for/IN
your/PRP$
detailed/JJ
explanation/NN
./.

You/PRP
even/RB
disproved/VBD
my/PRP$
"/``
This/DT
makes/VBZ
about/IN
any/DT
line/NN
of/IN
C++/NNP
code/NN
vulnerable/JJ
to/TO
an/DT
exception/NN
"/''
-/SYM
offense/NN
./.

This/DT
line/NN
by/IN
line/NN
analysis/NN
makes/VBZ
sense/NN
after/IN
all/DT
.../.

I/PRP
have/VBP
to/TO
think/VB
about/IN
it/PRP
./.

Just/RB
writing/VBG
down/RP
an/DT
idea/NN
,/,
before/IN
I/PRP
'll/MD
forget/VB
it/PRP
:/:
would/MD
n't/RB
it/PRP
then/RB
be/VB
nice/JJ
and/CC
comfortable/JJ
to/TO
annotate/VB
each/DT
single/JJ
line/NN
of/IN
code/NN
with/IN
1/LS
)/-RRB-
the/DT
guarantee/NN
level/NN
and/CC
2/LS
)/-RRB-
a/DT
term/NN
of/IN
"/``
what/WP
"/''
to/TO
do/VB
if/IN
a/DT
given/VBN
exception/NN
occurs/VBZ
in/IN
that/DT
given/VBN
line/NN
?/.

Maybe/RB
like/IN
a/DT
second/JJ
layer/NN
of/IN
code/NN
,/,
that/WDT
will/MD
be/VB
executed/VBN
whenever/WRB
the/DT
program/NN
leaves/VBZ
the/DT
"/``
usual/JJ
code/NN
path/NN
"/''
./.

This/DT
would/MD
provide/VB
a/DT
complete/JJ
separation/NN
of/IN
code/NN
and/CC
error/NN
handling/VBG
,/,
and/CC
in/IN
practice/NN
one/CD
could/MD
write/VB
code/NN
,/,
and/CC
write/VB
error/NN
handling/VBG
in/IN
a/DT
second/JJ
step/NN
(/-LRB-
without/IN
intermingling/VBG
them/PRP
too/RB
much/RB
)/-RRB-
./.

.../F
this/DT
separation/NN
of/IN
code/NN
and/CC
error/NN
handling/VBG
is/VBZ
somehow/RB
similar/JJ
to/TO
what/WP
EH/NN
promises/NNS
(/-LRB-
besides/IN
other/JJ
things/NNS
,/,
I/PRP
can/MD
imagine/VB
that/IN
the/DT
initial/JJ
IDEA/NN
of/IN
it/PRP
was/VBD
to/TO
remove/VB
the/DT
burden/NN
of/IN
error/NN
handling/VBG
from/IN
application/NN
code/NN
)/-RRB-
./.

Maybe/RB
the/DT
removal/NN
should/MD
be/VB
more/RBR
explicit/JJ
-/:
line-by-line/NN
in/IN
a/DT
second/JJ
code/NN
layer/NN
or/CC
something/NN
similar/JJ
./.

Well/RB
,/,
forget/VB
text/NN
editors/NNS
then/RB
,/,
but/CC
the/DT
idea/NN
is/VBZ
interesting/JJ
.../.

@David/USR
Thornley/USR
:/:
I/PRP
know/VBP
exception/NN
safety/NN
(/-LRB-
at/IN
least/JJS
the/DT
basics/NNS
and/CC
some/DT
practice/NN
applying/VBG
it/PRP
)/-RRB-
./.

But/CC
I/PRP
still/RB
do/VBP
not/RB
like/VB
it/PRP
./.

../F
one/CD
more/JJR
note/NN
:/:
when/WRB
exception/NN
handling/VBG
was/VBD
meant/VBN
as/IN
a/DT
replacement/NN
for/IN
error-return-codes/NN
,/,
then/RB
it/PRP
was/VBD
meant/VBN
to/TO
(/-LRB-
plainly/RB
speaking/VBG
)/-RRB-
remove/VB
error-handling/JJ
code/NN
from/IN
application/NN
code/NN
./.

So/RB
,/,
it/PRP
was/VBD
(/-LRB-
also/RB
plainly/RB
speaking/VBG
)/-RRB-
invented/VBD
to/TO
separate/VB
error-handling/JJ
code/NN
from/IN
application/NN
code/NN
./.

So/RB
,/,
maybe/RB
the/DT
current/JJ
concept/NN
of/IN
EH/NN
works/VBZ
and/CC
is/VBZ
matured/VBN
,/,
but/CC
there/EX
could/MD
be/VB
completely/RB
different/JJ
solutions/NNS
(/-LRB-
that/WDT
are/VBP
still/RB
to/TO
be/VB
developed/VBN
)/-RRB-
./.

@Mehrdad/USR
:/:
"/``
it/PRP
forces/VBZ
you/PRP
to/TO
make/VB
a/DT
wrapper/NN
for/IN
something/NN
you/PRP
may/MD
not/RB
need/VB
a/DT
wrapper/NN
for/IN
"/''
-/--
when/WRB
coding/VBG
in/IN
RAII/NNP
fashion/NN
,/,
you/PRP
will/MD
not/RB
need/VB
any/DT
kind/NN
of/IN
wrappers/NNS
:/:
the/DT
ressource/NN
is/VBZ
the/DT
object/NN
,/,
and/CC
objects/NNS
lifetime/NN
is/VBZ
resource/NN
lifetime/NN
./.

However/RB
,/,
me/PRP
coming/VBG
from/IN
a/DT
C++/NNP
world/NN
,/,
I/PRP
currently/RB
struggle/VBP
with/IN
a/DT
Java/NNP
project/NN
./.

Compared/VBN
to/TO
RAII/NNP
in/IN
C++/NNP
,/,
that/IN
"/``
manual/JJ
resource/NN
management/NN
"/''
in/IN
Java/NNP
IS/VBZ
A/DT
MESS/NN
!/.

My/PRP$
Opinion/NN
,/,
but/CC
Java/NNP
long/RB
ago/RB
traded/VBN
"/``
automatic/JJ
memory/NN
mgmt/NN
"/''
for/IN
"/``
automatic/JJ
resource/NN
mgmt/NN
"/''
./.

His/PRP$
book/NN
"/``
Exceptional/JJ
C++/NNP
"/''
is/VBZ
also/RB
a/DT
good/JJ
read/NN
./.

But/CC
I/PRP
still/RB
try/VBP
to/TO
question/VB
the/DT
concept/NN
of/IN
EH/NN
.../.

Please/VB
do/VBP
n't/RB
get/VB
me/PRP
wrong/JJ
,/,
I/PRP
am/VBP
(/-LRB-
or/CC
am/RB
trying/VBG
to/TO
)/-RRB-
questioning/VBG
EH/NN
./.

And/CC
especially/RB
C++/NNP
EH/NN
./.

And/CC
I/PRP
am/VBP
searching/VBG
for/IN
alternatives/NNS
./.

Maybe/RB
I/PRP
have/VBP
to/TO
accept/VB
it/PRP
(/-LRB-
and/CC
I/PRP
will/MD
if/IN
its/PRP$
the/DT
only/JJ
way/NN
)/-RRB-
,/,
but/CC
I/PRP
think/VBP
there/EX
could/MD
be/VB
better/JJR
alternatives/NNS
./.

Its/PRP$
not/RB
that/IN
I/PRP
think/VBP
that/IN
the/DT
concept/NN
is/VBZ
new/JJ
,/,
but/CC
yes/RB
,/,
I/PRP
think/VBP
it/PRP
can/MD
be/VB
more/RBR
dangerous/JJ
than/IN
explicit/JJ
error/NN
handling/NN
with/IN
return/NN
codes/NNS
.../.

Ok/UH
,/,
perfect/JJ
,/,
I/PRP
will/MD
just/RB
use/VB
EH/NN
and/CC
error-codes/NNS
,/,
and/CC
live/VBP
with/IN
it/PRP
./.

I/PRP
'm/VBP
a/DT
nitwit/NN
,/,
I/PRP
should/MD
have/VB
come/VBN
to/TO
that/DT
solution/NN
on/IN
my/PRP$
own/JJ
!/.
;)/UH

You/PRP
just/RB
ca/MD
n't/RB
ignore/VB
exceptions/NNS
(/-LRB-
and/CC
not/RB
write/VB
handling/NN
code/NN
)/-RRB-
,/,
neither/CC
in/IN
C++/NNP
nor/CC
in/IN
managed/VBN
code/NN
./.

It/PRP
will/MD
be/VB
unsafe/JJ
,/,
and/CC
it/PRP
will/MD
not/RB
well-behave/JJ
./.

Except/IN
for/IN
maybe/RB
some/DT
toy/NN
code/NN
./.

You/PRP
wrote/VBD
"/''
[/-LRB-
../F
]/-RRB-
if/IN
you/PRP
do/VBP
n't/RB
write/VB
any/DT
handling/NN
code/NN
-/--
the/DT
result/NN
is/VBZ
perfectly/RB
safe/JJ
and/CC
well-behaved/JJ
[/-LRB-
../F
]/-RRB-
"/''
./.

So/RB
,/,
this/DT
sounds/VBZ
like/IN
"/``
you/PRP
can/MD
write/VB
perfectly/RB
safe/JJ
and/CC
well-behaved/JJ
code/NN
even/RB
if/IN
you/PRP
ignore/VBP
exceptions/NNS
"/''
./.

not/RB
handling/VBG
exceptions/NNS
=/SYM
ignoring/VBG
them/PRP
./.

Of/IN
course/NN
its/PRP$
similar/JJ
situation/NN
with/IN
error/NN
codes/NNS
./.

But/CC
that/DT
's/VBZ
not/RB
the/DT
point/NN
./.

You/PRP
just/RB
wrote/VBD
that/IN
ignoring/VBG
exceptions/NNS
results/NNS
is/VBZ
safe/JJ
and/CC
well-behaved/JJ
code/NN
;-)/UH

But/CC
yes/UH
,/,
I/PRP
understand/VBP
your/PRP$
intention/NN
./.

If/IN
you/PRP
ignore/VBP
exceptions/NNS
in/IN
application/NN
code/NN
,/,
the/DT
program/NN
may/MD
still/RB
NOT/RB
behave/VB
well/RB
when/WRB
external/JJ
ressources/NNS
are/VBP
involved/VBN
./.

True/JJ
,/,
the/DT
OS/NN
cares/VBZ
about/IN
closing/NN
file/NN
handles/VBZ
,/,
locks/NNS
,/,
sockets/NNS
and/CC
so/RB
on/RB
./.

But/CC
not/RB
everything/NN
is/VBZ
handled/VBN
,/,
e.g./FW
it/PRP
may/MD
leave/VB
unnecessary/JJ
files/NNS
or/CC
damage/NN
files/NNS
while/IN
writing/VBG
to/TO
them/PRP
and/CC
so/RB
on/RB
./.

If/IN
you/PRP
ignore/VBP
exceptions/NNS
,/,
you/PRP
have/VBP
a/DT
problem/NN
in/IN
Java/NNP
,/,
in/IN
C++/NNP
you/PRP
can/MD
work/VB
with/IN
RAII/NNP
(/-LRB-
but/CC
when/WRB
you/PRP
use/VBP
RAII/NNP
technique/NN
,/,
you/PRP
most/RBS
probably/RB
use/VBP
them/PRP
because/IN
you/PRP
care/VBP
about/IN
exceptions/NNS
)/-RRB-
.../.

I/PRP
could/MD
not/RB
possibly/RB
disagree/VB
more/JJR
with/IN
point/NN
one/CD
./.

Databases/NNS
are/VBP
for/IN
persistence/NN
,/,
they/PRP
are/VBP
not/RB
for/IN
inter-process/JJ
communication/NN
./.

There/EX
are/VBP
almost/RB
always/RB
better/JJR
solutions/NNS
to/TO
that/DT
problem/NN
./.

Unless/IN
there/EX
is/VBZ
an/DT
explicit/JJ
requirement/NN
for/IN
it/PRP
,/,
you/PRP
absolutely/RB
SHOULD/MD
treat/VB
the/DT
database/NN
as/IN
if/IN
nobody/NN
except/IN
for/IN
your/PRP$
application/NN
will/MD
ever/RB
use/VB
it/PRP
./.

Even/RB
if/IN
there/EX
IS/VBZ
an/DT
explicit/JJ
requirement/NN
,/,
do/VBP
some/DT
user/NN
story/NN
and/CC
root/NN
cause/NN
analysis/NN
on/IN
it/PRP
and/CC
you/PRP
will/MD
quite/RB
often/RB
discover/VBP
a/DT
much/RB
better/JJR
way/NN
of/IN
filling/VBG
the/DT
requestor/NN
's/POS
intent/NN
./.

Then/RB
again/RB
,/,
I/PRP
do/VBP
work/NN
at/IN
a/DT
company/NN
where/WRB
the/DT
phrase/NN
CQRS/NN
is/VBZ
somewhat/RB
common/JJ

Wow/UH
,/,
really/RB
?/.

Let/VBP
's/PRP
be/VB
even/RB
snippier/JJR
next/JJ
time/NN
!/.

Sounds/VBZ
like/IN
you/PRP
already/RB
have/VB
a/DT
requirement/NN
to/TO
your/PRP$
vendors/NNS
that/IN
their/PRP$
systems/NNS
be/VB
accessible/JJ
for/IN
bulk/JJ
import/NN
operations/NNS
,/,
would/MD
n't/RB
it/PRP
be/VB
better/JJR
if/IN
this/DT
was/VBD
stated/VBN
explicitly/RB
than/IN
just/RB
by/IN
happenstance/NN
?/.

90/CD
%/SYM
of/IN
the/DT
time/NN
if/IN
the/DT
two/CD
of/IN
you/PRP
analyze/VBP
this/DT
requirement/NN
,/,
you/PRP
will/MD
realize/VB
that/IN
there/EX
are/VBP
a/DT
variety/NN
of/IN
ways/NNS
they/PRP
can/MD
deliver/VB
a/DT
product/NN
that/WDT
achieves/VBZ
your/PRP$
goals/NNS
./.

As/IN
for/IN
audit/NN
trails/VBZ
-/:
that/IN
along/IN
with/IN
data/NNS
mining/NN
are/VBP
one/CD
of/IN
the/DT
origins/NNS
of/IN
the/DT
discipline/NN
of/IN
cqrs/NN
,/,
in/IN
its/PRP$
event/NN
sourcing/VBG
incarnation/NN
it/PRP
leaves/VBZ
perfect/JJ
audit/NN
trails/VBZ
./.

Precisely/RB
because/IN
of/IN
round/JJ
errors/NNS
,/,
you/PRP
should/MD
not/RB
use/VB
comparison/NN
of/IN
'/``
exact/JJ
'/''
values/NNS
for/IN
logical/JJ
operations/NNS
./.

In/IN
your/PRP$
specific/JJ
case/NN
of/IN
a/DT
position/NN
on/IN
a/DT
visual/JJ
display/NN
,/,
it/PRP
ca/MD
n't/RB
possibly/RB
matter/VB
if/IN
the/DT
position/NN
is/VBZ
0.0/CD
or/CC
0.0000000003/CD
-/--
the/DT
difference/NN
is/VBZ
invisible/JJ
to/TO
the/DT
eye/NN
./.

So/RB
your/PRP$
logic/NN
should/MD
be/VB
something/NN
like/IN
:/.

#/C
define/C
VISIBLE_SHIFT/C
0.0001/C
///CCM
for/IN|CCM
example/NN|CCM
if/C
(/C
fabs/C
(/C
theView/C
./C
frame/C
./C
origin/C
./C
x/C
)/C
</C
VISIBLE_SHIFT/C
)/C
{/C
/*/CCM
.../F|CCM
*//CCM
}/C

[/C
EDIT/VB
,/,
comparing/VBG
to/TO
'/``
right/JJ
answer/NN
'/''
]/-RRB-
The/DT
'/``
right/JJ
answer/NN
'/''
above/RB
says/VBZ
:/:
K/C NA
is/VBZ
a/DT
constant/NN
you/PRP
choose/VBP
such/JJ
that/IN
the/DT
accumulated/VBN
error/NN
of/IN
your/PRP$
computations/NNS
is/VBZ
definitely/RB
bounded/VBN
by/IN
K/C NA
units/NNS
in/IN
the/DT
last/JJ
place/NN
(/-LRB-
and/CC
if/IN
you/PRP
're/VBP
not/RB
sure/JJ
you/PRP
got/VBD
the/DT
error/NN
bound/VBN
calculation/NN
right/NN
,/,
make/VB
K/C NA
a/DT
few/JJ
times/NNS
bigger/JJR
than/IN
what/WP
your/PRP$
calculations/NNS
say/VBP
it/PRP
should/MD
be/VB
)/-RRB-

So/IN
we/PRP
need/VBP
K/C NA
./.

If/IN
getting/VBG
K/C NA
is/VBZ
more/RBR
difficult/JJ
,/,
less/RBR
intuitive/JJ
than/IN
selecting/VBG
my/PRP$
VISIBLE_SHIFT/C NA
then/RB
you/PRP
'll/MD
decide/VB
what/WP
works/VBZ
for/IN
you/PRP
./.

To/TO
find/VB
K/C NA
we/PRP
are/VBP
going/VBG
to/TO
write/VB
a/DT
test/NN
program/NN
that/WDT
looks/VBZ
at/IN
a/DT
bunch/NN
of/IN
K/C NA
values/NNS
so/IN
we/PRP
can/MD
see/VB
how/WRB
it/PRP
behaves/VBZ
./.

Ought/JJ
to/TO
be/VB
obvious/JJ
how/WRB
to/TO
choose/VB
K/C NA
,/,
if/IN
the/DT
'/``
right/JJ
answer/NN
'/''
is/VBZ
usable/JJ
./.

No/UH
?/.

We/PRP
are/VBP
going/VBG
to/TO
use/VB.

if/C
(/C
fabs/C
(/C
x/C
-/C
y/C
)/C
</C
K/C
*/C
DBL_EPSILON/C
*/C
fabs/C
(/C
x/C
+/C
y/C
)/C
||/C
fabs/C
(/C
x/C
-/C
y/C
)/C
</C
DBL_MIN/C
)/C

Let/VB
's/POS
just/JJ
try/NN
all/DT
values/NNS
of/IN
K/C NA
:/.

#/C
include/C
</C
math.h/C
>/C

#/C
include/C
</C
float.h/C
>/C

#/C
include/C
</C
stdio.h/C
>/C

void/C
main/C
(/C
void/C
)/C
{/C
double/C
x/C
=/C
1e-13/C
;/C
double/C
y/C
=/C
0.0/C
;/C
double/C
K/C
=/C
1e22/C
;/C
int/C
i/C
=/C
0/C
;/C
for/C
(/C
;/C
i/C
</C
32/C
;/C
i/C
++/C
,/C
K/C
=/C
K/C
10.0/C
)/C
{/C
printf/C
(/C
"K:%40.16lf -> "/C
,/C
K/C
)/C
;/C
if/C
(/C
fabs/C
(/C
x/C
-/C
y/C
)/C
</C
K/C
*/C
DBL_EPSILON/C
*/C
fabs/C
(/C
x/C
+/C
y/C
)/C
||/C
fabs/C
(/C
x/C
-/C
y/C
)/C
</C
DBL_MIN/C
)/C
printf/C
(/C
"YES\n"/C
)/C
;/C
else/C
printf/C
(/C
"NO\n"/C
)/C
;/C
}/C
}/C

ebg@ebg$/C
gcc/C
-/C
o/C
test/C
test.c/C

ebg@ebg$/C
./test/C

K/C
:10000000000000000000000.0000000000000000/C
->/C
YES/C

K/C
:/C
1000000000000000000000.0000000000000000/C
->/C
YES/C

K/C
:/C
100000000000000000000.0000000000000000/C
->/C
YES/C

K/C
:/C
10000000000000000000.0000000000000000/C
->/C
YES/C

K/C
:/C
1000000000000000000.0000000000000000/C
->/C
YES/C

K/C
:/C
100000000000000000.0000000000000000/C
->/C
YES/C

K/C
:/C
10000000000000000.0000000000000000/C
->/C
YES/C

K/C
:/C
1000000000000000.0000000000000000/C
->/C
NO/C

K/C
:/C
100000000000000.0000000000000000/C
->/C
NO/C

K/C
:/C
10000000000000.0000000000000000/C
->/C
NO/C

K/C
:/C
1000000000000.0000000000000000/C
->/C
NO/C

K/C
:/C
100000000000.0000000000000000/C
->/C
NO/C

K/C
:/C
10000000000.0000000000000000/C
->/C
NO/C

K/C
:/C
1000000000.0000000000000000/C
->/C
NO/C

K/C
:/C
100000000.0000000000000000/C
->/C
NO/C

K/C
:/C
10000000.0000000000000000/C
->/C
NO/C

K/C
:/C
1000000.0000000000000000/C
->/C
NO/C

K/C
:/C
100000.0000000000000000/C
->/C
NO/C

K/C
:/C
10000.0000000000000000/C
->/C
NO/C

K/C
:/C
1000.0000000000000000/C
->/C
NO/C

K/C
:/C
100.0000000000000000/C
->/C
NO/C

K/C
:/C
10.0000000000000000/C
->/C
NO/C

K/C
:/C
1.0000000000000000/C
->/C
NO/C

K/C
:/C
0.1000000000000000/C
->/C
NO/C

K/C
:/C
0.0100000000000000/C
->/C
NO/C

K/C
:/C
0.0010000000000000/C
->/C
NO/C

K/C
:/C
0.0001000000000000/C
->/C
NO/C

K/C
:/C
0.0000100000000000/C
->/C
NO/C

K/C
:/C
0.0000010000000000/C
->/C
NO/C

K/C
:/C
0.0000001000000000/C
->/C
NO/C

K/C
:/C
0.0000000100000000/C
->/C
NO/C

K/C
:/C
0.0000000010000000/C
->/C
NO/C

Ah/UH
,/,
so/IN
K/NN
should/MD
be/VB
1e16/CD
or/CC
larger/JJR
if/IN
I/PRP
want/VBP
1e-13/CD
to/TO
be/VB
'/``
zero/VB
'/''
./.

So/RB
,/,
I/PRP
'd/MD
say/VB
you/PRP
have/VBP
two/CD
options/NNS
:/.

Do/VBP
a/DT
simple/JJ
epsilon/NN
computation/NN
using/VBG
your/PRP$
engineering/NN
judgement/NN
for/IN
the/DT
value/NN
of/IN
'/``
epsilon/NN
'/''
,/,
as/IN
I/PRP
've/VBP
suggested/VBN
./.

If/IN
you/PRP
are/VBP
doing/VBG
graphics/NNS
and/CC
'/``
zero/VB
'/''
is/VBZ
meant/VBN
to/TO
be/VB
a/DT
'/``
visible/JJ
change/NN
'/''
than/IN
examine/VB
your/PRP$
visual/JJ
assets/NNS
(/-LRB-
images/NNS
,/,
etc/FW
)/-RRB-
and/CC
judge/NN
what/WDT
epsilon/NN
can/MD
be/VB
./.

Do/VBP
n't/RB
attempt/VB
any/DT
floating/JJ
point/NN
computations/NNS
until/IN
you/PRP
've/VBP
read/VBN
the/DT
non-cargo-cult/JJ
answer/NN
's/POS
reference/NN
(/-LRB-
and/CC
gotten/VBN
your/PRP$
Ph.D/NN
in/IN
the/DT
process/NN
)/-RRB-
and/CC
then/RB
use/VB
your/PRP$
non-intuitive/JJ
judgement/NN
to/TO
select/JJ
K/C NA
./.

In/IN
spite/NN
of/IN
the/DT
down/JJ
votes/NNS
,/,
the/DT
up-voted/JJ
comment/NN
and/CC
the/DT
fancy/JJ
,/,
wordy/JJ
answer/NN
'/``
if/C
(/C
fabs/C
(/C
x/C
-/C
y/C
)/C
</C
K/C
*/C
FLT_EPSILON/C
*/C
fabs/C
(/C
x/C
+/C
y/C
)/C
)/C
'/C
,/,
I/PRP
still/RB
got/VBD
it/PRP
right/RB
./.

Note/VB
the/DT
'/''
///CCM
for/IN|CCM
example/NN|CCM
'/''
code/NN
comment/NN
when/WRB
setting/VBG
the/DT
'/``
VISIBLE_SHIFT/C
'/''
parameter/NN
./.

@Nikhil/USR
:/:
Stored/JJ
procedures/NNS
themselves/PRP
do/VBP
little/JJ
to/TO
protect/VB
against/IN
SQL/NNP
injection/NN
./.

Unless/IN
you/PRP
use/VBP
parametrized/JJ
queries/NNS
to/TO
run/VB
the/DT
stored/JJ
procedure/NN
,/,
an/DT
attacker/NN
can/MD
still/RB
inject/VB
malicious/JJ
SQL/NNP
into/IN
a/DT
query/NN
./.

The/DT
only/JJ
real/JJ
benefit/NN
that/IN
you/PRP
've/VBP
cited/VBN
is/VBZ
that/IN
it/PRP
hides/VBZ
the/DT
database/NN
structure/NN
,/,
but/CC
that/DT
does/VBZ
n't/RB
mean/VB
that/IN
attacks/NNS
are/VBP
very/RB
much/RB
more/RBR
difficult/JJ
./.

The/DT
rest/NN
of/IN
the/DT
benefits/NNS
you/PRP
claim/VBP
are/VBP
just/RB
so/RB
much/JJ
nonsense/NN
./.

@Nikhil/USR
:/:
Then/RB
I/PRP
apologize/VBP
for/IN
not/RB
being/VBG
clearer/JJR
:/:
Stored/JJ
procedures/NNS
are/VBP
still/RB
vulnerable/JJ
to/TO
the/DT
same/JJ
kinds/NNS
of/IN
injection/NN
by/IN
a/DT
knowledgable/JJ
attacker/NN
that/IN
a/DT
plain/JJ
query/NN
is/VBZ
./.

Types/NNS
be/VB
damned/RB
if/IN
you/PRP
're/VBP
concatenating/VBG
strings/NNS
to/TO
make/VB
the/DT
query/NN
./.

The/DT
only/RB
sure/JJ
protection/NN
is/VBZ
a/DT
parametrized/JJ
call/NN
to/TO
the/DT
SP/NN
(/-LRB-
by/IN
which/WDT
it/PRP
is/VBZ
technically/RB
infeasible/JJ
to/TO
inject/VB
SQL/NNP
)/-RRB-
,/,
negating/VBG
the/DT
whole/JJ
argument/NN
completely/RB
./.

I/PRP
contend/VBP
that/IN
it/PRP
is/VBZ
still/RB
possible/JJ
for/IN
an/DT
attacker/NN
to/TO
pass/VB
dummy/JJ
arguments/NNS
to/TO
the/DT
SP/NN
if/IN
you/PRP
do/VBP
n't/RB
use/VB
a/DT
parametrized/JJ
call/NN
,/,
and/CC
in/IN
doing/VBG
so/RB
gain/VB
an/DT
injection/NN
vector/NN
./.

SPs/NNS
themselves/PRP
do/VBP
not/RB
protect/VB
you/PRP
./.

@Nikhil/USR
:/:
When/WRB
you/PRP
use/VBP
prepared/JJ
queries/NNS
from/IN
,/,
e.g./FW
,/,
PHP/NNP
,/,
you/PRP
often/RB
have/VBP
the/DT
opportunity/NN
to/TO
pass/VB
parameters/NNS
to/TO
the/DT
prepared/JJ
query/NN
when/WRB
you/PRP
execute/VBP
it/PRP
./.

For/IN
example/NN
,/,
call/NN
mysqli_prepare/C
(/C
$/C
query/C
)/C
where/WRB
$/C NA
query/C NA
contains/VBZ
one/CD
or/CC
more/JJR
?/.

in/IN
place/NN
of/IN
parameters/NNS
,/,
then/RB
call/VB
mysqli_execute/C NA
(/C NA
)/C NA
with/IN
an/DT
array/NN
containing/VBG
the/DT
values/NNS
and/CC
variables/NNS
to/TO
be/VB
passed/VBN
to/TO
the/DT
query/NN
./.

Because/IN
the/DT
query/NN
is/VBZ
compiled/VBN
by/IN
the/DT
DB/NN
driver/NN
,/,
and/CC
the/DT
driver/NN
reads/VBZ
the/DT
data/NNS
directly/RB
from/IN
the/DT
passed/VBN
values/NNS
,/,
there/EX
's/VBZ
never/RB
any/DT
opportunity/NN
for/IN
an/DT
SQL/NNP
injection/NN
to/TO
take/VB
place/NN
./.

This/DT
assumes/VBZ
that/IN
no/DT
portion/NN
of/IN
$/C NA
query/C NA
comes/VBZ
from/IN
users/NNS
./.

@Nikhil/USR
:/:
To/TO
be/VB
clear/JJ
,/,
I/PRP
have/VBP
not/RB
once/RB
been/VBN
talking/VBG
about/IN
what/WP
goes/VBZ
on/IN
inside/IN
the/DT
SP/NN
,/,
as/IN
it/PRP
's/VBZ
quite/RB
irrelevant/JJ
to/TO
SQL/NNP
injection/NN
concerns/NNS
(/-LRB-
unless/IN
,/,
as/IN
you/PRP
point/VBP
out/RP
,/,
it/PRP
builds/VBZ
a/DT
dynamic/JJ
query/NN
from/IN
input/NN
)/-RRB-
./.

I/PRP
've/VBP
only/RB
been/VBN
speaking/VBG
off/RP
the/DT
call/NN
site/NN
,/,
where/WRB
the/DT
query/NN
is/VBZ
initiated/VBN
from/IN
PHP/NNP
./.

@Nikhil/USR
:/:
Yes/UH
,/,
that/DT
's/VBZ
what/WP
I/PRP
was/VBD
trying/VBG
to/TO
say/VB
:/:
That/IN
the/DT
SP/NN
should/MD
be/VB
called/VBN
with/IN
a/DT
prepared/JJ
query/NN
./.

But/CC
your/PRP$
point/NN
about/IN
disabling/VBG
access/NN
is/VBZ
a/DT
complete/JJ
non-issue/NN
as/RB
far/RB
as/IN
prepared/JJ
statements/NNS
are/VBP
concerned/VBN
./.

Again/RB
,/,
it/PRP
is/VBZ
impossible/JJ
to/TO
inject/VB
SQL/NNP
into/IN
a/DT
parametric/JJ
query/NN
,/,
completely/RB
obviating/VBG
the/DT
need/NN
to/TO
set/VB
up/RP
distinct/JJ
permissions/NNS
./.

Parametric/NN
queries/NNS
eliminate/VBP
concerns/NNS
about/IN
injection/NN
;/:
it/PRP
's/VBZ
not/RB
merely/RB
protection/NN
./.

@Cees/USR
the/DT
linked/JJ
case/NN
has/VBZ
nothing/NN
to/TO
do/VB
with/IN
mysql/C NA
*/C NA
_real_escape_string/C NA
vs/CC
parameterized/JJ
queries/NNS
,/,
it/PRP
's/VBZ
got/VBD
to/TO
do/VB
with/IN
the/DT
OP/NN
not/RB
understanding/VBG
when/WRB
//CC
where/WRB
one/PRP
should/MD
escape/VB
./.

Really/RB
,/,
SQL/NNP
was/VBD
made/VBN
for/IN
humans/NNS
,/,
so/IN
it/PRP
sucks/VBZ
anyway/RB
when/WRB
used/VBN
to/TO
talk/VB
to/TO
a/DT
machine/NN
,/,
so/RB
there/RB
really/RB
should/MD
n't/RB
be/VB
any/DT
arguing/VBG
about/IN
"/``
which/WDT
is/VBZ
more/RBR
secure/JJ
"/''
,/,
because/IN
if/IN
you/PRP
use/VBP
SQL/NNP
with/IN
user/NN
input/NN
(/-LRB-
no/DT
matter/NN
if/IN
parameterized/JJ
or/CC
escaped/JJ
)/-RRB-
,/,
you/PRP
probably/RB
do/VBP
n't/RB
care/VB
that/DT
much/RB
about/IN
real/JJ
security/NN
./.

The/DT
answer/NN
clearly/RB
states/VBZ
that/IN
it/PRP
wo/MD
n't/RB
work/VB
that/DT
way/NN
with/IN
integer/NN
values/NNS
,/,
the/DT
reason/NN
being/VBG
that/IN
bin2hex/C NA
converts/VBZ
the/DT
passed/VBN
value/NN
to/TO
a/DT
string/NN
(/-LRB-
and/CC
thus/RB
bin2hex/C NA
(/C NA
0/C NA
)/C NA
is/VBZ
0x30/CD
,/,
and/CC
not/RB
0x03/CD
)/-RRB-
-/--
that/DT
's/VBZ
probably/RB
the/DT
part/NN
which/WDT
confuses/VBZ
you/PRP
./.

If/IN
you/PRP
follow/VBP
that/IN
,/,
it/PRP
works/VBZ
perfectly/RB
(/-LRB-
at/IN
least/JJS
on/IN
my/PRP$
site/NN
,/,
tested/VBN
with/IN
4/CD
different/JJ
mysql/NNP
versions/NNS
on/IN
debian/NN
machines/NNS
,/,
5.1.x/CD
to/TO
5.6.x/CD
)/-RRB-
./.

After/IN
all/DT
,/,
hexadecimal/NN
is/VBZ
only/RB
the/DT
way/NN
of/IN
representation/NN
,/,
not/RB
the/DT
value/NN
;)/UH

@YourCommonSense/USR
hex/C NA
+/CC
unhex/C NA
can/MD
be/VB
implemented/VBN
by/IN
fixed/JJ
entry/NN
size/NN
tables/NNS
(/-LRB-
even/RB
for/IN
utf8/NNP
)/-RRB-
,/,
which/WDT
can/MD
even/RB
be/VB
parallelized/VBN
easily/RB
-/--
the/DT
same/JJ
is/VBZ
not/RB
true/JJ
for/IN
mysql_real_escape_string/C NA
,/,
as/IN
1/CD
byte/NN
does/VBZ
not/RB
always/RB
translate/VB
to/TO
2/CD
bytes/NNS
in/IN
the/DT
output/NN
(/-LRB-
and/CC
the/DT
other/JJ
way/NN
around/IN
with/IN
unhex/C NA
)/-RRB-
,/,
so/RB
one/PRP
could/MD
argument/NN
that/IN
the/DT
hex/C NA
solution/NN
can/MD
be/VB
potentially/RB
faster/JJR
-/--
in/IN
reality/NN
I/PRP
also/RB
think/VBP
there/EX
is/VBZ
no/DT
reason/NN
to/TO
prefer/VB
one/CD
solution/NN
over/IN
the/DT
other/JJ
,/,
but/CC
this/DT
one/CD
is/VBZ
certainly/RB
more/RBR
uncommon/JJ
,/,
and/CC
most/JJS
developers/NNS
always/RB
strife/VBP
to/TO
broaden/VB
their/PRP$
horizon/NN
;)/UH

@YourCommonSense/USR
read/VB
"/''
(/-LRB-
fixed/JJ
entry/NN
size/NN
)/-RRB-
-/SYM
tables/NNS
"/''
-/:
each/DT
entry/NN
is/VBZ
a/DT
fixed/JJ
size/NN
./.

And/CC
it/PRP
's/VBZ
about/IN
transforming/VBG
uint8_t/C NA
to/TO
uint16_t/C NA
,/,
which/WDT
can/MD
easily/RB
be/VB
parallelized/VBN
using/VBG
(/-LRB-
fixed/JJ
entry/NN
size/NN
)/-RRB-
-/SYM
tables/NNS
in/IN
a/DT
programming/NN
language/NN
like/IN
c/NNP
./.

Also/RB
,/,
as/IN
I/PRP
said/VBD
,/,
the/DT
real/JJ
reason/NN
to/TO
use/VB
this/DT
would/MD
just/RB
be/VB
to/TO
do/VB
something/NN
different/JJ
,/,
as/IN
any/DT
kind/NN
of/IN
performance/NN
difference/NN
of/IN
the/DT
different/JJ
methods/NNS
would/MD
be/VB
so/RB
small/JJ
that/IN
it/PRP
(/-LRB-
probably/RB
)/-RRB-
would/MD
n't/RB
matter/VB
in/IN
reality/NN
./.

Prepared/JJ
statements/NNS
are/VBP
slower/JJR
than/IN
string/NN
concatenation/NN
based/VBN
sql/NNP
queries/NNS
in/IN
a/DT
scenario/NN
where/WRB
queries/NNS
are/VBP
not/RB
applied/VBN
multiple/JJ
times/NNS
,/,
at/IN
a/DT
factor/NN
of/IN
up/IN
to/TO
2:1/CD
(/-LRB-
you/PRP
can/MD
execute/VB
2/CD
times/NNS
as/IN
many/JJ
string/NN
based/VBN
queries/NNS
than/IN
prepared/JJ
statements/NNS
in/IN
the/DT
same/JJ
time/NN
)/-RRB-
when/WRB
using/VBG
locally/RB
hosted/VBN
mysql/NNP
5.x/CD
connected/VBN
through/IN
local/JJ
unix/NNP
socket/NN
./.

That/DT
's/VBZ
the/DT
reason/NN
for/IN
me/PRP
to/TO
prefer/VB
string/NN
based/JJ
sql/NNP
over/IN
prepared/JJ
statements/NNS
(/-LRB-
though/IN
sql/NNP
is/VBZ
painfully/RB
slow/JJ
anyway/RB
compared/VBN
to/TO
in-memory/JJ
kv/C
stores/NNS
)/-RRB-
./.

Also/RB
it/PRP
(/-LRB-
=/SYM
posted/VBN
answer/NN
)/-RRB-
is/VBZ
reliable/JJ
by/IN
concept/NN
-/:
understand/VB
how/WRB
it/PRP
works/VBZ
,/,
and/CC
you/PRP
will/MD
see/VB
why/WRB
./.

I/PRP
fixed/VBD
this/DT
by/IN
:/.

Removing/VBG
the/DT
MVC/NN
reference/NN
and/CC
add/VB
the/DT
correct/JJ
reference/NN
to/TO
the/DT
project/NN
./.

Changing/VBG
the/DT
Copy/VB
Local/JJ
property/NN
of/IN
the/DT
reference/NN
to/TO
true/JJ
./.

Update/VB
the/DT
bindingRedirect/C NA
setting/NN
in/IN
web.config/URI
:/.

web.config/URI
runtime/JJ
section/NN
:/:
</C
runtime/C
>/C
</C
assemblyBinding/C
xmlns/C
=/C
"/C
urn/C
:/C
schemas-microsoft-com/C
:/C
asm.v1/C
"/C
>/C
</C
dependentAssembly/C
>/C
</C
assemblyIdentity/C
name/C
=/C
"/C
System/C
./C
Web/C
./C
Mvc/C
"/C
publicKeyToken/C
=/C
"31bf3856ad364e35"/C
/>/C
</C
bindingRedirect/C
oldVersion/C
=/C
"1.0.0.0-3.0.0.0"/C
newVersion/C
=/C
"3.0.0.1"/C
/>/C
<//C
dependentAssembly/C
>/C
.../F

Changing/VBG
the/DT
Copy/VB
Local/JJ
setting/NN
will/MD
include/VB
the/DT
System.Web.MVC.dll/URI
file/NN
in/IN
the/DT
bin/NN
folder/NN
when/WRB
you/PRP
publish/VBP
the/DT
project/NN
,/,
so/IN
that/IN
it/PRP
works/VBZ
even/RB
if/IN
the/DT
server/NN
is/VBZ
not/RB
updated/VBN
with/IN
the/DT
new/JJ
version/NN
./.

Note/VB
that/IN
updates/NNS
like/IN
this/DT
rarely/RB
happens/VBZ
./.

This/DT
is/VBZ
the/DT
first/JJ
time/NN
that/IN
MVC/NN
3/CD
has/VBZ
been/VBN
patched/VBN
since/IN
it/PRP
was/VBD
released/VBN
./.

You/PRP
should/MD
be/VB
able/JJ
to/TO
change/VB
Copy/VB
Local/JJ
back/RB
to/TO
false/JJ
once/IN
the/DT
servers/NNS
has/VBZ
been/VBN
updated/VBN
./.

The/DT
next/JJ
time/NN
Microsoft/NNP
makes/VBZ
an/DT
update/VB
like/IN
this/DT
,/,
they/PRP
will/MD
probably/RB
know/VB
to/TO
fix/VB
issues/NNS
like/IN
this/DT
first/JJ
./.

@EricBrown-Cal/USR
:/:
Do/VBP
you/PRP
mean/VB
the/DT
server/NN
version/NN
update/NN
?/.

On/IN
my/PRP$
computer/NN
it/PRP
shows/VBZ
up/RP
as/IN
an/DT
installed/VBN
update/NN
./.

@EricBrown-Cal/USR
:/:
Yes/UH
,/,
that/DT
list/NN
does/VBZ
n't/RB
show/VB
all/DT
updates/NNS
for/IN
some/DT
reason/NN
./.

If/IN
I/PRP
open/VBP
PC/NN
Settings/NNS
,/,
go/VB
to/TO
Update/VB
and/CC
recovery/NN
,/,
and/CC
click/VB
View/VB
your/PRP$
update/NN
history/NN
,/,
it/PRP
shows/VBZ
all/DT
updates/NNS
./.

Since/IN
0/CD
is/VBZ
exactly/RB
representable/JJ
as/IN
an/DT
IEEE754/NNP
floating-point/JJ
number/NN
(/-LRB-
or/CC
using/VBG
any/DT
other/JJ
implementation/NN
of/IN
f-p/JJ
numbers/NNS
I/PRP
've/VBP
ever/RB
worked/VBN
with/IN
)/-RRB-
comparison/NN
with/IN
0/CD
is/VBZ
probably/RB
safe/JJ
./.

You/PRP
might/MD
get/VB
bitten/VBN
,/,
however/RB
,/,
if/IN
your/PRP$
program/NN
computes/VBZ
a/DT
value/NN
(/-LRB-
such/JJ
as/IN
theView/C
./C
frame/C
./C
origin/C
./C
x/C
)/-RRB-
which/WDT
you/PRP
have/VBP
reason/NN
to/TO
believe/VB
ought/MD
to/TO
be/VB
0/CD
but/CC
which/WDT
your/PRP$
computation/NN
can/MD
not/RB
guarantee/VB
to/TO
be/VB
0/CD
./.

To/TO
clarify/VB
a/DT
little/JJ
,/,
a/DT
computation/NN
such/JJ
as/IN
:/:
areal/C
=/C
0.0/C
will/NN
(/-LRB-
unless/IN
your/PRP$
language/NN
or/CC
system/NN
is/VBZ
broken/VBN
)/-RRB-
create/VBP
a/DT
value/NN
such/JJ
that/IN
(/-LRB-
areal/C
==/C
0.0/C
)/-RRB-
returns/VBZ
true/JJ
but/CC
another/DT
computation/NN
such/JJ
as/IN
areal/C
=/C
1.386/C
-/C
2.1/C
*/C
(/C
0.66/C
)/C
may/MD
not/RB
./.

If/IN
you/PRP
can/MD
assure/VB
yourself/PRP
that/IN
your/PRP$
computations/NNS
produce/VBP
values/NNS
which/WDT
are/VBP
0/CD
(/-LRB-
and/CC
not/RB
just/RB
that/IN
they/PRP
produce/VBP
values/NNS
which/WDT
ought/MD
to/TO
be/VB
0/CD
)/-RRB-
then/RB
you/PRP
can/MD
go/VB
ahead/RB
and/CC
compare/VB
f-p/NN
values/NNS
with/IN
0/CD
./.

If/IN
you/PRP
ca/MD
n't/RB
assure/VB
yourself/PRP
to/TO
the/DT
required/JJ
degree/NN
,/,
best/JJS
stick/NN
to/TO
the/DT
usual/JJ
approach/NN
of/IN
'/``
toleranced/JJ
equality/NN
'/''
./.

In/IN
the/DT
worst/JJS
cases/NNS
the/DT
careless/JJ
comparison/NN
of/IN
f-p/JJ
values/NNS
can/MD
be/VB
extremely/RB
dangerous/JJ
:/:
think/VB
avionics/NNS
,/,
weapons-guidance/NN
,/,
power-plant/NN
operations/NNS
,/,
vehicle/NN
navigation/NN
,/,
almost/RB
any/DT
application/NN
in/IN
which/WDT
computation/NN
meets/VBZ
the/DT
real/JJ
world/NN
./.

For/IN
Angry/NNP
Birds/NNP
,/,
not/RB
so/RB
dangerous/JJ
./.

Still/RB
getting/VBG
rep/NN
from/IN
this/DT
one/CD
,/,
so/IN
I/PRP
changed/VBD
the/DT
second/JJ
example/NN
snippet/NN
./.

I/PRP
'd/MD
give/VB
you/PRP
a/DT
1000/CD
upvotes/NNS
if/IN
I/PRP
could/MD
for/IN
that/DT
first/JJ
point/NN
especially/RB

Hey/UH
writing/VBG
ETL/NN
processes/NNS
is/VBZ
FUN/NN
!/.

(/-LRB-
Ok/UH
so/IN
I/PRP
'm/VBP
a/DT
bit/RB
wierd/JJ
but/CC
I/PRP
do/VBP
this/DT
for/IN
a/DT
living/NN
./.
)/-RRB-

I/PRP
'd/MD
like/VB
to/TO
add/VB
:/:
Favoring/VBG
"/``
Elegant/JJ
"/''
code/NN
over/IN
highly/RB
performing/VBG
code/NN
./.

The/DT
code/NN
that/WDT
works/VBZ
best/JJS
against/IN
databases/NNS
is/VBZ
often/RB
ugly/JJ
to/TO
the/DT
application/NN
developer/NN
's/POS
eye/NN
./.

Believing/VBG
that/DT
nonsense/NN
about/IN
premature/JJ
optimization/NN
./.

Databases/NNS
must/MD
consider/VB
performance/NN
in/IN
the/DT
original/JJ
design/NN
and/CC
in/IN
any/DT
subsequent/JJ
development/NN
./.

Performance/NN
is/VBZ
50/CD
%/SYM
of/IN
database/NN
design/NN
(/-LRB-
40/CD
%/SYM
is/VBZ
data/NN
integrity/NN
and/CC
the/DT
last/JJ
10/CD
%/SYM
is/VBZ
security/NN
)/-RRB-
in/IN
my/PRP$
opinion/NN
./.

Databases/NNS
which/WDT
are/VBP
not/RB
built/VBN
from/IN
the/DT
bottom/NN
up/RP
to/TO
perform/VB
will/MD
perform/VB
badly/RB
once/RB
real/JJ
users/NNS
and/CC
real/JJ
traffic/NN
are/VBP
placed/VBN
against/IN
the/DT
database/NN
./.

Premature/JJ
optimization/NN
does/VBZ
n't/RB
mean/VB
no/DT
optimization/NN
!/.

It/PRP
does/VBZ
n't/RB
mean/VB
you/PRP
should/MD
write/VB
code/NN
that/WDT
will/MD
almost/RB
always/RB
perform/VB
badly/RB
because/IN
you/PRP
find/VBP
it/PRP
easier/JJR
(/-LRB-
cursors/NNS
for/IN
example/NN
which/WDT
should/MD
never/RB
be/VB
allowed/VBN
in/IN
a/DT
production/NN
database/NN
unless/IN
all/DT
else/RB
has/VBZ
failed/VBN
)/-RRB-
./.

It/PRP
means/VBZ
you/PRP
do/VBP
n't/RB
need/VB
to/TO
look/VB
at/IN
squeezing/VBG
out/RP
that/IN
last/JJ
little/JJ
bit/NN
of/IN
performance/NN
until/IN
you/PRP
need/VBP
to/TO
./.

A/DT
lot/NN
is/VBZ
known/VBN
about/IN
what/WP
will/MD
perform/VB
better/RBR
on/IN
databases/NNS
,/,
to/TO
ignore/VB
this/DT
in/IN
design/NN
and/CC
development/NN
is/VBZ
short-sighted/JJ
at/IN
best/JJS
./.

If/IN
you/PRP
set/VBP
them/PRP
up/RP
correctly/RB
they/PRP
wo/MD
n't/RB
but/CC
this/DT
involves/VBZ
the/DT
use/NN
of/IN
triggers/NNS
which/WDT
many/JJ
people/NNS
are/VBP
allergic/JJ
to/TO
./.

A/DT
lot/NN
(/-LRB-
I/PRP
would/MD
even/RB
say/VB
most/JJS
)/-RRB-
people/NNS
do/VBP
./.

What/WP
's/VBZ
really/RB
important/JJ
about/IN
exceptions/NNS
,/,
is/VBZ
that/IN
if/IN
you/PRP
do/VBP
n't/RB
write/VB
any/DT
handling/NN
code/NN
-/--
the/DT
result/NN
is/VBZ
perfectly/RB
safe/JJ
and/CC
well-behaved/JJ
./.

Too/RB
eager/JJ
to/TO
panic/NN
,/,
but/CC
safe/JJ
./.

You/PRP
need/VBP
to/TO
actively/RB
make/VB
mistakes/NNS
in/IN
handlers/NNS
to/TO
get/VB
something/NN
unsafe/JJ
,/,
and/CC
only/RB
catch/C
(/C
.../F
)/C
{/C
}/C
will/MD
compare/VB
to/TO
ignoring/VBG
error/NN
code/NN
./.

It/PRP
would/MD
n't/RB
matter/VB
when/WRB
you/PRP
program/NN
terminates/VBZ
,/,
right/RB
?/.

To/TO
continue/VB
execution/NN
,/,
you/PRP
'll/MD
have/VB
to/TO
actively/RB
swallow/VB
exceptions/NNS
./.

Well/RB
,/,
there/EX
are/VBP
some/DT
specific/JJ
cases/NNS
where/WRB
termination/NN
without/IN
clean-up/JJ
is/VBZ
still/RB
unacceptable/JJ
,/,
but/CC
such/JJ
situations/NNS
needs/VBZ
special/JJ
care/NN
in/IN
any/DT
programming/NN
language/NN
and/CC
style/NN
./.

Did/VBD
I/PRP
say/VB
you/PRP
can/MD
?/.

Now/RB
read/VB
again/RB
what/WP
I/PRP
wrote/VBD
and/CC
try/VB
to/TO
understand/VB
./.

With/IN
exceptions/NNS
,/,
unsafe/JJ
code/NN
results/NNS
from/IN
you/PRP
making/VBG
mistakes/NNS
in/IN
handling/NN
code/NN
./.

With/IN
error/NN
codes/NNS
,/,
unsafe/JJ
code/NN
results/NNS
from/IN
you/PRP
not/RB
writing/VBG
handling/NN
code/NN
./.

The/DT
difference/NN
is/VBZ
huge/JJ
./.

Please/VB
,/,
do/VBP
n't/RB
twist/VB
my/PRP$
words/NNS
./.

I/PRP
wrote/VBD
"/``
if/IN
you/PRP
do/VBP
n't/RB
write/VB
any/DT
handling/NN
code/NN
"/''
-/--
and/CC
I/PRP
meant/VBD
exactly/RB
that/DT
./.

To/TO
ignore/VB
exceptions/NNS
,/,
you/PRP
need/VBP
to/TO
write/VB
code/NN
./.

Salt/NN
does/VBZ
not/RB
need/VB
to/TO
be/VB
secret/JJ
./.

stackoverflow.com/questions/3347035/…/URI

Salts/NNS
are/VBP
implemented/VBN
to/TO
prevent/VB
rainbow/NN
table/NN
attacks/NNS
./.

A/DT
rainbow/NN
table/NN
is/VBZ
a/DT
list/NN
of/IN
pre-calculated/JJ
hashes/NNS
,/,
which/WDT
makes/VBZ
translating/VBG
a/DT
hash/NN
into/IN
it/PRP
's/VBZ
phrase/NN
much/RB
more/RBR
simple/JJ
./.

You/PRP
need/VBP
to/TO
understand/VB
that/DT
salting/NN
is/VBZ
n't/RB
effective/JJ
as/IN
a/DT
modern/JJ
prevention/NN
to/TO
cracking/VBG
a/DT
password/NN
unless/IN
we/PRP
have/VBP
a/DT
modern/JJ
hashing/NN
algo/NN
./.

So/RB
lets/VBZ
say/VBP
we/PRP
're/VBP
working/VBG
with/IN
SHA1/NNP
,/,
taking/VBG
advantage/NN
of/IN
recent/JJ
exploits/NNS
discovered/VBN
with/IN
this/DT
algo/NN
,/,
and/CC
lets/VBZ
say/VBP
we/PRP
have/VBP
a/DT
computer/NN
running/VBG
at/IN
1,000,000/CD
hashes/second/NN
,/,
it/PRP
would/MD
take/VB
5.3/CD
million/CD
million/CD
million/CD
years/NNS
to/TO
find/VB
a/DT
collision/NN
,/,
so/RB
yeah/UH
php/NNP
can/MD
work/VB
300/CD
a/DT
second/NN
,/,
big/JJ
woop/UH
,/,
does/VBZ
n't/RB
really/RB
matter/VB
./.

The/DT
reason/NN
we/PRP
salt/VB
is/VBZ
because/IN
if/IN
someone/NN
did/VBD
bother/VB
to/TO
generate/VB
all/DT
common/JJ
dictionary/NN
phrases/NNS
,/,
(/-LRB-
2/CD
^/SYM
160/CD
people/NNS
,/,
welcome/JJ
to/TO
2007/CD
era/NN
exploits/NNS
)/-RRB-
./.

So/RB
here/RB
's/VBZ
an/DT
actual/JJ
database/NN
,/,
with/IN
2/CD
users/NNS
I/PRP
use/VBP
for/IN
testing/NN
and/CC
admin/NN
purposes/NNS
./.

RegistrationTime/C
UserName/C
UserPass/C

1280185359.365591/CD
briang/USR
a50b63e927b3aebfc20cd783e0fc5321b0e5e8b5/C

1281546174.065087/CD
test/USR
5872548f2abfef8cb729cac14bc979462798d023/C

In/IN
fact/NN
,/,
the/DT
salting/NN
scheme/NN
is/VBZ
your/PRP$
sha1/NNP
(/-LRB-
registration/NN
time/NN
+/CC
user/NN
name/NN
)/-RRB-
./.

Go/VB
ahead/RB
,/,
tell/VB
me/PRP
my/PRP$
password/NN
,/,
these/DT
are/VBP
real/JJ
passwords/NNS
in/IN
production/NN
./.

You/PRP
can/MD
even/RB
sit/VB
there/RB
and/CC
hash/VB
out/RP
a/DT
word/NN
list/NN
in/IN
php/NNP
./.

Go/VB
wild/JJ
./.

I/PRP
'm/VBP
not/RB
crazy/JJ
,/,
I/PRP
just/RB
know/VBP
that/IN
this/DT
is/VBZ
secure/JJ
./.

For/IN
fun/NN
sake/NN
,/,
test/NN
's/POS
password/NN
is/VBZ
test/C
./C
sha1/C
(/C
sha1/C
(/C
1281546174.065087/C
+/C
test/C
)/C
+/C
test/C
)/C
=/C
5872548f2abfef8cb729cac14bc979462798d023/C

You/PRP
would/MD
need/VB
to/TO
generate/VB
an/DT
entire/JJ
rainbow/NN
table/NN
perpended/VBN
with/IN
27662aee8eee1cb5ab4917b09bdba31d091ab732/C NA
for/IN
just/RB
this/DT
user/NN
./.

That/DT
means/VBZ
I/PRP
can/MD
actually/RB
allow/VB
my/PRP$
passwords/NNS
to/TO
not/RB
all/DT
be/VB
compromised/VBN
by/IN
a/DT
single/JJ
rainbow/NN
table/NN
,/,
the/DT
hacker/NN
needs/VBZ
to/TO
generate/VB
an/DT
entire/JJ
rainbow/NN
table/NN
for/IN
27662aee8eee1cb5ab4917b09bdba31d091ab732/C NA
for/IN
test/USR
,/,
and/CC
again/RB
f3f7735311217529f2e020468004a2aa5b3dee7f/C NA
for/IN
briang/USR
./.

Think/VB
back/RB
to/TO
the/DT
5.3/CD
million/CD
million/CD
million/CD
years/NNS
for/IN
all/DT
hashes/NNS
./.

Think/VB
of/IN
the/DT
size/NN
of/IN
storing/VBG
just/RB
the/DT
2/CD
^/SYM
80/CD
hashes/NNS
(/-LRB-
that/DT
's/VBZ
well/RB
over/IN
20/CD
yottabytes/NNS
)/-RRB-
,/,
it/PRP
's/VBZ
not/RB
going/VBG
to/TO
happen/VB
./.

Do/VBP
n't/RB
confuse/VB
salting/NN
as/IN
a/DT
means/NN
of/IN
making/VBG
a/DT
hash/NN
something/NN
you/PRP
ca/MD
n't/RB
ever/RB
decode/VB
,/,
it/PRP
's/VBZ
a/DT
means/NN
of/IN
preventing/VBG
a/DT
rainbow/NN
table/NN
from/IN
translating/VBG
all/DT
your/PRP$
user/NN
passwords/NNS
./.

It/PRP
's/VBZ
imposable/JJ
at/IN
this/DT
level/NN
of/IN
technology/NN
./.

Put/VB
your/PRP$
money/NN
where/WRB
your/PRP$
mouth/NN
is/VBZ
?/.

Yes/RB
,/,
salting/NN
does/VBZ
n't/RB
prevent/VB
you/PRP
from/IN
being/VBG
able/JJ
to/TO
brute/JJ
force/NN
that/IN
password/NN
./.

It/PRP
makes/VBZ
it/PRP
harder/RBR
for/IN
you/PRP
to/TO
generate/VB
the/DT
(/-LRB-
(/-LRB-
10/CD
^/SYM
5/CD
)/-RRB-
*/SYM
(/-LRB-
94/CD
^/SYM
10/CD
)/-RRB-
)/-RRB-
=/SYM
10/CD
^/SYM
24/CD
if/IN
users/NNS
have/VBP
around/IN
10-character/JJ
passwords/NNS
,/,
which/WDT
is/VBZ
much/RB
harder/JJR
than/IN
the/DT
10/CD
^/SYM
19/CD
without/IN
hashes/NNS
./.

Again/RB
,/,
it/PRP
's/VBZ
not/RB
to/TO
make/VB
breaking/VBG
one/CD
password/NN
hard/RB
,/,
it/PRP
's/VBZ
to/TO
make/VB
breaking/VBG
all/PDT
the/DT
passwords/NNS
unfeasible/JJ
with/IN
a/DT
pre-processed/JJ
rainbow/NN
table/NN
./.

(/-LRB-
and/CC
check/VB
my/PRP$
math/NN
here/RB
,/,
but/CC
I/PRP
believe/VBP
10/CD
^/SYM
25/CD
//SYM
2300000000/CD
//SYM
60/CD
//SYM
60/CD
//SYM
24/CD
//SYM
365/CD
//SYM
1000/CD
=/SYM
137/CD
869/CD
~/SYM
milinea/NN
for/IN
everyone/NN
's/POS
password/NN
)/-RRB-
./.

If/IN
we/PRP
want/VBP
stronger/JJR
passwords/NNS
we/PRP
do/VBP
n't/RB
salt/VB
them/PRP
,/,
we/PRP
use/VBP
things/NNS
like/IN
Diffie--Hellman/NNP
key/JJ
exchange/NN
./.

Breaking/VBG
4-character/JJ
passwords/NNS
is/VBZ
nothing/NN
new/JJ
./.

Salting/NN
does/VBZ
n't/RB
make/VB
them/PRP
harder/JJR
to/TO
crack/VB
,/,
it/PRP
makes/VBZ
the/DT
database/NN
harder/JJR
to/TO
crack/VB
./.

To/TO
be/VB
fair/JJ
,/,
I/PRP
've/VBP
actually/RB
learned/VBN
more/JJR
,/,
and/CC
standard/JJ
PKCS/NNP
#/SYM
5/CD
section/NN
4.2/CD
says/VBZ
I/PRP
should/MD
have/VB
run/VBN
at/IN
least/JJS
1000/CD
iterations/NNS
of/IN
my/PRP$
hash/JJ
function/NN
,/,
not/RB
one/CD
./.

There/EX
's/POS
other/JJ
considerations/NNS
I/PRP
neglected/VBD
since/IN
then/RB
also/RB
./.
docs.google.com/.../URI

Yes/UH
,/,
except/IN
that/DT
PDO/NN
does/VBZ
n't/RB
use/VB
real/JJ
prepared/JJ
statements/NNS
by/IN
default/NN
;-)/UH
./.

See/VB
my/PRP$
answer/NN
below/IN
for/IN
a/DT
demonstration/NN
and/CC
explanation/NN
of/IN
an/DT
attack/NN
.../.

The/DT
short/JJ
answer/NN
is/VBZ
NO/UH
,/,
PDO/NN
prepares/VBZ
will/MD
not/RB
defend/VB
you/PRP
from/IN
all/DT
possible/JJ
SQL-Injection/JJ
attacks/NNS
./.

For/IN
certain/JJ
obscure/JJ
edge-cases/NNS
./.

I/PRP
'm/VBP
adapting/VBG
this/DT
answer/NN
to/TO
talk/VB
about/IN
PDO/NN
.../.

The/DT
long/JJ
answer/NN
is/VBZ
n't/RB
so/RB
easy/JJ
./.

It/PRP
's/VBZ
based/VBN
off/RP
an/DT
attack/NN
demonstrated/VBD
here/RB
./.

The/DT
Attack/NN

So/RB
,/,
let/VB
's/POS
start/VB
off/RP
by/IN
showing/VBG
the/DT
attack/NN
.../.

$/C
pdo/C
->/C
query/C
(/C
'/C
SET/C
NAMES/C
gbk/C
'/C
)/C
;/C

$/C
var/C
=/C
"/C
\xbf\x27/C
OR/C
1/C
=/C
1/C
//C
*/C
"/C
;/C

$/C
query/C
=/C
'/C
SELECT/C
*/C
FROM/C
test/C
WHERE/C
name/C
=/C
?/C
LIMIT/C
1/C
'/C
;/C

$/C
stmt/C
=/C
$/C
pdo/C
->/C
prepare/C
(/C
$/C
query/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
array/C
(/C
$/C
var/C
)/C
)/C
;/C

In/IN
certain/JJ
circumstances/NNS
,/,
that/WDT
will/MD
return/VB
more/JJR
than/IN
1/CD
row/NN
./.

Let/VB
's/POS
dissect/VB
what/WP
's/VBZ
going/VBG
on/IN
here/RB
:/.

Selecting/VBG
a/DT
Character/NN
Set/NN

$/C
pdo/C
->/C
query/C
(/C
'/C
SET/C
NAMES/C
gbk/C
'/C
)/C
;/C

For/IN
this/DT
attack/NN
to/TO
work/VB
,/,
we/PRP
need/VBP
the/DT
encoding/NN
that/IN
the/DT
server/NN
's/POS
expecting/VBG
on/IN
the/DT
connection/NN
both/DT
to/TO
encode/VB
'/''
as/IN
in/IN
ASCII/NNP
i.e./FW
0x27/CD
and/CC
to/TO
have/VB
some/DT
character/NN
whose/WP$
final/JJ
byte/NN
is/VBZ
an/DT
ASCII/NNP
\/SYM
i.e./FW
0x5c/CD
./.

As/IN
it/PRP
turns/VBZ
out/RP
,/,
there/EX
are/VBP
5/CD
such/JJ
encodings/NNS
supported/VBN
in/IN
MySQL/NNP
5.6/CD
by/IN
default/NN
:/:
big5/NNP
,/,
cp932/NNP
,/,
gb2312/NNP
,/,
bgk/NNP
and/CC
sjis/NNP
./.

We/PRP
'll/MD
select/VB
gbk/NNP
here/RB
./.

Now/RB
,/,
it/PRP
's/VBZ
very/RB
important/JJ
to/TO
note/VB
the/DT
use/NN
of/IN
SET/C
NAMES/C
here/RB
./.

This/DT
sets/VBZ
the/DT
character/NN
set/VBN
ON/IN
THE/DT
SERVER/NN
./.

There/EX
is/VBZ
another/DT
way/NN
of/IN
doing/VBG
it/PRP
,/,
but/CC
we/PRP
'll/MD
get/VB
there/EX
soon/RB
enough/RB
./.

The/DT
Payload/NN

The/DT
payload/NN
we/PRP
're/VBP
going/VBG
to/TO
use/VB
for/IN
this/DT
injection/NN
starts/VBZ
with/IN
the/DT
byte/NN
sequence/NN
0xbf27/CD
./.

In/IN
gbk/NNP
,/,
that/DT
's/VBZ
an/DT
invalid/JJ
multibyte/JJ
character/NN
;/:
in/IN
latin1/NNP
,/,
it/PRP
's/VBZ
the/DT
string/NN
¿/SYM
'/''
./.

Note/VB
that/IN
in/IN
latin1/NNP
and/CC
gbk/NNP
,/,
0x27/CD
on/IN
its/PRP$
own/JJ
is/VBZ
a/DT
literal/JJ
'/POS
character/NN
./.

We/PRP
have/VBP
chosen/VBN
this/DT
payload/NN
because/IN
,/,
if/IN
we/PRP
called/VBD
addslashes/C NA
(/C NA
)/C NA
on/IN
it/PRP
,/,
we/PRP
'd/MD
insert/VB
an/DT
ASCII/NNP
\/SYM
i.e./FW
0x5c/CD
,/,
before/IN
the/DT
'/''
character/NN
./.

So/RB
we/PRP
'd/MD
wind/VB
up/RP
with/IN
0xbf5c27/CD
,/,
which/WDT
in/IN
gbk/NNP
is/VBZ
a/DT
two/CD
character/NN
sequence/NN
:/:
0xbf5c/CD
followed/VBN
by/IN
0x27/CD
./.

Or/CC
in/IN
other/PRP
words/NNS
,/,
a/DT
valid/JJ
character/NN
followed/VBN
by/IN
an/DT
unescaped/JJ
'/''
./.

But/CC
we/PRP
're/VBP
not/RB
using/VBG
addslashes/C NA
(/C NA
)/C NA
./.

So/RB
on/IN
to/TO
the/DT
next/JJ
step/NN
.../.

$/C
stmt/C
->/C
execute/C
(/C
)/C

The/DT
important/JJ
thing/NN
to/TO
realize/VB
here/RB
is/VBZ
that/IN
PDO/NN
by/IN
default/NN
does/VBZ
NOT/RB
do/VB
true/JJ
prepared/JJ
statements/NNS
./.

It/PRP
emulates/VBZ
them/PRP
(/-LRB-
for/IN
MySQL/NNP
)/-RRB-
./.

Therefore/RB
,/,
PDO/NN
internally/RB
builds/VBZ
the/DT
query/NN
string/NN
,/,
calling/VBG
mysql_real_escape_string/C NA
(/C NA
)/C NA
(/-LRB-
the/DT
MySQL/NNP
C/NNP
API/NN
function/NN
)/-RRB-
on/IN
each/DT
bound/VBN
string/NN
value/NN
./.

The/DT
C/NNP
API/NN
call/NN
to/TO
mysql_real_escape_string/C NA
(/C NA
)/C NA
differs/VBZ
from/IN
addslashes/C NA
(/C NA
)/C NA
in/IN
that/IN
it/PRP
knows/VBZ
the/DT
connection/NN
character/NN
set/NN
./.

So/RB
it/PRP
can/MD
perform/VB
the/DT
escaping/VBG
properly/RB
for/IN
the/DT
character/NN
set/VBN
that/IN
the/DT
server/NN
is/VBZ
expecting/VBG
./.

However/RB
,/,
up/IN
to/TO
this/DT
point/NN
,/,
the/DT
client/NN
thinks/VBZ
that/IN
we/PRP
're/VBP
still/RB
using/VBG
latin1/NNP
for/IN
the/DT
connection/NN
,/,
because/IN
we/PRP
never/RB
told/VBD
it/PRP
otherwise/RB
./.

We/PRP
did/VBD
tell/VB
the/DT
server/NN
we/PRP
're/VBP
using/VBG
gbk/NNP
,/,
but/CC
the/DT
client/NN
still/RB
thinks/VBZ
it/PRP
's/POS
latin1/NNP
./.

Therefore/RB
the/DT
call/NN
to/TO
mysql_real_escape_string/C NA
(/C NA
)/C NA
inserts/VBZ
the/DT
backslash/NN
,/,
and/CC
we/PRP
have/VBP
a/DT
free/JJ
hanging/NN
'/''
character/NN
in/IN
our/PRP$
"/``
escaped/VBN
"/''
content/NN
!/.

In/IN
fact/NN
,/,
if/IN
we/PRP
were/VBD
to/TO
look/VB
at/IN
$/C NA
var/C NA
in/IN
the/DT
gbk/NNP
character/NN
set/NN
,/,
we/PRP
'd/MD
see/VB
:/.

?/C
'/C
OR/C
1/C
=/C
1/C
/*/C

Which/WDT
is/VBZ
exactly/RB
what/WP
the/DT
attack/NN
requires/VBZ
./.

The/DT
Query/NN

This/DT
part/NN
is/VBZ
just/RB
a/DT
formality/NN
,/,
but/CC
here/RB
's/VBZ
the/DT
rendered/VBN
query/NN
:/.

SELECT/C
*/C
FROM/C
test/C
WHERE/C
name/C
=/C
'?'/C
OR/C
1/C
=/C
1/C
//C
*/C
'/C
LIMIT/C
1/C

Congratulations/NNS
,/,
you/PRP
just/RB
successfully/RB
attacked/VBN
a/DT
program/NN
using/VBG
PDO/NN
Prepared/JJ
Statements/NN
.../.

The/DT
Simple/JJ
Fix/VB

Now/RB
,/,
it/PRP
's/VBZ
worth/JJ
noting/VBG
that/IN
you/PRP
can/MD
prevent/VB
this/DT
by/IN
disabling/VBG
emulated/VBN
prepared/JJ
statements/NNS
:/.

$/C
pdo/C
->/C
setAttribute/C
(/C
PDO/C
::/C
ATTR_EMULATE_PREPARES/C
,/C
false/C
)/C
;/C

This/DT
will/MD
usually/RB
result/VB
in/IN
a/DT
true/JJ
prepared/JJ
statement/NN
(/-LRB-
i.e./FW
the/DT
data/NNS
being/VBG
sent/VBN
over/RP
in/IN
a/DT
separate/JJ
packet/NN
from/IN
the/DT
query/NN
)/-RRB-
./.

However/RB
,/,
be/VB
aware/JJ
that/IN
PDO/NN
will/MD
silently/RB
fallback/JJ
to/TO
emulating/VBG
statements/NNS
that/IN
MySQL/NNP
ca/MD
n't/RB
prepare/VB
natively/RB
:/:
those/DT
that/IN
it/PRP
can/MD
are/VB
listed/VBN
in/IN
the/DT
manual/NN
,/,
but/CC
beware/VBP
to/TO
select/VB
the/DT
appropriate/JJ
server/NN
version/NN
)/-RRB-
./.

The/DT
Correct/NN
Fix/VB

The/DT
problem/NN
here/RB
is/VBZ
that/IN
we/PRP
did/VBD
n't/RB
call/VB
the/DT
C/NNP
API/NN
's/POS
mysql_set_charset/C NA
(/C NA
)/C NA
instead/RB
of/IN
SET/C NA
NAMES/C NA
./.

If/IN
we/PRP
did/VBD
,/,
we/PRP
'd/MD
be/VB
fine/RB
provided/VBN
we/PRP
are/VBP
using/VBG
a/DT
MySQL/NNP
release/NN
since/IN
2006/CD
./.

If/IN
you/PRP
're/VBP
using/VBG
an/DT
earlier/JJR
MySQL/NNP
release/NN
,/,
then/RB
a/DT
bug/NN
in/IN
mysql_real_escape_string/C NA
(/C NA
)/C NA
meant/VBN
that/IN
invalid/JJ
multibyte/JJ
characters/NNS
such/JJ
as/IN
those/DT
in/IN
our/PRP$
payload/NN
were/VBD
treated/VBN
as/IN
single/JJ
bytes/NNS
for/IN
escaping/NN
purposes/NNS
even/RB
if/IN
the/DT
client/NN
had/VBD
been/VBN
correctly/RB
informed/VBN
of/IN
the/DT
connection/NN
encoding/VBG
and/CC
so/RB
this/DT
attack/NN
would/MD
still/RB
succeed/VB
./.

The/DT
bug/NN
was/VBD
fixed/VBN
in/IN
MySQL/NNP
4.1.20/CD
,/,
5.0.22/CD
and/CC
5.1.11/CD
./.

But/CC
the/DT
worst/JJS
part/NN
is/VBZ
that/IN
PDO/NN
did/VBD
n't/RB
expose/VB
the/DT
C/NNP
API/NN
for/IN
mysql_set_charset/C NA
(/C NA
)/C NA
until/IN
5.3.6/CD
,/,
so/RB
in/IN
prior/JJ
versions/NNS
it/PRP
can/MD
not/RB
prevent/VB
this/DT
attack/NN
for/IN
every/DT
possible/JJ
command/NN
!/.

It/PRP
's/VBZ
now/RB
exposed/VBN
as/IN
a/DT
DSN/NNP
parameter/NN
,/,
which/WDT
should/MD
be/VB
used/VBN
instead/RB
of/IN
SET/C
NAMES/C
.../.

The/DT
Saving/VBG
Grace/NN
As/IN
we/PRP
said/VBD
at/IN
the/DT
outset/NN
,/,
for/IN
this/DT
attack/NN
to/TO
work/VB
the/DT
database/NN
connection/NN
must/MD
be/VB
encoded/VBN
using/VBG
a/DT
vulnerable/JJ
character/NN
set/NN
./.

utf8mb4/NNP
is/VBZ
not/RB
vulnerable/JJ
and/CC
yet/RB
can/MD
support/VB
every/DT
Unicode/NNP
character/NN
:/:
so/IN
you/PRP
could/MD
elect/VB
to/TO
use/VB
that/IN
instead/RB
--/--
but/CC
it/PRP
has/VBZ
only/RB
been/VBN
available/JJ
since/IN
MySQL/NNP
5.5.3/CD
./.

An/DT
alternative/NN
is/VBZ
utf8/NNP
,/,
which/WDT
is/VBZ
also/RB
not/RB
vulnerable/JJ
and/CC
can/MD
support/VB
the/DT
whole/NN
of/IN
the/DT
Unicode/NNP
Basic/JJ
Multilingual/JJ
Plane/NN
./.

Alternatively/RB
,/,
you/PRP
can/MD
enable/VB
the/DT
NO_BACKSLASH_ESCAPES/C NA
SQL/NNP
mode/NN
,/,
which/WDT
(/-LRB-
amongst/IN
other/JJ
things/NNS
)/-RRB-
alters/VBZ
the/DT
operation/NN
of/IN
mysql_real_escape_string/C NA
(/C NA
)/C NA
./.

With/IN
this/DT
mode/NN
enabled/VBD
,/,
0x27/CD
will/MD
be/VB
replaced/VBN
with/IN
0x2727/CD
rather/RB
than/IN
0x5c27/CD
and/CC
thus/RB
the/DT
escaping/NN
process/NN
can/MD
not/RB
create/VB
valid/JJ
characters/NNS
in/IN
any/DT
of/IN
the/DT
vulnerable/JJ
encodings/NNS
where/WRB
they/PRP
did/VBD
not/RB
exist/VB
previously/RB
(/-LRB-
i.e./FW
0xbf27/CD
is/VBZ
still/RB
0xbf27/CD
etc./FW
)/-RRB-
—/--
so/IN
the/DT
server/NN
will/MD
still/RB
reject/VB
the/DT
string/NN
as/IN
invalid/JJ
./.

However/RB
,/,
see/VB
@eggyal/USR
's/POS
answer/NN
for/IN
a/DT
different/JJ
vulnerability/NN
that/WDT
can/MD
arise/VB
from/IN
using/VBG
this/DT
SQL/NNP
mode/NN
(/-LRB-
albeit/RB
not/RB
with/IN
PDO/NN
)/-RRB-
./.

Safe/NN
Examples/NNS

The/DT
following/JJ
examples/NNS
are/VBP
safe/JJ
:/.

mysql_query/C
(/C
'/C
SET/C
NAMES/C
utf8/C
'/C
)/C
;/C

$/C
var/C
=/C
mysql_real_escape_string/C
(/C
"/C
\xbf\x27/C
OR/C
1/C
=/C
1/C
//C
*/C
"/C
)/C
;/C

mysql_query/C
(/C
"/C
SELECT/C
*/C
FROM/C
test/C
WHERE/C
name/C
=/C
'/C
$/C
var/C
'/C
LIMIT/C
1/C
"/C
)/C
;/C

Because/IN
the/DT
server/NN
's/POS
expecting/VBG
utf8/NNP
.../.

mysql_set_charset/C
(/C
'gbk'/C
)/C
;/C

$/C
var/C
=/C
mysql_real_escape_string/C
(/C
"/C
\xbf\x27/C
OR/C
1/C
=/C
1/C
//C
*/C
"/C
)/C
;/C

mysql_query/C
(/C
"/C
SELECT/C
*/C
FROM/C
test/C
WHERE/C
name/C
=/C
'/C
$/C
var/C
'/C
LIMIT/C
1/C
"/C
)/C
;/C

Because/IN
we/PRP
've/VBP
properly/RB
set/VBN
the/DT
character/NN
set/NN
so/IN
the/DT
client/NN
and/CC
the/DT
server/NN
match/NN
./.

$/C
pdo/C
->/C
setAttribute/C
(/C
PDO/C
::/C
ATTR_EMULATE_PREPARES/C
,/C
false/C
)/C
;/C

$/C
pdo/C
->/C
query/C
(/C
'/C
SET/C
NAMES/C
gbk/C
'/C
)/C
;/C

$/C
stmt/C
=/C
$/C
pdo/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
test/C
WHERE/C
name/C
=/C
?/C
LIMIT/C
1/C
'/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
array/C
(/C
"/C
\xbf\x27/C
OR/C
1/C
=/C
1/C
//C
*/C
"/C
)/C
)/C
;/C

Because/IN
we/PRP
've/VBP
turned/VBN
off/RP
emulated/VBN
prepared/JJ
statements/NNS
./.

$/C
pdo/C
=/C
new/C
PDO/C
(/C
'/C
mysql/C
:/C
host/C
=/C
localhost/C
;/C
dbname/C
=/C
testdb/C
;/C
charset/C
=/C
gbk/C
'/C
,/C
$/C
user/C
,/C
$/C
password/C
)/C
;/C

$/C
stmt/C
=/C
$/C
pdo/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
test/C
WHERE/C
name/C
=/C
?/C
LIMIT/C
1/C
'/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
array/C
(/C
"/C
\xbf\x27/C
OR/C
1/C
=/C
1/C
//C
*/C
"/C
)/C
)/C
;/C

Because/IN
we/PRP
've/VBP
set/VBN
the/DT
character/NN
set/VBN
properly/RB
./.

$/C
mysqli/C
->/C
query/C
(/C
'/C
SET/C
NAMES/C
gbk/C
'/C
)/C
;/C

$/C
stmt/C
=/C
$/C
mysqli/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
test/C
WHERE/C
name/C
=/C
?/C
LIMIT/C
1/C
'/C
)/C
;/C

$/C
param/C
=/C
"/C
\xbf\x27/C
OR/C
1/C
=/C
1/C
//C
*/C
"/C
;/C

$/C
stmt/C
->/C
bind_param/C
(/C
's'/C
,/C
$/C
param/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
)/C
;/C

Because/IN
MySQLi/C
does/VBZ
true/JJ
prepared/JJ
statements/NNS
all/PDT
the/DT
time/NN
./.

Wrapping/VBG
Up/RP

If/IN
you/PRP
:/:
Use/VB
Modern/JJ
Versions/NNS
of/IN
MySQL/NNP
(/-LRB-
late/JJ
5.1/CD
,/,
all/DT
5.5/CD
,/,
5.6/CD
,/,
etc/FW
)/-RRB-
AND/CC
PDO/NN
's/POS
DSN/NNP
charset/NN
parameter/NN
(/-LRB-
in/IN
PHP/NNP
?/.
5.3.6/CD
)/-RRB-
OR/CC
Do/VBP
n't/RB
use/VB
a/DT
vulnerable/JJ
character/NN
set/VBN
for/IN
connection/NN
encoding/VBG
(/-LRB-
you/PRP
only/RB
use/VBP
utf8/NNP
//CC
latin1/NNP
//CC
ascii/NNP
//CC
etc/FW
)/-RRB-
OR/CC
Enable/JJ
NO_BACKSLASH_ESCAPES/C NA
SQL/NNP
mode/NN
You/PRP
're/VBP
100/CD
%/SYM
safe/NN
./.

Otherwise/RB
,/,
you/PRP
're/VBP
vulnerable/JJ
even/RB
though/IN
you/PRP
're/VBP
using/VBG
PDO/NN
Prepared/JJ
Statements/NNS
.../.

Addendum/FW

I/PRP
've/VBP
been/VBN
slowly/RB
working/VBG
on/IN
a/DT
patch/NN
to/TO
change/VB
the/DT
default/NN
to/TO
not/RB
emulate/VB
prepares/NNS
for/IN
a/DT
future/JJ
version/NN
of/IN
PHP/NNP
./.

The/DT
problem/NN
that/IN
I/PRP
'm/VBP
running/VBG
into/IN
is/VBZ
that/IN
a/DT
LOT/JJ
of/IN
tests/NNS
break/VBP
when/WRB
I/PRP
do/VBP
that/DT
./.

One/CD
problem/NN
is/VBZ
that/IN
emulated/VBN
prepares/NNS
will/MD
only/RB
throw/VB
syntax/NN
errors/NNS
on/IN
execute/VB
,/,
but/CC
true/JJ
prepares/NNS
will/MD
throw/VB
errors/NNS
on/IN
prepare/NN
./.

So/IN
that/DT
can/MD
cause/VB
issues/NNS
(/-LRB-
and/CC
is/VBZ
part/NN
of/IN
the/DT
reason/NN
tests/NNS
are/VBP
borking/VBG
)/-RRB-
./.

@nicogawenda/USR
:/:
that/DT
was/VBD
a/DT
different/JJ
bug/NN
./.

Prior/RB
to/TO
5.0.22/CD
,/,
mysql_real_escape_string/C
would/MD
n't/RB
properly/RB
handle/VB
cases/NNS
where/WRB
the/DT
connection/NN
was/VBD
properly/RB
set/VBN
to/TO
BIG5/NNP
//CC
GBK/NNP
./.

So/RB
actually/RB
even/RB
calling/VBG
mysql_set_charset/C NA
(/C NA
)/C NA
on/IN
mysql/NNP
</SYM
5.0.22/CD
would/MD
be/VB
vulnerable/JJ
to/TO
this/DT
bug/NN
!/.

So/IN
no/DT
,/,
this/DT
post/NN
is/VBZ
still/RB
applicable/JJ
to/TO
5.0.22/CD
(/-LRB-
because/IN
mysql_real_escape_string/C NA
is/VBZ
only/RB
charset/NN
away/RB
to/TO
calls/NNS
from/IN
mysql_set_charset/C NA
(/C NA
)/C NA
,/,
which/WDT
is/VBZ
what/WP
this/DT
post/NN
is/VBZ
talking/VBG
about/IN
bypassing/VBG
)/-RRB-
.../.

I/PRP
think/VBP
you/PRP
are/VBP
attacking/VBG
it/PRP
from/IN
the/DT
wrong/JJ
angle/NN
by/IN
trying/VBG
to/TO
encode/VB
all/DT
posted/VBN
data/NNS
./.

Note/VB
that/IN
a/DT
"/``
</SYM
"/''
could/MD
also/RB
come/VB
from/IN
other/JJ
outside/JJ
sources/NNS
,/,
like/IN
a/DT
database/NN
field/NN
,/,
a/DT
configuration/NN
,/,
a/DT
file/NN
,/,
a/DT
feed/NN
and/CC
so/RB
on/IN
./.

Furthermore/RB
,/,
"/``
</C
"/''
is/VBZ
not/RB
inherently/RB
dangerous/JJ
,/,
its/PRP$
only/RB
dangerous/JJ
in/IN
a/DT
specific/JJ
context/NN
:/:
when/WRB
writing/VBG
unencoded/JJ
strings/NNS
to/TO
HTML/NNP
output/NN
(/-LRB-
because/IN
of/IN
XSS/NNP
)/-RRB-
./.

In/IN
other/JJ
contexts/NNS
different/JJ
substrings/NNS
are/VBP
dangerous/JJ
,/,
e.g./FW
if/IN
you/PRP
write/VBP
an/DT
user-provided/JJ
URL/NN
into/IN
a/DT
link/NN
,/,
the/DT
substring/NN
"/``
javascript/C
:/C
"/''
may/MD
be/VB
dangerous/JJ
./.

The/DT
single/JJ
quote/NN
character/NN
on/IN
the/DT
other/JJ
hand/NN
is/VBZ
dangerous/JJ
when/WRB
interpolating/VBG
strings/NNS
in/IN
SQL/NNP
queries/NNS
,/,
but/CC
perfectly/RB
safe/JJ
if/IN
it/PRP
is/VBZ
a/DT
part/NN
of/IN
a/DT
name/NN
submitted/VBN
from/IN
a/DT
form/NN
or/CC
read/VB
from/IN
a/DT
database/NN
field/NN
./.

The/DT
bottom/JJ
line/NN
is/VBZ
:/:
you/PRP
ca/MD
n't/RB
filter/VB
random/JJ
input/NN
for/IN
dangerous/JJ
characters/NNS
,/,
because/IN
any/DT
charater/NN
may/MD
be/VB
dangerous/JJ
under/IN
the/DT
right/JJ
circumstances/NNS
./.

You/PRP
should/MD
encode/VB
at/IN
the/DT
point/NN
where/WRB
some/DT
specific/JJ
characters/NNS
may/MD
become/VB
dangerous/JJ
because/IN
they/PRP
cross/VBP
into/IN
a/DT
different/JJ
sublanguage/NN
where/WRB
they/PRP
have/VBP
special/JJ
meaning/VBG
./.

When/WRB
you/PRP
write/VBP
a/DT
string/NN
to/TO
HTML/NNP
,/,
you/PRP
should/MD
encode/VB
characters/NNS
that/WDT
have/VBP
special/JJ
meaning/NN
in/IN
HTML/NNP
,/,
using/VBG
Server/C
./C
HtmlEncode/C
./.

If/IN
you/PRP
pass/VBP
a/DT
string/NN
to/TO
a/DT
dyamic/JJ
SQL/NNP
statement/NN
,/,
you/PRP
should/MD
encode/VB
different/JJ
characters/NNS
(/-LRB-
or/CC
better/JJR
,/,
let/VB
the/DT
framework/NN
do/VBP
it/PRP
for/IN
you/PRP
by/IN
using/VBG
prepared/JJ
statements/NNS
or/CC
the/DT
like/JJ
)/-RRB-
./.

When/WRB
you/PRP
are/VBP
sure/JJ
you/PRP
HTML-encode/VB
everywhere/RB
you/PRP
pass/VBP
strings/NNS
to/TO
HTML/NNP
,/,
then/RB
set/C
validateRequest/C
=/C
"false"/C
./.

In/IN
.NET/NNP
4/CD
you/PRP
may/MD
need/VB
to/TO
do/VB
a/DT
little/RB
more/JJR
./.

Sometimes/RB
it/PRP
's/VBZ
necessary/JJ
to/TO
also/RB
add/VB
to/TO
web.config/URI
(/-LRB-
reference/NN
)/-RRB-
./.

If/IN
I/PRP
understand/VBP
the/DT
MO/FW
of/IN
brute/JJ
force/NN
attacks/NNS
properly/RB
,/,
then/RB
one/CD
or/CC
more/JJR
usernames/NNS
are/VBP
tried/VBN
continuously/RB
./.

There/EX
are/VBP
two/CD
suggestions/NNS
which/WDT
I/PRP
do/VBP
n't/RB
think/VB
I/PRP
've/VBP
seen/VBN
yet/RB
here/RB
:/.

I/PRP
always/RB
thought/VBD
that/IN
the/DT
standard/JJ
practice/NN
was/VBD
to/TO
have/VB
a/DT
short/JJ
delay/NN
(/-LRB-
a/DT
second/JJ
or/CC
so/RB
)/-RRB-
after/IN
each/DT
wrong/JJ
login/NN
for/IN
every/DT
user/NN
./.

This/DT
deters/VBZ
brute-force/JJ
,/,
but/CC
I/PRP
do/VBP
n't/RB
know/VB
how/WRB
long/JJ
a/DT
one/CD
second/NN
delay/NN
would/MD
keep/VB
a/DT
dictionary/NN
attack/NN
at/IN
bay/NN
./.

(/-LRB-
dictionary/NN
of/IN
10,000/CD
words/NNS
=/SYM
=/SYM
10,000/CD
seconds/NNS
=/SYM
=/SYM
about/IN
3/CD
hours/NNS
./.

Hmm/UH
./.

Not/RB
good/JJ
enough/RB
./.
)/-RRB-

instead/RB
of/IN
a/DT
site-wide/JJ
slow/JJ
down/NN
,/,
why/WRB
not/RB
a/DT
user-name/NN
throttle/NN
./.

The/DT
throttle/NN
becomes/VBZ
increasingly/RB
harsh/JJ
with/IN
each/DT
wrong/JJ
attempt/NN
(/-LRB-
up/RB
to/TO
a/DT
limit/NN
,/,
I/PRP
guess/VBP
so/RB
the/DT
real/JJ
user/NN
can/MD
still/RB
login/VB
)/-RRB-

Edit/VB
:/.

In/IN
response/NN
to/TO
comments/NNS
on/IN
a/DT
username/NN
throttle/NN
:/:
this/DT
is/VBZ
a/DT
username/NN
specific/JJ
throttle/NN
without/IN
regard/RB
to/TO
the/DT
source/NN
of/IN
the/DT
attack/NN
./.

If/IN
the/DT
username/NN
is/VBZ
throttled/VBN
,/,
then/RB
even/RB
a/DT
coordinated/VBN
username/NN
attack/NN
(/-LRB-
multi/JJ
IP/NNP
,/,
single/JJ
guess/NN
per/IN
IP/NNP
,/,
same/JJ
username/NN
)/-RRB-
would/MD
be/VB
caught/VBN
./.

Individual/JJ
usernames/NNS
are/VBP
protected/VBN
by/IN
the/DT
throttle/NN
,/,
even/RB
if/IN
the/DT
attackers/NNS
are/VBP
free/JJ
to/TO
try/VB
another/DT
user/NN
//CC
pass/NN
during/IN
the/DT
timeout/NN
./.

From/IN
an/DT
attackers/NNS
point/NN
of/IN
view/NN
,/,
during/IN
the/DT
timeout/NN
you/PRP
may/MD
be/VB
able/JJ
to/TO
take/VB
a/DT
first/JJ
time/NN
guess/NN
at/IN
100/CD
passwords/NNS
,/,
and/CC
quickly/RB
discover/VB
one/CD
wrong/JJ
password/NN
per/IN
account/NN
./.

You/PRP
may/MD
only/RB
be/VB
able/JJ
to/TO
make/VB
a/DT
50/CD
second/JJ
guesses/NNS
for/IN
the/DT
same/JJ
time/NN
period/NN
./.

From/IN
a/DT
user/NN
account/NN
point/NN
of/IN
view/NN
,/,
it/PRP
still/RB
takes/VBZ
the/DT
same/JJ
average/JJ
number/NN
of/IN
guesses/NNS
to/TO
break/VB
the/DT
password/NN
,/,
even/RB
if/IN
the/DT
guesses/NNS
are/VBP
coming/VBG
from/IN
multiple/JJ
sources/NNS
./.

For/IN
the/DT
attackers/NNS
,/,
at/IN
best/JJS
,/,
it/PRP
will/MD
be/VB
the/DT
same/JJ
effort/NN
to/TO
break/VB
100/CD
accounts/NNS
as/IN
it/PRP
would/MD
1/CD
account/NN
,/,
but/CC
since/IN
you/PRP
're/VBP
not/RB
throttling/VBG
on/IN
a/DT
site/NN
wide/JJ
basis/NN
,/,
you/PRP
can/MD
ramp/NN
up/RP
the/DT
throttle/NN
quite/RB
quickly/RB
./.

Extra/JJ
refinements/NNS
:/.

detect/VB
IPs/NNS
that/WDT
are/VBP
guessing/VBG
multiple/JJ
accounts/NNS
-/:
408/CD
Request/VB
Timeout/NN

detect/VB
IPs/NNS
that/WDT
are/VBP
guessing/VBG
the/DT
same/JJ
account/NN
-/:
408/CD
Request/VB
Timeout/NN
after/IN
a/DT
large/JJ
(/-LRB-
say/VB
100/CD
)/-RRB-
number/NN
of/IN
guesses/NNS
./.

UI/NN
ideas/NNS
(/-LRB-
may/MD
not/RB
be/VB
suitable/JJ
in/IN
this/DT
context/NN
)/-RRB-
,/,
which/WDT
may/MD
also/RB
refine/VB
the/DT
above/JJ
:/.

if/IN
you/PRP
are/VBP
in/IN
control/NN
of/IN
the/DT
password/NN
setting/NN
,/,
then/RB
showing/VBG
the/DT
user/NN
how/WRB
strong/JJ
their/PRP$
password/NN
is/VBZ
encourages/VBZ
them/PRP
to/TO
pick/VB
a/DT
better/JJR
one/NN
./.

if/IN
you/PRP
are/VBP
in/IN
control/NN
of/IN
the/DT
login/NN
page/NN
,/,
after/IN
a/DT
small/JJ
(/-LRB-
say/VB
10/CD
)/-RRB-
number/NN
of/IN
guesses/NNS
of/IN
a/DT
single/JJ
username/NN
,/,
offer/VBP
a/DT
CAPTCHA/NN
./.

To/TO
summarize/VB
Jens/NNP
'/POS
scheme/NN
into/IN
a/DT
pseudo/JJ
state/NN
transition/NN
diagram/NN
//CC
rulebase/NN
:/.

user/C
+/C
password/C
->/C
entry/C

user/C
+/C
!/C
password/C
->/C
denied/C

user/C
+/C
known_IP/C
(/C
user/C
)/C
->/C
front/C
door/C
,/C
///CCM
never/RB|CCM
throttle/VB|CCM

user/C
+/C
unknown_IP/C
(/C
user/C
)/C
->/C
catflap/C

(/C
#denied/C
>/C
n/C
)/C
via/C
catflaps/C
(/C
site/C
)/C
->/C
throttle/C
catflaps/C
(/C
site/C
)/C
///CCM
slow/VB|CCM
the/DT|CCM
bots/NNS|CCM

catflap/C
+/C
throttle/C
+/C
password/C
+/C
captcha/C
->/C
entry/C
///CCM
humans/NNS|CCM
still/RB|CCM
welcome/VBP|CCM

catflap/C
+/C
throttle/C
+/C
password/C
+/C
!/C
captcha/C
->/C
denied/C
///CCM
a/DT|CCM
correct/JJ|CCM
guess/NN|CCM
from/IN|CCM
a/DT|CCM
bot/NN|CCM

Observations/NNS
:/.

Never/RB
throttle/VB
the/DT
front/JJ
door/NN
./.

The/DT
Elbonian/NNP
state/NN
police/NNS
have/VBP
your/PRP$
computer/NN
,/,
in/IN
your/PRP$
house/NN
,/,
but/CC
are/VBP
unable/JJ
to/TO
interrogate/VB
you/PRP
./.

Brute/JJ
force/NN
is/VBZ
a/DT
viable/JJ
approach/NN
from/IN
your/PRP$
computer/NN
./.

If/IN
you/PRP
provide/VBP
a/DT
"/``
Forgetten/VB
your/PRP$
password/NN
?/.
"/''
link/NN
,/,
then/RB
your/PRP$
email/NN
account/NN
becomes/VBZ
part/NN
of/IN
the/DT
attack/NN
surface/NN
./.

These/DT
observations/NNS
cover/VBP
a/DT
different/JJ
type/NN
of/IN
attack/NN
to/TO
the/DT
ones/NNS
you/PRP
are/VBP
trying/VBG
to/TO
counter/VB
./.

First/RB
,/,
a/DT
little/JJ
background/NN
:/:
It/PRP
is/VBZ
no/DT
secret/NN
that/IN
I/PRP
am/VBP
implementing/VBG
an/DT
auth/C
+/C
auth/C
system/NN
for/IN
CodeIgniter/NNP
,/,
and/CC
so/RB
far/RB
I/PRP
'm/VBP
winning/VBG
(/-LRB-
so/RB
to/TO
speak/VB
)/-RRB-
./.

But/CC
I/PRP
've/VBP
run/VBN
into/IN
a/DT
pretty/RB
non-trivial/JJ
challenge/NN
(/-LRB-
one/CD
that/IN
most/JJS
auth/C NA
libraries/NNS
miss/VBP
entirely/RB
,/,
but/CC
I/PRP
insist/VBP
on/IN
handling/VBG
it/PRP
properly/RB
)/-RRB-
:/:
how/WRB
to/TO
deal/VB
intelligently/RB
with/IN
large-scale/JJ
,/,
distributed/JJ
,/,
variable-username/JJ
brute-force/JJ
attacks/NNS
./.

I/PRP
know/VBP
all/PDT
the/DT
usual/JJ
tricks/NNS
:/.

Limiting/VBG
#/SYM
of/IN
failed/JJ
attempts/NNS
per/IN
IP/NNP
//CC
host/NN
and/CC
denying/VBG
the/DT
offenders/NNS
access/NN
(/-LRB-
e.g./FW
Fail2Ban/C
)/-RRB-
-/--
which/WDT
no/RB
longer/RB
works/VBZ
since/IN
botnets/NNS
have/VBP
grown/VBN
smarter/RBR

Combining/VBG
the/DT
above/JJ
with/IN
a/DT
blacklist/NN
of/IN
known/VBN
'/``
bad/JJ
'/''
IPs/NNPS
//CC
hosts/NNS
(/-LRB-
e.g./FW
DenyHosts/C
)/-RRB-
-/--
which/WDT
relies/VBZ
on/IN
botnets/NNS
falling/VBG
for/IN
#/SYM
1/CD
,/,
which/WDT
they/PRP
increasingly/RB
do/VBP
n't/RB

IP/NNP
//CC
host/NN
whitelists/NNS
combined/VBN
with/IN
traditional/JJ
auth/C NA
(/-LRB-
sadly/RB
useless/JJ
with/IN
dynamic/JJ
IP/NNP
users/NNS
and/CC
the/DT
high/JJ
churn/VBP
on/IN
most/JJS
web/NN
sites/NNS
)/-RRB-

Setting/VBG
a/DT
sitewide/JJ
limit/NN
on/IN
#/SYM
of/IN
failed/JJ
attempts/NNS
within/IN
a/DT
N/C NA
minute/NN
//CC
hour/NN
period/NN
,/,
and/CC
throttling/VBG
(/-LRB-
suspending/VBG
)/-RRB-
all/DT
login/NN
attempts/NNS
after/IN
that/DT
for/IN
a/DT
number/NN
of/IN
minutes/NNS
//CC
hours/NNS
(/-LRB-
with/IN
the/DT
problem/NN
that/IN
DoS/NN
attacking/VBG
you/PRP
becomes/VBZ
botnet/NN
child/NN
's/POS
play/NN
)/-RRB-

Mandatory/JJ
digital/JJ
signatures/NNS
(/-LRB-
public-key/JJ
certificates/NNS
)/-RRB-
or/CC
RSA/NNP
hardware/NN
tokens/NNS
for/IN
all/DT
users/NNS
with/IN
NO/JJ
login/NN
//CC
password/NN
option/NN
(/-LRB-
without/IN
question/NN
a/DT
rock-solid/JJ
solution/NN
,/,
but/CC
only/RB
practical/JJ
for/IN
closed/JJ
,/,
dedicated/JJ
services/NNS
)/-RRB-

Enforced/VBN
ultra-strong/JJ
password/NN
schemes/NNS
(/-LRB-
e.g./FW
>/SYM
25/CD
nonsense/NN
characters/NNS
with/IN
symbols/NNS
-/--
again/RB
,/,
too/RB
impractical/JJ
for/IN
casual/JJ
users/NNS
)/-RRB-

And/CC
finally/RB
,/,
CAPTCHAs/NNS
(/-LRB-
which/WDT
could/MD
work/VB
in/IN
most/JJS
cases/NNS
,/,
but/CC
are/VBP
annoying/VBG
for/IN
users/NNS
and/CC
virtually/RB
useless/JJ
against/IN
a/DT
determined/JJ
,/,
resourceful/JJ
attacker/NN
)/-RRB-

Now/RB
,/,
these/DT
are/VBP
just/RB
the/DT
theoretically/RB
workable/JJ
ideas/NNS
./.

There/EX
are/VBP
plenty/NN
of/IN
rubbish/JJ
ideas/NNS
that/WDT
blow/VBP
the/DT
site/NN
wide/JJ
open/JJ
(/-LRB-
e.g./FW
to/TO
trivial/JJ
DoS/NN
attacks/NNS
)/-RRB-
./.

What/WP
I/PRP
want/VBP
is/VBZ
something/NN
better/RB
./.

And/CC
by/IN
better/JJR
,/,
I/PRP
mean/VBP
:/:
It/PRP
has/VBZ
to/TO
be/VB
secure/JJ
(/-LRB-
+/SYM
)/-RRB-
against/IN
DoS/NN
and/CC
brute-force/NN
attacks/NNS
,/,
and/CC
not/RB
introduce/VB
any/DT
new/JJ
vulnerabilities/NNS
that/WDT
might/MD
allow/VB
a/DT
slightly/RB
sneakier/JJR
bot/NN
to/TO
continue/VB
operating/VBG
under/IN
the/DT
radar/NN
It/PRP
has/VBZ
to/TO
be/VB
automated/VBN
./.

If/IN
it/PRP
requires/VBZ
a/DT
human/JJ
operator/NN
to/TO
verify/VB
each/DT
login/NN
or/CC
monitor/NN
suspicious/JJ
activity/NN
,/,
it/PRP
's/VBZ
not/RB
going/VBG
to/TO
work/VB
in/IN
a/DT
real-world/JJ
scenario/NN

It/PRP
has/VBZ
to/TO
be/VB
feasible/JJ
for/IN
mainstream/JJ
web/NN
use/NN
(/-LRB-
ie./FW
high/RB
churn/VB
,/,
high/JJ
volume/NN
,/,
and/CC
open/JJ
registration/NN
that/WDT
can/MD
be/VB
performed/VBN
by/IN
non-programmers/NNS
)/-RRB-

It/PRP
ca/MD
n't/RB
impede/VB
the/DT
user/NN
experience/NN
to/TO
the/DT
point/NN
where/WRB
casual/JJ
users/NNS
will/MD
get/VB
annoyed/VBN
or/CC
frustrated/VBN
(/-LRB-
and/CC
potentially/RB
abandon/VB
the/DT
site/NN
)/-RRB-

It/PRP
ca/MD
n't/RB
involve/VB
kittens/NNS
,/,
unless/IN
they/PRP
are/VBP
really/RB
really/RB
secure/JJ
kittens/NNS

(/-LRB-
+/SYM
)/-RRB-
By/IN
'/``
secure/JJ
'/''
,/,
I/PRP
mean/VBP
at/IN
least/JJS
as/RB
secure/JJ
as/IN
a/DT
paranoid/JJ
user/NN
's/POS
ability/NN
to/TO
keep/VB
his/PRP$
password/NN
secret/NN

So/IN
-/--
let/VBZ
's/PRP
hear/VB
it/PRP
!/.

How/WRB
would/MD
you/PRP
do/VB
it/PRP
?/.

Do/VBP
you/PRP
know/VB
of/IN
a/DT
best-practice/NN
that/IN
I/PRP
have/VBP
n't/RB
mentioned/VBN
(/-LRB-
oh/UH
please/VB
say/VBP
you/PRP
do/VBP
)/-RRB-
?/.

I/PRP
admit/VBP
I/PRP
do/VBP
have/VB
an/DT
idea/NN
of/IN
my/PRP$
own/JJ
(/-LRB-
combining/VBG
ideas/NNS
from/IN
3/CD
and/CC
4/CD
)/-RRB-
,/,
but/CC
I/PRP
'll/MD
let/VB
the/DT
true/JJ
experts/NNS
speak/VBP
before/IN
embarrassing/VBG
myself/PRP
;-)/UH

`/``
KittenAuth/C
'/''
./.

Google/NNP
is/VBZ
your/PRP$
friend/NN
./.

Oh/UH
,/,
and/CC
before/IN
you/PRP
ask/VBP
:/:
it/PRP
's/VBZ
broken/JJ
./.

All/DT
right/NN
,/,
enough/RB
stalling/VBG
;/:
here/RB
's/POS
what/WP
I/PRP
've/VBP
come/VBN
up/RP
with/IN
so/RB
far/RB
(/-LRB-
sorry/JJ
,/,
long/JJ
post/NN
ahead/RB
./.

Be/VB
brave/VB
,/,
friend/NN
,/,
the/DT
journey/NN
will/MD
be/VB
worth/JJ
it/PRP
)/-RRB-

Combining/VBG
methods/NNS
3/CD
and/CC
4/CD
from/IN
the/DT
original/JJ
post/NN
into/IN
a/DT
kind/NN
of/IN
'/``
fuzzy/JJ
'/''
or/CC
dynamic/JJ
whitelist/NN
,/,
and/CC
then/RB
-/--
and/CC
here/RB
's/VBZ
the/DT
trick/NN
-/--
not/RB
blocking/VBG
non-whitelisted/JJ
IPs/NNS
,/,
just/RB
throttling/VBG
them/PRP
to/TO
hell/NN
and/CC
back/NN
./.

Note/VB
that/IN
this/DT
measure/NN
is/VBZ
only/RB
meant/VBN
to/TO
thwart/VB
this/DT
very/RB
specific/JJ
type/NN
of/IN
attack/NN
./.

In/IN
practice/NN
,/,
of/IN
course/NN
,/,
it/PRP
would/MD
work/VB
in/IN
combination/NN
with/IN
other/JJ
best-practices/NNS
approaches/NNS
to/TO
auth/C NA
:/:
fixed-username/JJ
throttling/NN
,/,
per-IP/JJ
throttling/NN
,/,
code-enforced/JJ
strong/JJ
password/NN
policy/NN
,/,
unthrottled/JJ
cookie/NN
login/NN
,/,
hashing/VBG
all/DT
password/NN
equivalents/NNS
before/IN
saving/VBG
them/PRP
,/,
never/RB
using/VBG
security/NN
questions/NNS
,/,
etc/FW
./.

Assumptions/NNS
about/IN
the/DT
attack/NN
scenario/NN
If/IN
an/DT
attacker/NN
is/VBZ
targeting/VBG
variable/JJ
usernames/NNS
,/,
our/PRP$
username/JJ
throttling/NN
does/VBZ
n't/RB
fire/VB
./.

If/IN
the/DT
attacker/NN
is/VBZ
using/VBG
a/DT
botnet/NN
or/CC
has/VBZ
access/NN
to/TO
a/DT
large/JJ
IP/NNP
range/NN
,/,
our/PRP$
IP/NNP
throttling/NN
is/VBZ
powerless/JJ
./.

If/IN
the/DT
attacker/NN
has/VBZ
pre-scraped/VBN
our/PRP$
userlist/NN
(/-LRB-
usually/RB
possible/JJ
on/IN
open-registration/NN
web/NN
services/NNS
)/-RRB-
,/,
we/PRP
ca/MD
n't/RB
detect/VB
an/DT
ongoing/JJ
attack/NN
based/VBN
on/IN
number/NN
of/IN
'/``
user/NN
not/RB
found/VBN
'/POS
errors/NNS
./.

And/CC
if/IN
we/PRP
enforce/VBP
a/DT
restrictive/JJ
system-wide/NN
(/-LRB-
all/DT
usernames/NNS
,/,
all/DT
IPs/NNS
)/-RRB-
throttling/NN
,/,
any/DT
such/JJ
attack/NN
will/MD
DoS/NN
our/PRP$
entire/JJ
site/NN
for/IN
the/DT
duration/NN
of/IN
the/DT
attack/NN
plus/CC
the/DT
throttling/NN
period/NN
./.

So/RB
we/PRP
need/VBP
to/TO
do/VB
something/NN
else/RB
./.

The/DT
first/JJ
part/NN
of/IN
the/DT
countermeasure/NN
:/:
Whitelisting/NN

What/WP
we/PRP
can/MD
be/VB
fairly/RB
sure/JJ
of/IN
,/,
is/VBZ
that/IN
the/DT
attacker/NN
is/VBZ
not/RB
able/JJ
to/TO
detect/VB
and/CC
dynamically/RB
spoof/VBP
the/DT
IP/NNP
addresses/NNS
of/IN
several/JJ
thousand/CD
of/IN
our/PRP$
users/NNS
(/-LRB-
+/SYM
)/-RRB-
./.

Which/WDT
makes/VBZ
whitelisting/NN
feasible/JJ
./.

In/IN
other/JJ
words/NNS
:/:
for/IN
each/DT
user/NN
,/,
we/PRP
store/VBP
a/DT
list/NN
of/IN
the/DT
(/-LRB-
hashed/VBN
)/-RRB-
IPs/NNS
from/IN
where/WRB
the/DT
user/NN
has/VBZ
previously/RB
(/-LRB-
recently/RB
)/-RRB-
logged/VBN
in/IN
./.

Thus/RB
,/,
our/PRP$
whitelisting/NN
scheme/NN
will/MD
function/VB
as/IN
a/DT
locked/VBN
'/``
front/JJ
door/NN
'/''
,/,
where/WRB
a/DT
user/NN
must/MD
be/VB
connected/VBN
from/IN
one/CD
of/IN
his/PRP$
recognized/VBN
'/``
good/JJ
'/''
IPs/NNS
in/IN
order/NN
to/TO
log/VB
in/RP
at/IN
all/DT
./.

A/DT
brute-force/JJ
attack/NN
on/IN
this/DT
'/``
front/JJ
door/NN
'/''
would/MD
be/VB
practically/RB
impossible/JJ
(/-LRB-
+/SYM
)/-RRB-
./.

(/-LRB-
+/SYM
)/-RRB-
unless/IN
the/DT
attacker/NN
'/``
owns/VBZ
'/''
either/CC
the/DT
server/NN
,/,
all/DT
our/PRP$
users/NNS
'/POS
boxes/NNS
,/,
or/CC
the/DT
connection/NN
itself/PRP
--/--
and/CC
in/IN
those/DT
cases/NNS
,/,
we/PRP
no/RB
longer/RB
have/VB
an/DT
'/``
authentication/NN
'/''
issue/NN
,/,
we/PRP
have/VBP
a/DT
genuine/JJ
franchise-sized/JJ
pull-the-plug/JJ
FUBAR/C
situation/NN

The/DT
second/JJ
part/NN
of/IN
the/DT
countermeasure/NN
:/:
System-wide/JJ
throttling/NN
of/IN
unrecognized/JJ
IPs/NNS

In/IN
order/NN
to/TO
make/VB
a/DT
whitelist/NN
work/VB
for/IN
an/DT
open-registration/JJ
web/NN
service/NN
,/,
where/WRB
users/NNS
switch/VBP
computers/NNS
frequently/RB
and/CC
//CC
or/CC
connect/VB
from/IN
dynamic/JJ
IP/NNP
addresses/NNS
,/,
we/PRP
need/VBP
to/TO
keep/VB
a/DT
'/``
cat/NN
door/NN
'/''
open/JJ
for/IN
users/NNS
connecting/VBG
from/IN
unrecognized/JJ
IPs/NNS
./.

The/DT
trick/NN
is/VBZ
to/TO
design/VB
that/DT
door/NN
so/IN
botnets/NNS
get/VBP
stuck/VBN
,/,
and/CC
so/RB
legitimate/JJ
users/NNS
get/VBP
bothered/VBN
as/RB
little/JJ
as/IN
possible/JJ
./.

In/IN
my/PRP$
scheme/NN
,/,
this/DT
is/VBZ
achieved/VBN
by/IN
setting/VBG
a/DT
very/RB
restrictive/JJ
maximum/NN
number/NN
of/IN
failed/JJ
login/NN
attempts/NNS
by/IN
unapproved/JJ
IPs/NNS
over/IN
,/,
say/VB
,/,
a/DT
3-hour/JJ
period/NN
(/-LRB-
it/PRP
may/MD
be/VB
wiser/JJR
to/TO
use/VB
a/DT
shorter/JJR
or/CC
longer/JJR
period/NN
depending/VBG
on/IN
type/NN
of/IN
service/NN
)/-RRB-
,/,
and/CC
making/VBG
that/DT
restriction/NN
global/JJ
,/,
ie./FW
for/IN
all/DT
user/NN
accounts/NNS
./.

Even/RB
a/DT
slow/JJ
(/-LRB-
1-2/CD
minutes/NNS
between/IN
attempts/NNS
)/-RRB-
brute/JJ
force/NN
would/MD
be/VB
detected/VBN
and/CC
thwarted/VBN
quickly/RB
and/CC
effectively/RB
using/VBG
this/DT
method/NN
./.

Of/IN
course/NN
,/,
a/DT
really/RB
slow/JJ
brute/JJ
force/NN
could/MD
still/RB
remain/VB
unnoticed/JJ
,/,
but/CC
too/RB
slow/JJ
speeds/NNS
defeat/VBP
the/DT
very/JJ
purpose/NN
of/IN
the/DT
brute/JJ
force/NN
attack/NN
./.

What/WP
I/PRP
am/VBP
hoping/VBG
to/TO
accomplish/VB
with/IN
this/DT
throttling/VBG
mechanism/NN
is/VBZ
that/IN
if/IN
the/DT
maximum/JJ
limit/NN
is/VBZ
reached/VBN
,/,
our/PRP$
'/``
cat/NN
door/NN
'/''
slams/NNS
closed/VBD
for/IN
a/DT
while/NN
,/,
but/CC
our/PRP$
front/JJ
door/NN
remains/VBZ
open/JJ
to/TO
legitimate/JJ
users/NNS
connecting/VBG
by/IN
usual/JJ
means/NNS
:/.

Either/RB
by/IN
connecting/VBG
from/IN
one/CD
of/IN
their/PRP$
recognized/VBN
IPs/NNS
Or/CC
by/IN
using/VBG
a/DT
persistent/JJ
login/NN
cookie/NN
(/-LRB-
from/IN
anywhere/RB
)/-RRB-

The/DT
only/JJ
legitimate/JJ
users/NNS
who/WP
would/MD
be/VB
affected/VBN
during/IN
an/DT
attack/NN
-/--
ie./FW
while/IN
the/DT
throttling/NN
was/VBD
activated/VBN
-/--
would/MD
be/VB
users/NNS
without/IN
persistent/JJ
login/NN
cookies/NNS
who/WP
were/VBD
logging/VBG
in/RP
from/IN
an/DT
unknown/JJ
location/NN
or/CC
with/IN
a/DT
dynamic/JJ
IP/NNP
./.

Those/DT
users/NNS
would/MD
be/VB
unable/JJ
to/TO
login/VB
until/IN
the/DT
throttling/VBG
wore/VBD
off/RP
(/-LRB-
which/WDT
could/MD
potentially/RB
take/VB
a/DT
while/NN
,/,
if/IN
the/DT
attacker/NN
kept/VBD
his/PRP$
botnet/NN
running/VBG
despite/IN
the/DT
throttling/VBG
)/-RRB-
./.

To/TO
allow/VB
this/DT
small/JJ
subset/NN
of/IN
users/NNS
to/TO
squeeze/VB
through/IN
the/DT
otherwise-sealed/JJ
cat/NN
door/NN
,/,
even/RB
while/IN
bots/NNS
were/VBD
still/RB
hammering/VBG
away/RB
at/IN
it/PRP
,/,
I/PRP
would/MD
employ/VB
a/DT
'/``
backup/JJ
'/''
login/NN
form/NN
with/IN
a/DT
CAPTCHA/NN
./.

So/IN
that/DT
,/,
when/WRB
you/PRP
display/VBP
the/DT
"/``
Sorry/ER
,/ER
but/ER
you/ER
ca/ER
n't/ER
login/ER
from/ER
this/ER
IP/ER
address/ER
at/ER
the/ER
moment/ER
"/''
message/NN
,/,
include/VBP
a/DT
link/NN
that/WDT
says/VBZ
"/``
secure/ER
backup/ER
login/ER
-/ER
HUMANS/ER
ONLY/ER
(/ER
bots/ER
:/ER
no/ER
lying/ER
)/ER
"/''
./.

Joke/NN
aside/RB
,/,
when/WRB
they/PRP
click/VBP
that/IN
link/NN
,/,
give/VB
them/PRP
a/DT
reCAPTCHA-authenticated/JJ
login/NN
form/NN
that/WDT
bypasses/VBZ
the/DT
site-wide/JJ
throttling/NN
./.

That/DT
way/NN
,/,
IF/IN
they/PRP
are/VBP
human/JJ
AND/CC
know/VBP
the/DT
correct/JJ
login/NN
+/CC
password/NN
(/-LRB-
and/CC
are/VBP
able/JJ
to/TO
read/VB
CAPTCHAs/NNS
)/-RRB-
,/,
they/PRP
will/MD
never/RB
be/VB
denied/VBN
service/NN
,/,
even/RB
if/IN
they/PRP
are/VBP
connecting/VBG
from/IN
an/DT
unknown/JJ
host/NN
and/CC
not/RB
using/VBG
the/DT
autologin/NN
cookie/NN
./.

Oh/UH
,/,
and/CC
just/RB
to/TO
clarify/VB
:/:
Since/IN
I/PRP
do/VBP
consider/VB
CAPTCHAs/NNS
to/TO
be/VB
generally/RB
evil/JJ
,/,
the/DT
'/``
backup/JJ
'/''
login/NN
option/NN
would/MD
only/RB
appear/VB
while/IN
throttling/NN
was/VBD
active/JJ
./.

There/EX
is/VBZ
no/DT
denying/VBG
that/IN
a/DT
sustained/JJ
attack/NN
like/IN
that/DT
would/MD
still/RB
constitute/VB
a/DT
form/NN
of/IN
DoS/NN
attack/NN
,/,
but/CC
with/IN
the/DT
described/VBN
system/NN
in/IN
place/NN
,/,
it/PRP
would/MD
only/RB
affect/VB
what/WP
I/PRP
suspect/VBP
to/TO
be/VB
a/DT
tiny/JJ
subset/NN
of/IN
users/NNS
,/,
namely/RB
people/NNS
who/WP
do/VBP
n't/RB
use/VB
the/DT
"/``
remember/VB
me/PRP
"/''
cookie/NN
AND/CC
happen/VB
to/TO
be/VB
logging/VBG
in/RP
while/IN
an/DT
attack/NN
is/VBZ
happening/VBG
AND/NNP
are/VBP
n't/RB
logging/VBG
in/RP
from/IN
any/DT
of/IN
their/PRP$
usual/JJ
IPs/NNS
AND/CC
who/WP
ca/MD
n't/RB
read/VB
CAPTCHAs/NNS
./.

Only/RB
those/DT
who/WP
can/MD
say/VB
no/RB
to/TO
ALL/DT
of/IN
those/DT
criteria/NNS
-/--
specifically/RB
bots/NNS
and/CC
really/RB
unlucky/JJ
disabled/JJ
people/NNS
-/--
will/MD
be/VB
turned/VBN
away/RP
during/IN
a/DT
bot/NN
attack/NN
./.

EDIT/VB
:/.

Actully/RB
,/,
I/PRP
thought/VBD
of/IN
a/DT
way/NN
to/TO
let/VB
even/RB
CAPTCHA-challenged/JJ
users/NNS
pass/VBP
through/IN
during/IN
a/DT
'/``
lockdown/NN
'/''
:/:
instead/RB
of/IN
,/,
or/CC
as/IN
a/DT
supplement/NN
to/TO
,/,
the/DT
backup/JJ
CAPTCHA/NN
login/NN
,/,
provide/VBP
the/DT
user/NN
with/IN
an/DT
option/NN
to/TO
have/VB
a/DT
single-use/JJ
,/,
user-specific/JJ
lockdown/NN
code/NN
sent/VBN
to/TO
his/PRP$
email/NN
,/,
that/IN
he/PRP
can/MD
then/RB
use/VB
to/TO
bypass/VB
the/DT
throttling/NN
./.

This/DT
definitely/RB
crosses/VBZ
over/IN
my/PRP$
'/``
annoyance/NN
'/''
threshold/NN
,/,
but/CC
since/IN
it/PRP
's/VBZ
only/RB
used/VBN
as/IN
a/DT
last/JJ
resort/NN
for/IN
a/DT
tiny/JJ
subset/NN
of/IN
users/NNS
,/,
and/CC
since/IN
it/PRP
still/RB
beats/VBZ
being/VBG
locked/VBN
out/IN
of/IN
your/PRP$
account/NN
,/,
it/PRP
would/MD
be/VB
acceptable/JJ
./.

(/-LRB-
Also/RB
,/,
note/VBP
that/IN
none/NN
of/IN
this/DT
happens/VBZ
if/IN
the/DT
attack/NN
is/VBZ
any/DT
less/RBR
sophisticated/JJ
than/IN
the/DT
nasty/JJ
distributed/VBN
version/NN
I/PRP
've/VBP
described/VBN
here/RB
./.

If/IN
the/DT
attack/NN
is/VBZ
coming/VBG
from/IN
just/RB
a/DT
few/JJ
IPs/NNPS
or/CC
only/RB
hitting/VBG
a/DT
few/JJ
usernames/NNS
,/,
it/PRP
will/MD
be/VB
thwarted/VBN
much/RB
earlier/RBR
,/,
and/CC
with/IN
no/DT
site-wide/JJ
consequences/NNS
)/-RRB-

So/RB
,/,
that/WDT
is/VBZ
the/DT
countermeasure/NN
I/PRP
will/MD
be/VB
implementing/VBG
in/IN
my/PRP$
auth/C NA
library/NN
,/,
once/RB
I/PRP
'm/VBP
convinced/JJ
that/IN
it/PRP
's/VBZ
sound/JJ
and/CC
that/IN
there/EX
is/VBZ
n't/RB
a/DT
much/RB
simpler/JJR
solution/NN
that/IN
I/PRP
've/VBP
missed/VBN
./.

The/DT
fact/NN
is/VBZ
,/,
there/EX
are/VBP
so/RB
many/JJ
subtle/JJ
ways/NNS
to/TO
do/VB
things/NNS
wrong/JJ
in/IN
security/NN
,/,
and/CC
I/PRP
'm/VBP
not/RB
above/IN
making/VBG
false/JJ
assumptions/NNS
or/CC
hopelessly/RB
flawed/JJ
logic/NN
./.

So/RB
please/VB
,/,
any/DT
and/CC
all/DT
feedback/NN
,/,
criticism/NN
and/CC
improvements/NNS
,/,
subtleties/NNS
etc./FW
are/VBP
highly/RB
appreciated/VBN
./.

That/DT
could/MD
work/VB
,/,
but/CC
only/RB
if/IN
the/DT
users/NNS
remember/VBP
those/DT
passwords/NNS
even/RB
if/IN
they/PRP
have/VBP
n't/RB
used/VBN
them/PRP
before/IN
(/-LRB-
these/DT
types/NNS
of/IN
attack/NN
are/VBP
n't/RB
commonplace/JJ
,/,
and/CC
no/DT
botmaster/NN
worth/IN
his/PRP$
salt/NN
would/MD
bother/VB
keeping/VBG
one/CD
running/VBG
for/IN
long/RB
after/IN
being/VBG
throttled/VBN
)/-RRB-
./.

The/DT
risk/NN
is/VBZ
too/RB
great/JJ
that/IN
they/PRP
simply/RB
could/MD
n't/RB
remember/VB
./.

However/RB
,/,
one/CD
method/NN
that/WDT
could/MD
definitely/RB
work/VB
,/,
is/VBZ
to/TO
provide/VB
a/DT
'/``
send/VB
me/PRP
a/DT
lockdown/NN
code/NN
'/''
link/NN
to/TO
those/DT
users/NNS
,/,
allowing/VBG
them/PRP
to/TO
get/VB
an/DT
email/NN
containing/VBG
a/DT
single-use/JJ
,/,
user-specific/JJ
token/JJ
that/WDT
would/MD
allow/VB
them/PRP
to/TO
login/NN
,/,
bypassing/VBG
the/DT
throttling/NN
./.

@Abtin/USR
:/:
Good/JJ
idea/NN
,/,
except/IN
that/DT
would/MD
be/VB
'/``
entering/VBG
the/DT
arms/NNS
race/NN
'/''
--/--
ie./FW
starting/VBG
a/DT
'/``
who/WP
can/MD
outsmart/VB
whom/WP
'/''
with/IN
the/DT
people/NNS
who/WP
create/VBP
password/NN
lists/NNS
for/IN
dictionary/NN
attacks/NNS
./.

I/PRP
think/VBP
a/DT
better/JJR
way/NN
would/MD
be/VB
to/TO
enforce/VB
a/DT
strong/JJ
password/NN
policy/NN
so/IN
there/EX
are/VBP
no/DT
weak/JJ
passwords/NNS

@OrestisP./USR
:/:
You/PRP
are/VBP
missing/VBG
the/DT
point/NN
of/IN
the/DT
distributed/VBN
attack/NN
-/:
#/SYM
of/IN
invalid/JJ
attempts/NNS
from/IN
each/DT
IP/NNP
is/VBZ
minimal/JJ
,/,
so/RB
per-IP/JJ
blocking/VBG
ca/MD
n't/RB
work/VB
./.

Also/RB
,/,
the/DT
question/NN
specifically/RB
describes/VBZ
an/DT
automated/JJ
brute/JJ
force/NN
attack/NN
,/,
so/RB
1/LS
)/-RRB-
the/DT
attacker/NN
is/VBZ
not/RB
human/JJ
,/,
but/CC
rather/RB
a/DT
botnet/NN
of/IN
zombie/NN
machines/NNS
(/-LRB-
who/WP
ca/MD
n't/RB
use/VB
the/DT
captcha/NN
login/NN
)/-RRB-
;/,
and/CC
2/LS
)/-RRB-
the/DT
brute/JJ
force/NN
nature/NN
of/IN
the/DT
attack/NN
requires/VBZ
a/DT
very/RB
high/JJ
number/NN
of/IN
login/NN
attempts/NNS
to/TO
ensure/VB
success/NN
,/,
which/WDT
means/VBZ
farming/VBG
the/DT
captcha/NN
solving/VBG
out/RP
to/TO
a/DT
sweat/NN
shop/NN
somewhere/RB
is/VBZ
n't/RB
feasible/JJ
(/-LRB-
albeit/RB
possible/JJ
if/IN
the/DT
attacker/NN
is/VBZ
well-funded/JJ
and/CC
determined/JJ
enough/RB
)/-RRB-
./.

@OrestisP./USR
:/:
Suppose/VB
I/PRP
'm/VBP
the/DT
attacker/NN
;/:
I/PRP
have/VBP
3/CD
million/CD
zombie/NN
machines/NNS
in/IN
my/PRP$
botnet/NN
./.

I/PRP
distribute/VBP
my/PRP$
attack/NN
over/IN
these/DT
machines/NNS
so/IN
each/DT
IP/NNP
only/RB
makes/VBZ
two/CD
or/CC
three/CD
login/NN
attempts/NNS
in/IN
total/NN
./.

That/DT
's/VBZ
6-9/CD
million/CD
attempts/NNS
I/PRP
can/MD
fire/VB
in/IN
a/DT
few/JJ
minutes/NNS
,/,
distributed/VBN
across/IN
,/,
say/VB
,/,
a/DT
million/CD
different/JJ
scraped/JJ
usernames/NNS
./.

That/DT
's/VBZ
a/DT
very/RB
viable/JJ
attack/NN
for/IN
a/DT
botnet/NN
operator/NN
,/,
and/CC
your/PRP$
per-IP/JJ
captcha/NN
is/VBZ
never/RB
triggered/VBN
,/,
not/RB
even/RB
once/RB
./.

The/DT
described/VBN
system-wide/JJ
throttling/NN
scheme/NN
would/MD
thwart/VB
this/DT
attack/NN
almost/RB
instantly/RB
./.

@OrestisP./USR
:/:
No/UH
,/,
this/DT
number/NN
would/MD
be/VB
higher/JJR
,/,
depending/VBG
on/IN
the/DT
baseline/NN
traffic/NN
on/IN
your/PRP$
site/NN
./.

The/DT
site-wide/JJ
throttling/NN
is/VBZ
n't/RB
by-IP/NN
,/,
it/PRP
's/VBZ
global/JJ
./.

So/RB
if/IN
the/DT
site/NN
receives/VBZ
too/RB
many/JJ
failed/JJ
logins/NNS
from/IN
ANY/DT
IP/NNP
for/IN
ANY/DT
number/NN
of/IN
usernames/NNS
(/-LRB-
like/IN
user/C
:/C
homer/C
;/C
pass/C
:/C
incorrect/C
and/CC
user/C
:/C
lisa/C
;/C
pass/C
:/C
incorrect/C
and/CC
user/C
:/C
bart/C
;/C
pass/C
:/C
incorrect/C
)/-RRB-
,/,
all/DT
within/IN
a/DT
predetermined/JJ
timeframe/C
,/,
the/DT
throttling/NN
will/MD
set/VB
in/RP
./.

@OrestisP./USR
No/DT
problem/NN
-/--
it/PRP
's/VBZ
a/DT
very/RB
specific/JJ
type/NN
of/IN
attack/NN
for/IN
sure/JJ
,/,
but/CC
I/PRP
felt/VBD
it/PRP
was/VBD
important/JJ
to/TO
try/VB
to/TO
address/VB
it/PRP
theoretically/RB
,/,
even/RB
if/IN
most/JJS
auth/NN
systems/NNS
will/MD
never/RB
implement/VB
this/DT
countermeasure/NN

@Curt/USR
:/:
You/PRP
are/VBP
correct/JJ
,/,
I/PRP
meant/VBD
to/TO
write/VB
"/``
by/IN
unapproved/JJ
IPs/NNPS
"/''
;/:
even/RB
with/IN
system-wide/JJ
throttling/NN
in/IN
place/NN
,/,
users/NNS
connecting/VBG
from/IN
their/PRP$
usual/JJ
IPs/NNS
should/MD
be/VB
let/VBN
through/IN
(/-LRB-
unless/IN
that/DT
IP/NNP
has/VBZ
been/VBN
spamming/VBG
logins/NNS
itself/PRP
and/CC
thus/RB
been/VBN
individually/RB
throttled/VBN
,/,
but/CC
that/DT
's/VBZ
a/DT
separate/JJ
trigger/NN
)/-RRB-
./.

Good/JJ
catch/NN
:)/UH

Fine/JJ
thoughts/NNS
./.

I/PRP
was/VBD
definitely/RB
planning/VBG
to/TO
implementing/VBG
an/DT
automatic/JJ
password/NN
policy/NN
that/WDT
varies/VBZ
dynamically/RB
with/IN
the/DT
user/NN
's/POS
privilege/NN
level/NN
./.

The/DT
honeypot/NN
idea/NN
might/MD
work/VB
for/IN
some/DT
types/NNS
of/IN
attack/NN
,/,
but/CC
if/IN
the/DT
attack/NN
is/VBZ
distributed/VBN
,/,
blocking/VBG
the/DT
IPs/NNS
that/WDT
fall/VBP
for/IN
it/PRP
wo/MD
n't/RB
be/VB
effective/JJ
./.

With/IN
respect/NN
to/TO
the/DT
`/``
Last/JJ
attempted/JJ
login/NN
time/NN
'/''
,/,
that/WDT
is/VBZ
a/DT
good/JJ
strategy/NN
for/IN
power/NN
users/NNS
(/-LRB-
which/WDT
I/PRP
bet/VBP
is/VBZ
why/WRB
SO/RB
does/VBZ
it/PRP
)/-RRB-
,/,
but/CC
it/PRP
has/VBZ
two/CD
weaknesses/NNS
:/:
(/-LRB-
a/LS
)/-RRB-
it/PRP
does/VBZ
n't/RB
address/VB
the/DT
problem/NN
of/IN
intrusion/NN
,/,
it/PRP
only/RB
reports/VBZ
that/IN
it/PRP
may/MD
have/VB
happened/VBN
,/,
and/CC
(/-LRB-
b/LS
)/-RRB-
,/,
most/JJS
user/NN
's/POS
just/RB
do/VBP
n't/RB
remember/VB
//CC
care/VB

A/DT
username/NN
throttle/NN
plus/CC
an/DT
IP/NNP
throttle/NN
is/VBZ
fine/JJ
against/IN
fixed-username/JJ
or/CC
fixed-IP/JJ
attacks/NNS
,/,
and/CC
they/PRP
do/VBP
make/VB
traditional/JJ
dictionary/NN
attacks/NNS
infeasible/JJ
./.

But/CC
if/IN
the/DT
attacker/NN
constantly/RB
changes/VBZ
usernames/NNS
,/,
he/PRP
will/MD
slip/VB
by/IN
without/IN
triggering/VBG
a/DT
username/NN
throttle/NN
./.

That/DT
's/VBZ
what/WP
I/PRP
want/VBP
to/TO
counter/VB

Thanks/VBZ
for/IN
the/DT
edit/NN
,/,
jamesh/NNP
./.

Now/RB
we/PRP
're/VBP
talking/VBG
./.

I/PRP
love/VBP
the/DT
idea/NN
of/IN
the/DT
408/CD
./.

However/RB
,/,
even/RB
with/IN
strict/JJ
username/NN
throttling/NN
,/,
a/DT
botnet/NN
attacking/VBG
multiple/JJ
users/NNS
would/MD
still/RB
work/VB
./.

And/CC
checking/VBG
the/DT
top/JJ
5000/CD
passwords/NNS
against/IN
one/CD
user/NN
is/VBZ
LESS/RB
likely/JJ
to/TO
succeed/VB
than/IN
checking/VBG
THE/DT
top/JJ
1/CD
password/NN
on/IN
5000/CD
users/NNS

Actually/RB
,/,
I/PRP
may/MD
have/VB
to/TO
re-check/VB
the/DT
math/NN
on/IN
my/PRP$
previous/JJ
statement/NN
./.

Once/RB
you/PRP
have/VBP
ruled/VBN
out/RP
the/DT
top/JJ
N/C NA
most/RBS
common/JJ
passwords/NNS
,/,
the/DT
probability/NN
of/IN
the/DT
user/NN
having/VBG
password/NN
#/C
(/C
N/C
+/C
1/C
)/C
may/MD
increase/VB
enough/RB
to/TO
even/VB
out/RP
the/DT
difference/NN
./.

Although/IN
the/DT
curve/NN
is/VBZ
probably/RB
steep/JJ
enough/RB
for/IN
that/DT
not/RB
to/TO
be/VB
the/DT
case/NN
I/PRP
'm/VBP
sure/JJ
there/EX
is/VBZ
more/JJR
to/TO
it/PRP
,/,
but/CC
if/IN
the/DT
SiteKey/C NA
idea/NN
is/VBZ
exactly/RB
what/WP
you/PRP
mentioned/VBD
,/,
an/DT
attacker/NN
does/VBZ
n't/RB
have/VB
to/TO
be/VB
a/DT
MITM/NN
,/,
he/PRP
can/MD
just/RB
run/VB
two/CD
or/CC
three/CD
login/NN
attempts/NNS
for/IN
that/DT
user/NN
,/,
and/CC
pick/VB
the/DT
image/NN
that/WDT
is/VBZ
repeating/VBG
among/IN
the/DT
random/JJ
ones/NNS
./.

Even/RB
if/IN
the/DT
set/NN
of/IN
8-15/CD
pictures/NNS
is/VBZ
static/JJ
for/IN
user/NN
X/C NA
,/,
(/-LRB-
continued/VBN
)/-RRB-
it/PRP
probably/RB
would/MD
n't/RB
be/VB
too/RB
difficult/JJ
to/TO
pick/VB
the/DT
correct/JJ
one/CD
,/,
since/IN
people/NNS
tend/VBP
to/TO
pick/VB
predictable/JJ
types/NNS
of/IN
images/NNS
(/-LRB-
even/JJ
images/NNS
from/IN
their/PRP$
own/JJ
Flickr/NNP
albums/NNS
!/.
)/-RRB-

But/CC
other/JJ
than/IN
that/DT
,/,
I/PRP
like/VBP
your/PRP$
ideas/NNS
./.

They/PRP
're/VBP
all/DT
dangerously/RB
close/JJ
to/TO
my/PRP$
'/``
annoyance/NN
'/''
threshold/NN
though/IN
./.

I/PRP
actually/RB
thought/VBD
of/IN
a/DT
different/JJ
spin/NN
on/IN
the/DT
'/``
kittens/NNS
'/POS
idea/NN
:/:
the/DT
first/JJ
time/NN
they/PRP
login/VBP
,/,
show/VBP
a/DT
random/JJ
image/NN
from/IN
Flickr/NNP
and/CC
ask/VB
the/DT
user/NN
to/TO
pick/VB
3-5/CD
'/``
interesting/JJ
'/''
spots/NNS
by/IN
clicking/VBG
it/PRP
,/,
and/CC
store/VB
the/DT
image/NN
+/CC
coords/NNS
./.

On/IN
the/DT
user/NN
's/POS
next/JJ
login/NN
,/,
show/VBP
the/DT
image/NN
PLUS/NN
another/DT
random/JJ
Flickr/NNP
one/CD
,/,
and/CC
(/-LRB-
continued/VBN
)/-RRB-
ask/VB
the/DT
user/NN
to/TO
click/VB
the/DT
3-5/CD
'/``
interesting/JJ
'/''
spots/NNS
in/IN
both/DT
images/NNS
./.

If/IN
the/DT
user/NN
picks/VBZ
the/DT
same/JJ
(/-LRB-
approximate/JJ
)/-RRB-
coords/NNS
as/IN
his/PRP$
previous/JJ
login/NN
,/,
authenticate/VB
and/CC
store/VB
the/DT
new/JJ
image/NN
+/CC
coords/NNS
./.

Rinse/VB
and/CC
repeat/VB
with/IN
a/DT
new/JJ
image/NN
for/IN
every/DT
login/NN
./.

(/-LRB-
continued/VBN
)/-RRB-
If/IN
you/PRP
could/MD
make/VB
an/DT
algorithm/NN
to/TO
translate/VB
coords/NNS
into/IN
an/DT
'/``
approximate/JJ
coord/NN
hash/NN
'/''
(/-LRB-
that/WDT
would/MD
return/VB
the/DT
SAME/JJ
hash/NN
for/IN
slightly-different/JJ
coords/NNS
)/-RRB-
,/,
then/RB
you/PRP
could/MD
even/RB
use/VB
that/DT
to/TO
encrypt/VB
the/DT
user/NN
's/POS
password/NN
before/IN
submitting/VBG
it/PRP
,/,
effectively/RB
using/VBG
the/DT
coords/NNS
as/IN
a/DT
one-time/JJ
pad/NN
./.

(/-LRB-
continued/VBN
)/-RRB-
this/DT
'/``
kitten/NN
'/''
scheme/NN
would/MD
work/VB
because/IN
Flickr/NNP
is/VBZ
too/RB
large/JJ
to/TO
be/VB
pre-calculated/JJ
by/IN
bots/NNS
(/-LRB-
1/CD
million/CD
new/JJ
images/day/NN
)/-RRB-
,/,
and/CC
each/DT
user/NN
might/MD
find/VB
different/JJ
parts/NNS
of/IN
each/DT
image/NN
'/``
interesting/JJ
'/''
,/,
and/CC
lastly/RB
because/IN
an/DT
'/``
interesting/JJ
'/''
point/NN
is/VBZ
n't/RB
well/RB
defined/VBN
to/TO
an/DT
image/NN
recognition/NN
algorithm/NN

The/DT
images/NNS
would/MD
be/VB
stored/VBN
locally/RB
,/,
and/CC
I/PRP
believe/VBP
the/DT
Flickr/NNP
API/NN
has/VBZ
some/DT
content/JJ
rating/NN
in/IN
place/NN
,/,
although/IN
we/PRP
probably/RB
could/MD
n't/RB
avoid/VB
the/DT
odd/JJ
embarrassment/NN
now/RB
and/CC
then/RB
-/--
just/RB
like/IN
CAPTCHAs/NNS
sometimes/RB
say/VBP
terrible/JJ
things/NNS
:)/UH

anyway/RB
,/,
it/PRP
was/VBD
just/RB
a/DT
crazy/JJ
idea/NN
,/,
it/PRP
's/VBZ
probably/RB
too/RB
esoteric/JJ
for/IN
actual/JJ
use/NN

(/-LRB-
You/PRP
mean/VBP
to/TO
say/VB
if/IN
the/DT
answer/NN
is/VBZ
'/``
no/UH
'/''
--/--
ie./FW
that/IN
the/DT
expense/NN
of/IN
a/DT
botnet/NN
attack/NN
is/VBZ
NOT/RB
too/RB
high/JJ
in/IN
relation/NN
to/TO
the/DT
accounts/NNS
)/-RRB-

But/CC
anyway/RB
,/,
you/PRP
bring/VBP
up/RP
an/DT
important/JJ
point/NN
./.

For/IN
my/PRP$
own/JJ
uses/NNS
,/,
I/PRP
do/VBP
n't/RB
expect/VB
any/DT
botnet/NN
operator/NN
to/TO
care/VB
in/IN
the/DT
least/JJS
,/,
but/CC
I/PRP
am/VBP
releasing/VBG
the/DT
source/NN
code/NN
for/IN
anyone/NN
who/WP
would/MD
like/VB
decent/JJ
security/NN
for/IN
their/PRP$
web/NN
app/NN
,/,
and/CC
I/PRP
ca/MD
n't/RB
know/VB
what/WP
others/NNS
might/MD
be/VB
trying/VBG
to/TO
protect/VB
,/,
or/CC
who/WP
their/PRP$
enemies/NNS
are/VBP

It/PRP
wo/MD
n't/RB
be/VB
guarding/VBG
national/JJ
secrets/NNS
no/RB
matter/NN
what/WP
(/-LRB-
official/JJ
systems/NNS
need/VBP
special/JJ
certification/NN
,/,
and/CC
I/PRP
'm/VBP
fairly/RB
sure/JJ
nothing/NN
built/VBN
on/IN
PHP/NNP
can/MD
qualify/VB
)/-RRB-
,/,
but/CC
all/DT
web/NN
applications/NNS
need/VBP
secure/JJ
auth/NN
,/,
so/IN
if/IN
I/PRP
'm/VBP
releasing/VBG
this/DT
,/,
it/PRP
'd/MD
be/VB
incredibly/RB
irresponsible/JJ
not/RB
to/TO
use/VB
best/JJS
practices/NNS
wherever/WRB
I/PRP
can/MD

So/RB
my/PRP$
short/JJ
answer/NN
is/VBZ
:/:
I/PRP
am/VBP
building/VBG
this/DT
because/IN
99.9/CD
%/SYM
of/IN
web/NN
sites/NNS
and/CC
apps/NNS
out/RB
there/RB
have/VB
appalling/JJ
security/NN
(/-LRB-
even/RB
in/IN
the/DT
big/JJ
leagues/NNS
:/:
AOL/NNP
,/,
Twitter/NNP
,/,
Myspace/NNP
have/VBP
all/DT
been/VBN
compromised/VBN
before/IN
)/-RRB-
,/,
and/CC
in/IN
most/JJS
cases/NNS
because/IN
they/PRP
're/VBP
using/VBG
shoddy/JJ
auth/NN
libraries/NNS
./.

Also/RB
,/,
read/VB
the/DT
paper/NN
"/``
To/TO
Catch/VB
A/DT
Predator/NN
"/''
by/IN
Niels/NNP
Provos/NNP
et/FW
al./FW
from/IN
the/DT
2008/CD
USENIX/C
proceedings/NNS
(/-LRB-
link/NN
:/:
usenix.org/events/sec08/tech/small.html/URI
)/-RRB-

It/PRP
is/VBZ
an/DT
eye/NN
opener/NN
:/:
2/CD
months/NNS
,/,
one/CD
honeypot/NN
:/:
368,000/CD
attacks/NNS
from/IN
almost/RB
30.000/CD
distinct/JJ
IPs/NNS
,/,
coming/VBG
from/IN
more/JJR
than/IN
5,600/CD
botnets/NNS
!/.

@Curt/USR
:/:
I/PRP
'm/VBP
afraid/JJ
I/PRP
switched/VBD
jobs/NNS
shortly/RB
after/IN
writing/VBG
this/DT
and/CC
the/DT
project/NN
turned/VBD
into/IN
vaporware/NN
./.

Actually/RB
fast/RB
brute/JJ
force/NN
too/RB
./.

I/PRP
was/VBD
hoping/VBG
to/TO
be/VB
somewhat/RB
lenient/JJ
with/IN
fixed-user/JJ
brute/JJ
force/NN
(/-LRB-
throttling/VBG
just/RB
20/CD
seconds/NNS
)/-RRB-
,/,
but/CC
on/IN
a/DT
site/NN
with/IN
50k/CD
users/NNS
,/,
that/WDT
would/MD
make/VB
variable-user/NN
fast/JJ
brute/JJ
force/NN
possible/JJ
(/-LRB-
assuming/VBG
20/CD
+/SYM
seconds/NNS
to/TO
cycle/NN
through/IN
the/DT
users/NNS
)/-RRB-
./.

And/CC
that/DT
,/,
as/IN
they/PRP
say/VBP
,/,
would/MD
suck/VB
../.

I/PRP
was/VBD
referring/VBG
to/TO
distributed/VBN
fast/RB
brute/JJ
force/NN
./.

It/PRP
's/VBZ
rare/JJ
but/CC
it/PRP
's/VBZ
potentially/RB
very/RB
nasty/JJ
Absolutely/RB
the/DT
email/NN
account/NN
is/VBZ
part/NN
of/IN
the/DT
attack/NN
surface/NN
./.

I/PRP
have/VBP
a/DT
set/NN
of/IN
upper-bound/JJ
assumptions/NNS
on/IN
the/DT
security/NN
my/PRP$
strategy/NN
will/MD
provide/VB
,/,
and/CC
the/DT
lowest/JJS
bound/VBN
is/VBZ
the/DT
user/NN
's/POS
own/JJ
email/NN
security/NN
./.

If/IN
an/DT
attacker/NN
breaches/VBZ
a/DT
user/NN
's/POS
email/NN
,/,
all/DT
bets/NNS
are/VBP
off/RB
./.

Also/RB
,/,
I/PRP
think/VBP
your/PRP$
state/NN
transition/NN
diagram/NN
needs/VBZ
a/DT
couple/NN
of/IN
details/NNS
:/:
#/SYM
3/CD
and/CC
#/SYM
4/CD
should/MD
include/VB
password/NN
;/,
#/SYM
1/CD
and/CC
#/SYM
2/CD
should/MD
include/VB
known_IP/C
(/C
user/C
)/C
since/IN
a/DT
login/NN
always/RB
has/VBZ
either/RB
known/JJ
or/CC
unknown/JJ
IP/NNP
;/,
and/CC
#/SYM
6/CD
is/VBZ
'/``
entry/NN
despite/IN
throttle/NN
'/''

All/DT
excellent/JJ
points/NNS
-/--
I/PRP
could/MD
n't/RB
agree/VB
more/JJR
./.

The/DT
point/NN
about/IN
cookie/NN
insecurity/NN
is/VBZ
very/RB
valid/JJ
,/,
but/CC
without/IN
a/DT
second/JJ
factor/NN
of/IN
physical/JJ
tokens/NNS
or/CC
one-time/JJ
passwords/NNS
(/-LRB-
distributed/VBN
over/IN
a/DT
secure/JJ
line/NN
)/-RRB-
you/PRP
really/RB
ca/MD
n't/RB
protect/VB
against/IN
a/DT
vulnerable/JJ
endpoint/NN
./.

If/IN
the/DT
user/NN
's/POS
box/NN
//CC
browser/NN
is/VBZ
compromised/VBN
,/,
so/RB
are/VBP
his/PRP$
logins/NNS
./.

Although/IN
I/PRP
'm/VBP
no/DT
fan/NN
of/IN
forcing/VBG
users/NNS
to/TO
change/VB
their/PRP$
passwords/NNS
,/,
those/DT
numbers/NNS
can/MD
be/VB
found/VBN
at/IN
:/:
lockdown.co.uk/?pg=combi&s=articles/URI

That/DT
's/VBZ
an/DT
excellent/JJ
point/NN
,/,
Loren/NNP
-/.

1/LS
)/-RRB-
How/WRB
would/MD
you/PRP
implement/VB
a/DT
one-time/JJ
password/NN
on/IN
an/DT
unsecure/JJ
,/,
unauthenticated/JJ
line/NN
?/.

In/IN
other/JJ
words/NNS
,/,
when/WRB
does/VBZ
the/DT
user/NN
set/VBD
these/DT
one-time/JJ
passwords/NNS
?/.

2/LS
)/-RRB-
Yes/UH
,/,
that/DT
's/VBZ
the/DT
gist/NN
of/IN
#/SYM
4/CD
on/IN
my/PRP$
list/NN
,/,
the/DT
sitewide/JJ
limit/NN
on/IN
failed/JJ
attempts/NNS
./.

The/DT
downside/NN
is/VBZ
the/DT
DoS/NN
opportunity/NN
it/PRP
opens/VBZ
./.

The/DT
alternate/JJ
login/NN
screen/NN
sounds/VBZ
like/IN
it/PRP
would/MD
confuse/VB
humans/NNS
more/JJR
than/IN
machines/NNS
,/,
frankly/RB
./.

We/PRP
are/VBP
of/IN
course/NN
assuming/VBG
that/IN
the/DT
attacker/NN
would/MD
have/VB
checked/VBN
our/PRP$
security/NN
measures/NNS
beforehand/RB
./.

He/PRP
could/MD
have/VB
easily/RB
tweaked/VBN
his/PRP$
scraper/NN
to/TO
find/VB
the/DT
correctly-placed/JJ
fields/NNS
./.

The/DT
human-checking/JJ
questions/NNS
have/VBP
been/VBN
done/VBN
before/RB
,/,
and/CC
it/PRP
's/VBZ
not/RB
very/RB
effective/JJ
./.

For/IN
a/DT
human/JJ
botnet/NN
operator/NN
to/TO
answer/VB
one/CD
question/NN
per/IN
hour/NN
(/-LRB-
after/IN
which/WDT
the/DT
new/JJ
answer/NN
would/MD
propagate/VB
to/TO
the/DT
bots/NNS
)/-RRB-
during/IN
an/DT
attack/NN
would/MD
be/VB
quite/RB
feasible/JJ
./.

I/PRP
do/VBP
n't/RB
think/VB
I/PRP
am/VBP
missing/VBG
the/DT
point/NN
./.

I/PRP
do/VBP
n't/RB
mean/VB
he/PRP
would/MD
have/VB
run/VBN
an/DT
attack/NN
previously/RB
to/TO
check/VB
our/PRP$
security/NN
measures/NNS
,/,
I/PRP
mean/VBP
he/PRP
would/MD
have/VB
read/VBN
this/DT
thread/NN
and/CC
checked/VBD
the/DT
(/-LRB-
open/JJ
)/-RRB-
source/NN
code/NN
to/TO
check/VB
for/IN
weknesses/NNS
:)/UH

I/PRP
understand/VBP
the/DT
idea/NN
,/,
but/CC
that/DT
would/MD
indirectly/RB
leak/NN
information/NN
about/IN
the/DT
password/NN
,/,
letting/VBG
an/DT
attacker/NN
know/VB
whether/IN
a/DT
password/NN
is/VBZ
worth/JJ
hacking/NN
or/CC
not/RB
./.

That/DT
may/MD
seem/VB
a/DT
bit/NN
theoretical/JJ
,/,
but/CC
many/JJ
users/NNS
reuse/VBP
passwords/NNS
,/,
so/RB
if/IN
I/PRP
want/VBP
to/TO
break/VB
into/IN
Strong_Throttling_Website.com/URI
I/PRP
can/MD
simply/RB
attack/VB
(/-LRB-
privileged/JJ
)/-RRB-
accounts/NNS
at/IN
random/JJ
until/IN
I/PRP
find/VBP
a/DT
user/NN
,/,
'/``
Freddy/NNP
'/''
,/,
who/WP
has/VBZ
a/DT
weak/JJ
password/NN
(/-LRB-
i.e./FW
early/JJ
throttling/VBG
)/-RRB-
,/,
then/RB
go/VB
to/TO
Less_Secure_Website.edu/URI
and/CC
do/VB
an/DT
easy/JJ
dictionary/NN
attack/NN
on/IN
Freddy/NNP
's/POS
account/NN
there/RB
./.

It/PRP
's/VBZ
a/DT
little/RB
involved/VBN
,/,
but/CC
certainly/RB
doable/JJ
in/IN
practice/NN
./.

A/DT
breadth/NN
first/JJ
attack/NN
on/IN
usernames/NNS
is/VBZ
n't/RB
going/VBG
to/TO
be/VB
very/RB
successful/JJ
../.

Why/WRB
does/VBZ
a/DT
salt/NN
make/NN
rainbow/NN
tables/NNS
useless/JJ
?/.

@R./USR
Bemrose/USR
Why/WRB
would/MD
n't/RB
there/RB
be/VB
a/DT
rainbow/NN
table/NN
with/IN
that/DT
particular/JJ
salt/NN
value/NN
?/.

Does/VBZ
n't/RB
that/RB
completely/RB
rely/VB
on/IN
what/WP
you/PRP
use/VBP
as/IN
a/DT
salt/NN
?/.

The/DT
current/JJ
explanation/NN
is/VBZ
not/RB
sitting/VBG
well/RB
with/IN
me/PRP
because/IN
I/PRP
feel/VBP
like/IN
there/EX
are/VBP
a/DT
LOT/NN
of/IN
assumptions/NNS

@R./USR
Bemrose/USR
So/IN
I/PRP
believe/VBP
what/WP
you/PRP
're/VBP
saying/VBG
is/VBZ
that/IN
the/DT
benefit/NN
that/IN
a/DT
salt/NN
provides/VBZ
is/VBZ
simply/RB
to/TO
lengthen/VB
the/DT
password/NN
./.

In/IN
which/WDT
case/NN
,/,
having/VBG
a/DT
salt/NN
of/IN
'/``
a/DT
'/''
is/VBZ
going/VBG
to/TO
be/VB
nearly/RB
useless/JJ
?/.

Ok/UH
,/,
I/PRP
see/VBP
now/RB
./.

If/IN
a/DT
password/NN
is/VBZ
salted/VBN
and/CC
you/PRP
do/VBP
n't/RB
know/VB
the/DT
salt/NN
,/,
then/RB
you/PRP
would/MD
have/VB
to/TO
do/VB
a/DT
lot/NN
of/IN
educated/VBN
guessing/VBG
to/TO
figure/VB
out/RP
what/WP
the/DT
password/NN
is/VBZ
because/IN
SHA1/NNP
(/-LRB-
stored/VBN
salt/NN
+/CC
user/NN
entered/VBD
password/NN
)/-RRB-
==/SYM
stored/VBN
hash/NN
./.

But/CC
I/PRP
would/MD
think/VB
that/IN
if/IN
you/PRP
're/VBP
able/JJ
to/TO
get/VB
the/DT
stored/VBN
hash/NN
then/RB
you/PRP
could/MD
also/RB
easily/RB
get/VB
the/DT
salt/NN
./.

This/DT
just/RB
does/VBZ
n't/RB
seem/VB
anywhere/RB
close/RB
to/TO
impossible/JJ
to/TO
me/PRP
./.

And/CC
what/WP
's/VBZ
to/TO
stop/VB
you/PRP
from/IN
generating/VBG
rainbow/NN
tables/NNS
for/IN
large/JJ
strings/NNS
?/.

@Colin/USR
In/IN
that/DT
case/NN
I/PRP
think/VBP
it/PRP
is/VBZ
an/DT
important/JJ
distinction/NN
to/TO
make/VB
./.

Size/NN
plays/VBZ
an/DT
important/JJ
part/NN
(/-LRB-
depending/VBG
on/IN
your/PRP$
salting/NN
algorithm/NN
)/-RRB-

Prepared/JJ
statements/NNS
//CC
parameterized/JJ
queries/NNS
are/VBP
sufficient/JJ
to/TO
prevent/VB
1st/JJ
order/NN
injection/NN
on/IN
that/DT
statement/NN
./.

If/IN
you/PRP
use/VBP
un-checked/JJ
dynamic/JJ
sql/NNP
anywhere/RB
else/RB
in/IN
your/PRP$
application/NN
you/PRP
are/VBP
still/RB
vulnerable/JJ
to/TO
2nd/JJ
order/NN
injection/NN
./.

2nd/JJ
order/NN
injection/NN
means/VBZ
data/NNS
has/VBZ
been/VBN
cycled/VBN
through/IN
the/DT
database/NN
once/RB
before/IN
being/VBG
included/VBN
in/IN
a/DT
query/NN
,/,
and/CC
is/VBZ
much/RB
harder/JJR
to/TO
pull/VB
off/RP
./.

AFAIK/UH
,/,
you/PRP
almost/RB
never/RB
see/VBP
real/JJ
2nd/JJ
order/NN
attacks/NNS
,/,
as/IN
it/PRP
is/VBZ
usually/RB
easier/JJR
for/IN
attackers/NNS
to/TO
social-engineer/VB
their/PRP$
way/NN
in/IN
./.

You/PRP
can/MD
accomplish/VB
a/DT
2nd/JJ
order/NN
injection/NN
attack/NN
when/WRB
you/PRP
can/MD
cause/VB
a/DT
value/NN
to/TO
be/VB
stored/VBN
in/IN
a/DT
database/NN
that/WDT
is/VBZ
later/RB
used/VBN
as/IN
a/DT
literal/JJ
in/IN
a/DT
query/NN
./.

As/IN
an/DT
example/NN
,/,
let/VB
's/POS
say/VB
you/PRP
enter/VBP
the/DT
following/VBG
information/NN
as/IN
your/PRP$
new/JJ
username/NN
when/WRB
creating/VBG
an/DT
account/NN
on/IN
a/DT
web/NN
site/NN
(/-LRB-
assuming/VBG
MySQL/NNP
DB/NN
for/IN
this/DT
question/NN
)/-RRB-
:/.

'/C
+/C
(/C
SELECT/C
UserName/C
+/C
'_'/C
+/C
Password/C
FROM/C
Users/C
LIMIT/C
1/C
)/C
+/C
'/C

If/IN
there/EX
are/VBP
no/DT
other/JJ
restrictions/NNS
on/IN
the/DT
username/NN
,/,
a/DT
prepared/JJ
statement/NN
would/MD
still/RB
make/VB
sure/JJ
that/IN
the/DT
above/JJ
embedded/JJ
query/NN
does/VBZ
n't/RB
execute/VB
at/IN
the/DT
time/NN
of/IN
insert/NN
,/,
and/CC
store/VBP
the/DT
value/NN
correctly/RB
in/IN
the/DT
database/NN
./.

However/RB
,/,
imagine/VBP
that/IN
later/RB
the/DT
application/NN
retrieves/VBZ
your/PRP$
username/NN
from/IN
the/DT
database/NN
,/,
and/CC
uses/VBZ
string/NN
concatenation/NN
to/TO
include/VB
that/DT
value/NN
a/DT
new/JJ
query/NN
./.

You/PRP
might/MD
get/VB
to/TO
see/VB
someone/NN
else/RB
's/POS
password/NN
./.

Since/IN
the/DT
first/JJ
few/JJ
names/NNS
in/IN
users/NNS
table/NN
tend/VBP
to/TO
be/VB
admins/NNS
,/,
you/PRP
may/MD
have/VB
also/RB
just/RB
given/VBN
away/RB
the/DT
farm/NN
./.

(/-LRB-
Also/RB
note/NN
:/:
this/DT
is/VBZ
one/CD
more/JJR
reason/NN
not/RB
to/TO
store/VB
passwords/NNS
in/IN
plain/JJ
text/NN
!/.
)/-RRB-

We/PRP
see/VBP
,/,
then/RB
,/,
that/WDT
prepared/JJ
statements/NNS
are/VBP
enough/RB
for/IN
a/DT
single/JJ
query/NN
,/,
but/CC
by/IN
themselves/PRP
they/PRP
are/VBP
not/RB
sufficient/JJ
to/TO
protect/VB
against/IN
sql/NNP
injection/NN
attacks/NNS
throughout/IN
an/DT
entire/JJ
application/NN
,/,
because/IN
they/PRP
lack/VBP
a/DT
mechanism/NN
to/TO
enforce/VB
that/IN
all/DT
access/NN
to/TO
a/DT
database/NN
within/IN
the/DT
application/NN
uses/VBZ
safe/JJ
code/NN
./.

However/RB
,/,
used/VBN
as/IN
part/NN
of/IN
good/JJ
application/NN
design/NN
-/--
which/WDT
may/MD
include/VB
practices/NNS
such/JJ
as/IN
code/NN
review/NN
or/CC
use/NN
of/IN
an/DT
ORM/NN
,/,
data/NN
layer/NN
,/,
or/CC
service/NN
layer/NN
that/WDT
limits/VBZ
dynamic/JJ
sql/NNP
-/--
prepared/JJ
statements/NNS
are/VBP
the/DT
primary/JJ
tool/NN
for/IN
solving/VBG
the/DT
Sql/NNP
Injection/NN
problem/NN
./.

If/IN
you/PRP
follow/VBP
good/JJ
application/NN
design/NN
principles/NNS
,/,
such/JJ
that/IN
your/PRP$
data/NNS
access/NN
is/VBZ
separated/VBN
from/IN
the/DT
rest/NN
of/IN
your/PRP$
program/NN
,/,
it/PRP
becomes/VBZ
easy/JJ
to/TO
enforce/VB
or/CC
audit/VB
that/IN
every/DT
query/NN
correctly/RB
uses/VBZ
parameterization/NN
./.

In/IN
this/DT
case/NN
,/,
sql/NNP
injection/NN
(/-LRB-
both/CC
first/JJ
and/CC
second/JJ
order/NN
)/-RRB-
is/VBZ
completely/RB
prevented/VBN
./.

Six/CD
new/JJ
votes/NNS
today/NN
,/,
almost/RB
5/CD
years/NNS
later/RB
./.

I/PRP
'd/MD
really/RB
love/VB
to/TO
be/VB
able/JJ
to/TO
see/VB
referrer/NN
info/NN
on/IN
my/PRP$
answers/NNS
./.

In/IN
my/PRP$
opinion/NN
,/,
the/DT
best/JJS
way/NN
to/TO
generally/RB
prevent/VB
SQL/NNP
injection/NN
in/IN
your/PRP$
PHP/NNP
application/NN
(/-LRB-
or/CC
any/DT
web/NN
application/NN
,/,
for/IN
that/DT
matter/NN
)/-RRB-
is/VBZ
to/TO
think/VB
about/IN
your/PRP$
application/NN
's/POS
architecture/NN
./.

If/IN
the/DT
only/JJ
way/NN
to/TO
protect/VB
against/IN
SQL/NNP
injection/NN
is/VBZ
to/TO
remember/VB
to/TO
use/VB
a/DT
special/JJ
method/NN
or/CC
function/NN
that/WDT
does/VBZ
The/DT
Right/RB
Thing/NN
every/DT
time/NN
you/PRP
talk/VBP
to/TO
the/DT
database/NN
,/,
you/PRP
are/VBP
doing/VBG
it/PRP
wrong/JJ
./.

That/DT
way/NN
,/,
it/PRP
's/VBZ
just/RB
a/DT
matter/NN
of/IN
time/NN
until/IN
you/PRP
forget/VBP
to/TO
correctly/RB
format/NN
your/PRP$
query/NN
at/IN
some/DT
point/NN
in/IN
your/PRP$
code/NN
./.

Adopting/VBG
the/DT
MVC/NN
pattern/NN
and/CC
a/DT
framework/NN
like/IN
CakePHP/NNP
or/CC
CodeIgniter/NNP
is/VBZ
probably/RB
the/DT
right/JJ
way/NN
to/TO
go/VB
:/:
Common/JJ
tasks/NNS
like/IN
creating/VBG
secure/JJ
database/NN
queries/NNS
have/VBP
been/VBN
solved/VBN
and/CC
centrally/RB
implemented/VBN
in/IN
such/JJ
frameworks/NNS
./.

They/PRP
help/VBP
you/PRP
to/TO
organize/VB
your/PRP$
web/NN
application/NN
in/IN
a/DT
sensible/JJ
way/NN
and/CC
make/VB
you/PRP
think/VB
more/RBR
about/IN
loading/VBG
and/CC
saving/VBG
objects/NNS
than/IN
about/IN
securely/RB
constructing/VBG
single/JJ
SQL/NNP
queries/NNS
./.

With/IN
oracle/NNP
(/-LRB-
10.2/CD
)/-RRB-
it/PRP
can/MD
be/VB
better/JJR
to/TO
actually/RB
not/RB
use/VB
a/DT
prepared/JJ
statement/NN
for/IN
some/DT
queries/NNS
./.

Consider/VB
hardcoding/VBG
the/DT
argument/NN
values/NNS
if/IN
the/DT
query/NN
is/VBZ
heavy/JJ
(/-LRB-
over/IN
a/DT
minute/JJ
execution/NN
time/NN
)/-RRB-
and/CC
realtively/RB
rare/JJ
(/-LRB-
once/RB
a/DT
day/NN
)/-RRB-
./.

1/LS
-/SYM
Unnecessarily/RB
using/VBG
a/DT
function/NN
on/IN
a/DT
value/NN
in/IN
a/DT
where/C
clause/NN
with/IN
the/DT
result/NN
of/IN
that/DT
index/NN
not/RB
being/VBG
used/VBN
./.

Example/NN
:/.

where/C
to_char/C
(/C
someDate/C
,/C
'YYYYMMDD'/C
)/C
between/IN
:/C
fromDate/C
and/CC
:/C
toDate/C
instead/CC
of/IN
where/C
someDate/C
>=/C
to_date/C
(/C
:/C
fromDate/C
,/C
'YYYYMMDD'/C
)/C
and/C
someDate/C
</C
to_date/C
(/C
:/C
toDate/C
,/C
'YYYYMMDD'/C
)/C
+/C
1/C

And/CC
to/TO
a/DT
lesser/JJR
extent/NN
:/:
Not/RB
adding/VBG
functional/JJ
indexes/NNS
to/TO
those/DT
values/NNS
that/WDT
need/VBP
them/PRP
.../.

2/LS
-/SYM
Not/RB
adding/VBG
check/NN
constraints/NNS
to/TO
ensure/VB
the/DT
validity/NN
of/IN
the/DT
data/NNS
./.

Constraints/NNS
can/MD
be/VB
used/VBN
by/IN
the/DT
query/NN
optimizer/NN
,/,
and/CC
they/PRP
REALLY/RB
help/NN
to/TO
ensure/VB
that/IN
you/PRP
can/MD
trust/VB
your/PRP$
invariants/NNS
./.

There/EX
's/VBZ
just/RB
no/DT
reason/NN
not/RB
to/TO
use/VB
them/PRP
./.

3/LS
-/SYM
Adding/VBG
unnormalized/JJ
columns/NNS
to/TO
tables/NNS
out/IN
of/IN
pure/JJ
laziness/NN
or/CC
time/NN
pressure/NN
./.

Things/NNS
are/VBP
usually/RB
not/RB
designed/VBN
this/DT
way/NN
,/,
but/CC
evolve/VBP
into/IN
this/DT
./.

The/DT
end/NN
result/NN
,/,
without/IN
fail/VBP
,/,
is/VBZ
a/DT
ton/NN
of/IN
work/NN
trying/VBG
to/TO
clean/VB
up/RP
the/DT
mess/NN
when/WRB
you/PRP
're/VBP
bitten/VBN
by/IN
the/DT
lost/VBN
data/NN
integrity/NN
in/IN
future/JJ
evolutions/NNS
./.

Think/VB
of/IN
this/DT
,/,
a/DT
table/NN
without/IN
data/NNS
is/VBZ
very/RB
cheap/JJ
to/TO
redesign/VB
./.

A/DT
table/NN
with/IN
a/DT
couple/NN
of/IN
millions/NNS
records/NNS
with/IN
no/DT
integrity/NN
.../F
not/RB
so/RB
cheap/JJ
to/TO
redesign/VB
./.

Thus/RB
,/,
doing/VBG
the/DT
correct/JJ
design/NN
when/WRB
creating/VBG
the/DT
column/NN
or/CC
table/NN
is/VBZ
amortized/VBN
in/IN
spades/NNS
./.

4/LS
-/SYM
not/RB
so/RB
much/JJ
about/IN
the/DT
database/NN
per/IN
se/FW
but/CC
indeed/RB
annoying/JJ
./.

Not/RB
caring/VBG
about/IN
the/DT
code/NN
quality/NN
of/IN
SQL/NNP
./.

The/DT
fact/NN
that/IN
your/PRP$
SQL/NNP
is/VBZ
expressed/VBN
in/IN
text/NN
does/VBZ
not/RB
make/VB
it/PRP
OK/JJ
to/TO
hide/VB
the/DT
logic/NN
in/IN
heaps/NNS
of/IN
string/NN
manipulation/NN
algorithms/NNS
./.

It/PRP
is/VBZ
perfectly/RB
possible/JJ
to/TO
write/VB
SQL/NNP
in/IN
text/NN
in/IN
a/DT
manner/NN
that/WDT
is/VBZ
actually/RB
readable/JJ
by/IN
your/PRP$
fellow/NN
programmer/NN
./.

I/PRP
'd/MD
say/VB
the/DT
right/JJ
thing/NN
is/VBZ
to/TO
declare/VB
each/DT
number/NN
as/IN
an/DT
object/NN
,/,
and/CC
then/RB
define/VB
three/CD
things/NNS
in/IN
that/DT
object/NN
:/.

1/LS
)/-RRB-
an/DT
equality/NN
operator/NN
./.

2/LS
)/-RRB-
a/DT
setAcceptableDifference/C
method/NN
./.

3/LS
)/-RRB-
the/DT
value/NN
itself/PRP
./.

The/DT
equality/NN
operator/NN
returns/VBZ
true/JJ
if/IN
the/DT
absolute/JJ
difference/NN
of/IN
two/CD
values/NNS
is/VBZ
less/JJR
than/IN
the/DT
value/NN
set/VBN
as/IN
acceptable/JJ
./.

You/PRP
can/MD
subclass/VB
the/DT
object/NN
to/TO
suit/VB
the/DT
problem/NN
./.

For/IN
example/NN
,/,
round/JJ
bars/NNS
of/IN
metal/NN
between/IN
1/CD
and/CC
2/CD
inches/NNS
might/MD
be/VB
considered/VBN
of/IN
equal/JJ
diameter/NN
if/IN
their/PRP$
diameters/NNS
differed/VBN
by/IN
less/JJR
than/IN
0.0001/CD
inches/NNS
./.

So/RB
you/PRP
'd/MD
call/VB
setAcceptableDifference/C NA
with/IN
parameter/NN
0.0001/CD
,/,
and/CC
then/RB
use/VB
the/DT
equality/NN
operator/NN
with/IN
confidence/NN
./.

Tom/NNP
,/,
maybe/RB
you/PRP
'd/MD
think/VB
again/RB
about/IN
the/DT
"/``
object/NN
thing/NN
"/''
./.

With/IN
real/JJ
numbers/NNS
,/,
represented/VBN
to/TO
high/JJ
precision/NN
,/,
equality/NN
rarely/RB
happens/VBZ
./.

But/CC
one/PRP
's/VBZ
idea/NN
of/IN
equality/NN
may/MD
be/VB
tailored/VBN
if/IN
it/PRP
suits/VBZ
you/PRP
./.

It/PRP
would/MD
be/VB
nicer/JJR
if/IN
there/EX
was/VBD
an/DT
overridable/JJ
'/``
approximately/RB
equal/JJ
'/''
operator/NN
,/,
but/CC
there/EX
ai/VBP
n't/RB
./.

@martinstoeckli/USR
:/:
That/DT
change/NN
also/RB
makes/VBZ
a/DT
difference/NN
for/IN
the/DT
answers/NNS
:)/UH

@martinstoeckli/USR
:/:
I/PRP
have/VBP
updated/VBN
the/DT
answer/NN
to/TO
cover/VB
the/DT
current/JJ
question/NN
./.

Updated/JJ
answer/NN

The/DT
question/NN
was/VBD
edited/VBN
(/-LRB-
after/IN
my/PRP$
answer/NN
was/VBD
posted/VBN
)/-RRB-
to/TO
specifically/RB
target/VB
mysqli_escape_string/C
,/,
which/WDT
is/VBZ
an/DT
alias/NN
of/IN
mysql_real_escape_string/C
and/CC
therefore/RB
takes/VBZ
the/DT
connection/NN
encoding/VBG
into/IN
account/NN
./.

This/DT
makes/VBZ
the/DT
original/JJ
answer/NN
non-applicable/JJ
anymore/RB
,/,
but/CC
I/PRP
've/VBP
left/VBN
it/PRP
for/IN
completeness/NN
./.

The/DT
new/JJ
answer/NN
,/,
in/IN
short/JJ
:/:
mysqli_escape_string/C NA
is/VBZ
as/IN
good/JJ
security-wise/NN
as/IN
parameterized/JJ
queries/NNS
,/,
provided/VBN
you/PRP
do/VBP
n't/RB
shoot/VB
yourself/PRP
in/IN
the/DT
foot/NN
./.

Specifically/RB
,/,
what/WP
you/PRP
must/MD
not/RB
do/VB
is/VBZ
highlighted/VBN
in/IN
the/DT
giant/JJ
warning/NN
on/IN
the/DT
PHP/NNP
doc/NN
page/NN
:/.

he/DT
character/NN
set/NN
must/MD
be/VB
set/VBN
either/CC
at/IN
the/DT
server/NN
level/NN
,/,
or/CC
with/IN
the/DT
API/NN
function/NN
mysqli_set_charset/C
(/C
)/C
for/IN
it/PRP
to/TO
affect/VB
mysqli_real_escape_string/C
(/C
)/C
./.

If/IN
you/PRP
do/VBP
n't/RB
heed/VB
this/DT
warning/NN
(/-LRB-
i.e./FW
if/IN
you/PRP
change/VBP
the/DT
character/NN
set/VBN
with/IN
a/DT
direct/JJ
SET/C NA
NAMES/C NA
query/NN
)/-RRB-
and/CC
you/PRP
change/VBP
the/DT
character/NN
set/VBN
from/IN
a/DT
single-byte/JJ
encoding/NN
to/TO
a/DT
"/``
convenient/JJ
"/''
(/-LRB-
from/IN
the/DT
attacker/NN
's/POS
perspective/NN
)/-RRB-
multibyte/JJ
encoding/NN
,/,
you/PRP
will/MD
have/VB
in/IN
effect/NN
emulated/VBD
what/WP
the/DT
dumb/JJ
mysql_escape_string/C
does/VBZ
:/:
attempt/VB
to/TO
escape/VB
characters/NNS
without/IN
knowing/VBG
which/WDT
encoding/VBG
the/DT
input/NN
is/VBZ
in/IN
./.

This/DT
situation/NN
leaves/VBZ
you/PRP
potentially/RB
vulnerable/JJ
to/TO
SQL/NNP
injection/NN
as/IN
described/VBN
by/IN
the/DT
original/JJ
answer/NN
below/IN
./.

Important/JJ
note/NN
:/:
I/PRP
remember/VBP
reading/VBG
somewhere/RB
that/IN
recent/JJ
MySql/NNP
versions/NNS
have/VBP
plugged/VBN
this/DT
hole/NN
on/IN
their/PRP$
end/NN
(/-LRB-
in/IN
the/DT
client/NN
libraries/NNS
?/.
)/-RRB-
,/,
which/WDT
means/VBZ
that/IN
you/PRP
might/MD
be/VB
perfectly/RB
safe/JJ
even/RB
if/IN
using/VBG
SET/C NA
NAMES/C NA
to/TO
switch/VB
to/TO
a/DT
vulnerable/JJ
multibyte/JJ
encoding/NN
./.

But/CC
please/VB
do/VBP
n't/RB
take/VB
my/PRP$
word/NN
for/IN
it/PRP
./.

Original/JJ
answer/NN

In/IN
contrast/NN
to/TO
mysql_real_escape_string/C NA
,/,
the/DT
bare/JJ
mysql_escape_string/C NA
does/VBZ
not/RB
take/VB
into/IN
account/NN
the/DT
connection/NN
encoding/NN
./.

This/DT
means/VBZ
that/IN
it/PRP
assumes/VBZ
the/DT
input/NN
is/VBZ
in/IN
a/DT
single-byte/JJ
encoding/NN
,/,
when/WRB
in/IN
fact/NN
it/PRP
can/MD
legitimately/RB
be/VB
in/IN
a/DT
multibyte/JJ
encoding/NN
./.

Some/DT
multibyte/JJ
encodings/NNS
have/VBP
byte/NN
sequences/NNS
that/WDT
correspond/VBP
to/TO
a/DT
single/JJ
character/NN
where/WRB
one/CD
of/IN
the/DT
bytes/NNS
is/VBZ
the/DT
ASCII/NNP
value/NN
of/IN
the/DT
single/JJ
quote/NN
(/-LRB-
0x27/CD
)/-RRB-
;/:
if/IN
fed/VBN
such/PDT
a/DT
string/NN
,/,
mysql_escape_string/C NA
will/MD
happily/RB
"/``
escape/VB
the/DT
quote/NN
"/''
,/,
which/WDT
means/VBZ
substituting/VBG
0x27/CD
with/IN
0x5c/CD
0x27/CD
./.

Depending/VBG
on/IN
the/DT
encoding/NN
rules/NNS
,/,
this/DT
could/MD
result/VB
in/IN
mutating/VBG
the/DT
multibyte/JJ
character/NN
into/IN
another/DT
that/WDT
includes/VBZ
the/DT
0x5c/CD
and/CC
leaving/VBG
the/DT
"/``
remaining/JJ
"/''
0x27/CD
as/IN
a/DT
stand-alone/JJ
single/JJ
quote/NN
in/IN
the/DT
input/NN
./.

Voilà/FW
,/,
you/PRP
have/VBP
injected/VBN
an/DT
unescaped/JJ
quote/NN
into/IN
the/DT
SQL/NNP
./.

For/IN
more/JJR
details/NNS
see/VBP
this/DT
blog/NN
post/NN
./.

@Asad/USR
:/:
You/PRP
specifically/RB
did/VBD
not/RB
ask/VB
for/IN
something/NN
like/IN
that/DT
,/,
so/IN
I/PRP
guess/VBP
it/PRP
's/VBZ
your/PRP$
fault/NN
:)/UH

@Asad/USR
:/:
Sure/UH
,/,
just/RB
joking/VBG
:)/UH

I/PRP
was/VBD
getting/VBG
this/DT
error/NN
too/RB
./.

In/IN
my/PRP$
case/NN
,/,
a/DT
user/NN
entered/VBD
an/DT
accented/JJ
character/NN
á/FW
in/IN
a/DT
Role/NN
Name/NN
(/-LRB-
regarding/VBG
the/DT
ASP.NET/NNP
membership/NN
provider/NN
)/-RRB-
./.

I/PRP
pass/VBP
the/DT
role/NN
name/NN
to/TO
a/DT
method/NN
to/TO
grant/VB
Users/NNS
to/TO
that/DT
role/NN
and/CC
the/DT
$/C
.ajax/C
post/NN
request/NN
was/VBD
failing/VBG
miserably/RB
.../.

I/PRP
did/VBD
this/DT
to/TO
solve/VB
the/DT
problem/NN
:/.

Instead/RB
of/IN
data/NNS
:/:
{/C
roleName/C
:/C
'@Model.RoleName'/C
,/C
users/C
:/C
users/C
}/C
Do/VBP
this/DT
data/NNS
:/:
{/C
roleName/C
:/C
'@Html.Raw(@Model.RoleName)'/C
,/C
users/C
:/C
users/C
}/C
@Html/C
./C
Raw/C
did/VBD
the/DT
trick/NN
./.

I/PRP
was/VBD
getting/VBG
the/DT
Role/NN
name/NN
as/IN
HTML/NNP
value/NN
roleName/C
=/C
"Cadastro bás"/C
./.

This/DT
value/NN
with/IN
HTML/NNP
entity/NN
á/FW
was/VBD
being/VBG
blocked/VBN
by/IN
ASP.NET/NNP
MVC/NN
./.

Now/RB
I/PRP
get/VBP
the/DT
roleName/NN
parameter/NN
value/NN
the/DT
way/NN
it/PRP
should/MD
be/VB
:/:
roleName/C
=/C
"Cadastro Básico"/C
and/CC
ASP.NET/NNP
MVC/NN
engine/NN
wo/MD
n't/RB
block/VB
the/DT
request/NN
anymore/RB
./.

This/DT
will/MD
just/RB
limit/VB
their/PRP$
use/NN
of/IN
it/PRP
,/,
it/PRP
wo/MD
n't/RB
stop/VB
them/PRP
from/IN
breaking/VBG
it/PRP
./.

Passwords/NNS
fall/VBP
in/IN
random/JJ
time/NN
,/,
not/RB
fixed/VBN
time/NN
!/.

I/PRP
do/VBP
n't/RB
believe/VB
there/EX
is/VBZ
a/DT
perfect/JJ
answer/NN
but/CC
I/PRP
would/MD
be/VB
inclined/VBN
to/TO
approach/VB
it/PRP
on/IN
a/DT
basis/NN
of/IN
trying/VBG
to/TO
confound/VB
the/DT
robots/NNS
if/IN
an/DT
attack/NN
is/VBZ
sensed/VBN
./.

Off/IN
the/DT
top/NN
of/IN
my/PRP$
mind/NN
:/.

Switch/VB
to/TO
an/DT
alternate/JJ
login/NN
screen/NN
./.

It/PRP
has/VBZ
multiple/JJ
username/NN
and/CC
password/NN
blanks/NNS
which/WDT
really/RB
do/VBP
appear/VB
but/CC
only/RB
one/CD
of/IN
them/PRP
is/VBZ
in/IN
the/DT
right/JJ
place/NN
./.

The/DT
field/NN
names/NNS
are/VBP
RANDOM/JJ
--/:
a/DT
session/NN
key/NN
is/VBZ
sent/VBN
along/IN
with/IN
the/DT
login/NN
screen/NN
,/,
the/DT
server/NN
can/MD
then/RB
find/VB
out/RP
what/WP
fields/NNS
are/VBP
what/WP
./.

Succeed/VB
or/CC
fail/VB
it/PRP
's/VBZ
then/RB
discarded/VBN
so/IN
you/PRP
ca/MD
n't/RB
try/VB
a/DT
replay/NN
attack/NN
--/--
if/IN
you/PRP
reject/VBP
the/DT
password/NN
they/PRP
get/VBP
a/DT
new/JJ
session/NN
ID/NN
./.

Any/DT
form/NN
that/WDT
is/VBZ
submitted/VBN
with/IN
data/NNS
in/IN
a/DT
wrong/JJ
field/NN
is/VBZ
assumed/VBN
to/TO
be/VB
from/IN
a/DT
robot/NN
--/--
the/DT
login/NN
fails/VBZ
,/,
period/NN
,/,
and/CC
that/IN
IP/NNP
is/VBZ
throttled/VBN
./.

Make/NNP
sure/RB
the/DT
random/JJ
field/NN
names/NNS
never/RB
match/VBP
the/DT
legit/JJ
field/NN
names/NNS
so/IN
someone/NN
using/VBG
something/NN
that/WDT
remembers/VBZ
passwords/NNS
is/VBZ
n't/RB
mislead/VBN
./.

Next/RB
,/,
how/WRB
about/RB
a/DT
different/JJ
sort/NN
of/IN
captcha/NN
:/:
You/PRP
have/VBP
a/DT
series/NN
of/IN
questions/NNS
that/WDT
wo/MD
n't/RB
cause/VB
problems/NNS
for/IN
a/DT
human/JJ
./.

However/RB
,/,
they/PRP
are/VBP
NOT/RB
random/JJ
./.

When/WRB
the/DT
attack/NN
starts/VBZ
everyone/NN
is/VBZ
given/VBN
question/NN
#/SYM
1/CD
./.

After/IN
an/DT
hour/NN
question/NN
#/SYM
1/CD
is/VBZ
discarded/VBN
,/,
never/RB
to/TO
be/VB
used/VBN
again/RB
and/CC
everyone/NN
gets/VBZ
question/NN
#/SYM
2/CD
and/CC
so/RB
on/RB
./.

The/DT
attacker/NN
ca/MD
n't/RB
probe/VB
to/TO
download/VB
the/DT
database/NN
to/TO
put/VB
into/IN
his/PRP$
robot/NN
because/IN
of/IN
the/DT
disposable/JJ
nature/NN
of/IN
the/DT
questions/NNS
./.

He/PRP
has/VBZ
to/TO
send/VB
new/JJ
instructions/NNS
out/RP
to/TO
his/PRP$
botnet/NN
within/IN
an/DT
hour/NN
to/TO
have/VB
any/DT
ability/NN
to/TO
do/VB
anything/NN
./.

You/PRP
're/VBP
missing/VBG
the/DT
point/NN
./.

The/DT
attacker/NN
ca/MD
n't/RB
check/VB
the/DT
in/IN
advance/NN
because/IN
it/PRP
only/RB
shows/VBZ
the/DT
extra/JJ
defenses/NNS
when/WRB
an/DT
attack/NN
shows/VBZ
up/RP
./.

Sure/RB
,/,
the/DT
human/JJ
could/MD
see/VB
what/WP
the/DT
question/NN
was/VBD
--/--
but/CC
he/PRP
has/VBZ
to/TO
communicate/VB
that/DT
to/TO
all/PDT
his/PRP$
bots/NNS
./.

That/DT
's/VBZ
a/DT
communications/NNS
path/NN
that/WDT
makes/VBZ
it/PRP
easier/JJR
to/TO
bring/VB
down/RP
the/DT
botnet/NN
./.

Gaah/UH
,/,
@Jon/USR
,/,
I/PRP
was/VBD
all/DT
bubbly/RB
and/CC
happily/RB
writing/VBG
my/PRP$
answer/NN
,/,
and/CC
not/RB
only/RB
you/PRP
beat/VBP
me/PRP
to/TO
the/DT
punch/NN
,/,
my/PRP$
answer/NN
does/VBZ
not/RB
even/RB
apply/VB
anymore/RB
./.
*cries*/UH

The/DT
bad/JJ
answer/NN
:/.

Specifically/RB
,/,
can/MD
you/PRP
think/VB
of/IN
any/DT
examples/NNS
of/IN
SQL/NNP
injection/NN
that/WDT
would/MD
succeed/VB
despite/IN
the/DT
input/NN
strings/NNS
being/VBG
escaped/VBN
(/-LRB-
using/VBG
mysql_escape_string/C NA
)/-RRB-
?/.

Not/RB
reliably/RB
./.

You/PRP
are/VBP
referring/VBG
to/TO
mysql_escape_string/C NA
(/C NA
)/C NA
,/,
which/WDT
does/VBZ
not/RB
take/VB
into/IN
account/NN
the/DT
connection/NN
encoding/NN
(/-LRB-
while/IN
mysql_real_escape_string/C NA
(/C NA
)/C NA
does/VBZ
)/-RRB-
./.

So/RB
maybe/RB
a/DT
carefully/RB
crafted/VBN
string/NN
,/,
with/IN
a/DT
carefully/RB
crafted/VBN
incomplete/JJ
UTF8/NNP
codepoint/NN
in/IN
front/NN
,/,
might/MD
result/VB
in/IN
,/,
say/VB
,/,
a/DT
quote/NN
sign/NN
being/VBG
escaped/VBN
by/IN
mysql_escape_string/C NA
(/C NA
)/C NA
but/CC
the/DT
escape/NN
itself/PRP
being/VBG
ignored/VBN
by/IN
MySQL/NNP
since/IN
it/PRP
will/MD
"/``
see/VB
"/''
it/PRP
as/IN
an/DT
UTF8/NNP
character/NN
./.

E.g./FW
:/.

0xC2/C
'/C
OR/C
1/C
=/C
1/C
OR/CC
0xC2/C
'/C
would/MD
be/VB
escaped/VBN
by/IN
mysql_escape_string/C
(/C
)/C
as/IN
0xC2/C
\/C
'/C
OR/CC
1/C
=/C
1/C
;/C
--/C
which/WDT
would/MD
be/VB
assembled/VBN
to/TO
WHERE/C
password/C
=/C
'0xC2\'/C
OR/CC
1/C
=/C
1/C
;/C
--/C
'/C
;/C
and/CC
seen/VBN
by/IN
MySQL/NNP
(/-LRB-
if/IN
the/DT
proper/JJ
connection/NN
encoding/NN
was/VBD
in/IN
effect/NN
)/-RRB-
as/IN
,/,
say/VBP
,/,
WHERE/C
password/C
=/C
'€'/C
OR/C
1/C
=/C
1/C
;/C
--/C
'/C
;/C
which/WDT
would/MD
be/VB
a/DT
classic/JJ
SQL/NNP
injection/NN
./.

But/CC
this/DT
plays/VBZ
on/IN
the/DT
fact/NN
that/IN
you/PRP
specified/VBD
,/,
maybe/RB
through/IN
distraction/NN
,/,
a/DT
doubly/RB
deprecated/VBN
function/NN
./.

If/IN
you/PRP
really/RB
were/VBD
referring/VBG
to/TO
mysql_real_escape_string/C NA
(/C NA
)/C NA
,/,
then/RB
it/PRP
would/MD
not/RB
work/VB
./.

Also/RB
,/,
this/DT
assumes/VBZ
that/IN
neither/PDT
the/DT
server/NN
,/,
nor/CC
the/DT
application/NN
layer/NN
(/-LRB-
e.g./FW
PHP/NNP
)/-RRB-
employs/VBZ
any/DT
kind/NN
of/IN
charset/NN
validation/NN
when/WRB
populating/VBG
the/DT
input/NN
./.

If/IN
they/PRP
did/VBD
,/,
the/DT
invalid/JJ
UTF8/NNP
would/MD
be/VB
deleted/VBN
on/IN
arrival/NN
,/,
and/CC
never/RB
even/RB
be/VB
seen/VBN
by/IN
mysql_escape_string/C
,/,
which/WDT
would/MD
then/RB
of/IN
course/NN
be/VB
enough/RB
./.

The/DT
real/JJ
answer/NN
:/.

Do/VBP
not/RB
use/VB
mysql_escape_string/C
(/-LRB-
or/CC
mysql_whatever/C
)/-RRB-
at/IN
all/DT
./.

They/PRP
've/VBP
been/VBN
deprecated/VBN
and/CC
your/PRP$
code/NN
might/MD
stop/VB
working/VBG
./.

Use/VBP
PDO/NN
functions/NNS
instead/RB
./.

The/DT
other/JJ
solutions/NNS
here/RB
are/VBP
nice/JJ
,/,
however/RB
it/PRP
's/VBZ
a/DT
bit/NN
of/IN
a/DT
royal/JJ
pain/NN
in/IN
the/DT
rear/NN
to/TO
have/VB
to/TO
apply/VB
[/-LRB-
AllowHtml/C
]/-RRB-
to/TO
every/DT
single/JJ
Model/NN
property/NN
especially/RB
if/IN
you/PRP
have/VBP
over/IN
100/CD
models/NNS
on/IN
a/DT
decent/JJ
sized/VBN
site/NN
./.

If/IN
like/IN
me/PRP
,/,
you/PRP
want/VBP
to/TO
turn/VB
this/DT
(/-LRB-
imho/UH
pretty/RB
pointless/JJ
)/-RRB-
feature/NN
off/IN
site/NN
wide/JJ
you/PRP
can/MD
override/VB
the/DT
Execute/C
(/C
)/C
method/NN
in/IN
your/PRP$
base/NN
controller/NN
(/-LRB-
if/IN
you/PRP
do/VBP
n't/RB
already/RB
have/VB
a/DT
base/NN
controller/NN
I/PRP
suggest/VBP
you/PRP
make/VBP
one/PRP
,/,
they/PRP
can/MD
be/VB
pretty/RB
useful/JJ
for/IN
applying/VBG
common/JJ
functionality/NN
)/-RRB-
./.

protected/C
override/C
void/C
Execute/C
(/C
RequestContext/C
requestContext/C
)/C
{/C
///CCM
Disable/VB|CCM
requestion/NN|CCM
validation/NN|CCM
(/-LRB-|CCM
security/NN|CCM
)/-RRB-|CCM
across/IN|CCM
the/DT|CCM
whole/JJ|CCM
site/NN|CCM
ValidateRequest/C
=/C
false/C
;/C
base/C
./C
Execute/C
(/C
requestContext/C
)/C
;/C
}/C

Just/RB
make/VB
sure/JJ
that/IN
you/PRP
are/VBP
html/NNP
encoding/VBG
everything/NN
that/WDT
is/VBZ
pumped/VBN
out/RP
to/TO
the/DT
views/NNS
that/WDT
came/VBD
from/IN
user/NN
input/NN
(/-LRB-
it/PRP
's/VBZ
default/NN
behaviour/NN
in/IN
MVC3/NN
with/IN
Razor/NNP
anyway/RB
so/RB
unless/IN
for/IN
some/DT
bizzare/JJ
reason/NN
you/PRP
are/VBP
using/VBG
Html/C
./C
Raw/C
(/C
)/C
you/PRP
should/MD
n't/RB
require/VB
this/DT
feature/NN
./.

In/IN
PHP/NNP
,/,
you/PRP
can/MD
use/VB
the/DT
mcrypt/NN
or/CC
bcrypt/NN
libraries/NNS
for/IN
better/JJR
encryption/NN
than/IN
md5/NNP
or/CC
sha1/NNP
./.

If/IN
you/PRP
're/VBP
stuck/VBN
with/IN
md5/NNP
or/CC
sha1/NNP
you/PRP
should/MD
to/TO
'/``
stretching/VBG
'/''
,/,
where/WRB
you/PRP
hash/VBP
the/DT
password/NN
1000/CD
's/POS
of/IN
times/NNS
before/IN
you/PRP
arrive/VBP
at/IN
whatever/WDT
is/VBZ
stored/VBN
in/IN
the/DT
database/NN
./.

This/DT
keeps/VBZ
the/DT
entropy/NN
the/DT
same/JJ
,/,
but/CC
increases/VBZ
the/DT
time/NN
to/TO
compute/VB
the/DT
hash/NN
./.

@Tom/USR
Gullen/USR
,/,
what/WDT
articles/NNS
are/VBP
you/PRP
reading/VBG
?/.

Self-professed/JJ
experts/NNS
or/CC
peer/NN
reviewed/VBN
articles/NNS
in/IN
a/DT
scientific/JJ
journal/NN
?/.

And/CC
it/PRP
's/VBZ
your/PRP$
average/JJ
Joe/NNP
developer/NN
making/VBG
those/DT
blog/NN
//CC
help/NN
posts/NNS
on/IN
how/WRB
to/TO
write/VB
a/DT
"/``
secure/JJ
"/''
system/NN
./.

Security/NN
is/VBZ
n't/RB
something/NN
you/PRP
can/MD
pick/VB
up/RP
on/IN
the/DT
side/NN
,/,
it/PRP
requires/VBZ
extensive/JJ
knowledge/NN
./.

Is/VBZ
it/PRP
unfair/JJ
?/.

Probably/RB
./.

Is/VBZ
it/PRP
safe/JJ
?/.

To/TO
a/DT
degree/NN
./.

There/EX
are/VBP
reasons/NNS
there/EX
are/VBP
security/NN
experts/NNS
./.

But/CC
then/RB
again/RB
,/,
not/RB
everything/NN
has/VBZ
to/TO
be/VB
as/RB
secure/JJ
as/IN
Fort/NNP
Knox/NNP
./.

The/DT
best/JJS
policy/NN
here/RB
is/VBZ
to/TO
use/VB
a/DT
prebuilt/NN
system/NN
designed/VBN
by/IN
those/DT
experts/NNS
,/,
and/CC
modify/VB
it/PRP
to/TO
meet/VB
your/PRP$
needs/NNS
./.

I/PRP
was/VBD
the/DT
downvoter/NN
,/,
I/PRP
misread/VBD
it/PRP
though/IN
so/IN
I/PRP
removed/VBD
my/PRP$
downvote/NN
./.

However/RB
,/,
I/PRP
would/MD
like/VB
to/TO
point/VB
out/RP
that/IN
if/IN
they/PRP
user/NN
has/VBZ
access/NN
to/TO
the/DT
database/NN
storing/VBG
the/DT
password/NN
(/-LRB-
as/IN
you/PRP
seem/VBP
to/TO
assume/VB
)/-RRB-
,/,
the/DT
salt/NN
is/VBZ
probably/RB
known/VBN
(/-LRB-
they/PRP
are/VBP
typically/RB
stored/VBN
in/IN
plaintext/NN
alongside/IN
the/DT
hashed/VBN
password/NN
)/-RRB-
./.

If/IN
they/PRP
are/VBP
attacking/VBG
it/PRP
from/IN
the/DT
front-end/NN
,/,
bruteforce/NN
or/CC
dictionary/NN
attacks/NNS
will/MD
not/RB
be/VB
affected/VBN
by/IN
the/DT
presence/NN
of/IN
the/DT
salt/NN
(/-LRB-
unless/IN
the/DT
salt/NN
is/VBZ
computationally/RB
expensive/JJ
)/-RRB-
./.

The/DT
goal/NN
on/IN
the/DT
front/JJ
end/NN
should/MD
be/VB
delay/VB
and/or/CC
prevent/VB
blind/JJ
guessing/VBG
,/,
and/CC
the/DT
backend/NN
to/TO
salt/NN
securely/RB
./.

There/EX
are/VBP
many/JJ
ways/NNS
of/IN
preventing/VBG
SQL/NNP
injections/NNS
and/CC
other/JJ
SQL/NNP
hacks/NNS
./.

You/PRP
can/MD
easily/RB
find/VB
it/PRP
on/IN
the/DT
Internet/NN
(/-LRB-
Google/NNP
Search/VB
)/-RRB-
./.

Of/IN
course/NN
PDO/NN
is/VBZ
one/CD
of/IN
the/DT
good/JJ
solution/NN
./.

But/CC
I/PRP
would/MD
like/VB
to/TO
suggest/VB
you/PRP
some/DT
good/JJ
links/NNS
prevention/NN
from/IN
SQL/NNP
Injection/NN
./.

What/WP
is/VBZ
SQL/NNP
injection/NN
and/CC
how/WRB
to/TO
prevent/VB

PHP/NNP
manual/NN
for/IN
SQL/NNP
injection/NN

Microsoft/NNP
explanation/NN
of/IN
SQL/NNP
injection/NN
and/CC
prevention/NN
in/IN
PHP/NNP
and/CC
some/DT
other/JJ
like/IN
Preventing/VBG
SQL/NNP
injection/NN
with/IN
MySQL/NNP
and/CC
PHP/NNP

Now/RB
,/,
why/WRB
you/PRP
do/VBP
you/PRP
need/VB
to/TO
prevent/VB
your/PRP$
query/NN
from/IN
SQL/NNP
injection/NN
?/.

I/PRP
would/MD
like/VB
to/TO
let/VB
you/PRP
know/VB
:/:
Why/WRB
do/VBP
we/PRP
try/VB
for/IN
preventing/VBG
SQL/NNP
injection/NN
with/IN
a/DT
short/JJ
example/NN
below/IN
:/.

Query/NN
for/IN
login/NN
authentication/NN
match/VB
:/.

$/C
query/C
=/C
"/C
select/C
*/C
from/C
users/C
where/C
email/C
=/C
'/C
"/C
./C
$/C
_POST/C
[/C
'email'/C
]/C
./C
"/C
'/C
and/C
password/C
=/C
'/C
"/C
./C
$/C
_POST/C
[/C
'password'/C
]/C
./C
"/C
'/C
"/C
;/C

Now/RB
,/,
if/IN
someone/NN
(/-LRB-
a/DT
hacker/NN
)/-RRB-
puts/VBZ
$/C
_POST/C
[/C
'email'/C
]/C
=/C
admin@emali.com/C
'/C
OR/C
'/C
1/C
=/C
1/C
and/CC
password/C
anything/C
.../F

The/DT
query/NN
will/MD
be/VB
parsed/VBN
in/IN
the/DT
system/NN
only/JJ
upto/NN
:/.

$/C
query/C
=/C
"/C
select/C
*/C
from/C
users/C
where/C
email/C
=/C
'admin@emali.com'/C
OR/CC
'/C
1/C
=/C
1/C
'/C
;/C

The/DT
other/JJ
part/NN
will/MD
be/VB
discarded/VBN
./.

So/RB
,/,
what/WP
will/MD
happen/VB
?/.

A/DT
non-authorized/JJ
user/NN
(/-LRB-
hacker/NN
)/-RRB-
will/MD
be/VB
able/JJ
to/TO
login/VB
as/IN
admin/NN
without/IN
having/VBG
his/PRP$
password/NN
./.

Now/RB
,/,
he/PRP
can/MD
do/VB
anything/NN
what/WP
admin/NN
//CC
email/NN
person/NN
can/MD
do/VB
./.

See/VBP
,/,
it/PRP
's/VBZ
very/RB
dangerous/JJ
if/IN
SQL/NNP
injection/NN
is/VBZ
not/RB
prevented/VBN
./.

I/PRP
think/VBP
,/,
its/PRP$
best/JJS
described/VBN
here/RB
:)/UH

UI/PRP
'm/VBP
not/RB
sure/JJ
about/IN
other/JJ
ways/NNS
to/TO
do/VB
it/PRP
but/CC
here/RB
's/POS
how/WRB
you/PRP
do/VBP
it/PRP
in/IN
Prototype/NNP
(/-LRB-
JSON/NNP
tutorial/NN
)/-RRB-
./.

new/C
Ajax/C
./C
Request/C
(/C
'/some_url'/C
,/C
{/C
method/C
:/C
'get'/C
,/C
requestHeaders/C
:/C
{/C
Accept/C
:/C
'application/json'/C
}/C
,/C
onSuccess/C
:/C
function/C
(/C
transport/C
)/C
{/C
var/C
json/C
=/C
transport/C
./C
responseText/C
./C
evalJSON/C
(/C
true/C
)/C
;/C
}/C
}/C
)/C
;/C

Calling/VBG
evalJSON/C
(/C
)/C
with/IN
true/NN
as/IN
the/DT
argument/NN
sanitizes/VBZ
the/DT
incoming/JJ
string/NN
./.

Let/VB
's/POS
say/VBP
I/PRP
have/VBP
code/NN
like/IN
this/DT
:/.

$/C
dbh/C
=/C
new/C
PDO/C
(/C
"blahblah"/C
)/C
;/C

$/C
stmt/C
=/C
$/C
dbh/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
users/C
where/C
username/C
=/C
:/C
username/C
'/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
array/C
(/C
'/C
:/C
username/C
'/C
=>/C
$/C
_REQUEST/C
[/C
'username'/C
]/C
)/C
)/C
;/C

The/DT
PDO/NN
documentation/NN
says/VBZ
:/.

The/DT
parameters/NNS
to/TO
prepared/JJ
statements/NNS
do/VBP
n't/RB
need/VB
to/TO
be/VB
quoted/VBN
;/--
the/DT
driver/NN
handles/VBZ
it/PRP
for/IN
you/PRP
./.

Is/VBZ
that/IN
truly/RB
all/DT
I/PRP
need/VBP
to/TO
do/VB
to/TO
avoid/VB
SQL/NNP
injections/NNS
?/.

Is/VBZ
it/PRP
really/RB
that/IN
easy/JJ
?/.

You/PRP
can/MD
assume/VB
MySQL/NNP
if/IN
it/PRP
makes/VBZ
a/DT
difference/NN
./.

Also/RB
,/,
I/PRP
'm/VBP
really/RB
only/RB
curious/JJ
about/IN
the/DT
use/NN
of/IN
prepared/JJ
statements/NNS
against/IN
SQL/NNP
injection/NN
./.

In/IN
this/DT
context/NN
,/,
I/PRP
do/VBP
n't/RB
care/VB
about/IN
XSS/NNP
or/CC
other/JJ
possible/JJ
vulnerabilities/NNS
./.

That/DT
's/VBZ
interesting/JJ
./.

I/PRP
was/VBD
n't/RB
aware/JJ
of/IN
1st/JJ
order/NN
vs./IN
2nd/JJ
order/NN
./.

Can/MD
you/PRP
elaborate/VB
a/DT
little/RB
more/JJR
on/IN
how/WRB
2nd/JJ
order/NN
works/NNS
?/.

Thanks/NNS
cjm/USR
./.

I/PRP
also/RB
found/VBD
this/DT
article/NN
helpful/JJ
in/IN
explaining/VBG
2nd/JJ
order/NN
injections/NNS
:/:
codeproject.com/KB/database/SqlInjectionAttacks.aspx/URI

Does/VBZ
n't/RB
Java/NNP
have/VB
try/finally/C
?/.

@paercebal/USR
:/:
Could/MD
you/PRP
tell/VB
me/PRP
what/WDT
part/NN
of/IN
that/DT
is/VBZ
"/``
failure/NN
"/''
,/,
exactly/RB
?/.

The/DT
syntax/NN
is/VBZ
different/JJ
,/,
sure/UH
,/,
but/CC
it/PRP
seems/VBZ
like/IN
finally/C NA
does/VBZ
exactly/RB
what/WP
you/PRP
were/VBD
trying/VBG
to/TO
achieve/VB
./.

The/DT
garbage/NN
collection/NN
model/NN
is/VBZ
simply/RB
different/JJ
from/IN
C++/NNP
--/--
if/IN
you/PRP
need/VBP
destruction/NN
,/,
you/PRP
use/VBP
a/DT
finalizer/NN
;/,
if/IN
you/PRP
need/VBP
execution/NN
at/IN
a/DT
particular/JJ
time/NN
,/,
you/PRP
use/VBP
a/DT
finally/C NA
block/NN
./.

Just/RB
because/IN
it/PRP
does/VBZ
n't/RB
match/VB
your/PRP$
taste/NN
(/-LRB-
RAII/NNP
does/VBZ
n't/RB
match/VB
mine/NN
,/,
since/IN
it/PRP
needs/VBZ
a/DT
new/JJ
struct/NN
every/DT
single/JJ
darn/JJ
time/NN
,/,
which/WDT
is/VBZ
tedious/JJ
sometimes/RB
)/-RRB-
does/VBZ
n't/RB
mean/VB
it/PRP
's/VBZ
"/``
failing/VBG
"/''
./.

@paercebal/USR
:/:
The/DT
[/-LRB-
.../F
]/-RRB-
part/NN
that/IN
you/PRP
omitted/VBD
shows/NNS
you/PRP
completely/RB
missed/VBD
the/DT
point/NN
of/IN
my/PRP$
comment/NN
./.

I/PRP
never/RB
said/VBD
I/PRP
do/VBP
n't/RB
like/VB
using/VBG
or/CC
the/DT
new/JJ
try/C NA
block/NN
./.

Read/VB
my/PRP$
comment/NN
again/RB
about/IN
why/WRB
I/PRP
said/VBD
I/PRP
do/VBP
n't/RB
like/VB
RAII/NNP
in/IN
C++/NNP
./.

@paercebal/USR
:/:
it/PRP
is/VBZ
almost/RB
impossible/JJ
to/TO
produce/VB
robust/JJ
code/NN
when/WRB
multiple/JJ
resources/NNS
are/VBP
used/VBN
./.

No/UH
,/,
it/PRP
's/VBZ
pretty/RB
easy/JJ
./.

Just/RB
1/CD
'/``
finally/C NA
'/''
block/NN
per/IN
resource/NN
does/VBZ
the/DT
trick/NN
./.

Regarding/VBG
your/PRP$
second/JJ
comment/NN
:/:
Note/VB
the/DT
word/NN
"/``
sometimes/RB
"/''
./.

Obviously/RB
,/,
if/IN
someone/NN
wrote/VBD
the/DT
code/NN
for/IN
you/PRP
already/RB
then/RB
it/PRP
does/VBZ
n't/RB
apply/VB
./.

But/CC
the/DT
whole/JJ
point/NN
of/IN
my/PRP$
comment/NN
is/VBZ
that/IN
it/PRP
forces/VBZ
you/PRP
to/TO
make/VB
a/DT
wrapper/NN
for/IN
something/NN
you/PRP
may/MD
not/RB
need/VB
a/DT
wrapper/NN
for/IN
,/,
which/WDT
like/IN
I/PRP
said/VBD
,/,
I/PRP
find/VBP
tedious/JJ
./.

I/PRP
'm/VBP
not/RB
trying/VBG
to/TO
show/VB
you/PRP
I/PRP
'm/VBP
right/RB
regarding/VBG
that/IN
;/--
I/PRP
'm/VBP
just/RB
telling/VBG
you/PRP
it/PRP
's/VBZ
a/DT
matter/NN
of/IN
taste/NN
in/IN
both/DT
languages/NNS
,/,
not/RB
correctness/NN
./.

@paercebal/USR
:/:
I/PRP
should/MD
also/RB
note/VB
that/IN
having/VBG
a/DT
good/JJ
IDE/NN
makes/VBZ
things/NNS
a/DT
heck/NN
of/IN
a/DT
lot/NN
easier/JJR
with/IN
try/finally/C NA
./.

(/-LRB-
E.g./FW
C#/NNP
's/POS
tryf/C NA
snippet/NN
basically/RB
writes/VBZ
the/DT
thing/NN
for/IN
you/PRP
when/WRB
you/PRP
press/VBP
TAB/NN
./.
)/-RRB-

Also/RB
,/,
realize/VBP
that/IN
I/PRP
'm/VBP
not/RB
a/DT
Java/NNP
fan/NN
at/IN
all/DT
.../F
if/IN
anything/NN
,/,
I/PRP
like/VBP
C++/NNP
better/RBR
than/IN
Java/NNP
in/IN
general/JJ
./.

But/CC
I/PRP
do/VBP
n't/RB
feel/VB
like/IN
try/finally/C NA
is/VBZ
insufficient/JJ
for/IN
writing/VBG
correct/JJ
code/NN
;/:
it/PRP
's/VBZ
just/RB
tedious/JJ
./.

(/-LRB-
It/PRP
's/VBZ
really/RB
easy/JJ
to/TO
put/VB
an/DT
extra/JJ
set/NN
of/IN
braces/NNS
outside/IN
the/DT
resource/NN
acquisition/NN
code/NN
to/TO
signal/VB
to/TO
the/DT
reader/NN
that/IN
he/PRP
should/MD
n't/RB
do/VB
anything/NN
before/IN
the/DT
try/C NA
block/NN
starts/VBZ
,/,
if/IN
necessary/JJ
./.
)/-RRB-

-/SYM
1/CD
from/IN
me/PRP
:/:
being/VBG
kept/VBN
secret/NN
is/VBZ
totally/RB
not/RB
the/DT
point/NN
of/IN
salts/NNS
./.

You/PRP
need/VBP
them/PRP
accessible/JJ
for/IN
checking/VBG
passwords/NNS
anyway/RB
,/,
so/IN
any/DT
attempt/NN
to/TO
keep/VB
them/PRP
secret/NN
is/VBZ
likely/JJ
to/TO
make/VB
the/DT
system/NN
more/RBR
vulnerable/JJ
through/IN
added/VBN
complexity/NN
rather/RB
than/IN
actually/RB
succeed/VB
./.

@0xA3/USR
:/:
again/RB
:/,
being/VBG
unknown/JJ
to/TO
an/DT
attacker/NN
is/VBZ
not/RB
the/DT
point/NN
of/IN
a/DT
salt/NN
./.

Your/PRP$
machine/NN
needs/VBZ
to/TO
access/VB
it/PRP
in/IN
some/DT
way/NN
,/,
so/IN
an/DT
attacker/NN
who/WP
breaks/VBZ
into/IN
the/DT
machine/NN
can/MD
get/VB
it/PRP
too/RB
./.

Any/DT
scenario/NN
where/WRB
the/DT
attacker/NN
does/VBZ
not/RB
know/VB
the/DT
salt/NN
is/VBZ
a/DT
red/JJ
herring/NN
./.

I/PRP
think/VBP
that/IN
by/IN
"/``
dictionary/NN
attack/NN
"/''
,/,
Tom/NNP
refers/VBZ
to/TO
trying/VBG
out/RP
known/JJ
weak/JJ
passwords/NNS
(/-LRB-
i.e./FW
straight/RB
out/IN
of/IN
a/DT
human/JJ
language/NN
dictionary/NN
)/-RRB-
,/,
not/RB
precomputed/VBN
hash-plaintext/NN
tables/NNS
-/--
this/DT
is/VBZ
also/RB
what/WP
I/PRP
first/JJ
think/NN
of/IN
when/WRB
I/PRP
read/VBP
"/``
dictionary/NN
"/''
in/IN
this/DT
context/NN
./.

The/DT
point/NN
of/IN
salting/NN
is/VBZ
to/TO
prevent/VB
the/DT
amortization/NN
of/IN
the/DT
attacker/NN
's/POS
effort/NN
./.

With/IN
no/DT
salt/NN
,/,
a/DT
single/JJ
table/NN
of/IN
precomputed/VBN
hash-password/JJ
entries/NNS
(/-LRB-
e.g./FW
MD5/NNP
of/IN
all/DT
alphanumeric/JJ
5/CD
character/NN
strings/NNS
,/,
easy/JJ
to/TO
find/VB
online/NN
)/-RRB-
can/MD
be/VB
used/VBN
on/IN
every/DT
user/NN
in/IN
every/DT
database/NN
in/IN
the/DT
world/NN
./.

With/IN
a/DT
site-specific/JJ
salt/NN
,/,
the/DT
attacker/NN
has/VBZ
to/TO
compute/VB
the/DT
table/NN
himself/PRP
and/CC
can/MD
then/RB
use/VB
it/PRP
on/IN
all/DT
users/NNS
of/IN
the/DT
site/NN
./.

With/IN
a/DT
per-user/JJ
salt/NN
,/,
the/DT
attacker/NN
has/VBZ
to/TO
expend/VB
this/DT
effort/NN
for/IN
every/DT
user/NN
separately/RB
./.

Of/IN
course/NN
,/,
this/DT
does/VBZ
n't/RB
do/VB
much/RB
to/TO
protect/VB
really/RB
weak/JJ
passwords/NNS
straight/RB
out/IN
of/IN
a/DT
dictionary/NN
,/,
but/CC
it/PRP
protects/VBZ
reasonably/RB
strong/JJ
passwords/NNS
against/IN
this/DT
amortization/NN
./.

The/DT
first/JJ
answer/NN
I/PRP
've/VBP
usually/RB
heard/VBN
when/WRB
asking/VBG
this/DT
question/NN
is/VBZ
to/TO
change/VB
ports/NNS
,/,
but/CC
forget/VBP
about/IN
that/DT
and/CC
just/RB
disable/VB
IPv4/NNP
./.

If/IN
you/PRP
only/RB
allow/VBP
clients/NNS
from/IN
IPv6/NNP
networks/NNS
you/PRP
'r/VB
no/RB
longer/RB
pray/VB
for/IN
simple/JJ
network/NN
scanning/NN
and/CC
attackers/NNS
will/MD
resort/VB
to/TO
DNS/NN
lookups/NNS
./.

Do/VBP
n't/RB
run/VB
on/IN
the/DT
same/JJ
address/NN
as/IN
your/PRP$
Apache/C
(/C
AAAA/C
)/C
//CC
Sendmail/C
(/C
MX/C
->/C
AAAA/C
)/C
//CC
what/WP
have/VBP
you/PRP
given/VBN
out/RP
to/TO
everybody/C
(/C
AAAA/C
)/C
./.

Make/NNP
sure/RB
your/PRP$
zone/NN
ca/MD
n't/RB
be/VB
xferd/VBD
,/,
wait/VB
you/PRP
'r/VBP
allowing/VBG
your/PRP$
zone/NN
to/TO
be/VB
downloaded/VBN
by/IN
anybody/NN
?/.

If/IN
the/DT
bots/NNS
find/VB
your/PRP$
server/NN
setup/VBP
new/JJ
hostnames/NNS
,/,
just/RB
prepend/VB
some/DT
gibberish/NN
to/TO
your/PRP$
hostnames/NNS
,/,
and/CC
change/VB
your/PRP$
address/NN
./.

Leave/VB
the/DT
old/JJ
names/NNS
and/CC
even/RB
setup/VB
**/SYM
honeypot/NN
names/NNS
for/IN
the/DT
bot/NN
net/NN
to/TO
timeout/VB
on/IN
./.

**/SYM
Test/NN
your/PRP$
reverse/C
(/C
PTR/C
)/C
records/NNS
(/-LRB-
under/IN
ip6.arpa./C
)/-RRB-
to/TO
see/VB
if/IN
they/PRP
can/MD
be/VB
used/VBN
to/TO
zero/VB
in/RP
on/IN
//SYM
4/CD
's/POS
that/WDT
have/VBP
records/NNS
VS/IN
//SYM
4/CD
s/POS
that/WDT
do/VBP
n't/RB
./.

I.E./FW
Typically/RB
ip6.arpa/C
would/MD
have/VB
~/SYM
32/CD
"/''
./SYM
"/``
s/POS
in/IN
an/DT
address/NN
but/CC
trying/VBG
with/IN
the/DT
last/JJ
few/JJ
missing/VBG
might/MD
elude/VB
the/DT
network/NN
blocks/NNS
that/WDT
have/VBP
records/NNS
VS/IN
others/NNS
that/WDT
do/VBP
n't/RB
./.

If/IN
you/PRP
take/VBP
that/IN
further/RB
it/PRP
becomes/VBZ
possible/JJ
to/TO
skip/VB
large/JJ
portions/NNS
of/IN
the/DT
address/NN
space/NN
./.

In/IN
the/DT
worst/JJS
case/NN
users/NNS
will/MD
have/VB
to/TO
setup/VBP
an/DT
IPv6/NNP
tunnel/NN
,/,
it/PRP
's/VBZ
not/RB
like/IN
they/PRP
'd/MD
have/VB
to/TO
go/VB
as/RB
far/RB
as/IN
VPNing/VBG
into/IN
a/DT
DMZ/NN
.../.

Though/IN
one/PRP
wonders/VBZ
why/WRB
that/DT
's/VBZ
not/RB
the/DT
first/JJ
option/NN
./.

Also/RB
Kerberos/NNP
is/VBZ
cool/JJ
,/,
but/CC
IMHO/UH
LDAP/NNP
blows/NNS
(/-LRB-
What/WP
's/VBZ
technically/RB
wrong/JJ
with/IN
NISPlus/NNP
?/.

I/PRP
've/VBP
read/VBN
that/IN
Sun/NNP
decided/VBD
that/IN
users/NNS
wanted/VBD
LDAP/NNP
and/CC
because/IN
of/IN
this/DT
they/PRP
dropped/VBD
NIS+/NNP
)/-RRB-
./.

Kerberos/NNP
does/VBZ
work/NN
fine/VB
without/IN
LDAP/NNP
or/CC
NIS/NNP
,/,
just/RB
have/VBP
to/TO
manage/VB
users/NNS
on/IN
a/DT
host/NN
by/IN
host/NN
basis/NN
./.

Using/VBG
Kerberos/NNP
gives/VBZ
you/PRP
an/DT
easy/JJ
to/TO
use/VB
,/,
if/IN
not/RB
automated/VBN
,/,
PKI/NN
./.

Well/RB
,/,
I/PRP
would/MD
have/VB
to/TO
say/VB
that/IN
the/DT
biggest/JJS
mistake/NN
application/NN
developers/NNS
make/VBP
is/VBZ
not/RB
properly/RB
normalizing/VBG
the/DT
database/NN
./.

As/IN
an/DT
application/NN
developer/NN
myself/PRP
,/,
I/PRP
realize/VBP
the/DT
importance/NN
of/IN
proper/JJ
database/NN
structure/NN
,/,
normalization/NN
,/,
and/CC
maintenance/NN
;/:
I/PRP
have/VBP
spent/VBN
countless/JJ
hours/NNS
educating/VBG
myself/PRP
on/IN
database/NN
structure/NN
and/CC
administration/NN
./.

In/IN
my/PRP$
experience/NN
,/,
whenever/WRB
I/PRP
start/VBP
working/VBG
with/IN
a/DT
different/JJ
developer/NN
,/,
I/PRP
usually/RB
have/VBP
to/TO
restructure/VB
the/DT
entire/JJ
database/NN
and/CC
update/VB
the/DT
app/NN
to/TO
suit/VB
because/IN
it/PRP
is/VBZ
usually/RB
malformed/JJ
and/CC
defective/JJ
./.

For/IN
example/NN
,/,
I/PRP
started/VBD
working/VBG
with/IN
a/DT
new/JJ
project/NN
where/WRB
the/DT
developer/NN
asked/VBD
me/PRP
to/TO
implement/VB
Facebook/NNP
Connect/NNP
on/IN
the/DT
site/NN
./.

I/PRP
cracked/VBD
open/JJ
the/DT
database/NN
to/TO
see/VB
what/WP
I/PRP
had/VBD
to/TO
work/VB
with/IN
and/CC
saw/VBD
that/IN
every/DT
little/JJ
bit/NN
of/IN
information/NN
about/IN
any/DT
given/JJ
user/NN
was/VBD
crammed/VBN
into/IN
one/CD
table/NN
./.

It/PRP
took/VBD
me/PRP
six/CD
hours/NNS
to/TO
write/VB
a/DT
script/NN
that/WDT
would/MD
organize/VB
the/DT
table/NN
into/IN
four/CD
or/CC
five/CD
separate/JJ
tables/NNS
and/CC
another/DT
two/CD
to/TO
get/VB
the/DT
app/NN
to/TO
use/VB
those/DT
tables/NNS
./.

Please/VB
,/,
normalize/VB
your/PRP$
databases/NNS
!/.

It/PRP
will/MD
make/VB
everything/NN
else/RB
less/JJR
of/IN
a/DT
headache/NN
./.

Well/RB
,/,
the/DT
developer/NN
wanted/VBD
me/PRP
to/TO
implement/VB
Facebook/NNP
Connect/NNP
,/,
Twitter/NNP
account/NN
integration/NN
,/,
etc/FW
./.

I/PRP
'm/VBP
a/DT
specialist/NN
in/IN
several/JJ
areas/NNS
,/,
social/JJ
media/NNS
integration/NN
being/VBG
one/CD
of/IN
them/PRP
./.

The/DT
developer/NN
that/WDT
wanted/VBD
it/PRP
already/RB
had/VBD
the/DT
previous/JJ
version/NN
of/IN
the/DT
Graph/NN
API/NN
integrated/VBD
.../F
right/RB
in/IN
the/DT
user/NN
data/NN
table/NN
./.

That/DT
just/RB
would/MD
not/RB
do/VB
,/,
so/IN
I/PRP
ended/VBD
up/RP
having/VBG
to/TO
restructure/VB
the/DT
entire/JJ
thing/NN
just/RB
to/TO
get/VB
everything/NN
to/TO
match/VB
up/RP
correctly/RB
./.

I/PRP
favor/VBP
stored/JJ
procedures/NNS
(/-LRB-
MySQL/NNP
has/VBZ
had/VBD
stored/JJ
procedures/NNS
support/VBP
since/IN
5.0/CD
)/-RRB-
from/IN
a/DT
security/NN
point/NN
of/IN
view/NN
-/--
the/DT
advantages/NNS
are/VBP
-/.

Most/JJS
databases/NNS
(/-LRB-
including/VBG
MySQL/NNP
)/-RRB-
enable/VBP
user/NN
access/NN
to/TO
be/VB
restricted/JJ
to/TO
executing/VBG
stored/JJ
procedures/NNS
./.

The/DT
fine/NN
grained/VBD
security/NN
access/NN
control/NN
is/VBZ
useful/JJ
to/TO
prevent/VB
escalation/NN
of/IN
privileges/NNS
attacks/NNS
./.

This/DT
prevents/VBZ
compromised/VBN
applications/NNS
from/IN
being/VBG
able/JJ
to/TO
run/VB
SQL/NNP
directly/RB
against/IN
the/DT
database/NN
./.

They/PRP
abstract/VB
the/DT
raw/JJ
SQL/NNP
query/NN
from/IN
the/DT
application/NN
so/RB
less/JJR
information/NN
of/IN
the/DT
database/NN
structure/NN
is/VBZ
available/JJ
to/TO
the/DT
application/NN
./.

This/DT
makes/VBZ
it/PRP
harder/RBR
for/IN
people/NNS
to/TO
understand/VB
the/DT
underlying/JJ
structure/NN
of/IN
the/DT
database/NN
and/CC
design/NN
suitable/JJ
attacks/NNS
./.

They/PRP
accept/VBP
only/RB
parameters/NNS
,/,
so/IN
the/DT
advantages/NNS
of/IN
parameterized/JJ
queries/NNS
are/VBP
there/RB
./.

Of/IN
course/NN
-/--
IMO/UH
you/PRP
still/RB
need/VB
to/TO
sanitize/VB
your/PRP$
input/NN
-/--
especially/RB
if/IN
you/PRP
are/VBP
using/VBG
dynamic/JJ
SQL/NNP
inside/IN
the/DT
stored/JJ
procedure/NN
./.

The/DT
disadvantages/NNS
are/VBP
-/.

They/PRP
(/-LRB-
stored/JJ
procedures/NNS
)/-RRB-
are/VBP
tough/JJ
to/TO
maintain/VB
and/CC
tend/VB
to/TO
multiply/VB
very/RB
quickly/RB
./.

This/DT
makes/VBZ
managing/VBG
them/PRP
an/DT
issue/NN
./.

They/PRP
are/VBP
not/RB
very/RB
suitable/JJ
for/IN
dynamic/JJ
queries/NNS
-/--
if/IN
they/PRP
are/VBP
built/VBN
to/TO
accept/VB
dynamic/JJ
code/NN
as/IN
parameters/NNS
then/RB
a/DT
lot/NN
of/IN
the/DT
advantages/NNS
are/VBP
negated/VBN
./.

I/PRP
have/VBP
noticed/VBN
a/DT
lot/NN
of/IN
down-votes/NNS
to/TO
this/DT
answer/NN
but/CC
no/DT
comments/NNS
or/CC
any/DT
reasons/NNS
as/IN
to/TO
why/WRB
./.

I/PRP
would/MD
appreciate/VB
the/DT
courtesy/NN
of/IN
letting/VBG
me/PRP
know/VB
why/WRB
you/PRP
think/VBP
this/DT
answer/NN
deserves/VBZ
a/DT
down-vote/NN
so/IN
i/PRP
have/VBP
an/DT
opportunity/NN
to/TO
respond/VB
./.

@nikic/USR
-/:
Yes/UH
,/,
using/VBG
stored/JJ
procedures/NNS
may/MD
encourage/VB
people/NNS
to/TO
put/VB
business/NN
logic/NN
in/IN
them/PRP
when/WRB
it/PRP
is/VBZ
not/RB
appropriate/JJ
./.

But/CC
IMO/UH
that/WDT
is/VBZ
a/DT
code/NN
smell/NN
which/WDT
should/MD
be/VB
caught/VBN
in/IN
your/PRP$
code/NN
review/NN
./.

@greyfade/USR
Your/PRP$
argument/NN
is/VBZ
not/RB
clear/JJ
to/TO
me/PRP
-/:
it/PRP
looks/VBZ
like/IN
you/PRP
are/VBP
saying/VBG
that/IN
somehow/RB
malicous/JJ
SQL/NNP
can/MD
be/VB
injected/VBN
into/IN
SP/NN
through/IN
its/PRP$
parameters/NNS
and/CC
once/IN
it/PRP
does/VBZ
it/PRP
can/MD
harm/VB
the/DT
database/NN
./.

First/RB
of/IN
all/DT
if/IN
you/PRP
are/VBP
using/VBG
SP/NN
parameters/NNS
that/WDT
are/VBP
properly/RB
typed/VBN
malicous/JJ
injection/NN
will/MD
be/VB
limited/VBN
to/TO
only/RB
those/DT
parameters/NNS
that/WDT
accept/VBP
strings/NNS
./.

If/IN
you/PRP
pass/VBP
a/DT
piece/NN
of/IN
text/NN
to/TO
a/DT
sp/NN
parameter/NN
of/IN
type/NN
integer/NN
the/DT
DB/NN
will/MD
not/RB
execute/VB
it/PRP
./.

This/DT
particular/JJ
problem/NN
is/VBZ
valid/JJ
for/IN
parameterized/JJ
queries/NNS
as/RB
well/RB
if/IN
you/PRP
do/VBP
not/RB
sanitize/VB
the/DT
string/NN
that/IN
you/PRP
assign/VBP
to/TO
the/DT
parameters/NNS
./.

Sanitizing/VBG
the/DT
input/NN
is/VBZ
of/IN
of/IN
the/DT
points/NNS
I/PRP
made/VBD
in/IN
my/PRP$
answer/NN
-/:
point/NN
three/CD
./.

In/IN
this/DT
point/NN
I/PRP
mention/VBP
that/IN
sps/NNS
are/VBP
not/RB
suitable/JJ
for/IN
dynamic/JJ
queries/NNS
and/CC
this/DT
is/VBZ
one/CD
of/IN
the/DT
reasons/NNS
why/WRB
./.

Assuming/VBG
for/IN
a/DT
moment/NN
one/CD
is/VBZ
able/JJ
to/TO
compromise/VB
a/DT
stored/JJ
procedure/NN
using/VBG
SQL/NNP
injection/NN
(/-LRB-
becuase/IN
the/DT
sql/NNP
injection/NN
happened/VBD
through/IN
a/DT
string/NN
parameter/NN
and/CC
was/VBD
then/RB
used/VBN
in/IN
the/DT
query/NN
)/-RRB-
./.

In/IN
this/DT
case/NN
the/DT
limited/JJ
access/NN
privileges/NNS
of/IN
the/DT
stored/JJ
procedure/NN
(/-LRB-
assuming/VBG
you/PRP
have/VBP
set/VBN
it/PRP
up/RP
correctly/RB
)/-RRB-
will/MD
limit/VB
the/DT
damage/NN
to/TO
the/DT
parts/NNS
of/IN
the/DT
database/NN
the/DT
sp/NN
has/VBZ
access/NN
to/TO
./.

Assuming/VBG
for/IN
a/DT
moment/NN
one/PRP
is/VBZ
able/JJ
to/TO
compromise/VB
a/DT
stored/JJ
procedure/NN
using/VBG
SQL/NNP
injection/NN
./.

In/IN
this/DT
case/NN
the/DT
limited/JJ
access/NN
privileges/NNS
of/IN
the/DT
stored/JJ
procedure/NN
(/-LRB-
link/NN
on/IN
mySQL/NNP
sp/NN
access/NN
privileges/NNS
)/-RRB-
will/MD
limit/VB
the/DT
damage/NN
to/TO
the/DT
parts/NNS
of/IN
the/DT
database/NN
the/DT
sp/NN
has/VBZ
access/NN
to/TO
./.

@greyfade/USR
:/:
So/IN
what/WP
you/PRP
are/VBP
saying/VBG
is/VBZ
that/IN
by/IN
using/VBG
parameterised/JJ
calls/NNS
to/TO
the/DT
SP/NN
it/PRP
is/VBZ
impossible/JJ
to/TO
inject/VB
malicious/JJ
SQL/NNP
even/RB
if/IN
you/PRP
are/VBP
concatenating/VBG
strings/NNS
inside/IN
the/DT
SP/NN
./.

I/PRP
did/VBD
not/RB
know/VB
that/DT
parameterisation/NN
had/VBD
that/IN
particular/JJ
advantage/NN
and/CC
I/PRP
am/VBP
curious/JJ
to/TO
know/VB
how/WRB
this/DT
is/VBZ
done/VBN
-/--
technically/RB
./.

Does/VBZ
making/VBG
the/DT
data/NN
input/NN
a/DT
parameter/NN
automatically/RB
sanitise/VB
it/PRP
?/.

Is/VBZ
this/DT
specific/NN
to/TO
PHP/NNP
and/CC
mySQL/NNP
?/.

Can/MD
you/PRP
link/VB
to/TO
any/DT
article/NN
or/CC
post/NN
I/PRP
could/MD
read/VB
regarding/VBG
this/DT
?/.

Concatenating/VBG
strings/NNS
to/TO
make/VB
a/DT
query/NN
i.e./FW
using/VBG
dynamic/JJ
queries/NNS
-/:
inside/IN
an/DT
SP/NN
will/MD
negate/VB
the/DT
advantages/NNS
of/IN
using/VBG
the/DT
SP/NN
in/IN
the/DT
first/JJ
place/NN
./.

I/PRP
have/VBP
mentioned/VBN
this/DT
in/IN
the/DT
disadvantages/NNS
of/IN
using/VBG
an/DT
SP/NN
section/NN
of/IN
my/PRP$
answer/NN
above/IN
./.

@greyfade/USR
OK/UH
-/--
I/PRP
get/VBP
that/IN
you/PRP
are/VBP
using/VBG
mysqli_prepare/C NA
(/C NA
$/C NA
query/C NA
)/C NA
to/TO
parse/VB
the/DT
command/NN
you/PRP
are/VBP
going/VBG
to/TO
send/VB
in/IN
and/CC
it/PRP
is/VBZ
going/VBG
to/TO
use/VB
?/SYM
to/TO
pull/VB
in/IN
the/DT
data/NNS
from/IN
the/DT
passed/VBN
values/NNS
as/IN
data/NNS
./.

This/DT
is/VBZ
what/WP
happens/VBZ
in/IN
an/DT
SP/NN
as/RB
well/RB
,/,
it/PRP
accepts/VBZ
parameters/NNS
as/IN
input/NN
and/CC
treats/VBZ
the/DT
passed/VBN
in/IN
values/NNS
as/IN
data/NNS
./.

You/PRP
can/MD
call/VB
the/DT
SP/NN
using/VBG
the/DT
same/JJ
mysqli_prepare/C NA
(/C NA
$/C NA
query/C NA
)/C NA
and/CC
pass/VBP
in/IN
the/DT
parameters/NNS
using/VBG
?/SYM
./.

As/RB
far/RB
as/IN
passing/VBG
dummy/NN
parameters/NNS
is/VBZ
concerned/VBN
,/,
if/IN
you/PRP
are/VBP
using/VBG
SPs/NNS
you/PRP
can/MD
disable/VB
access/NN
permission/NN
to/TO
do/VB
direct/JJ
operations/NNS
on/IN
the/DT
db/NN
for/IN
the/DT
application/NN
./.

This/DT
way/NN
trying/VBG
to/TO
squeeze/VB
extra/JJ
SQL/NNP
commands/NNS
after/IN
the/DT
SP/NN
parameters/NNS
will/MD
throw/VB
an/DT
exception/NN
./.

The/DT
only/JJ
data/NNS
that/WDT
will/MD
be/VB
considered/VBN
will/MD
be/VB
what/WP
is/VBZ
passed/VBN
into/IN
the/DT
SP/NN
and/CC
that/DT
will/MD
be/VB
treated/VBN
as/IN
variables/NNS
with/IN
data/NNS
values/NNS
assuming/VBG
you/PRP
are/VBP
n't/RB
building/VBG
a/DT
dynamic/JJ
query/NN
./.

Personally/RB
I/PRP
would/MD
use/VB
a/DT
combination/NN
of/IN
mysqli_prepare/C
and/CC
stored/JJ
procedures/NNS
./.

I/PRP
believe/VBP
in/IN
defense/NN
in/IN
depth/NN
and/CC
do/VBP
not/RB
favor/VB
providing/VBG
the/DT
application/NN
adhoc/JJ
access/NN
to/TO
the/DT
schema/NN
./.

However/RB
,/,
I/PRP
think/VBP
a/DT
combination/NN
of/IN
using/VBG
SPs/NNS
along/IN
with/IN
the/DT
layered/JJ
access/NN
(/-LRB-
like/IN
I/PRP
have/VBP
suggested/VBN
in/IN
my/PRP$
answer/NN
)/-RRB-
provides/VBZ
an/DT
alternative/NN
to/TO
using/VBG
prepared/JJ
statements/NNS
that/WDT
solves/VBZ
the/DT
problem/NN
posed/VBD
in/IN
the/DT
question/NN
./.

Any/DT
piece/NN
of/IN
data/NNS
you/PRP
get/VBP
from/IN
the/DT
user/NN
(/-LRB-
or/CC
any/DT
other/JJ
external/JJ
source/NN
)/-RRB-
and/CC
pass/NN
to/TO
another/DT
system/NN
or/CC
another/DT
user/NN
is/VBZ
a/DT
potential/NN
exploit/VB
./.

If/IN
you/PRP
get/VBP
a/DT
string/NN
from/IN
the/DT
user/NN
and/CC
display/VBP
it/PRP
to/TO
another/DT
user/NN
without/IN
using/VBG
HtmlEncode/C NA
it/PRP
's/VBZ
a/DT
potential/NN
exploit/VB
./.

If/IN
you/PRP
get/VBP
a/DT
string/NN
from/IN
the/DT
user/NN
and/CC
use/VB
it/PRP
to/TO
construct/VB
SQL/NNP
it/PRP
's/VBZ
a/DT
potential/JJ
SQL/NNP
injection/NN
./.

If/IN
you/PRP
get/VBP
a/DT
string/NN
from/IN
the/DT
user/NN
and/CC
use/VB
it/PRP
to/TO
contract/VB
a/DT
file/NN
name/NN
for/IN
Process/C
./C
Start/C
or/CC
Assembly/C
./C
Load/C
it/PRP
's/VBZ
a/DT
remote/JJ
execution/NN
vulnerability/NN

You/PRP
get/VBP
the/DT
point/NN
,/,
the/DT
danger/NN
comes/VBZ
from/IN
using/VBG
unsanitized/JJ
data/NNS
,/,
if/IN
you/PRP
never/RB
pass/VBP
user/NN
input/NN
to/TO
external/JJ
system/NN
without/IN
sanitizing/VBG
it/PRP
(/-LRB-
example/NN
:/:
HtmlEncode/C NA
)/-RRB-
or/CC
using/VBG
injection-safe/JJ
interfaces/NNS
(/-LRB-
example/NN
:/:
SQL/NNP
parameters/NNS
)/-RRB-
you/PRP
are/VBP
relatively/RB
safe/JJ
-/--
the/DT
minute/NN
you/PRP
forget/VBP
to/TO
sanitize/VB
something/NN
the/DT
most/RBS
innocent-looking/JJ
method/NN
can/MD
become/VB
a/DT
security/NN
vulnerability/NN
./.

Note/VB
:/:
cookies/NNS
,/,
html/NNP
headers/NNS
and/CC
anything/NN
else/RB
that/IN
passes/NNS
over/IN
a/DT
network/NN
is/VBZ
also/RB
data/NNS
from/IN
the/DT
user/NN
,/,
in/IN
most/JJS
cases/NNS
even/VBP
data/NNS
in/IN
your/PRP$
database/NN
is/VBZ
data/NNS
from/IN
the/DT
user/NN
./.

@Rook/USR
-/:
You/PRP
ca/MD
n't/RB
possibly/RB
list/VB
all/PDT
the/DT
"/``
sink/NN
"/''
functions/NNS
,/,
any/DT
code/NN
that/WDT
is/VBZ
not/RB
explicitly/RB
designed/VBN
to/TO
deal/VB
with/IN
possibly/RB
malicious/JJ
data/NNS
is/VBZ
a/DT
sink/NN
function/NN
-/.

also/RB
,/,
any/DT
code/NN
that/WDT
is/VBZ
designed/VBN
to/TO
deal/VB
with/IN
malicious/JJ
data/NNS
in/IN
a/DT
diffract/JJ
context/NN
that/IN
you/PRP
use/VBP
it/PRP
is/VBZ
a/DT
sink/NN
function/NN
(/-LRB-
example/NN
:/:
XmlDocument/C
./C
Load/C
is/VBZ
designed/VBN
to/TO
detect/VB
and/CC
reject/VB
malformed/JJ
or/CC
malicious/JJ
XML/NNP
,/,
but/CC
if/IN
you/PRP
let/VBP
the/DT
user/NN
control/VBP
the/DT
file/NN
you/PRP
load/VBP
it/PRP
can/MD
be/VB
used/VBN
to/TO
load/VB
your/PRP$
configuration/NN
files/NNS
and/CC
create/VB
a/DT
really/RB
bad/JJ
information/NN
disclosure/NN
vulnerability/NN
)/-RRB-

Benefits/NNS
:/.

security/NN
-/:
you/PRP
do/VBP
n't/RB
have/VB
to/TO
give/VB
applications/NNS
the/DT
ability/NN
to/TO
"/``
delete/C NA
*/C NA
from/C NA
.../F
"/''
;/.

tweaks/NNS
-/:
DBA/NN
's/POS
can/MD
tweak/VB
the/DT
queries/NNS
without/IN
having/VBG
to/TO
recompile/VB
//CC
deploy/VB
the/DT
whole/JJ
application/NN
;/.

analysis/NN
-/:
it/PRP
's/VBZ
easy/JJ
to/TO
recompile/VB
a/DT
bunch/NN
of/IN
procs/NNS
after/IN
a/DT
data/NN
model/NN
change/NN
to/TO
ensure/VB
they/PRP
are/VBP
still/RB
valid/JJ
;/.

and/CC
,/,
finally/RB
,/,
considering/VBG
SQL/NNP
is/VBZ
executed/VBN
by/IN
the/DT
database/NN
engine/NN
(/-LRB-
not/RB
your/PRP$
application/NN
)/-RRB-
then/RB
the/DT
concept/NN
of/IN
"/``
database/NN
is/VBZ
for/IN
data/NNS
,/,
not/RB
code/NN
"/''
is/VBZ
just/RB
retarded/VBN
./.

@too/USR
:/:
Changing/VBG
a/DT
database/NN
in/IN
most/JJS
cases/NNS
is/VBZ
very/RB
costly/JJ
./.

Nevermind/NN
the/DT
idea/NN
of/IN
losing/VBG
out/RP
on/IN
the/DT
performance/NN
and/CC
security/NN
features/NNS
a/DT
particular/JJ
DBMS/NN
provides/VBZ
./.

Further/RB
,/,
additional/JJ
tiers/NNS
add/VBP
complexity/NN
and/CC
decrease/NN
performance/NN
and/CC
additional/JJ
layers/NNS
are/VBP
tied/VBN
to/TO
your/PRP$
particular/JJ
language/NN
./.

Finally/RB
,/,
it/PRP
's/VBZ
more/RBR
likely/JJ
the/DT
language/NN
being/VBG
used/VBN
will/MD
change/VB
than/IN
a/DT
database/NN
server/NN
./.

I/PRP
have/VBP
to/TO
ask/VB
whether/IN
you/PRP
've/VBP
done/VBN
cost-benefit/JJ
analysis/NN
of/IN
this/DT
problem/NN
;/:
it/PRP
sounds/VBZ
like/IN
you/PRP
're/VBP
trying/VBG
to/TO
protect/VB
yourself/PRP
from/IN
an/DT
attacker/NN
who/WP
has/VBZ
enough/JJ
web/NN
presence/NN
to/TO
guess/VB
a/DT
number/NN
of/IN
passwords/NNS
,/,
sending/VBG
maybe/RB
3-5/CD
requests/NNS
per/IN
IP/NNP
(/-LRB-
since/IN
you/PRP
've/VBP
dismissed/VBN
IP/NNP
throttling/VBG
)/-RRB-
./.

How/WRB
much/JJ
(/-LRB-
roughly/RB
)/-RRB-
would/MD
that/DT
kind/NN
of/IN
attack/NN
cost/NN
?/.

Is/VBZ
it/PRP
more/RBR
expensive/JJ
than/IN
the/DT
value/NN
of/IN
the/DT
accounts/NNS
you/PRP
're/VBP
trying/VBG
to/TO
protect/VB
?/.

How/WRB
many/JJ
gargantuan/JJ
botnets/NNS
want/VBP
what/WP
you/PRP
've/VBP
got/VBN
?/.

The/DT
answer/NN
might/MD
be/VB
no/DT
--/--
but/CC
if/IN
it/PRP
is/VBZ
,/,
I/PRP
hope/VBP
you/PRP
're/VBP
getting/VBG
help/NN
from/IN
a/DT
security/NN
professional/NN
of/IN
some/DT
sort/NN
;/:
programming/NN
skill/NN
(/-LRB-
and/CC
StackOverflow/NNP
score/NN
)/-RRB-
do/VBP
not/RB
correlate/VB
strongly/RB
to/TO
security/NN
know-how/NN
./.

No/DT
matter/NN
how/WRB
good/JJ
your/PRP$
system/NN
is/VBZ
,/,
it/PRP
'll/MD
fail/VB
under/IN
a/DT
long/JJ
enough/JJ
attack/NN
./.

There/EX
are/VBP
some/DT
good/JJ
ideas/NNS
here/RB
,/,
on/IN
how/WRB
to/TO
extend/VB
a/DT
password/NN
's/POS
duration/NN
./.

(/-LRB-
I/PRP
personally/RB
like/IN
the/DT
idea/NN
of/IN
exponentially-increasing/JJ
attempt/NN
rate/NN
limiting/VBG
per-user/JJ
and/CC
per-IP/JJ
address/NN
./.
)/-RRB-

But/CC
no/DT
matter/NN
what/WP
you/PRP
go/VBP
with/IN
,/,
you/PRP
'll/MD
need/VB
to/TO
back/VB
it/PRP
up/RP
with/IN
some/DT
password/NN
rules/NNS
./.

I/PRP
'd/MD
encourage/VB
you/PRP
to/TO
figure/VB
out/RP
how/WRB
fast/RB
a/DT
password/NN
can/MD
be/VB
cracked/VBN
,/,
and/CC
have/VBP
users/NNS
change/VB
them/PRP
twice/RB
as/RB
often/RB
as/IN
that/DT
./.

Hope/VB
this/DT
helps/VBZ
./.

Edit/VB
:/.

If/IN
you/PRP
expect/VBP
a/DT
lot/NN
of/IN
lazy/JJ
attackers/NNS
,/,
requiring/VBG
some/DT
CAPTCHA/NN
after/IN
multiple/JJ
failed/JJ
attempts/NNS
is/VBZ
good/JJ
:/:
it/PRP
raises/VBZ
the/DT
bar/NN
a/DT
little/JJ
./.

If/IN
you/PRP
're/VBP
worried/JJ
about/IN
a/DT
lot/NN
of/IN
intelligent/JJ
attackers/NNS
,/,
hire/VBP
a/DT
security/NN
consultant/NN
./.
;)/UH

Loren/NNP
,/,
you/PRP
're/VBP
right/JJ
that/IN
security/NN
is/VBZ
no/DT
guarantee/NN
;/:
the/DT
goal/NN
is/VBZ
to/TO
improve/VB
your/PRP$
odds/NNS
until/IN
improving/VBG
is/VBZ
more/RBR
expensive/JJ
than/IN
a/DT
breach/NN
./.

That/DT
's/VBZ
why/WRB
you/PRP
should/MD
get/VB
a/DT
rough/JJ
number/NN
for/IN
how/WRB
long/RB
a/DT
password/NN
lasts/VBZ
on/IN
average/NN
,/,
and/CC
make/VB
users/NNS
change/VB
the/DT
password/NN
way/NN
more/RBR
often/RB
than/IN
that/DT
./.

Why/WRB
has/VBZ
this/DT
answer/NN
got/VBD
so/RB
many/JJ
upvotes/NNS
?/.

What/WP
's/VBZ
the/DT
point/NN
of/IN
blocking/VBG
the/DT
IP/NNP
of/IN
the/DT
attacker/NN
if/IN
there/EX
is/VBZ
a/DT
backup/JJ
login/NN
?/.

The/DT
attacker/NN
would/MD
be/VB
able/JJ
to/TO
use/VB
the/DT
backup/JJ
login/NN
./.

It/PRP
's/VBZ
exactly/RB
the/DT
same/JJ
thing/NN
as/IN
->/SYM
After/IN
a/DT
number/NN
of/IN
invalid/JJ
attempts/NNS
from/IN
an/DT
IP/NNP
,/,
display/VBP
a/DT
captcha/NN
./.

This/DT
solution/NN
has/VBZ
already/RB
been/VBN
stated/VBN
in/IN
the/DT
question/NN
./.

You/PRP
just/RB
filled/VBD
it/PRP
with/IN
a/DT
lot/NN
of/IN
other/JJ
stuff/NN
and/CC
made/VBD
it/PRP
even/RB
more/RBR
complicated/JJ
and/CC
inefficient/JJ
as/IN
it/PRP
already/RB
is/VBZ
./.

Thanks/VBZ
for/IN
replying/VBG
./.

I/PRP
still/RB
do/VBP
n't/RB
understand/VB
why/WRB
this/DT
is/VBZ
more/RBR
secured/JJ
than/IN
simply/RB
displaying/VBG
a/DT
captcha/NN
after/IN
a/DT
number/NN
of/IN
invalid/JJ
attempts/NNS
from/IN
an/DT
IP/NNP
./.

Your/PRP$
solution/NN
displays/VBZ
a/DT
captcha/NN
after/IN
a/DT
number/NN
of/IN
invalid/JJ
attempts/NNS
from/IN
an/DT
IP/NNP
as/IN
well/RB
,/,
the/DT
difference/NN
is/VBZ
that/IN
you/PRP
have/VBP
a/DT
whitelist/NN
so/IN
that/IN
IPs/NNS
in/IN
the/DT
whitelist/NN
do/VBP
n't/RB
get/VB
blocked/VBN
that/IN
easily/RB
(/-LRB-
Keep/VB
in/IN
mind/NN
that/IN
a/DT
whitelist/NN
may/MD
contain/VB
an/DT
IP/NNP
of/IN
a/DT
large/JJ
network/NN
,/,
where/WRB
an/DT
attacker/NN
could/MD
potentially/RB
exist/VB
)/-RRB-
./.

When/WRB
I/PRP
read/VBP
your/PRP$
suggestion/NN
I/PRP
started/VBD
implementing/VBG
it/PRP
,/,
but/CC
then/RB
realized/VBD
that/IN
it/PRP
's/VBZ
pretty/RB
much/JJ
as/IN
secured/VBN
as/IN
the/DT
traditional/JJ
method/NN
./.

Hmm/UH
I/PRP
re-read/VBP
your/PRP$
suggestion/NN
and/CC
stopped/VBD
at/IN
"/``
setting/VBG
a/DT
very/RB
restrictive/JJ
maximum/NN
number/NN
of/IN
failed/JJ
login/NN
attempts/NNS
"/''
(/-LRB-
from/IN
IPs/NNS
not/RB
in/IN
whitelist/NN
)/-RRB-
./.

How/WRB
restrictive/JJ
are/VBP
we/PRP
talking/VBG
about/IN
?/.

If/IN
it/PRP
's/VBZ
more/JJR
than/IN
2/CD
or/CC
3/CD
,/,
then/RB
your/PRP$
suggestion/NN
would/MD
still/RB
be/VB
vulnerable/JJ
to/TO
this/DT
attack/NN
,/,
am/VBP
I/PRP
right/JJ
?/.

Ohh/UH
it/PRP
's/VBZ
from/IN
any/DT
IP/NNP
./.

Now/RB
I/PRP
understand/VBP
,/,
thank/VB
you/PRP
./.

Sorry/JJ
for/IN
misunderstanding/VBG
your/PRP$
suggestion/NN
./.

Thanks/VBZ
again/RB
!/.

Your/PRP$
question/NN
makes/VBZ
an/DT
assertion/NN
,/,
that/IN
"/``
Writing/VBG
exception/NN
safe/JJ
code/NN
is/VBZ
very/RB
hard/JJ
"/''
./.

I/PRP
will/MD
answer/VB
your/PRP$
questions/NNS
first/RB
,/,
and/CC
then/RB
,/,
answer/VB
the/DT
hidden/JJ
question/NN
behind/IN
them/PRP
./.

Answering/VBG
questions/NNS

Do/VBP
you/PRP
really/RB
write/VB
exception/NN
safe/JJ
code/NN
?/.

Of/IN
course/NN
I/PRP
do/VBP
./.

This/DT
is/VBZ
the/DT
reason/NN
Java/NNP
lost/VBD
a/DT
lot/NN
of/IN
its/PRP$
appeal/NN
to/TO
me/PRP
as/IN
a/DT
C++/NNP
programmer/NN
(/-LRB-
lack/NN
of/IN
RAII/NNP
semantics/NNS
)/-RRB-
,/,
but/CC
I/PRP
am/VBP
digressing/VBG
:/:
This/DT
is/VBZ
a/DT
C++/NNP
question/NN
./.

It/PRP
is/VBZ
in/IN
fact/NN
necessary/JJ
when/WRB
you/PRP
need/VBP
to/TO
work/VB
with/IN
STL/NNP
or/CC
Boost/NNP
code/NN
./.

For/IN
example/NN
,/,
C++/NNP
threads/NNS
(/-LRB-
boost/C
::/C
thread/C
or/CC
std/C
::/C
thread/C
)/-RRB-
will/MD
throw/VB
an/DT
exception/NN
to/TO
exit/VB
gracefully/RB
./.

Are/VBP
you/PRP
sure/JJ
your/PRP$
last/JJ
"/``
production/NN
ready/JJ
"/''
code/NN
is/VBZ
exception/NN
safe/NN
?/.

Can/MD
you/PRP
even/RB
be/VB
sure/JJ
,/,
that/IN
it/PRP
is/VBZ
?/.

Writing/VBG
exception-safe/JJ
code/NN
is/VBZ
like/IN
writing/VBG
bug-free/JJ
code/NN
./.

You/PRP
ca/MD
n't/RB
be/VB
100/CD
%/SYM
sure/JJ
your/PRP$
code/NN
is/VBZ
exception/NN
safe/NN
./.

But/CC
then/RB
,/,
you/PRP
strive/VBP
for/IN
it/PRP
,/,
using/VBG
well/RB
known/VBN
patterns/NNS
,/,
and/CC
avoiding/VBG
well/RB
known/VBN
anti-patterns/NNS
./.

Do/VBP
you/PRP
know/VB
and/or/CC
actually/RB
use/VBP
alternatives/NNS
that/IN
work/NN
?/.

There/EX
are/VBP
no/DT
viable/JJ
alternatives/NNS
in/IN
C++/NNP
(/-LRB-
i.e./FW
you/PRP
'll/MD
need/VB
to/TO
revert/VB
back/RB
to/TO
C/NNP
,/,
and/CC
avoid/VB
C++/NNP
libraries/NNS
,/,
as/RB
well/RB
as/IN
external/JJ
surprises/NNS
like/IN
Windows/NNP
SEH/NN
)/-RRB-
./.

Writing/VBG
exception/NN
safe/JJ
code/NN

To/TO
write/VB
exception/NN
safe/JJ
code/NN
,/,
you/PRP
must/MD
know/VB
first/RB
what/WDT
level/NN
of/IN
exception/NN
safety/NN
each/DT
instruction/NN
you/PRP
write/VBP
is/VBZ
./.

For/IN
example/NN
,/,
a/DT
new/C NA
can/MD
throw/VB
an/DT
exception/NN
,/,
but/CC
assigning/VBG
a/DT
built-in/JJ
(/-LRB-
e.g./FW
an/DT
int/NN
,/,
or/CC
a/DT
pointer/NN
)/-RRB-
wo/MD
n't/RB
fail/VB
./.

A/DT
swap/C NA
will/MD
never/RB
fail/VB
(/-LRB-
do/VBP
n't/RB
ever/RB
write/VB
a/DT
throwing/NN
swap/C NA
)/-RRB-
,/,
a/DT
std/C
::/C
list/C
::/C
push_back/C
can/MD
throw/VB
.../F
Exception/ER
guarantee/ER

The/DT
first/JJ
thing/NN
to/TO
understand/VB
is/VBZ
that/IN
you/PRP
must/MD
be/VB
able/JJ
to/TO
evaluate/VB
the/DT
exception/NN
guarantee/NN
offered/VBN
by/IN
all/DT
of/IN
your/PRP$
functions/NNS
:/.

none/C
:/:
Your/PRP$
code/NN
should/MD
never/RB
offer/VB
that/DT
./.

This/DT
code/NN
will/MD
leak/VB
everything/NN
,/,
and/CC
break/VB
down/RP
at/IN
the/DT
very/RB
first/JJ
exception/NN
thrown/VBN
./.

basic/C
:/:
This/DT
is/VBZ
the/DT
guarantee/NN
you/PRP
must/MD
at/IN
the/DT
very/RB
least/JJS
offer/NN
,/,
that/DT
is/VBZ
,/,
if/IN
an/DT
exception/NN
is/VBZ
thrown/VBN
,/,
no/DT
resources/NNS
are/VBP
leaked/VBN
,/,
and/CC
all/DT
objects/NNS
are/VBP
still/RB
whole/JJ

strong/C
:/:
The/DT
processing/NN
will/MD
either/RB
succeed/VB
,/,
or/CC
throw/VB
an/DT
exception/NN
,/,
but/CC
if/IN
it/PRP
throws/VBZ
,/,
then/RB
the/DT
data/NNS
will/MD
be/VB
in/IN
the/DT
same/JJ
state/NN
as/IN
if/IN
the/DT
processing/NN
had/VBD
not/RB
started/VBN
at/IN
all/DT
(/-LRB-
this/DT
gives/VBZ
a/DT
transactional/JJ
power/NN
to/TO
C++/NNP
)/-RRB-

nothrow/nofail/C
:/:
The/DT
processing/NN
will/MD
succeed/VB
./.

Example/NN
of/IN
code/NN

The/DT
following/VBG
code/NN
seems/VBZ
like/IN
correct/JJ
C++/NNP
,/,
but/CC
in/IN
truth/NN
,/,
offers/VBZ
the/DT
"/``
none/C
"/''
guarantee/NN
,/,
and/CC
thus/RB
,/,
it/PRP
is/VBZ
not/RB
correct/JJ
:/.

void/C
doSomething/C
(/C
T/C
&/C
t/C
)/C
{/C
if/C
(/C
std/C
::/C
numeric_limits/C
</C
int/C
>/C
::/C
max/C
(/C
)/C
>/C
t/C
./C
integer/C
)/C
///CCM
1/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
t/C
./C
integer/C
+=/C
1/C
;/C
///CCM
1'/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
X/C
*/C
x/C
=/C
new/C
X/C
(/C
)/C
;/C
///CCM
2/LS|CCM
./SYM|CCM
basic/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
with/IN|CCM
new/C|CCM
and/CC|CCM
X/C|CCM
constructor/NN|CCM
t/C
./C
list/C
./C
push_back/C
(/C
x/C
)/C
;/C
///CCM
3/LS|CCM
./SYM|CCM
strong/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
x/C
->/C
doSomethingThatCanThrow/C
(/C
)/C
;/C
///CCM
4/LS|CCM
./SYM|CCM
basic/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
}/C

I/PRP
write/VBP
all/DT
my/PRP$
code/NN
with/IN
this/DT
kind/NN
of/IN
analysis/NN
in/IN
mind/NN
./.

The/DT
lowest/JJS
guarantee/NN
offered/VBN
is/VBZ
basic/C NA
,/,
but/CC
then/RB
,/,
the/DT
ordering/VBG
of/IN
each/DT
instruction/NN
makes/VBZ
the/DT
whole/JJ
function/NN
"/``
none/C NA
"/''
,/,
because/IN
if/IN
3/CD
./SYM
throws/VBZ
,/,
x/C NA
will/NN
leak/NN
./.

The/DT
first/JJ
thing/NN
to/TO
do/VB
would/MD
be/VB
to/TO
make/VB
the/DT
function/NN
"/``
basic/C NA
"/''
,/,
that/WDT
is/VBZ
putting/VBG
x/C NA
in/IN
a/DT
smart/JJ
pointer/NN
until/IN
it/PRP
is/VBZ
safely/RB
owned/VBN
by/IN
the/DT
list/NN
:/.

void/C
doSomething/C
(/C
T/C
&/C
t/C
)/C
{/C
if/C
(/C
std/C
::/C
numeric_limits/C
</C
int/C
>/C
::/C
max/C
(/C
)/C
>/C
t/C
./C
integer/C
)/C
///CCM
1/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
t/C
./C
integer/C
+=/C
1/C
;/C
///CCM
1'/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
std/C
::/C
auto_ptr/C
</C
X/C
>/C
x/C
(/C
new/C
X/C
(/C
)/C
)/C
;/C
///CCM
2/LS|CCM
./SYM|CCM
basic/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
with/IN|CCM
new/C|CCM
and/CC|CCM
X/NN|CCM
constructor/NN|CCM
X/C
*/C
px/C
=/C
x/C
./C
get/C
(/C
)/C
;/C
///CCM
2'/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
t/C
./C
list/C
./C
push_back/C
(/C
px/C
)/C
;/C
///CCM
3/LS|CCM
./SYM|CCM
strong/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
x/C
./C
release/C
(/C
)/C
;/C
///CCM
3'/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
px/C
-/C
>/C
doSomethingThatCanThrow/C
(/C
)/C
;/C
///CCM
4/LS|CCM
./SYM|CCM
basic/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
}/C

Now/RB
,/,
our/PRP$
code/NN
offers/VBZ
a/DT
"/``
basic/C NA
"/''
guarantee/NN
./.

Nothing/NN
will/MD
leak/NN
,/,
and/CC
all/DT
objects/NNS
will/MD
be/VB
in/IN
a/DT
correct/JJ
state/NN
./.

But/CC
we/PRP
could/MD
offer/VB
more/JJR
,/,
that/DT
is/VBZ
,/,
the/DT
strong/C NA
guarantee/NN
./.

This/DT
is/VBZ
where/WRB
it/PRP
can/MD
become/VB
costly/JJ
,/,
and/CC
this/DT
is/VBZ
why/WRB
not/RB
all/DT
C++/NNP
code/NN
is/VBZ
strong/C NA
./.

Let/VB
's/PRP
try/VB
it/PRP
:/.

void/C
doSomething/C
(/C
T/C
&/C
t/C
)/C
{/C
///CCM
we/PRP|CCM
create/VBP|CCM
"/``|CCM
x/C|CCM
"/''|CCM
std/C
::/C
auto_ptr/C
</C
X/C
>/C
x/C
(/C
new/C
X/C
(/C
)/C
)/C
;/C
///CCM
1/LS|CCM
./SYM|CCM
basic/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
with/IN|CCM
new/C|CCM
and/CC|CCM
X/C|CCM
constructor/NN|CCM
X/C
*/C
px/C
=/C
x/C
./C
get/C
(/C
)/C
;/C
///CCM
2/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
px/C
->/C
doSomethingThatCanThrow/C
(/C
)/C
;/C
///CCM
3/LS|CCM
./SYM|CCM
basic/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
///CCM
we/PRP|CCM
copy/VBP|CCM
the/DT|CCM
original/JJ|CCM
container/NN|CCM
to/TO|CCM
avoid/VB|CCM
changing/VBG|CCM
it/PRP|CCM
T/C
t2/C
(/C
t/C
)/C
;/C
///CCM
4/LS|CCM
./SYM|CCM
strong/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
with/IN|CCM
T/C|CCM
copy-constructor/NN|CCM
///CCM
we/PRP|CCM
put/VBD|CCM
"/``|CCM
x/C|CCM
"/''|CCM
in/IN|CCM
the/DT|CCM
copied/VBN|CCM
container/NN|CCM
t2/C
./C
list/C
./C
push_back/C
(/C
px/C
)/C
;/C
///CCM
5/LS|CCM
./SYM|CCM
strong/C|CCM
:/:|CCM
can/MD|CCM
throw/VB|CCM
x/C
./C
release/C
(/C
)/C
;/C
///CCM
6/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
if/C
(/C
std/C
::/C
numeric_limits/C
</C
int/C
>/C
::/C
max/C
(/C
)/C
>/C
t2/C
./C
integer/C
)/C
///CCM
7/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
t2/C
./C
integer/C
+=/C
1/C
;/C
///CCM
7'/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
///CCM
we/PRP|CCM
swap/VBP|CCM
both/DT|CCM
containers/NNS|CCM
t/C
./C
swap/C
(/C
t2/C
)/C
;/C
///CCM
8/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
}/-RRB-

We/PRP
re-ordered/VBD
the/DT
operations/NNS
,/,
first/RB
creating/VBG
and/CC
setting/VBG
X/C NA
to/TO
its/PRP$
right/JJ
value/NN
./.

If/IN
any/DT
operation/NN
fails/VBZ
,/,
then/RB
t/C NA
is/VBZ
not/RB
modified/VBN
,/,
so/RB
,/,
operation/NN
1/CD
to/TO
3/CD
can/MD
be/VB
considered/VBN
"/``
strong/C NA
"/''
:/.

If/IN
something/NN
throws/VBZ
,/,
t/C NA
is/VBZ
not/RB
modified/VBN
,/,
and/CC
X/C NA
will/MD
not/RB
leak/VB
because/IN
it/PRP
's/VBZ
owned/VBN
by/IN
the/DT
smart/JJ
pointer/NN
./.

Then/RB
,/,
we/PRP
create/VBP
a/DT
copy/NN
t2/C NA
of/IN
t/C NA
,/,
and/CC
work/NN
on/IN
this/DT
copy/NN
from/IN
operation/NN
4/CD
to/TO
7/CD
./.

If/IN
something/NN
throws/VBZ
,/,
t2/C NA
is/VBZ
modified/VBN
,/,
but/CC
then/RB
,/,
t/C NA
is/VBZ
still/RB
the/DT
original/NN
./.

We/PRP
still/RB
offer/VBP
the/DT
strong/C NA
guarantee/NN
./.

Then/RB
,/,
we/PRP
swap/VB
t/C NA
and/CC
t2/C NA
./.

Swap/NN
operations/NNS
should/MD
be/VB
nothrow/C NA
in/IN
C++/NNP
,/,
so/RB
lets/VBZ
hope/VB
the/DT
swap/C NA
you/PRP
wrote/VBD
for/IN
T/C NA
is/VBZ
nothrow/C NA
(/-LRB-
if/IN
it/PRP
is/VBZ
n't/RB
,/,
rewrite/VB
it/PRP
so/IN
it/PRP
is/VBZ
nothrow/C NA
)/-RRB-
./.

So/RB
,/,
if/IN
we/PRP
reach/VBP
the/DT
end/NN
of/IN
the/DT
function/NN
,/,
everything/NN
succeeded/VBD
(/-LRB-
No/DT
need/NN
of/IN
a/DT
return/NN
type/NN
)/-RRB-
and/CC
t/C NA
has/VBZ
its/PRP$
excepted/VBN
value/NN
./.

If/IN
it/PRP
fails/VBZ
,/,
then/RB
t/C NA
has/VBZ
still/RB
its/PRP$
original/JJ
value/NN
./.

Now/RB
,/,
offering/VBG
the/DT
strong/C NA
guarantee/NN
could/MD
be/VB
quite/RB
costly/JJ
,/,
so/RB
do/VBP
n't/RB
strive/VB
to/TO
offer/VB
the/DT
strong/C NAs
guarantee/NN
to/TO
all/DT
your/PRP$
code/NN
,/,
but/CC
if/IN
you/PRP
can/MD
do/VB
it/PRP
without/IN
a/DT
cost/NN
(/-LRB-
and/CC
C++/NNP
inlining/NN
and/CC
other/JJ
optimization/NN
could/MD
make/VB
all/PDT
the/DT
code/NN
above/IN
costless/JJ
)/-RRB-
,/,
then/RB
do/VBP
it/PRP
./.

The/DT
function/NN
user/NN
will/MD
thank/VB
you/PRP
for/IN
it/PRP
./.

Conclusion/NN

It/PRP
takes/VBZ
some/DT
habit/NN
to/TO
write/VB
exception-safe/JJ
code/NN
./.

You/PRP
'll/MD
need/VB
to/TO
evaluate/VB
the/DT
guarantee/NN
offered/VBN
by/IN
each/DT
instruction/NN
you/PRP
'll/MD
use/VB
,/,
and/CC
then/RB
,/,
you/PRP
'll/MD
need/VB
to/TO
evaluate/VB
the/DT
guarantee/NN
offered/VBN
by/IN
a/DT
list/NN
of/IN
instructions/NNS
./.

Of/IN
course/NN
,/,
the/DT
C++/NNP
compiler/NN
wo/MD
n't/RB
back/VB
up/RP
the/DT
guarantee/NN
(/-LRB-
in/IN
my/PRP$
code/NN
,/,
I/PRP
offer/VBP
the/DT
guarantee/NN
as/IN
a/DT
@warning/C
doxygen/C
tag/NN
)/-RRB-
,/,
which/WDT
is/VBZ
kinda/FW
sad/JJ
,/,
but/CC
it/PRP
should/MD
not/RB
stop/VB
you/PRP
from/IN
trying/VBG
to/TO
write/VB
exception/NN
safe/JJ
code/NN
./.

Normal/JJ
failure/NN
vs./IN
bug/NN

How/WRB
can/MD
a/DT
programmer/NN
guarantee/NN
that/IN
a/DT
nofail/C NA
function/NN
will/MD
always/RB
succeed/VB
?/.

After/IN
all/DT
,/,
the/DT
function/NN
could/MD
have/VB
a/DT
bug/NN
./.

This/DT
is/VBZ
true/JJ
./.

The/DT
exception/NN
guarantees/NNS
are/VBP
supposed/VBN
to/TO
be/VB
offered/VBN
by/IN
bug-free/JJ
code/NN
./.

But/CC
then/RB
,/,
in/IN
any/DT
language/NN
,/,
calling/VBG
a/DT
function/NN
supposes/VBZ
the/DT
function/NN
is/VBZ
bug-free/JJ
./.

No/DT
sane/JJ
code/NN
protects/VBZ
itself/PRP
against/IN
the/DT
possibility/NN
of/IN
it/PRP
having/VBG
a/DT
bug/NN
./.

Write/VB
code/VB
the/DT
best/JJS
you/PRP
can/MD
,/,
and/CC
then/RB
,/,
offer/VBP
the/DT
guarantee/NN
with/IN
the/DT
supposition/NN
it/PRP
is/VBZ
bug/NN
free/JJ
./.

And/CC
if/IN
there/EX
is/VBZ
a/DT
bug/NN
,/,
correct/VB
it/PRP
./.

Exceptions/NNS
are/VBP
for/IN
exceptional/JJ
processing/NN
failure/NN
,/,
not/RB
for/IN
code/NN
bugs/NNS
./.

Last/JJ
words/NNS

Now/RB
,/,
the/DT
question/NN
is/VBZ
"/``
Is/VBZ
this/DT
worth/JJ
it/PRP
?/.
"/''
./.

Of/IN
course/NN
it/PRP
is/VBZ
./.

Having/VBG
a/DT
"/``
nothrow/nofail/C NA
"/''
function/NN
knowing/VBG
that/IN
the/DT
function/NN
wo/MD
n't/RB
fail/VB
is/VBZ
a/DT
great/JJ
boon/NN
./.

The/DT
same/JJ
can/MD
be/VB
said/VBN
for/IN
a/DT
"/``
strong/C NA
"/''
function/NN
,/,
which/WDT
enables/VBZ
you/PRP
to/TO
write/VB
code/NN
with/IN
transactional/JJ
semantics/NNS
,/,
like/IN
databases/NNS
,/,
with/IN
commit/NN
//CC
rollback/NN
features/NNS
,/,
the/DT
commit/NN
being/VBG
normal/JJ
execution/NN
of/IN
the/DT
code/NN
,/,
throwing/VBG
exceptions/NNS
being/VBG
the/DT
rollback/NN
./.

Then/RB
,/,
the/DT
"/``
basic/C NA
"/''
is/VBZ
the/DT
very/RB
least/JJS
guarantee/NN
you/PRP
should/MD
offer/VB
./.

C++/NNP
is/VBZ
a/DT
very/RB
strong/JJ
language/NN
there/RB
,/,
with/IN
its/PRP$
scopes/NNS
,/,
enabling/VBG
you/PRP
to/TO
avoid/VB
any/DT
resource/NN
leaks/NNS
(/-LRB-
something/NN
a/DT
garbage/NN
collector/NN
would/MD
find/VB
it/PRP
difficult/JJ
to/TO
offer/VB
for/IN
database/NN
,/,
connection/NN
or/CC
file/NN
handles/NNS
)/-RRB-
./.

So/RB
,/,
as/RB
far/RB
as/IN
I/PRP
see/VBP
it/PRP
,/,
it/PRP
is/VBZ
worth/JJ
it/PRP
./.

Edit/VB
2010-01-29/CD
:/.

About/IN
non-throwing/JJ
swap/NN

nobar/USR
made/VBD
a/DT
comment/NN
that/IN
,/,
I/PRP
believe/VBP
,/,
is/VBZ
quite/RB
relevant/JJ
,/,
because/IN
it/PRP
is/VBZ
part/NN
of/IN
"/``
how/WRB
do/VBP
you/PRP
write/VB
exception/NN
safe/JJ
code/NN
"/''
:/.

[/-LRB-
me/PRP
]/-RRB-
A/DT
swap/NN
will/MD
never/RB
fail/VB
(/-LRB-
do/VBP
n't/RB
even/RB
write/VB
a/DT
throwing/VBG
swap/NN
)/-RRB-

[/-LRB-
nobar/USR
]/-RRB-
This/DT
is/VBZ
a/DT
good/JJ
recommendation/NN
for/IN
custom-written/JJ
swap/C NA
(/C NA
)/C NA
functions/NNS
./.

It/PRP
should/MD
be/VB
noted/VBN
,/,
however/RB
,/,
that/DT
std/C
::/C
swap/C
(/C
)/C
can/MD
fail/VB
based/VBN
on/IN
the/DT
operations/NNS
that/IN
it/PRP
uses/VBZ
internally/RB
the/DT
default/NN
std/C
::/C
swap/C
will/MD
make/VB
copies/NNS
and/CC
assignments/NNS
,/,
which/WDT
,/,
for/IN
some/DT
objects/NNS
,/,
can/MD
throw/VB
./.

Thus/RB
,/,
the/DT
default/JJ
swap/NN
could/MD
throw/VB
,/,
either/RB
used/VBN
for/IN
your/PRP$
classes/NNS
,/,
or/CC
even/RB
for/IN
STL/NNP
classes/NNS
./.

As/RB
far/RB
as/IN
the/DT
C++/NNP
standard/NN
is/VBZ
concerned/VBN
,/,
the/DT
swap/NN
operation/NN
for/IN
vector/NN
,/,
deque/NN
,/,
and/CC
list/NN
wo/MD
n't/RB
throw/VB
,/,
whereas/IN
it/PRP
could/MD
for/IN
map/NN
if/IN
the/DT
comparison/NN
functor/NN
can/MD
throw/VB
on/IN
copy/NN
construction/NN
(/-LRB-
See/VB
The/DT
C++/NNP
Programming/NN
Language/NN
,/,
Special/JJ
Edition/NN
,/,
appendix/NN
E/NN
,/,
E./NN
4.3./CD
Swap/NN
)/-RRB-
./.

Looking/VBG
at/IN
Visual/NNP
C++/NNP
2008/CD
implementation/NN
of/IN
the/DT
vector/NN
's/POS
swap/NN
,/,
the/DT
vector/NN
's/POS
swap/NN
wo/MD
n't/RB
throw/VB
if/IN
the/DT
two/CD
vectors/NNS
have/VBP
the/DT
same/JJ
allocator/NN
(/-LRB-
i.e./FW
,/,
the/DT
normal/JJ
case/NN
)/-RRB-
,/,
but/CC
will/MD
make/VB
copies/NNS
if/IN
they/PRP
have/VBP
different/JJ
allocators/NNS
./.

And/CC
thus/RB
,/,
I/PRP
assume/VBP
it/PRP
could/MD
throw/VB
in/IN
this/DT
last/JJ
case/NN
./.

So/RB
,/,
the/DT
original/JJ
text/NN
still/RB
holds/VBZ
:/:
Do/VBP
n't/RB
even/RB
write/VB
a/DT
throwing/VBG
swap/NN
,/,
but/CC
nobar/USR
's/POS
comment/NN
must/MD
be/VB
remembered/VBN
:/:
Be/VB
sure/JJ
the/DT
objects/NNS
you/PRP
're/VBP
swapping/VBG
have/VBP
a/DT
non-throwing/JJ
swap/NN
./.

Edit/VB
2011-11-06/CD
:/.

Interesting/JJ
article/NN

Dave/NNP
Abrahams/NNP
,/,
who/WP
gave/VBD
us/PRP
the/DT
basic/C NA
//CC
strong/C NA
//CC
nothrow/C NA
guarantees/NNS
,/,
described/VBN
in/IN
an/DT
article/NN
his/PRP$
experience/NN
about/IN
making/VBG
the/DT
STL/NNP
exception/NN
safe/NN
:/:
http://www.boost.org/community/exception_safety.html/URI

Look/VB
at/IN
the/DT
7th/JJ
point/NN
(/-LRB-
Automated/JJ
testing/NN
for/IN
exception-safety/NN
)/-RRB-
,/,
where/WRB
he/PRP
relies/VBZ
on/IN
automated/JJ
unit/NN
testing/NN
to/TO
make/VB
sure/JJ
every/DT
case/NN
is/VBZ
tested/VBN
./.

I/PRP
guess/VBP
this/DT
part/NN
is/VBZ
an/DT
excellent/JJ
answer/NN
to/TO
the/DT
question/NN
author/NN
's/POS
"/``
Can/MD
you/PRP
even/RB
be/VB
sure/JJ
,/,
that/IN
it/PRP
is/VBZ
?/.
"/''
./.

Edit/VB
2013-05-31/CD
:/.

Comment/NN
from/IN
dionadar/USR
t/C
./C
integer/C
+=/C
1/C
;/C
is/VBZ
without/IN
the/DT
guarantee/NN
that/DT
overflow/NN
will/MD
not/RB
happen/VB
NOT/RB
exception/NN
safe/NN
,/,
and/CC
in/IN
fact/NN
may/MD
technically/RB
invoke/VB
UB/NN
!/.

(/-LRB-
Signed/JJ
overflow/NN
is/VBZ
UB/NN
:/:
C++/NNP
11/CD
5/CD
//SYM
4/CD
"/``
If/IN
during/IN
the/DT
evaluation/NN
of/IN
an/DT
expression/NN
,/,
the/DT
result/NN
is/VBZ
not/RB
mathematically/RB
defined/VBN
or/CC
not/RB
in/IN
the/DT
range/NN
of/IN
representable/JJ
values/NNS
for/IN
its/PRP$
type/NN
,/,
the/DT
behavior/NN
is/VBZ
undefined/JJ
./.
"/''
)/-RRB-

Note/VB
that/DT
unsigned/JJ
integer/NN
do/VBP
not/RB
overflow/NN
,/,
but/CC
do/VBP
their/PRP$
computations/NNS
in/IN
an/DT
equivalence/JJ
class/NN
modulo/NN
2/CD
^/SYM
#/SYM
bits/NN
./.

Dionadar/NNP
is/VBZ
refering/VBG
to/TO
the/DT
following/VBG
line/NN
,/,
which/WDT
indeed/RB
has/VBZ
undefined/JJ
behaviour/NN
./.

t/C
./C
integer/C
+=/C
1/C
;/C
///CCM
1/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM

The/DT
solution/NN
here/RB
is/VBZ
to/TO
verify/VB
if/IN
the/DT
integer/NN
is/VBZ
already/RB
at/IN
its/PRP$
max/JJ
value/NN
(/-LRB-
using/VBG
std/C
::/C
numeric_limits/C
</C
T/C
>/C
::/C
max/C
(/C
)/C
)/C
before/IN
doing/VBG
the/DT
addition/NN
./.

My/PRP$
error/NN
would/MD
go/VB
in/IN
the/DT
"/``
Normal/JJ
failure/NN
vs./IN
bug/NN
"/''
section/NN
,/,
that/DT
is/VBZ
,/,
a/DT
bug/NN
./.

It/PRP
does/VBZ
n't/RB
invalidate/VB
the/DT
reasoning/NN
,/,
and/CC
it/PRP
does/VBZ
not/RB
mean/VB
exception/NN
safe/JJ
code/NN
is/VBZ
useless/JJ
because/IN
impossible/JJ
to/TO
attain/VB
./.

You/PRP
ca/MD
n't/RB
protect/VB
yourself/PRP
against/IN
the/DT
computer/NN
switching/VBG
off/IN
,/,
or/CC
compiler/NN
bugs/NNS
,/,
or/CC
even/RB
your/PRP$
bugs/NNS
,/,
or/CC
other/JJ
errors/NNS
./.

You/PRP
ca/MD
n't/RB
attain/VB
perfection/NN
,/,
but/CC
you/PRP
can/MD
try/VB
to/TO
get/VB
as/RB
near/JJ
as/IN
possible/JJ
./.

I/PRP
corrected/VBD
the/DT
code/NN
with/IN
Dionadar/NNP
's/POS
comment/NN
in/IN
mind/NN
./.

@frunsi/USR
:/:
Exception/NN
safety/NN
has/VBZ
funny/JJ
effects/NNS
./.

For/IN
example/NN
,/,
when/WRB
you/PRP
have/VBP
a/DT
function/NN
calling/VBG
only/JJ
nofail/nothrow/C NA
code/NN
,/,
and/CC
when/WRB
you/PRP
realize/VBP
that/IN
as/IN
a/DT
whole/NN
,/,
the/DT
function/NN
is/VBZ
nofail/nothrow/C NA
,/,
too/RB
,/,
there/EX
is/VBZ
a/DT
little/JJ
moment/NN
of/IN
"/``
shining/VBG
"/''
that/WDT
somehow/RB
makes/VBZ
your/PRP$
day/NN
brighter/NN
./.

The/DT
same/JJ
can/MD
be/VB
said/VBN
for/IN
strong/C NA
functions/NNS
./.

When/WRB
you/PRP
have/VBP
a/DT
function/NN
that/WDT
seems/VBZ
to/TO
do/VB
a/DT
lot/NN
,/,
and/CC
you/PRP
can/MD
offer/VB
a/DT
strong/JJ
//CC
commit/NN
//CC
rollback/NN
guarantee/NN
,/,
you/PRP
see/VBP
your/PRP$
code/NN
from/IN
a/DT
new/JJ
viewpoint/NN
./.

I/PRP
started/VBD
wrapping/VBG
SQLite3/NNP
C/NNP
code/NN
into/IN
C++/NNP
code/NN
,/,
and/CC
offering/VBG
strong/C
//CC
nothrow/C
guarantees/NNS
to/TO
transactional/JJ
concept/NN
was/VBD
both/CC
fun/NN
and/CC
rewarding/JJ
./.

@nobar/USR
:/:
+/SYM
1/CD
for/IN
the/DT
comment/NN
./.

I/PRP
'll/MD
edit/VB
my/PRP$
answer/NN
to/TO
add/VB
your/PRP$
contribution/NN
./.

@Malcolm/USR
:/:
Really/RB
,/,
this/DT
answer/NN
made/VBD
me/PRP
appreciate/VB
Java/NNP
more/RBR
:/:
You/PRP
'd/MD
be/VB
wrong/JJ
to/TO
believe/VB
that/DT
./.

Java/NNP
makes/VBZ
it/PRP
harder/RBR
than/IN
C++/NNP
to/TO
have/VB
exception/NN
safe/JJ
code/NN
./.

For/IN
example/NN
,/,
there/EX
is/VBZ
no/DT
finally/RB
in/IN
C++/NNP
,/,
and/CC
this/DT
is/VBZ
not/RB
an/DT
error/NN
.../.

See/VB
my/PRP$
question/NN
stackoverflow.com/questions/194261/URI
for/IN
an/DT
example/NN
of/IN
how/WRB
Java/NNP
fails/VBZ
,/,
when/WRB
compared/VBN
to/TO
C#/NNP
and/CC
(/-LRB-
of/IN
course/NN
)/-RRB-
C++/NNP
./.

@Mehrdad/USR
:/:
"/``
finally/C NA
"/''
does/VBZ
exactly/RB
what/WP
you/PRP
were/VBD
trying/VBG
to/TO
achieve/VB
:/:
Of/IN
course/NN
it/PRP
does/VBZ
./.

And/CC
because/IN
it/PRP
is/VBZ
easy/JJ
to/TO
produce/VB
brittle/JJ
code/NN
with/IN
finally/C NA
,/,
the/DT
"/``
try-with-resource/NN
"/''
notion/NN
was/VBD
finally/RB
introduced/VBN
in/IN
Java/NNP
7/CD
(/-LRB-
that/DT
is/VBZ
,/,
10/CD
years/NNS
after/IN
C#/NNP
's/POS
using/VBG
and/CC
3/CD
decades/NNS
after/IN
C++/NNP
destructors/NNS
)/-RRB-
./.

This/DT
is/VBZ
this/DT
brittleness/NN
I/PRP
criticize/VBP
./.

As/IN
for/IN
Just/RB
because/IN
[/-LRB-
finally/C NA
]/-RRB-
does/VBZ
n't/RB
match/VB
your/PRP$
taste/NN
(/-LRB-
RAII/NNP
does/VBZ
n't/RB
match/VB
mine/NN
,/,
[/-LRB-
.../F
]/-RRB-
)/-RRB-
does/VBZ
n't/RB
mean/VB
it/PRP
's/VBZ
"/``
failing/VBG
"/''
:/.

In/IN
this/DT
,/,
the/DT
industry/NN
disagree/VBP
with/IN
your/PRP$
taste/NN
,/,
as/IN
Garbage/NN
Collected/JJ
languages/NNS
tend/VBP
to/TO
add/VB
RAII-inspired/JJ
statements/NNS
(/-LRB-
C#/NNP
's/POS
using/VBG
and/CC
Java/NNP
's/POS
try/C NA
)/-RRB-
./.

@Mehrdad/USR
:/:
As/IN
for/IN
See/VB
my/PRP$
question/NN
http://stackoverflow.com/questions/194261/URI
for/IN
an/DT
example/NN
of/IN
how/WRB
Java/NNP
fails/VBZ
,/,
please/VB
,/,
again/RB
,/,
refer/VBP
to/TO
the/DT
linked/VBN
question/NN
,/,
and/CC
how/WRB
it/PRP
is/VBZ
almost/RB
impossible/JJ
to/TO
produce/VB
robust/JJ
code/NN
when/WRB
multiple/JJ
resources/NNS
are/VBP
used/VBN
in/IN
the/DT
same/JJ
function/NN
in/IN
Java/NNP
without/IN
using/VBG
the/DT
Java/NNP
7/CD
try-with-resource/NN
pattern/NN
./.

@Mehrdad/USR
:/:
RAII/NNP
does/VBZ
n't/RB
match/VB
mine/NN
,/,
since/IN
it/PRP
needs/VBZ
a/DT
new/JJ
struct/NN
every/DT
single/JJ
darn/JJ
time/NN
,/,
which/WDT
is/VBZ
tedious/JJ
sometimes/RB
:/.

No/UH
,/,
it/PRP
does/VBZ
n't/RB
./.

You/PRP
can/MD
use/VB
smart/JJ
pointers/NNS
or/CC
utility/NN
classes/NNS
to/TO
"/``
protect/VB
"/''
resources/NNS
./.

@Mehrdad/USR
:/:
Ok/NN
,/,
no/DT
need/NN
to/TO
discuss/VB
you/PRP
tastes/NNS
,/,
then/RB
./.

@ESRogs/USR
:/:
"/``
t/C
./C
integer/C
+/C
=/C
1/C
;/C
///CCM
1/LS|CCM
./SYM|CCM
nothrow/nofail/C|CCM
"/''
Would/MD
n't/RB
this/DT
throw/VB
an/DT
exception/NN
if/IN
t/C NA
is/VBZ
null/JJ
?/.
:/.

t/C
was/VBD
passed/VBN
as/IN
reference/NN
,/,
so/IN
it/PRP
is/VBZ
a/DT
value/NN
,/,
not/RB
a/DT
pointer/NN
./.

And/CC
in/IN
C++/NNP
,/,
dereferenced/JJ
NULL/NN
pointers/NNS
do/VBP
n't/RB
throw/VB
exceptions/NNS
,/,
but/CC
instead/RB
have/VBP
undefined/VBN
behaviour/NN
(/-LRB-
usually/RB
it/PRP
will/MD
crash/VB
at/IN
first/JJ
true/JJ
use/NN
)/-RRB-

@Jeroen/USR
Dirks/USR
:/:
Usually/RB
,/,
memory/NN
allocation/NN
failures/NNS
will/MD
be/VB
thrown/VBN
by/IN
the/DT
new/JJ
operator/NN
,/,
so/RB
no/RB
need/VB
to/TO
manually/RB
throw/VB
them/PRP
yourself/PRP
from/IN
your/PRP$
constructor/NN
./.

Now/RB
,/,
in/IN
some/DT
cases/NNS
(/-LRB-
you/PRP
are/VBP
using/VBG
malloc/C NA
for/IN
an/DT
allocation/NN
,/,
for/IN
example/NN
)/-RRB-
,/,
if/IN
you/PRP
want/VBP
to/TO
behave/VB
correctly/RB
,/,
you/PRP
'll/MD
need/VB
to/TO
manually/RB
throw/VB
the/DT
exception/NN
./.

Usually/RB
,/,
there/EX
are/VBP
greater/JJR
problems/NNS
,/,
but/CC
if/IN
you/PRP
are/VBP
writing/VBG
a/DT
library/NN
,/,
then/RB
you/PRP
just/RB
CA/MD
N'T/RB
write/VB
code/NN
with/IN
assumptions/NNS
like/IN
"/``
If/IN
it/PRP
goes/VBZ
there/RB
,/,
then/RB
sorry/JJ
,/,
my/PRP$
code/NN
only/RB
works/VBZ
on/IN
normal/JJ
cases/NNS
"/''
./.

So/RB
,/,
even/RB
if/IN
the/DT
OS/NN
is/VBZ
thrashing/VBG
,/,
throwing/VBG
an/DT
exception/NN
is/VBZ
still/RB
the/DT
right/JJ
thing/NN
to/TO
go/VB
IMHO/UH
./.

@kfmfe04/USR
:/:
It/PRP
's/VBZ
easier/JJR
than/IN
it/PRP
seems/VBZ
,/,
but/CC
like/IN
everything/NN
,/,
it/PRP
takes/VBZ
a/DT
little/JJ
work/NN
to/TO
get/VB
familiar/JJ
:/--
I/PRP
worked/VBD
on/IN
a/DT
full/JJ
library/NN
(/-LRB-
a/DT
STL-like/JJ
tree/NN
structure/NN
)/-RRB-
to/TO
become/VB
at/IN
ease/NN
with/IN
the/DT
concept/NN
./.

My/PRP$
advice/NN
:/:
Keep/VB
functions/NNS
small/JJ
and/CC
simple/JJ
(/-LRB-
and/CC
have/VBP
them/PRP
do/VB
ONE/CD
thing/NN
)/-RRB-
,/,
assume/VB
nothing/NN
(/-LRB-
but/CC
basic/C NA
guarantee/NN
,/,
that/WDT
is/VBZ
RAII/NNP
)/-RRB-
,/,
and/CC
learn/VB
to/TO
recognize/VB
the/DT
guarantees/NNS
for/IN
each/DT
line/NN
./.

With/IN
simple/JJ
functions/NNS
,/,
you/PRP
will/MD
be/VB
able/JJ
to/TO
recognize/VB
the/DT
level/NN
of/IN
guarantee/NN
.../.

Now/RB
,/,
for/IN
larger/JJR
functions/NNS
,/,
it/PRP
will/MD
be/VB
more/RBR
complicated/JJ
,/,
but/CC
this/DT
is/VBZ
ok/RB
as/IN
the/DT
basic/C NA
guarantee/NN
is/VBZ
almost/RB
automatic/JJ
with/IN
C++/NNP
./.

@dionadar/USR
:/:
+/SYM
1/CD
:/:
Thanks/VBZ
for/IN
the/DT
input/NN
./.

I/PRP
'll/MD
update/VB
my/PRP$
answer/NN
./.

The/DT
Java/NNP
checked/VBD
exception/NN
usability/NN
is/VBZ
highly/RB
exagerated/JJ
./.

In/IN
fact/NN
,/,
non-Java/JJ
languages/NNS
,/,
they/PRP
are/VBP
NOT/RB
considered/VBN
a/DT
success/NN
./.

This/DT
is/VBZ
why/WRB
the/DT
"/``
throw/C NA
"/''
statement/NN
in/IN
C++/NNP
is/VBZ
now/RB
considered/VBN
obsolete/JJ
,/,
and/CC
C#/NNP
never/RB
seriously/RB
considered/VBN
implementing/VBG
them/PRP
(/-LRB-
this/DT
was/VBD
a/DT
design/NN
choice/NN
)/-RRB-
./.

For/IN
Java/NNP
,/,
the/DT
following/JJ
document/NN
could/MD
be/VB
enlightning/VBG
:/:
googletesting.blogspot.com/2009/09/…/URI

A/DT
few/JJ
simple/JJ
steps/NNS
:/.

Blacklist/VB
certain/JJ
common/JJ
usernames/NNS
,/,
and/CC
use/VB
them/PRP
as/IN
a/DT
honeypot/NN
./.

Admin/NN
,/,
guest/NN
,/,
etc/FW
.../.

Do/VBP
n't/RB
let/VB
anyone/NN
create/VB
accounts/NNS
with/IN
these/DT
names/NNS
,/,
so/RB
if/IN
someone/NN
does/VBZ
try/VB
to/TO
log/VB
them/PRP
in/IN
you/PRP
know/VBP
it/PRP
's/VBZ
someone/NN
doing/VBG
something/NN
they/PRP
should/MD
n't/RB
./.

Make/VB
sure/JJ
anyone/NN
who/WP
has/VBZ
real/JJ
power/NN
on/IN
the/DT
site/NN
has/VBZ
a/DT
secure/JJ
password/NN
./.

Require/NN
admins/NNS
//CC
moderators/NNS
to/TO
have/VB
longer/JJR
passwords/NNS
with/IN
a/DT
mix/NN
of/IN
letters/NNS
,/,
numbers/NNS
and/CC
symbols/NNS
./.

Reject/VB
trivially/RB
simple/JJ
passwords/NNS
from/IN
regular/JJ
users/NNS
with/IN
an/DT
explanation/NN
./.

One/CD
of/IN
the/DT
simplest/JJS
things/NNS
you/PRP
can/MD
do/VB
is/VBZ
tell/VB
people/NNS
when/WRB
someone/NN
tried/VBD
to/TO
log/VB
into/IN
their/PRP$
account/NN
,/,
and/CC
give/VB
them/PRP
a/DT
link/NN
to/TO
report/VB
the/DT
incident/NN
if/IN
it/PRP
was/VBD
n't/RB
them/PRP
./.

A/DT
simple/JJ
message/NN
when/WRB
they/PRP
log/VBP
in/IN
like/JJ
"/``
Someone/ER
tried/ER
to/ER
log/ER
into/ER
your/ER
account/ER
at/ER
4:20/ER
AM/ER
Wednesday/ER
blah/ER
blah/ER
./ER
Click/ER
here/ER
if/ER
this/ER
was/ER
n't/ER
you/ER
./ER
"/''

It/PRP
lets/VBZ
you/PRP
keep/VB
some/DT
statistics/NNS
on/IN
attacks/NNS
./.

You/PRP
can/MD
step/VB
up/RP
monitoring/NN
and/CC
security/NN
measures/NNS
if/IN
you/PRP
see/VBP
that/IN
there/EX
's/VBZ
a/DT
sudden/JJ
increase/NN
in/IN
fraudulent/JJ
accesses/NNS
./.

Yup/UH
,/,
the/DT
honeypot/NN
and/CC
user/NN
reporting/NN
are/VBP
more/RBR
about/IN
information/NN
gathering/NN
./.

They/PRP
may/MD
provide/VB
some/DT
valuable/JJ
metrics/NNS
to/TO
let/VB
you/PRP
know/VB
if/when/NN
a/DT
slow/JJ
brute/JJ
force/NN
attack/NN
is/VBZ
happening/VBG
./.

This/DT
has/VBZ
been/VBN
said/VBN
before/RB
,/,
but/CC
:/:
indexes/NNS
,/,
indexes/NNS
,/,
indexes/NNS
./.

I/PRP
've/VBP
seen/VBN
so/IN
many/JJ
cases/NNS
of/IN
poorly/RB
performing/VBG
enterprise/NN
web/NN
apps/NNS
that/WDT
were/VBD
fixed/VBN
by/IN
simply/RB
doing/VBG
a/DT
little/JJ
profiling/NN
(/-LRB-
to/TO
see/VB
which/WDT
tables/NNS
were/VBD
being/VBG
hit/VBN
a/DT
lot/NN
)/-RRB-
,/,
and/CC
then/RB
adding/VBG
an/DT
index/NN
on/IN
those/DT
tables/NNS
./.

This/DT
does/VBZ
n't/RB
even/RB
require/VB
much/RB
in/IN
the/DT
way/NN
of/IN
SQL/NNP
writing/NN
knowledge/NN
,/,
and/CC
the/DT
payoff/NN
is/VBZ
huge/JJ
./.

Avoid/VB
data/NNS
duplication/NN
like/IN
the/DT
plague/NN
./.

Some/DT
people/NNS
advocate/VBP
that/IN
a/DT
little/JJ
duplication/NN
wo/MD
n't/RB
hurt/VB
,/,
and/CC
will/MD
improve/VB
performance/NN
./.

Hey/UH
,/,
I/PRP
'm/VBP
not/RB
saying/VBG
that/IN
you/PRP
have/VBP
to/TO
torture/VB
your/PRP$
schema/C
into/IN
Third/JJ
Normal/JJ
Form/NN
,/,
until/IN
it/PRP
's/VBZ
so/RB
abstract/JJ
that/IN
not/RB
even/RB
the/DT
DBA/NN
's/POS
know/VBP
what/WP
's/VBZ
going/VBG
on/RP
./.

Just/RB
understand/VB
that/IN
whenever/WRB
you/PRP
duplicate/VBP
a/DT
set/NN
of/IN
names/NNS
,/,
or/CC
zipcodes/NNS
,/,
or/CC
shipping/NN
codes/NNS
,/,
the/DT
copies/NNS
WILL/MD
fall/VB
out/IN
of/IN
synch/NN
with/IN
each/DT
other/JJ
eventually/RB
./.

It/PRP
WILL/MD
happen/VB
./.

And/CC
then/RB
you/PRP
'll/MD
be/VB
kicking/VBG
yourself/PRP
as/IN
you/PRP
run/VBP
the/DT
weekly/JJ
maintenance/NN
script/NN
./.

And/CC
lastly/RB
:/:
use/VB
a/DT
clear/JJ
,/,
consistent/JJ
,/,
intuitive/JJ
naming/NN
convention/NN
./.

In/IN
the/DT
same/JJ
way/NN
that/IN
a/DT
well/RB
written/VBN
piece/NN
of/IN
code/NN
should/MD
be/VB
readable/JJ
,/,
a/DT
good/JJ
SQL/NNP
schema/NN
or/CC
query/NN
should/MD
be/VB
readable/JJ
and/CC
practically/RB
tell/VB
you/PRP
what/WP
it/PRP
's/VBZ
doing/VBG
,/,
even/RB
without/IN
comments/NNS
./.

You/PRP
'll/MD
thank/VB
yourself/PRP
in/IN
six/CD
months/NNS
,/,
when/WRB
you/PRP
have/VBP
to/TO
to/TO
maintenance/NN
on/IN
the/DT
tables/NNS
./.

"/``
SELECT/C
account_number/C
,/C
billing_date/C
FROM/C
national_accounts/C
"/''
is/VBZ
infinitely/RB
easier/JJR
to/TO
work/VB
with/IN
than/IN
"/``
SELECT/C
ACCNTNBR/C
,/C
BILLDAT/C
FROM/C
NTNLACCTS/C
"/''
./.

As/IN
a/DT
side/NN
note/NN
:/:
.NET/NNP
4.5/CD
has/VBZ
the/DT
option/NN
of/IN
limiting/VBG
the/DT
execution/NN
time/NN
of/IN
a/DT
regular/JJ
expression/NN
./.

Use/VB
the/DT
constructor/NN
with/IN
the/DT
TimeSpan/C NA
./.

msdn.microsoft.com/en-us/library/hh160196-LRB-v=vs.110).aspx/URI

Probably/RB
half/PDT
the/DT
framework/NN
contains/VBZ
very/RB
scary/JJ
functions/NNS
./.

I/PRP
myself/PRP
think/VBP
that/IN
File/C NA
./C NA
WriteAllText/C NA
(/C NA
)/C NA
is/VBZ
very/RB
scary/JJ
since/IN
it/PRP
can/MD
overwrite/VB
any/DT
file/NN
the/DT
current/JJ
user/NN
has/VBZ
access/NN
to/TO
./.

A/DT
different/JJ
approach/NN
to/TO
this/DT
question/NN
would/MD
be/VB
how/WRB
you/PRP
can/MD
manage/VB
security/NN
./.

The/DT
article/NN
at/IN
http://ondotnet.com/pub/a/dotnet/2003/02/18/permissions.html/URI
contains/VBZ
a/DT
basic/JJ
description/NN
concerning/VBG
the/DT
.NET/NNP
security/NN
system/NN
,/,
with/IN
the/DT
System/C
./C
Security/C
./C
Permissions/C
namespace/NN
containing/VBG
all/DT
permissions/NNS
.NET/NNP
makes/VBZ
available/JJ
./.

You/PRP
can/MD
also/RB
take/VB
a/DT
look/NN
at/IN
http://msdn.microsoft.com/en-us/library/5ba4k1c5.aspx/URI
for/IN
more/JJR
information/NN
./.

In/IN
short/JJ
,/,
.NET/NNP
allows/VBZ
you/PRP
to/TO
limit/VB
the/DT
permissions/NNS
a/DT
process/NN
can/MD
have/VB
,/,
for/IN
example/NN
denying/VBG
methods/NNS
that/WDT
change/VBP
data/NNS
on/IN
disk/NN
./.

You/PRP
can/MD
then/RB
check/VB
these/DT
permissions/NNS
and/CC
act/VBP
on/IN
whether/IN
the/DT
process/NN
has/VBZ
them/PRP
or/CC
not/RB
./.

It/PRP
does/VBZ
n't/RB
stop/VB
dictionary/NN
attacks/NNS
./.

What/WP
it/PRP
does/VBZ
is/VBZ
stop/VB
someone/NN
who/WP
manages/VBZ
to/TO
get/VB
a/DT
copy/NN
of/IN
your/PRP$
password/NN
file/NN
from/IN
using/VBG
a/DT
rainbow/NN
table/NN
to/TO
figure/VB
out/RP
what/WP
the/DT
passwords/NNS
are/VBP
from/IN
the/DT
hashes/NNS
./.

Eventually/RB
,/,
it/PRP
can/MD
be/VB
brute-forced/JJ
,/,
though/RB
./.

The/DT
answer/NN
to/TO
that/DT
part/NN
is/VBZ
to/TO
force/VB
your/PRP$
users/NNS
to/TO
not/RB
use/VB
dictionary/NN
words/NNS
as/IN
passwords/NNS
(/-LRB-
minimum/NN
requirements/NNS
of/IN
at/IN
least/JJS
one/CD
number/NN
or/CC
special/JJ
character/NN
,/,
for/IN
example/NN
)/-RRB-
./.

Update/VB
:/.

I/PRP
should/MD
have/VB
mentioned/VBN
this/DT
earlier/JJR
,/,
but/CC
some/DT
(/-LRB-
most/JJS
?/.
)/-RRB-
password/NN
systems/NNS
use/VBP
a/DT
different/JJ
salt/NN
for/IN
each/DT
password/NN
,/,
likely/RB
stored/VBN
with/IN
the/DT
password/NN
itself/PRP
./.

This/DT
makes/VBZ
a/DT
single/JJ
rainbow/NN
table/NN
useless/JJ
./.

This/DT
is/VBZ
how/WRB
the/DT
UNIX/NNP
crypt/NN
library/NN
works/VBZ
,/,
and/CC
modern/JJ
UNIX-like/JJ
OSes/NNS
have/VBP
extended/VBN
this/DT
library/NN
with/IN
new/JJ
hash/JJ
algorithms/NNS
./.

I/PRP
know/VBP
for/IN
a/DT
fact/NN
that/IN
support/NN
for/IN
SHA-256/NNP
and/CC
SHA-512/NNP
were/VBD
added/VBN
in/IN
newer/JJR
versions/NNS
of/IN
GNU/NNP
crypt/NN
./.

@rmeador/USR
:/:
This/DT
is/VBZ
why/WRB
GNU/NNP
crypt/NN
makes/VBZ
multiple/JJ
passes/NNS
with/IN
it/PRP
./.

I/PRP
know/VBP
it/PRP
was/VBD
1000/CD
for/IN
MD5/NNP
,/,
I/PRP
'm/VBP
not/RB
sure/JJ
how/WRB
many/JJ
it/PRP
is/VBZ
for/IN
newer/JJR
algorithms/NNS
./.

@Joe/USR
:/:
rainbow/NN
tables/NNS
are/VBP
precompiled/JJ
tables/NNS
./.

If/IN
you/PRP
use/VBP
a/DT
salt/NN
,/,
generally/RB
there/EX
wo/MD
n't/RB
be/VB
a/DT
rainbow/NN
table/NN
with/IN
that/DT
particular/JJ
salt/NN
value/NN
./.

@Joe/USR
:/:
Because/IN
a/DT
salt/NN
can/MD
be/VB
practically/RB
anything/NN
./.

Jeff/NNP
Atwood/NNP
talks/NNS
about/IN
it/PRP
a/DT
bit/NN
on/IN
his/PRP$
blog/NN
:/:
codinghorror.com/blog/2007/09/rainbow-hash-cracking.html/URI

This/DT
is/VBZ
one/CD
of/IN
the/DT
answers/NNS
that/WDT
should/MD
be/VB
voted/VBN
for/IN
Great/JJ
Answers/NNS
to/TO
be/VB
put/VBN
on/IN
the/DT
main/JJ
page/NN
,/,
as/IN
an/DT
article/NN
from/IN
which/WDT
other/JJ
users/NNS
will/MD
learn/VB
I/PRP
would/MD
say/VB
that/WDT
database/NN
size/NN
is/VBZ
bigger/JJR
issue/NN
than/IN
load/NN
./.

I/PRP
've/VBP
seen/VBN
many/JJ
times/NNS
,/,
that/IN
there/EX
were/VBD
missing/VBG
crucial/JJ
indexes/NNS
-/--
never/RB
been/VBN
performance/NN
problem/NN
during/IN
tests/NNS
,/,
because/IN
whole/JJ
database/NN
fit/NN
into/IN
memory/NN

First/RB
of/IN
all/DT
,/,
floating/JJ
point/NN
values/NNS
are/VBP
not/RB
"/``
random/JJ
"/''
in/IN
their/PRP$
behavior/NN
./.

Exact/JJ
comparison/NN
can/MD
and/CC
does/VBZ
make/VB
sense/NN
in/IN
plenty/NN
of/IN
real-world/JJ
usages/NNS
./.

But/CC
if/IN
you/PRP
're/VBP
going/VBG
to/TO
use/VB
floating/JJ
point/NN
you/PRP
need/VBP
to/TO
be/VB
aware/JJ
of/IN
how/WRB
it/PRP
works/VBZ
./.

Erring/VBG
on/IN
the/DT
side/NN
of/IN
assuming/VBG
floating/JJ
point/NN
works/VBZ
like/IN
real/JJ
numbers/NNS
will/MD
get/VB
you/PRP
code/VBP
that/IN
quickly/RB
breaks/NNS
./.

Erring/VBG
on/IN
the/DT
side/NN
of/IN
assuming/VBG
floating/JJ
point/NN
results/NNS
have/VBP
large/JJ
random/JJ
fuzz/NN
associated/VBN
with/IN
them/PRP
(/-LRB-
like/IN
most/JJS
of/IN
the/DT
answers/NNS
here/RB
suggest/VBP
)/-RRB-
will/MD
get/VB
you/PRP
code/VBP
that/DT
appears/VBZ
to/TO
work/VB
at/IN
first/JJ
but/CC
ends/VBZ
up/RP
having/VBG
large-magnitude/JJ
errors/NNS
and/CC
broken/JJ
corner/NN
cases/NNS
./.

First/RB
of/IN
all/DT
,/,
if/IN
you/PRP
want/VBP
to/TO
program/VB
with/IN
floating/JJ
point/NN
,/,
you/PRP
should/MD
read/VB
this/DT
:/.

What/WP
Every/DT
Computer/NN
Scientist/NN
Should/MD
Know/VB
About/IN
Floating-Point/NN
Arithmetic/NN

Yes/UH
,/,
read/VBD
all/DT
of/IN
it/PRP
./.

If/IN
that/DT
's/VBZ
too/RB
much/JJ
of/IN
a/DT
burden/NN
,/,
you/PRP
should/MD
use/VB
integers/NNS
//CC
fixed/JJ
point/NN
for/IN
your/PRP$
calculations/NNS
until/IN
you/PRP
have/VBP
time/NN
to/TO
read/VB
it/PRP
./.
:-)/UH

Now/RB
,/,
with/IN
that/DT
said/VBD
,/,
the/DT
biggest/JJS
issues/NNS
with/IN
exact/JJ
floating/JJ
point/NN
comparisons/NNS
come/VBP
down/RB
to/TO
:/.

The/DT
fact/NN
that/IN
lots/NNS
of/IN
values/NNS
you/PRP
may/MD
write/VB
in/IN
the/DT
source/NN
,/,
or/CC
read/VB
in/RP
with/IN
scanf/C
or/CC
strtod/C
,/,
do/VBP
not/RB
exist/VB
as/IN
floating/JJ
point/NN
values/NNS
and/CC
get/VB
silently/RB
converted/VBN
to/TO
the/DT
nearest/JJS
approximation/NN
./.

This/DT
is/VBZ
what/WDT
demon9733/USR
's/POS
answer/NN
was/VBD
talking/VBG
about/IN
./.

The/DT
fact/NN
that/IN
many/JJ
results/NNS
get/VBP
rounded/VBN
due/JJ
to/TO
not/RB
having/VBG
enough/JJ
precision/NN
to/TO
represent/VB
the/DT
actual/JJ
result/NN
./.

An/DT
easy/JJ
example/NN
where/WRB
you/PRP
can/MD
see/VB
this/DT
is/VBZ
adding/VBG
x/C
=/C
0x1fffffe/C
and/CC
y/C
=/C
1/C
as/IN
floats/NNS
./.

Here/RB
,/,
x/C
has/VBZ
24/CD
bits/NNS
of/IN
precision/NN
in/IN
the/DT
mantissa/NN
(/-LRB-
ok/UH
)/-RRB-
and/CC
y/C
has/VBZ
just/RB
1/CD
bit/NN
,/,
but/CC
when/WRB
you/PRP
add/VBP
them/PRP
,/,
their/PRP$
bits/NNS
are/VBP
not/RB
in/IN
overlapping/VBG
places/NNS
,/,
and/CC
the/DT
result/NN
would/MD
need/VB
25/CD
bits/NNS
of/IN
precision/NN
./.

Instead/RB
,/,
it/PRP
gets/VBZ
rounded/VBN
(/-LRB-
to/TO
0x2000000/C
`/``
in/IN
the/DT
default/JJ
rounding/VBG
mode/NN
)/-RRB-
./.

The/DT
fact/NN
that/IN
many/JJ
results/NNS
get/VBP
rounded/VBN
due/JJ
to/TO
needing/VBG
infinitely/RB
many/JJ
places/NNS
for/IN
the/DT
correct/JJ
value/NN
./.

This/DT
includes/VBZ
both/DT
rational/JJ
results/NNS
like/IN
1/CD
//SYM
3/CD
(/-LRB-
which/WDT
you/PRP
're/VBP
familiar/JJ
with/IN
from/IN
decimal/NN
where/WRB
it/PRP
takes/VBZ
infinitely/RB
many/JJ
places/NNS
)/-RRB-
but/CC
also/RB
1/CD
//SYM
10/CD
(/-LRB-
which/WDT
also/RB
takes/VBZ
infinitely/RB
many/JJ
places/NNS
in/IN
binary/JJ
,/,
since/IN
5/CD
is/VBZ
not/RB
a/DT
power/NN
of/IN
2/CD
)/-RRB-
,/,
as/RB
well/RB
as/IN
irrational/JJ
results/NNS
like/IN
the/DT
square/JJ
root/NN
of/IN
anything/NN
that/WDT
's/VBZ
not/RB
a/DT
perfect/JJ
square/NN
./.

Double/JJ
rounding/NN
./.

On/IN
some/DT
systems/NNS
(/-LRB-
particularly/RB
x86/NN
)/-RRB-
,/,
floating/JJ
point/NN
expressions/NNS
are/VBP
evaluated/VBN
in/IN
higher/JJR
precision/NN
than/IN
their/PRP$
nominal/JJ
types/NNS
./.

This/DT
means/VBZ
that/IN
when/WRB
one/CD
of/IN
the/DT
above/JJ
types/NNS
of/IN
rounding/NN
happens/VBZ
,/,
you/PRP
'll/MD
get/VB
two/CD
rounding/VBG
steps/NNS
,/,
first/RB
a/DT
rounding/NN
of/IN
the/DT
result/NN
to/TO
the/DT
higher-precision/JJ
type/NN
,/,
then/RB
a/DT
rounding/NN
to/TO
the/DT
final/JJ
type/NN
./.

As/IN
an/DT
example/NN
,/,
consider/VB
what/WP
happens/VBZ
in/IN
decimal/NN
if/IN
you/PRP
round/VBP
1.49/CD
to/TO
an/DT
integer/C
(/-LRB-
1/CD
)/-RRB-
,/,
versus/CC
what/WP
happens/VBZ
if/IN
you/PRP
first/RB
round/VB
it/PRP
to/TO
one/CD
decimal/C
place/NN
(/-LRB-
1.5/CD
)/-RRB-
then/RB
round/VB
that/DT
result/NN
to/TO
an/DT
integer/C
(/-LRB-
2/CD
)/-RRB-
./.

This/DT
is/VBZ
actually/RB
one/CD
of/IN
the/DT
nastiest/JJS
areas/NNS
to/TO
deal/VB
with/IN
in/IN
floating/JJ
point/NN
,/,
since/IN
the/DT
behavior/NN
of/IN
the/DT
compiler/NN
(/-LRB-
especially/RB
for/IN
buggy/NN
,/,
non-conformant/JJ
compilers/NNS
like/IN
GCC/NNP
)/-RRB-
is/VBZ
unpredictable/JJ
./.

Transcendental/JJ
functions/NNS
(/-LRB-
trig/C
,/,
exp/C
,/,
log/C
,/,
etc./FW
)/-RRB-
are/VBP
not/RB
specified/VBN
to/TO
have/VB
correctly/RB
rounded/VBN
results/NNS
;/:
the/DT
result/NN
is/VBZ
just/RB
specified/VBN
to/TO
be/VB
correct/JJ
within/IN
one/CD
unit/NN
in/IN
the/DT
last/JJ
place/NN
of/IN
precision/NN
(/-LRB-
usually/RB
referred/VBN
to/TO
as/IN
1ulp/C
)/-RRB-
./.

When/WRB
you/PRP
're/VBP
writing/VBG
floating/JJ
point/NN
code/NN
,/,
you/PRP
need/VBP
to/TO
keep/VB
in/IN
mind/NN
what/WP
you/PRP
're/VBP
doing/VBG
with/IN
the/DT
numbers/NNS
that/WDT
could/MD
cause/VB
the/DT
results/NNS
to/TO
be/VB
inexact/JJ
,/,
and/CC
make/VB
comparisons/NNS
accordingly/RB
./.

Often/RB
times/NNS
it/PRP
will/MD
make/VB
sense/NN
to/TO
compare/VB
with/IN
an/DT
"/``
epsilon/NN
"/''
,/,
but/CC
that/DT
epsilon/NN
should/MD
be/VB
based/VBN
on/IN
the/DT
magnitude/NN
of/IN
the/DT
numbers/NNS
you/PRP
are/VBP
comparing/VBG
,/,
not/RB
an/DT
absolute/JJ
constant/NN
./.

(/-LRB-
In/IN
cases/NNS
where/WRB
an/DT
absolute/JJ
constant/NN
epsilon/NN
would/MD
work/VB
,/,
that/DT
's/VBZ
strongly/RB
indicative/JJ
that/IN
fixed/JJ
point/NN
,/,
not/RB
floating/JJ
point/NN
,/,
is/VBZ
the/DT
right/JJ
tool/NN
for/IN
the/DT
job/NN
!/.
)/-RRB-

Edit/VB
:/.

In/IN
particular/JJ
,/,
a/DT
magnitude-relative/JJ
epsilon/NN
check/NN
should/MD
look/VB
something/NN
like/IN
:/.

if/C
(/C
fabs/C
(/C
x/C
-/C
y/C
)/C
</C
K/C
*/C
FLT_EPSILON/C
*/C
fabs/C
(/C
x/C
+/C
y/C
)/C
)/C
Where/WRB
FLT_EPSILON/C NA
is/VBZ
the/DT
constant/NN
from/IN
float.h/URI
(/-LRB-
replace/VB
it/PRP
with/IN
DBL_EPSILON/C NA
for/IN
doubles/NNS
or/CC
LDBL_EPSILON/C NA
for/IN
long/NN
doubles/NNS
)/-RRB-
and/CC
K/C NA
is/VBZ
a/DT
constant/NN
you/PRP
choose/VBP
such/JJ
that/IN
the/DT
accumulated/VBN
error/NN
of/IN
your/PRP$
computations/NNS
is/VBZ
definitely/RB
bounded/VBN
by/IN
K/C NA
units/NNS
in/IN
the/DT
last/JJ
place/NN
(/-LRB-
and/CC
if/IN
you/PRP
're/VBP
not/RB
sure/JJ
you/PRP
got/VBD
the/DT
error/NN
bound/VBN
calculation/NN
right/NN
,/,
make/VB
K/C NA
a/DT
few/JJ
times/NNS
bigger/JJR
than/IN
what/WP
your/PRP$
calculations/NNS
say/VBP
it/PRP
should/MD
be/VB
)/-RRB-
./.

Finally/RB
,/,
note/VBP
that/IN
if/IN
you/PRP
use/VBP
this/DT
,/,
some/DT
special/JJ
care/NN
may/MD
be/VB
needed/VBN
near/IN
zero/CD
,/,
since/IN
FLT_EPSILON/C NA
does/VBZ
not/RB
make/VB
sense/NN
for/IN
denormals/NNS
./.

A/DT
quick/JJ
fix/NN
would/MD
be/VB
to/TO
make/VB
it/PRP
:/.

if/C
(/C
fabs/C
(/C
x-y/C
)/C
</C
K/C
*/C
FLT_EPSILON/C
*/C
fabs/C
(/C
x/C
+/C
y/C
)/C
||/C
fabs/C
(/C
x/C
-/C
y/C
)/C
</C
FLT_MIN/C
)/C
and/CC
likewise/RB
substitute/JJ
DBL_MIN/C NA
if/IN
using/VBG
doubles/NNS
./.

If/IN
x/C NA
and/CC
y/C NA
have/VBP
different/JJ
sign/NN
,/,
it/PRP
's/VBZ
no/DT
problem/NN
./.

The/DT
righthand/JJ
side/NN
will/MD
be/VB
"/``
too/RB
small/JJ
"/''
,/,
but/CC
since/IN
x/C NA
and/CC
y/C NA
have/VBP
different/JJ
sign/NN
,/,
they/PRP
should/MD
not/RB
compare/VB
equal/JJ
anyway/RB
./.

(/-LRB-
Unless/IN
they/PRP
are/VBP
so/RB
small/JJ
as/IN
to/TO
be/VB
denormal/JJ
,/,
but/CC
then/RB
the/DT
second/JJ
case/NN
catches/VBZ
it/PRP
)/-RRB-

@Daniel/USR
:/:
+/SYM
1/CD
to/TO
your/PRP$
comment/NN
anyway/RB
for/IN
invoking/VBG
the/DT
word/NN
"/``
cargo-cult/NN
"/''
./.
:-)/UH

@yms/USR
:/:
Maybe/RB
it/PRP
was/VBD
a/DT
little/JJ
too/RB
harsh/JJ
,/,
but/CC
to/TO
borrow/VB
Daniel/NNP
's/POS
choice/NN
of/IN
words/NNS
,/,
there/EX
's/VBZ
a/DT
huge/JJ
amount/NN
of/IN
cargo-culting/NN
going/VBG
on/RP
in/IN
the/DT
answers/NNS
to/TO
this/DT
question/NN
as/IN
is/VBZ
usual/JJ
among/IN
floating/JJ
point/NN
questions/NNS
./.

I/PRP
do/VBP
n't/RB
think/VB
it/PRP
's/VBZ
helpful/JJ
to/TO
answer/VB
questions/NNS
about/IN
a/DT
topic/NN
you/PRP
do/VBP
n't/RB
understand/VB
with/IN
cargo-cult/JJ
answers/NNS
,/,
and/CC
in/IN
fact/NN
most/JJS
of/IN
the/DT
answers/NNS
here/RB
are/VBP
probably/RB
deserving/JJ
of/IN
downvotes/NNS
for/IN
that/DT
very/JJ
reason/NN
,/,
but/CC
I/PRP
specifically/RB
stated/VBD
that/IN
I/PRP
'm/VBP
not/RB
doing/VBG
it/PRP
lest/IN
I/PRP
be/VB
accused/VBN
of/IN
being/VBG
one/CD
of/IN
the/DT
downvoters/NNS
if/when/VBP
they/PRP
get/VB
downvoted/VBN
./.

@Nicolás/USR
:/:
The/DT
C/NNP
standard/NN
allows/VBZ
expressions/NNS
to/TO
be/VB
evaluated/VBN
in/IN
higher/JJR
precision/NN
than/IN
their/PRP$
nominal/JJ
type/NN
(/-LRB-
for/IN
example/NN
,/,
float/JJ
expressions/NNS
can/MD
be/VB
evaluated/VBN
as/IN
double/JJ
or/CC
long/JJ
double/JJ
)/-RRB-
and/CC
specifies/VBZ
the/DT
FLT_EVAL_METHOD/C NA
macro/NN
that/WDT
tells/VBZ
the/DT
application/NN
whether/IN
this/DT
will/MD
happen/VB
./.

So/IN
gcc/NNP
is/VBZ
justified/VBN
in/IN
using/VBG
higher/JJR
precision/NN
./.

However/RB
,/,
the/DT
C/NNP
standard/NN
also/RB
requires/VBZ
storage/NN
to/TO
a/DT
variable/JJ
and/CC
explicit/JJ
casts/VBZ
(/-LRB-
and/CC
possibly/RB
some/DT
other/JJ
situations/NNS
)/-RRB-
to/TO
throw/VB
away/RP
the/DT
extra/JJ
precision/NN
./.

With/IN
-/C
ffloat-store/C
,/,
gcc/NNP
honors/NNS
the/DT
requirement/NN
for/IN
storage/NN
to/TO
a/DT
variable/JJ
but/CC
not/RB
for/IN
casts/VBZ
;/:
without/IN
it/PRP
gcc/NNP
is/VBZ
all/DT
wrong/JJ
./.

Actually/RB
GCC/NNP
is/VBZ
wrong/JJ
on/IN
a/DT
number/NN
of/IN
other/JJ
things/NNS
too/RB
./.

For/IN
example/NN
,/,
it/PRP
wrongly/RB
optimizes/VBZ
out/RP
code/NN
that/WDT
would/MD
effect/VB
the/DT
floating/JJ
point/NN
exception/NN
flags/NNS
,/,
and/CC
compiles/VBZ
comparisons/NNS
(/-LRB-
at/IN
least/JJS
on/IN
x86/NN
)/-RRB-
to/TO
the/DT
wrong/JJ
instruction/NN
that/WDT
does/VBZ
not/RB
raise/VB
the/DT
invalid/JJ
exception/NN
flag/NN
on/IN
encountering/VBG
a/DT
NAN/NN
./.

It/PRP
also/RB
ignores/VBZ
the/DT
STDC/NNP
FENV/NN
pragmas/FW
,/,
and/CC
generates/VBZ
intrinsic/JJ
sqrt/NN
that/WDT
is/VBZ
not/RB
correctly/RB
rounded/VBN
./.

Some/DT
of/IN
these/DT
things/NNS
are/VBP
fixable/JJ
with/IN
-/C
f/C
options/NNS
,/,
but/CC
GCC/NNP
's/POS
floating/JJ
point/NN
behavior/NN
is/VBZ
generally/RB
to/TO
be/VB
fast/RB
at/IN
the/DT
expense/NN
of/IN
being/VBG
wrong/JJ
unless/IN
you/PRP
request/VBP
otherwise/RB
(/-LRB-
and/CC
sometimes/RB
still/RB
wrong/JJ
)/-RRB-
./.

I/PRP
just/RB
discovered/VBD
gcc/NNP
beginning/VBG
somewhere/RB
in/IN
the/DT
4.5/CD
or/CC
4.6/CD
series/NN
has/VBZ
an/DT
option/NN
-/C NA
fexcess-precision/C NA
=/C NA
standard/C NA
,/,
enabled/VBD
by/IN
default/NN
with/IN
-/C NA
std/C NA
=/C NA
c99/C NA
or/CC
-/C NA
std/C NA
=/C NA
c11/C NA
,/,
that/WDT
behaves/VBZ
like/IN
-/C NA
ffloat-store/C NA
but/CC
also/RB
handles/VBZ
casts/NNS
,/,
and/CC
disables/VBZ
the/DT
incorrect/JJ
sqrt/NN
optimization/NN
./.

With/IN
these/DT
fixes/NNS
,/,
GCC/NNP
's/POS
floating/JJ
point/NN
on/IN
x86/NN
seems/VBZ
very/RB
close/JJ
to/TO
being/VBG
IEEE/NNP
conformant/NN
now/RB
./.

By/IN
default/NN
it/PRP
's/VBZ
still/RB
badly/RB
broken/JJ
,/,
but/CC
hopefully/RB
good/JJ
programs/NNS
will/MD
use/VB
-/C NA
std/C NA
=/C NA
c99/C NA
./.

(/C
Also/RB
note/NN
-/C NA
std/C NA
=/C NA
gnu99/C NA
does/VBZ
not/RB
fix/VB
it/PRP
./.
)/-RRB-

@StephenCanon/USR
:/:
How/WRB
can/MD
they/PRP
do/VB
this/DT
for/IN
pre-SSE2/JJ
x86/NN
targets/NNS
?/.

I/PRP
think/VBP
that/DT
's/VBZ
impossible/JJ
without/IN
using/VBG
either/CC
soft-float/JJ
or/CC
just/RB
using/VBG
SSE2/NNP
anyway/RB
and/CC
having/VBG
emulation/NN
traps/NNS
in/IN
the/DT
kernel/NN
./.

Just/RB
doing/VBG
the/DT
arithmetic/NN
in/IN
higher/JJR
precision/NN
then/RB
truncating/JJ
(/-LRB-
like/IN
gcc/NNP
's/POS
-/C
ffloat-store/C
)/-RRB-
yields/VBZ
incorrect/JJ
double-rounding/NN
,/,
and/CC
even/RB
switching/VBG
the/DT
FPU/NN
's/POS
control/NN
word/NN
to/TO
lower/JJR
precision/NN
results/VBZ
in/IN
double/JJ
rounding/NN
for/IN
denormals/NNS
(/-LRB-
since/IN
the/DT
exponent/NN
range/NN
is/VBZ
still/RB
15/CD
bit/NN
and/CC
thus/RB
denormals/NNS
do/VBP
n't/RB
underflow/VB
like/IN
they/PRP
should/MD
)/-RRB-
./.

OK/UH
that/WDT
makes/VBZ
sense/NN
,/,
but/CC
I/PRP
think/VBP
your/PRP$
usage/NN
of/IN
"/``
Apple/NNP
's/POS
compilers/NNS
"/''
was/VBD
unclear/JJ
./.

I/PRP
assumed/VBD
it/PRP
applied/VBD
to/TO
clang/NNP
(/-LRB-
Apple/NNP
's/POS
compiler/NN
)/-RRB-
on/IN
any/DT
target/NN
rather/RB
than/IN
just/RB
on/IN
Apple/NNP
systems/NNS
./.

@Zarel/USR
:/:
"/``
Large/JJ
"/''
random/JJ
fuzz/NN
is/VBZ
usually/RB
handled/VBN
as/IN
an/DT
absolute/JJ
epsilon/NN
value/NN
./.

For/IN
very-large/JJ
magnitude/NN
numbers/NNS
,/,
the/DT
epsilon/NN
is/VBZ
below/IN
their/PRP$
precision/NN
and/CC
thus/RB
"/``
epsilon/NN
comparisons/NNS
"/''
degenerate/VBP
into/IN
exact-equality/JJ
comparisons/NNS
./.

Conversely/RB
,/,
for/IN
very/RB
small/JJ
numbers/NNS
,/,
an/DT
absolute/JJ
epsilon/NN
comparison/NN
can/MD
make/VB
1000000/CD
*/SYM
x/C NA
and/CC
x/C NA
look/VB
equal/JJ
./.

These/DT
are/VBP
the/DT
broken/JJ
corner/NN
cases/NNS
I/PRP
was/VBD
referring/VBG
to/TO
./.

Large/JJ
errors/NNS
just/RB
refers/VBZ
to/TO
the/DT
fact/NN
that/IN
if/IN
you/PRP
treat/VBP
x/C NA
and/CC
y/C NA
as/IN
equal/JJ
when/WRB
only/RB
their/PRP$
exponents/NNS
and/CC
half/PDT
their/PRP$
mantissas/NNS
match/VBP
,/,
you/PRP
essentially/RB
threw/VBD
away/RB
half/PDT
your/PRP$
mantissa/NN
precision/NN
.../.

For/IN
the/DT
honeypot/NN
,/,
would/MD
n't/RB
treating/VBG
any/DT
non-existent/JJ
username/NN
as/IN
suspicious/JJ
be/VB
better/JJR
than/IN
just/RB
using/VBG
a/DT
fixed/JJ
list/NN
of/IN
known-bad/JJ
usernames/NNS
?/.

You/PRP
'd/MD
want/VB
to/TO
avoid/VB
locking/VBG
out/RP
users/NNS
who/WP
mistyped/VBD
their/PRP$
username/NN
and/CC
did/VBD
n't/RB
notice/VB
the/DT
typo/NN
while/IN
retrying/VBG
their/PRP$
password/NN
several/JJ
times/NNS
,/,
but/CC
I/PRP
still/RB
think/VBP
there/EX
are/VBP
ways/NNS
it/PRP
could/MD
be/VB
valuable/JJ
./.

You/PRP
could/MD
even/RB
avoid/VB
some/DT
"/``
false/JJ
positives/NNS
"/''
by/IN
building/VBG
a/DT
large/JJ
bloom/NN
filter/NN
or/CC
similar/JJ
data/NNS
structure/NN
with/IN
variants/NNS
of/IN
valid/JJ
usernames/NNS
,/,
first/JJ
names/NNS
,/,
last/JJ
names/NNS
,/,
email/NN
names/NNS
,/,
etc./FW
as/IN
users/NNS
are/VBP
added/VBN
./.

Everytime/VB
a/DT
user/NN
posts/VBZ
something/NN
containing/VBG
</SYM
or/CC
>/SYM
in/IN
a/DT
page/NN
in/IN
my/PRP$
webapp/NN
,/,
I/PRP
get/VBP
this/DT
exception/NN
thrown/VBD
./.

I/PRP
do/VBP
n't/RB
want/VB
to/TO
go/VB
into/IN
the/DT
discussion/NN
about/IN
the/DT
smartness/NN
of/IN
throwing/VBG
an/DT
exception/NN
or/CC
crashing/VBG
an/DT
entire/JJ
webapp/NN
because/IN
somebody/NN
entered/VBD
a/DT
character/NN
in/IN
a/DT
text/NN
box/NN
,/,
but/CC
I/PRP
am/VBP
looking/VBG
for/IN
an/DT
elegant/JJ
way/NN
to/TO
handle/VB
this/DT
./.

Trapping/VBG
the/DT
exception/NN
and/CC
showing/VBG
An/ER
error/ER
has/ER
occured/ER
please/ER
go/ER
back/ER
and/ER
re-type/ER
your/ER
entire/ER
form/ER
again/ER
,/ER
but/ER
this/ER
time/ER
please/ER
do/ER
not/ER
use/ER
</ER
does/VBZ
n't/RB
seem/VB
professional/JJ
enough/RB
to/TO
me/PRP

Disabling/VBG
post/NN
validation/NN
(/-LRB-
validateRequest/C
=/C
"false"/C
)/-RRB-
will/MD
definitely/RB
avoid/VB
this/DT
error/NN
,/,
but/CC
it/PRP
will/MD
leave/VB
the/DT
page/NN
vulnerable/JJ
to/TO
a/DT
number/NN
of/IN
attacks/NNS
./.

Ideally/RB
:/:
when/WRB
a/DT
post/NN
back/RB
occurs/VBZ
containing/VBG
HTML/NNP
restricted/JJ
characters/NNS
,/,
that/WDT
posted/VBD
value/NN
in/IN
the/DT
Form/NN
collection/NN
will/MD
be/VB
automatically/RB
HTML/NNP
encoded/VBN
./.

So/IN
the/DT
.Text/C
property/NN
of/IN
my/PRP$
text-box/NN
will/MD
be/VB
something/NN
</C
html/NNP
>/C

Any/DT
way/NN
I/PRP
can/MD
do/VB
this/DT
from/IN
a/DT
handler/NN
?/.

@bamccaig/USR
,/,
kinda/FW
missing/VBG
the/DT
point/NN
entirely/RB

Well/RB
,/,
since/IN
it/PRP
's/VBZ
my/PRP$
question/NN
I/PRP
feel/VBP
I/PRP
can/MD
define/VB
what/WP
the/DT
point/NN
actually/RB
is/VBZ
:/:
crashing/VBG
an/DT
entire/JJ
application/NN
process/NN
and/CC
returning/VBG
a/DT
generic/JJ
error/NN
message/NN
because/IN
somebody/NN
typed/VBD
a/DT
'/``
</C
'/''
is/VBZ
overkill/NN
./.

Especially/RB
since/IN
you/PRP
know/VBP
most/JJS
people/NNS
will/MD
just/RB
'/``
validateRequest/C NA
=/C NA
false/C NA
'/''
to/TO
get/VB
rid/JJ
of/IN
it/PRP
,/,
thus/RB
re-opening/VBG
the/DT
vulnerability/NN

This/DT
will/MD
still/RB
leave/VB
the/DT
app/NN
vulnerable/JJ
from/IN
made-up/JJ
POST/C NA
requests/NNS
./.

A/DT
regular/JJ
user/NN
will/MD
have/VB
problems/NNS
entering/VBG
characters/NNS
like/IN
,/SYM
:/SYM
or/CC
quotes/NNS
,/,
but/CC
a/DT
regular/JJ
hacker/NN
will/MD
have/VB
no/DT
problems/NNS
POSTing/VBG
malformed/JJ
data/NNS
to/TO
the/DT
server/NN
./.

I/PRP
'd/MD
vode/VB
this/DT
waaay/NN
down/RP
./.

Using/VBG
PDO/NN
and/CC
MYSQLi/NNP
is/VBZ
a/DT
good/JJ
practice/NN
to/TO
prevent/VB
SQL/NNP
injections/NNS
,/,
but/CC
if/IN
you/PRP
really/RB
want/VBP
to/TO
work/VB
with/IN
MySQL/NNP
functions/NNS
and/CC
queries/NNS
,/,
it/PRP
would/MD
be/VB
better/JJR
to/TO
use/VB
mysql_real_escape_string/C

$/C
unsafe_variable/C
=/C
mysql_real_escape_string/C
(/C
$/C
_POST/C
[/C
'user_input'/C
]/C
)/C
;/C

There/EX
are/VBP
more/JJR
ability/NN
to/TO
prevent/VB
this/DT
:/:
like/IN
identify/VBP
-/--
if/IN
the/DT
input/NN
is/VBZ
a/DT
string/NN
,/,
number/NN
,/,
char/NN
or/CC
array/NN
,/,
there/EX
are/VBP
so/RB
many/JJ
inbuilt/JJ
functions/NNS
to/TO
detect/VB
this/DT
./.

Also/RB
it/PRP
would/MD
be/VB
better/JJR
to/TO
use/VB
these/DT
functions/NNS
to/TO
check/VB
input/NN
data/NNS
./.

is_string/C

$/C
unsafe_variable/C
=/C
(/C
is_string/C
(/C
$/C
_POST/C
[/C
'user_input'/C
]/C
)/C
?/C
$/C
_POST/C
[/C
'user_input'/C
]/C
:/C
''/C
)/C
;/C

is_numeric/C

$/C
unsafe_variable/C
=/C
(/C
is_numeric/C
(/C
$/C
_POST/C
[/C
'user_input'/C
]/C
)/C
?/C
$/C
_POST/C
[/C
'user_input'/C
]/C
:/C
''/C
)/C
;/C

And/CC
it/PRP
is/VBZ
so/RB
much/RB
better/JJR
to/TO
use/VB
those/DT
functions/NNS
to/TO
check/VB
input/NN
data/NNS
with/IN
mysql_real_escape_string/C
./.

@YourCommonSense/USR
you/PRP
need/VBP
to/TO
believe/VB
so/RB
what/WP
you/PRP
want/VBP
to/TO
update/VB

Great/JJ
point/NN
,/,
and/CC
to/TO
emphasize/VB
one/CD
of/IN
your/PRP$
related/JJ
points/NNS
--/--
test/VB
your/PRP$
changes/NNS
./.

Learn/VB
to/TO
use/VB
explain/VB
plans/NNS
(/-LRB-
and/CC
see/VB
what/WP
the/DT
database/NN
is/VBZ
actually/RB
doing/VBG
to/TO
execute/VB
your/PRP$
query/NN
,/,
and/CC
what/WP
it/PRP
costs/VBZ
)/-RRB-
,/,
do/VB
your/PRP$
tests/NNS
on/IN
a/DT
large/JJ
dataset/NN
,/,
and/CC
do/VBP
n't/RB
make/VB
your/PRP$
SQL/NNP
overly-complex/JJ
and/CC
unreadable/JJ
//CC
unmaintainable/JJ
for/IN
an/DT
optimization/NN
that/WDT
does/VBZ
n't/RB
actually/RB
improve/VB
real/JJ
performance/NN
./.

Ahem/UH
.../F
what/WP
you/PRP
are/VBP
talking/VBG
about/IN
is/VBZ
optimization/NN
that/WDT
is/VBZ
not/RB
premature/JJ
./.

Some/DT
consideration/NN
of/IN
real/JJ
usage/NN
is/VBZ
required/VBN
from/IN
the/DT
beginning/NN
in/IN
database/NN
design/NN
(/-LRB-
and/CC
application/NN
design/NN
as/RB
well/RB
,/,
really/RB
)/-RRB-
./.

Knuth/NNP
's/POS
rule/NN
is/VBZ
actually/RB
not/RB
trivial/JJ
to/TO
follow/VB
,/,
because/IN
you/PRP
have/VBP
to/TO
decide/VB
what/WP
's/VBZ
premature/JJ
and/CC
what/WP
is/VBZ
n't/RB
--/--
it/PRP
really/RB
comes/VBZ
down/RP
to/TO
"/``
do/VB
n't/RB
perform/VB
optimizations/NNS
without/IN
data/NNS
"/''
./.

The/DT
early/JJ
performance-related/JJ
decisions/NNS
you/PRP
're/VBP
talking/VBG
about/IN
have/VBP
data/NNS
--/--
certain/JJ
designs/NNS
will/MD
set/VB
unacceptable/JJ
limits/NNS
on/IN
future/JJ
performance/NN
,/,
and/CC
you/PRP
can/MD
calculate/VB
them/PRP
./.

This/DT
question/NN
is/VBZ
similar/JJ
to/TO
Exploitable/JJ
PHP/NNP
Functions/NNS
./.

Tainted/JJ
data/NNS
comes/VBZ
from/IN
the/DT
user/NN
,/,
or/CC
more/RBR
specifically/RB
an/DT
attacker/NN
./.

When/WRB
a/DT
tainted/JJ
variable/NN
reaches/VBZ
a/DT
sink/NN
function/NN
,/,
then/RB
you/PRP
have/VBP
a/DT
vulnerability/NN
./.

For/IN
instance/NN
a/DT
function/NN
that/WDT
executes/VBZ
a/DT
sql/NNP
query/NN
is/VBZ
a/DT
sink/NN
,/,
and/CC
GET/C NA
//CC
POST/C NA
variables/NNS
are/VBP
sources/NNS
of/IN
taint/NN
./.

What/WP
are/VBP
all/DT
of/IN
the/DT
sink/NN
functions/NNS
in/IN
C#/NNP
?/.

I/PRP
am/VBP
looking/VBG
for/IN
functions/NNS
that/WDT
introduce/VBP
a/DT
vulnerability/NN
or/CC
software/NN
weakness/NN
./.

I/PRP
am/VBP
particularly/RB
interested/JJ
in/IN
Remote/JJ
Code/NN
Execution/NN
vulnerabilities/NNS
./.

Are/VBP
there/RB
whole/JJ
classes/NNS
//CC
libraries/NNS
that/WDT
contain/VBP
nasty/JJ
functionally/RB
that/IN
a/DT
hacker/NN
would/MD
like/VB
to/TO
influence/VB
?/.

How/WRB
do/VBP
people/NNS
accidentally/RB
make/VBP
dangerous/JJ
C#/NNP
code/NN
?/.

@Lucero/USR
I/PRP
liked/VBD
the/DT
php/NNP
question/NN
,/,
I/PRP
think/VBP
this/DT
applies/VBZ
to/TO
C#/NNP
quite/RB
well/RB
./.

@Gio/USR
yep/UH
took/VBD
a/DT
while/NN
to/TO
put/VB
together/RB
;)/UH

@Kobi/USR
My/PRP$
post/NN
for/IN
PHP/NNP
functions/NNS
was/VBD
pretty/RB
useful/JJ
and/CC
more/JJR
than/IN
just/RB
a/DT
dumb/JJ
list/NN
./.

There/EX
are/VBP
families/NNS
of/IN
functions/NNS
,/,
and/CC
unintended/JJ
functionality/NN
./.

I/PRP
should/MD
have/VB
read/VBN
this/DT
more/RBR
carefully/RB
./.

Interesting/JJ
oddity/NN
,/,
but/CC
this/DT
is/VBZ
a/DT
far/JJ
reach/NN
from/IN
the/DT
complete/JJ
answer/NN
./.

Yes/UH
data/NNS
from/IN
the/DT
user/NN
is/VBZ
called/VBN
tainted/JJ
data/NNS
./.

When/WRB
tainted/VBN
data/NNS
reaches/VBZ
a/DT
"/``
sink/NN
"/''
function/NN
,/,
then/RB
you/PRP
have/VBP
a/DT
vulnerability/NN
./.

Look/VB
at/IN
the/DT
list/NN
of/IN
PHP/NNP
sink/NN
functions/VBZ
i/PRP
posted/VBN
at/IN
the/DT
top/NN
./.

did/VBD
you/PRP
see/VB
my/PRP$
PHP/NNP
link/NN
at/IN
the/DT
top/NN
?/.

Or/CC
have/VB
you/PRP
come/VBP
across/IN
static/JJ
analysis/NN
tools/NNS
like/IN
RATS/NNP
(/-LRB-
fortify.com/ssa-elements/threat-intelligence/rats.html/URI
)/-RRB-

Apparently/RB
you/PRP
've/VBP
never/RB
done/VBN
a/DT
hash/NN
benchmark/NN
on/IN
your/PRP$
system/NN
./.

You/PRP
can/MD
do/VB
MANY/JJ
MILLIONS/NNS
of/IN
sha1/NNP
calculations/NNS
per/IN
seconds/NNS
./.

A/DT
1,000/CD
rounds/NNS
is/VBZ
meaningless/JJ
to/TO
an/DT
attacker/NN
./.

Also/RB
-/SYM
1/CD
because/IN
sha1/NNP
is/VBZ
a/DT
broken/JJ
hash/NN
function/NN
./.

What/WP
I/PRP
ended/VBD
up/RP
doing/VBG
was/VBD
using/VBG
javascript/NNP
before/IN
each/DT
postback/NN
to/TO
check/VB
for/IN
the/DT
characters/NNS
you/PRP
did/VBD
n't/RB
want/VB
such/JJ
as/IN
.../F

</C
asp/C
:/C
Button/C
runat/C
=/C
"server"/C
ID/C
=/C
"saveButton"/C
Text/C
=/C
"Save"/C
CssClass/C
=/C
"saveButton"/C
OnClientClick/C
=/C
"/C
return/C
checkFields/C
(/C
)/C
"/C
/>/C

function/C
checkFields/C
(/C
)/C
{/C
var/C
tbs/C
=/C
new/C
Array/C
(/C
)/C
;/C
tbs/C
=/C
document/C
./C
getElementsByTagName/C
(/C
"input"/C
)/C
;/C
var/C
isValid/C
=/C
true/C
;/C
for/C
(/C
i/C
=/C
0/C
;/C
i/C
</C
tbs/C
./C
length/C
;/C
i/C
++/C
)/C
{/C
if/C
(/C
tbs/C
(/C
i/C
)/C
./C
type/C
==/C
'text'/C
)/C
{/C
if/C
(/C
tbs/C
(/C
i/C
)/C
./C
value/C
./C
indexOf/C
(/C
'<'/C
)/C
!/C
=/C
-/C
1/C
||/C
tbs/C
(/C
i/C
)/C
./C
value/C
./C
indexOf/C
(/C
'>'/C
)/C
!=/C
-/C
1/C
)/C
{/C
alert/C
(/C
'<> symbols not allowed.'
)/C
;/C
isValid/C
=/C
false/C
;/C
}/C
}/C
}/C
return/C
isValid/C
;/C
}/C

Granted/VBN
my/PRP$
page/NN
is/VBZ
mostly/RB
data/NN
entry/NN
,/,
and/CC
there/EX
are/VBP
very/RB
few/JJ
elements/NNS
that/WDT
do/VBP
postbacks/NNS
,/,
but/CC
at/IN
least/JJS
their/PRP$
data/NNS
is/VBZ
retained/VBN
./.

The/DT
.NET/NNP
framework/NN
ships/NNS
with/IN
6/CD
different/JJ
hashing/NN
algorithms/NNS
:/.

MD5/NNP
:/:
16/CD
bytes/NNS
(/-LRB-
Time/NN
to/TO
hash/VB
500MB/CD
:/:
1462/CD
ms/NN
)/-RRB-

SHA1/NNP
:/:
20/CD
bytes/NNS
(/-LRB-
1644/CD
ms/NN
)/-RRB-

SHA256/NNP
:/:
32/CD
bytes/NNS
(/-LRB-
5618/CD
ms/NN
)/-RRB-

SHA384/NNP
:/:
48/CD
bytes/NNS
(/-LRB-
3839/CD
ms/NN
)/-RRB-

SHA512/NNP
:/:
64/CD
bytes/NNS
(/-LRB-
3820/CD
ms/NN
)/-RRB-

RIPEMD/NNP
:/:
20/CD
bytes/NNS
(/-LRB-
7066/CD
ms/NN
)/-RRB-

Each/DT
of/IN
these/DT
functions/NNS
performs/VBZ
differently/RB
;/:
MD5/NNP
being/VBG
the/DT
fastest/JJS
and/CC
RIPEMD/NNP
being/VBG
the/DT
slowest/JJS
./.

MD5/NNP
has/VBZ
the/DT
advantage/NN
that/IN
it/PRP
fits/VBZ
in/IN
the/DT
built-in/JJ
Guid/NN
type/NN
./.

Which/WDT
makes/VBZ
it/PRP
really/RB
easy/JJ
to/TO
use/VB
for/IN
identification/NN
./.

MD5/NNP
however/RB
is/VBZ
vulnerable/JJ
to/TO
collision/NN
attacks/NNS
,/,
SHA1/NNP
is/VBZ
also/RB
vulnerable/JJ
but/CC
to/TO
a/DT
lesser/JJR
degree/NN
./.

Under/IN
what/WP
conditions/NNS
should/MD
I/PRP
use/VB
which/WDT
hashing/NN
algorithm/NN
?/.

Particular/JJ
questions/NNS
I/PRP
'm/VBP
really/RB
curious/JJ
to/TO
see/VB
answered/VBN
are/VBP
:/.

Is/VBZ
MD5/NNP
not/RB
to/TO
be/VB
trusted/VBN
?/.

Under/IN
normal/JJ
situations/NNS
when/WRB
you/PRP
use/VBP
the/DT
MD5/NNP
algorithm/NN
with/IN
no/DT
malicious/JJ
intent/NN
and/CC
no/DT
third/JJ
party/NN
has/VBZ
any/DT
malicious/JJ
intent/NN
would/MD
you/PRP
expect/VB
ANY/DT
collisions/NNS
(/-LRB-
meaning/NN
two/CD
arbitrary/JJ
byte/C NA
[/C NA
]/C NA
producing/VBG
the/DT
same/JJ
hash/NN
)/-RRB-

How/WRB
much/RB
better/JJR
is/VBZ
RIPEMD/NNP
than/IN
SHA1/NNP
?/.

(/-LRB-
if/IN
its/PRP$
any/DT
better/JJR
)/-RRB-
its/PRP$
5/CD
times/NNS
slower/JJR
to/TO
compute/VB
but/CC
the/DT
hash/NN
size/NN
is/VBZ
the/DT
same/JJ
as/IN
SHA1/NNP
./.

What/WP
are/VBP
the/DT
odds/NNS
of/IN
getting/VBG
non-malicious/JJ
collisions/NNS
when/WRB
hashing/VBG
file-names/NNS
(/-LRB-
or/CC
other/JJ
short/JJ
strings/NNS
)/-RRB-
?/.

(/-LRB-
Eg./FW
2/CD
random/JJ
file-names/NNS
with/IN
same/JJ
MD5/NNP
hash/NN
)/-RRB-
(/-LRB-
with/IN
MD5/NNP
//CC
SHA1/NNP
//CC
SHA2xx/NNP
)/-RRB-

In/IN
general/JJ
what/WP
are/VBP
the/DT
odds/NNS
for/IN
non-malicious/JJ
collisions/NNS
?/.

This/DT
is/VBZ
the/DT
benchmark/NN
I/PRP
used/VBD
:/.

static/C
void/C
TimeAction/C
(/C
string/C
description/C
,/C
int/C
iterations/C
,/C
Action/C
func/C
)/C
{/C
var/C
watch/C
=/C
new/C
Stopwatch/C
(/C
)/C
;/C
watch/C
./C
Start/C
(/C
)/C
;/C
for/C
(/C
int/C
i/C
=/C
0/C
;/C
i/C
</C
iterations/C
;/C
i/C
++/C
)/C
{/C
func/C
(/C
)/C
;/C
}/C
watch/C
./C
Stop/C
(/C
)/C
;/C
Console/C
./C
Write/C
(/C
description/C
)/C
;/C
Console/C
./C
WriteLine/C
(/C
" Time Elapsed {0} ms"/C
,/C
watch/C
./C
ElapsedMilliseconds/C
)/C
;/C
}/C

static/C
byte/C
[/C
]/C
GetRandomBytes/C
(/C
int/C
count/C
)/C
{/C
var/C
bytes/C
=/C
new/C
byte/C
[/C
count/C
]/C
;/C
(/C
new/C
Random/C
(/C
)/C
)/C
./C
NextBytes/C
(/C
bytes/C
)/C
;/C
return/C
bytes/C
;/C
}/C

static/C
void/C
Main/C
(/C
string/C
[/C
]/C
args/C
)/C
{/C
var/C
md5/C
=/C
new/C
MD5CryptoServiceProvider/C
(/C
)/C
;/C
var/C
sha1/C
=/C
new/C
SHA1CryptoServiceProvider/C
(/C
)/C
;/C
var/C
sha256/C
=/C
new/C
SHA256CryptoServiceProvider/C
(/C
)/C
;/C
var/C
sha384/C
=/C
new/C
SHA384CryptoServiceProvider/C
(/C
)/C
;/C
var/C
sha512/C
=/C
new/C
SHA512CryptoServiceProvider/C
(/C
)/C
;/C
var/C
ripemd160/C
=/C
new/C
RIPEMD160Managed/C
(/C
)/C
;/C
var/C
source/C
=/C
GetRandomBytes/C
(/C
1000/C
*/C
1024/C
)/C
;/C
var/C
algorithms/C
=/C
new/C
Dictionary/C
</C
string/C
,/C
HashAlgorithm/C
>/C
(/C
)/C
;/C
algorithms/C
[/C
"md5"/C
]/C
=/C
md5/C
;/C
algorithms/C
[/C
"sha1"/C
]/C
=/C
sha1/C
;/C
algorithms/C
[/C
"sha256"/C
]/C
=/C
sha256/C
;/C
algorithms/C
[/C
"sha384"/C
]/C
=/C
sha384/C
;/C
algorithms/C
[/C
"sha512"/C
]/C
=/C
sha512/C
;/C
algorithms/C
[/C
"ripemd160"/C
]/C
=/C
ripemd160/C
;/C
foreach/C
(/C
var/C
pair/C
in/C
algorithms/C
)/C
{/C
Console/C
./C
WriteLine/C
(/C
"Hash Length for {0} is {1} "/C
,/C
pair/C
./C
Key/C
,/C
pair/C
./C
Value/C
./C
ComputeHash/C
(/C
source/C
)/C
./C
Length/C
)/C
;/C
}/C
foreach/C
(/C
var/C
pair/C
in/C
algorithms/C
)/C
{/C
TimeAction/C
(/C
pair/C
./C
Key/C
+/C
" calculation"/C
,/C
500/C
,/C
(/C
)/C
=>/C
{/C
pair/C
./C
Value/C
./C
ComputeHash/C
(/C
source/C
)/C
;/C
}/C
)/C
;/C
}/C
Console/C
./C
ReadKey/C
(/C
)/C
;/C
}/C

Correct/UH
its/PRP$
unrelated/JJ
,/,
its/PRP$
just/RB
a/DT
handy/JJ
implementation/NN
specific/JJ
fact/NN
./.

I/PRP
understand/VBP
that/IN
you/PRP
can/MD
not/RB
fit/VB
infinity/NN
into/IN
a/DT
16/CD
bytes/NNS
./.

You/PRP
can/MD
get/VB
collisions/NNS
with/IN
ANY/DT
hashing/NN
algorithm/NN
-/.

Also/RB
a/DT
Guid/NN
is/VBZ
just/RB
in-practice/JJ
unique/JJ
,/,
in/IN
theory/NN
if/IN
you/PRP
kept/VBD
on/IN
generating/VBG
Guids/NNS
eventually/RB
you/PRP
would/MD
get/VB
duplicates/NNS
./.

+/SYM
1/CD
thank/VB
you/PRP
for/IN
the/DT
thoughtful/JJ
answer/NN

All/DT
hash/JJ
functions/NNS
are/VBP
"/``
broken/JJ
"/''

The/DT
pigeonhole/NN
principle/NN
says/VBZ
that/DT
try/NN
as/RB
hard/RB
as/IN
you/PRP
will/MD
you/PRP
can/MD
not/RB
fit/VB
more/JJR
than/IN
2/CD
pigeons/NNS
in/IN
2/CD
holes/NNS
(/-LRB-
unless/IN
you/PRP
cut/VBD
the/DT
pigeons/NNS
up/RP
)/-RRB-
./.

Similarly/RB
you/PRP
can/MD
not/RB
fit/VB
2/CD
^/SYM
128/CD
+/SYM
1/CD
numbers/NNS
in/IN
2/CD
^/SYM
128/CD
slots/NNS
./.

All/DT
hash/NN
functions/NNS
result/VBP
in/IN
a/DT
hash/NN
of/IN
finite/JJ
size/NN
,/,
this/DT
means/VBZ
that/IN
you/PRP
can/MD
always/RB
find/VB
a/DT
collision/NN
if/IN
you/PRP
search/VBP
through/IN
"/``
finite/JJ
size/NN
"/''
+/CC
1/CD
sequences/NNS
./.

It/PRP
's/VBZ
just/RB
not/RB
feasible/JJ
to/TO
do/VB
so/RB
./.

Not/RB
for/IN
MD5/NNP
and/CC
not/RB
for/IN
Skein/NNP
./.

MD5/NNP
//CC
SHA1/NNP
//CC
Sha2xx/NNP
have/VBP
no/DT
chance/NN
collisions/NNS

All/PDT
the/DT
hash/NN
functions/NNS
have/VBP
collisions/NNS
,/,
its/PRP$
a/DT
fact/NN
of/IN
life/NN
./.

Coming/VBG
across/IN
these/DT
collisions/NNS
by/IN
accident/NN
is/VBZ
the/DT
equivalent/NN
of/IN
winning/VBG
the/DT
intergalactic/JJ
lottery/NN
./.

That/DT
is/VBZ
to/TO
say/VB
,/,
no/DT
one/NN
wins/VBZ
the/DT
intergalactic/JJ
lottery/NN
,/,
its/PRP$
just/RB
not/RB
the/DT
way/NN
the/DT
lottery/NN
works/VBZ
./.

You/PRP
will/MD
not/RB
come/VB
across/IN
an/DT
accidental/JJ
MD5/NNP
//CC
SHA1/NNP
//CC
SHA2XXX/NNP
hash/NN
,/,
EVER/RB
./.

Every/DT
word/NN
in/IN
every/DT
dictionary/NN
,/,
in/IN
every/DT
language/NN
,/,
hashes/VBZ
to/TO
a/DT
different/JJ
value/NN
./.

Every/DT
path/NN
name/NN
,/,
on/IN
every/DT
machine/NN
in/IN
the/DT
entire/JJ
planet/NN
has/VBZ
a/DT
different/JJ
MD5/NNP
//CC
SHA1/NNP
//CC
SHA2XXX/NNP
hash/NN
./.

How/WRB
do/VBP
I/PRP
know/VB
that/DT
,/,
you/PRP
may/MD
ask/VB
./.

Well/RB
,/,
as/IN
I/PRP
said/VBD
before/RB
,/,
no/DT
one/NN
wins/VBZ
the/DT
intergalactic/JJ
lottery/NN
,/,
ever/RB
./.

But/CC
.../F
MD5/NNP
is/VBZ
broken/VBN

Sometimes/RB
the/DT
fact/NN
that/IN
its/PRP$
broken/JJ
does/VBZ
not/RB
matter/VB
./.

As/IN
it/PRP
stands/VBZ
there/EX
are/VBP
no/RB
known/VBN
pre-image/JJ
or/CC
second/JJ
pre-image/JJ
attacks/NNS
on/IN
MD5/NNP
./.

So/RB
what/WP
is/VBZ
so/RB
broken/JJ
about/IN
MD5/NNP
,/,
you/PRP
may/MD
ask/VB
?/.

It/PRP
is/VBZ
possible/JJ
for/IN
a/DT
third/JJ
party/NN
to/TO
generate/VB
2/CD
messages/NNS
,/,
one/CD
of/IN
which/WDT
is/VBZ
EVIL/JJ
and/CC
another/DT
of/IN
which/WDT
is/VBZ
GOOD/JJ
that/IN
both/DT
hash/VBP
to/TO
the/DT
same/JJ
value/NN
./.

(/-LRB-
Collision/NN
attack/NN
)/-RRB-

Nonetheless/RB
,/,
the/DT
current/JJ
RSA/NNP
recommendation/NN
is/VBZ
not/RB
to/TO
use/VB
MD5/NNP
if/IN
you/PRP
need/VBP
pre-image/JJ
resistance/NN
./.

People/NNS
tend/VBP
to/TO
err/VB
on/IN
the/DT
side/NN
of/IN
caution/NN
when/WRB
it/PRP
comes/VBZ
to/TO
security/NN
algorithms/NNS
./.

So/RB
what/WP
hash/NN
function/NN
should/MD
I/PRP
use/VB
in/RP
.NET/NNP
?/.

Use/NN
MD5/NNP
if/IN
you/PRP
need/VBP
the/DT
speed/NN
//CC
size/NN
and/CC
do/VBP
n't/RB
care/VB
about/IN
birthday/NN
attacks/NNS
or/CC
pre-image/JJ
attacks/NNS
./.

Repeat/NN
this/DT
after/IN
me/PRP
,/,
there/EX
are/VBP
no/DT
chance/NN
MD5/NNP
collisions/NNS
,/,
malicious/JJ
collisions/NNS
can/MD
be/VB
carefully/RB
engineered/VBN
./.

Even/RB
though/IN
there/EX
are/VBP
no/DT
known/JJ
pre-image/JJ
attacks/NNS
to/TO
date/NN
on/IN
MD5/NNP
the/DT
line/NN
from/IN
the/DT
security/NN
experts/NNS
is/VBZ
that/IN
MD5/NNP
should/MD
not/RB
be/VB
used/VBN
where/WRB
you/PRP
need/VBP
to/TO
defend/VB
against/IN
pre-image/JJ
attacks/NNS
./.

SAME/PRP
goes/VBZ
for/IN
SHA1/NNP
./.

Keep/VB
in/IN
mind/NN
,/,
not/RB
all/DT
algorithms/NNS
need/VBP
to/TO
defend/VB
against/IN
pre-image/NN
or/CC
collision/NN
attacks/NNS
./.

Take/VB
the/DT
trivial/JJ
case/NN
of/IN
a/DT
first/JJ
pass/NN
search/NN
for/IN
duplicate/VB
files/NNS
on/IN
your/PRP$
HD/NN
./.

Use/VB
SHA2XX/NNP
based/JJ
function/NN
if/IN
you/PRP
want/VBP
a/DT
cryptographically/RB
secure/JJ
hash/NN
function/NN
./.

No/DT
one/PRP
ever/RB
found/VBD
any/DT
SHA512/NNP
collision/NN
./.

EVER/RB
./.

They/PRP
have/VBP
tried/VBN
really/RB
hard/RB
./.

For/IN
that/DT
matter/NN
no/DT
one/NN
ever/RB
found/VBD
any/DT
SHA256/NNP
or/CC
384/CD
collision/NN
ever/RB
./.

./.

Do/VBP
n't/RB
use/VB
SHA1/NNP
or/CC
RIPEMD/NNP
unless/IN
its/PRP$
for/IN
an/DT
interoperability/NN
scenario/NN
./.

RIPMED/NNP
has/VBZ
not/RB
received/VBN
the/DT
same/JJ
amount/NN
of/IN
scrutiny/NN
that/IN
SHAX/NNP
and/CC
MD5/NNP
has/VBZ
received/VBN
./.

Both/CC
SHA1/NNP
and/CC
RIPEMD/NNP
are/VBP
vulnerable/JJ
to/TO
birthday/NN
attacks/NNS
./.

They/PRP
are/VBP
both/DT
slower/JJR
than/IN
MD5/NNP
on/IN
.NET/NNP
and/CC
come/VB
in/IN
the/DT
awkward/JJ
20/CD
byte/NN
size/NN
./.

Its/PRP$
pointless/JJ
to/TO
use/VB
these/DT
functions/NNS
,/,
forget/VBP
about/IN
them/PRP
./.

SHA1/NNP
collision/NN
attacks/NNS
are/VBP
down/RB
to/TO
2/CD
^/SYM
52/CD
,/,
its/PRP$
not/RB
going/VBG
to/TO
be/VB
too/RB
long/RB
until/IN
SHA1/NNP
collisions/NNS
are/VBP
out/RB
in/IN
the/DT
wild/JJ
./.

For/IN
up/RB
to/TO
date/NN
information/NN
about/IN
the/DT
various/JJ
hash/NN
functions/NNS
have/VBP
a/DT
look/NN
at/IN
the/DT
hash/NN
function/NN
zoo/NN
./.

But/CC
wait/VB
there/EX
is/VBZ
more/JJR

Having/VBG
a/DT
fast/JJ
hash/NN
function/NN
can/MD
be/VB
a/DT
curse/NN
./.

For/IN
example/NN
:/:
a/DT
very/RB
common/JJ
usage/NN
for/IN
hash/NN
functions/NNS
is/VBZ
password/NN
storage/NN
./.

Essentially/RB
,/,
you/PRP
calculate/VBP
hash/NN
of/IN
a/DT
password/NN
combined/VBN
with/IN
a/DT
known/JJ
random/JJ
string/NN
(/-LRB-
to/TO
impede/VB
rainbow/NN
attacks/NNS
)/-RRB-
and/CC
store/NN
that/WDT
hash/NN
in/IN
the/DT
database/NN
./.

The/DT
problem/NN
is/VBZ
,/,
that/IN
if/IN
an/DT
attacker/NN
gets/VBZ
a/DT
dump/NN
of/IN
the/DT
database/NN
,/,
he/PRP
can/MD
,/,
quite/RB
effectively/RB
guess/VB
passwords/NNS
using/VBG
brute-force/NN
./.

Every/DT
combination/NN
he/PRP
tries/VBZ
only/RB
takes/VBZ
a/DT
fraction/NN
of/IN
millisecond/NN
,/,
and/CC
he/PRP
can/MD
try/VB
out/RP
hundreds/NNS
of/IN
thousands/NNS
of/IN
passwords/NNS
a/DT
second/NN
./.

To/TO
work/VB
around/IN
this/DT
issue/NN
,/,
the/DT
bcrypt/NN
algorithm/NN
can/MD
be/VB
used/VBN
,/,
it/PRP
is/VBZ
designed/VBN
to/TO
be/VB
slow/JJ
so/IN
the/DT
attacker/NN
will/MD
be/VB
heavily/RB
slowed/VBN
down/RP
if/IN
attacking/VBG
a/DT
system/NN
using/VBG
bcrypt/NN
./.

Recently/RB
scrypt/NN
has/VBZ
made/VBN
some/DT
headline/NN
and/CC
is/VBZ
considered/VBN
by/IN
some/DT
to/TO
be/VB
more/RBR
effective/JJ
than/IN
bcrypt/NN
but/CC
I/PRP
do/VBP
not/RB
know/VB
of/IN
a/DT
.Net/NNP
implementation/NN
./.

@Brian/USR
its/PRP$
fairly/RB
clear/JJ
that/IN
within/IN
the/DT
next/JJ
few/JJ
years/NNS
people/NNS
will/MD
be/VB
able/JJ
to/TO
run/VB
collision/NN
attacks/NNS
on/IN
SHA1/NNP
,/,
this/DT
effectively/RB
will/MD
make/VB
SHA1/NNP
as/RB
useful/JJ
as/IN
MD5/NNP
,/.

The/DT
CA/NN
certificate/NN
thing/NN
is/VBZ
a/DT
collision/NN
attack/NN
,/.

similarly/RB
in/IN
a/DT
few/JJ
years/NNS
people/NNS
will/MD
be/VB
able/JJ
to/TO
run/VB
the/DT
same/JJ
attack/NN
on/IN
SHA1/NNP
CA/NN
certificates/NNS
./.

The/DT
attack/NN
depends/VBZ
on/IN
a/DT
malicious/JJ
party/NN
creating/VBG
an/DT
EVIL/JJ
and/CC
a/DT
GOOD/JJ
certificate/NN
./.

There/EX
are/VBP
no/DT
known/JJ
primage/NN
attacks/NNS
on/IN
MD5/NNP
and/CC
the/DT
fact/NN
that/IN
there/EX
are/VBP
collision/NN
attacks/NNS
does/VBZ
not/RB
make/VB
pre-image/JJ
attacks/NNS
more/RBR
or/CC
less/RBR
likely/JJ
./.

@Mike/USR
I/PRP
'm/VBP
with/IN
you/PRP
on/IN
that/DT
,/,
that/WDT
was/VBD
kind/NN
of/IN
what/WP
I/PRP
was/VBD
digging/VBG
for/IN
with/IN
this/DT
question/NN
,/,
is/VBZ
something/NN
about/IN
the/DT
weaker/JJR
hash/NN
functions/NNS
so/RB
fundamentally/RB
broken/VBN
that/IN
they/PRP
should/MD
never/RB
be/VB
used/VBN
./.

Lots/NNS
of/IN
times/NNS
when/WRB
discussing/VBG
solutions/NNS
to/TO
problem/NN
I/PRP
mention/VBP
I/PRP
use/VBP
MD5/NNP
for/IN
quick/JJ
identity/NN
(/-LRB-
hashing/VBG
a/DT
string/NN
)/-RRB-
,/,
they/PRP
say/VBP
"/``
but/CC
md5/NNP
is/VBZ
broken/VBN
.../F
do/VBP
nt/RB
use/NN
it/PRP
,/,
use/VB
sha1/NNP
"/''
.../.

I/PRP
do/VBP
nt/RB
really/RB
subscribe/VB
to/TO
this/DT
was/VBD
wondering/VBG
if/IN
anything/NN
is/VBZ
so/RB
fundamentally/RB
broken/VBN
with/IN
some/DT
of/IN
the/DT
weaker/JJR
hashs/NNS
that/IN
they/PRP
should/MD
be/VB
avoided/VBN
.../.

eg/FW
real/JJ
works/NNS
cases/NNS
where/WRB
normal/JJ
data/NNS
produces/VBZ
collisions/NNS

@tvanfosson/USR
,/,
see/VB
my/PRP$
answer/NN

I/PRP
m/VBP
hoping/VBG
for/IN
things/NNS
like/IN
,/,
"/``
do/VBP
nt/RB
ever/RB
use/VBP
algorithm/NN
XYZ/C
cause/IN
its/PRP$
broken/JJ
"/''
,/,
"/``
always/RB
use/VBP
the/DT
most/RBS
secure/JJ
one/CD
cause/IN
the/DT
performance/NN
difference/NN
is/VBZ
negligible/JJ
"/''

eg./FW
if/IN
RIPEMD/NNP
is/VBZ
more/RBR
secure/JJ
than/IN
SHA1/NNP
and/CC
CPU/NN
cycles/NNS
are/VBP
not/RB
concern/NN
should/MD
it/PRP
not/RB
always/RB
be/VB
preferred/VBN
?/.

Updated/VBN
my/PRP$
question/NN
with/IN
the/DT
2/CD
subquestions/NNS
I/PRP
really/RB
want/VBP
answered/VBN

@mquander/USR
,/,
see/VB
my/PRP$
answer/NN
.../.

If/IN
the/DT
attackers/NNS
are/VBP
trying/VBG
to/TO
hack/VB
with/IN
the/DT
form/NN
via/IN
PHP/NNP
's/POS
$/C
_GET/C
variable/C
or/CC
with/IN
the/DT
URL/NN
's/POS
query/NN
string/NN
,/,
you/PRP
would/MD
be/VB
able/JJ
to/TO
catch/VB
them/PRP
if/IN
they/PRP
're/VBP
not/RB
secure/JJ
./.

RewriteCond/C
%/C
{/C
QUERY_STRING/C
}/C
(/C
[/C
0/C
-/C
9/C
]/C
+/C
)/C
=/C
(/C
[/C
0/C
-/C
9/C
]/C
+/C
)/C

RewriteRule/C
^/C
(/C
./C
*/C
)/C
^/C
//C
track.php/C

Because/IN
1/CD
=/SYM
1/CD
,/,
2/CD
=/SYM
2/CD
,/,
1/CD
=/SYM
2/CD
,/,
2/CD
=/SYM
1/CD
,/,
1/CD
+/SYM
1/CD
=/SYM
2/CD
,/,
etc/FW
.../F
are/VBP
the/DT
common/JJ
questions/NNS
to/TO
an/DT
SQL/NNP
database/NN
of/IN
an/DT
attacker/NN
./.

Maybe/RB
also/RB
it/PRP
's/VBZ
used/VBN
by/IN
many/JJ
hacking/NN
applications/NNS
./.

But/CC
you/PRP
must/MD
be/VB
careful/JJ
,/,
that/IN
you/PRP
must/MD
not/RB
rewrite/VB
a/DT
safe/JJ
query/NN
from/IN
your/PRP$
site/NN
./.

The/DT
code/NN
above/IN
is/VBZ
giving/VBG
you/PRP
a/DT
tip/NN
,/,
to/TO
rewrite/VB
or/CC
redirect/VB
(/-LRB-
it/PRP
depends/VBZ
on/IN
you/PRP
)/-RRB-
that/IN
hacking-specific/JJ
dynamic/JJ
query/NN
string/NN
into/IN
a/DT
page/NN
that/WDT
will/MD
store/VB
the/DT
attacker/NN
's/POS
IP/NNP
address/NN
,/,
or/CC
EVEN/JJ
THEIR/PRP$
COOKIES/NNS
,/,
history/NN
,/,
browser/NN
,/,
or/CC
any/DT
other/JJ
sensitive/JJ
information/NN
,/,
and/CC
try/VB
to/TO
hack/VB
them/PRP
back/RB
for/IN
security/NN
purposes/NNS
./.

I/PRP
'm/VBP
referring/VBG
to/TO
a/DT
query/NN
string/NN
that/WDT
's/VBZ
often/RB
used/VBN
by/IN
search/NN
engines/NNS
,/,
and/CC
giving/VBG
some/DT
tips/NNS
to/TO
catch/VB
the/DT
hacker/NN
tools/NNS
that/WDT
are/VBP
looking/VBG
for/IN
SQL/NNP
vulnerability/NN
via/IN
query/NN
string/NN
./.

And/CC
mostly/RB
,/,
to/TO
catch/VB
their/PRP$
sensitive/JJ
informations/NNS
./.

About/IN
POST/C
requests/NNS
?/.

Let/VB
the/DT
PHP/NNP
language/NN
do/VBP
the/DT
job/NN
../.

I/PRP
'm/VBP
just/RB
trying/VBG
to/TO
answer/VB
what/WP
the/DT
user/NN
's/POS
asking/NN
../.

At/IN
least/JJS
RewriteEngine/C NA
can/MD
able/JJ
to/TO
catch/VB
it/PRP
./.

@GaborGarami/USR
Yes/UH
I/PRP
agreed/VBD
../.

But/CC
the/DT
scenario/NN
is/VBZ
to/TO
catch/VB
the/DT
hacker/NN
,/,
to/TO
track/VB
it/PRP
,/,
mostly/RB
to/TO
get/VB
their/PRP$
private/JJ
information/NN
with/IN
their/PRP$
account/NN
./.

You/PRP
can/MD
even/RB
edit/VB
the/DT
answer/NN
,/,
for/IN
it/PRP
is/VBZ
in/IN
community/NN
wiki/NNP
../.

In/IN
Bjarne/NNP
Stroustrup/NNP
's/POS
The/DT
C++/C
Programming/NN
Language/NN
4th/CD
edition/NN
section/NN
36.3.6/CD
STL-like/JJ
Operations/NNS
the/DT
following/JJ
code/NN
is/VBZ
used/VBN
as/IN
an/DT
example/NN
of/IN
chaining/VBG
:/.

void/C
f2/C
(/C
)/C
{/C
std/C
::/C
string/C
s/C
=/C
"but I have heard it works even if you don't believe in it"/C
;/C
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
./C
replace/C
(/C
s/C
./C
find/C
(/C
"even"/C
)/C
,/C
4/C
,/C
"only"/C
)/C
./C
replace/C
(/C
s/C
./C
find/C
(/C
"don't"/C
)/C
,/C
6/C
,/C
""/C
)/C
;/C
assert/C
(/C
s/C
==/C
"I have heard it works only if you believe in it"/C
)/C
;/C
}/C

The/DT
assert/NN
fails/VBZ
in/IN
gcc/NNP
(/-LRB-
see/VB
it/PRP
live/VB
)/-RRB-
and/CC
Visual/NNP
Studio/NNP
(/-LRB-
see/VB
it/PRP
live/VB
)/-RRB-
,/,
but/CC
it/PRP
does/VBZ
not/RB
fail/VB
when/WRB
using/VBG
Clang/NNP
(/-LRB-
see/VB
it/PRP
live/VB
)/-RRB-
./.

Why/WRB
am/VBP
I/PRP
getting/VBG
different/JJ
results/NNS
?/.

Are/VBP
any/DT
of/IN
these/DT
compilers/NNS
incorrectly/RB
evaluating/VBG
the/DT
chaining/VBG
expression/NN
or/CC
does/VBZ
this/DT
code/NN
exhibit/VBP
some/DT
form/NN
of/IN
unspecified/JJ
or/CC
undefined/JJ
behavior/NN
?/.

The/DT
code/NN
exhibits/VBZ
unspecified/JJ
behavior/NN
due/JJ
to/TO
unspecified/JJ
order/NN
of/IN
evaluation/NN
of/IN
sub-expressions/NNS
although/IN
it/PRP
does/VBZ
not/RB
invoke/VB
undefined/JJ
behavior/NN
since/IN
all/DT
side/JJ
effects/NNS
are/VBP
done/VBN
within/IN
functions/NNS
which/WDT
introduces/VBZ
a/DT
sequencing/NN
relationship/NN
between/IN
the/DT
side/JJ
effects/NNS
in/IN
this/DT
case/NN
./.

This/DT
example/NN
is/VBZ
mentioned/VBN
in/IN
the/DT
proposal/NN
N4228/C
:/:
Refining/VBG
Expression/NN
Evaluation/NN
Order/NN
for/IN
Idiomatic/NN
C++/NNP
which/WDT
says/VBZ
the/DT
following/NN
about/IN
the/DT
code/NN
in/IN
the/DT
question/NN
:/.

[/-LRB-
.../F
]/-RRB-
This/DT
code/NN
has/VBZ
been/VBN
reviewed/VBN
by/IN
C++/NNP
experts/NNS
world-wide/JJ
,/,
and/CC
published/VBN
(/-LRB-
The/DT
C++/NNP
Programming/NN
Language/NN
,/,
4th/CD
edition/NN
./.
)/-RRB-

Yet/RB
,/,
its/PRP$
vulnerability/NN
to/TO
unspecified/JJ
order/NN
of/IN
evaluation/NN
has/VBZ
been/VBN
discovered/VBN
only/RB
recently/RB
by/IN
a/DT
tool/NN
[/-LRB-
.../F
]/-RRB-

Details/NNS

It/PRP
may/MD
be/VB
obvious/JJ
to/TO
many/JJ
that/IN
arguments/NNS
to/TO
functions/NNS
have/VBP
an/DT
unspecified/JJ
order/NN
of/IN
evaluation/NN
but/CC
it/PRP
is/VBZ
probably/RB
not/RB
as/IN
obvious/JJ
how/WRB
this/DT
behavior/NN
interacts/VBZ
with/IN
chained/VBN
functions/NNS
calls/NNS
./.

It/PRP
was/VBD
not/RB
obvious/JJ
to/TO
me/PRP
when/WRB
I/PRP
first/RB
analyzed/VBD
this/DT
case/NN
and/CC
apparently/RB
not/RB
to/TO
all/PDT
the/DT
expert/JJ
reviewers/NNS
either/RB
./.

At/IN
first/JJ
glance/NN
it/PRP
may/MD
appear/VB
that/IN
since/IN
each/DT
replace/VBP
has/VBZ
to/TO
be/VB
evaluated/VBN
from/IN
left/NN
to/TO
right/NN
that/IN
the/DT
corresponding/JJ
function/NN
argument/NN
groups/NNS
must/MD
be/VB
evaluated/VBN
as/IN
groups/NNS
from/IN
left/VBN
to/TO
right/RB
as/RB
well/RB
./.

This/DT
is/VBZ
incorrect/JJ
,/,
function/NN
arguments/NNS
have/VBP
an/DT
unspecified/JJ
order/NN
of/IN
evaluation/NN
,/,
although/IN
chaining/VBG
function/NN
calls/NNS
does/VBZ
introduce/VB
a/DT
left/NN
to/TO
right/JJ
evaluation/NN
order/NN
for/IN
each/DT
function/NN
call/NN
,/,
the/DT
arguments/NNS
of/IN
each/DT
function/NN
call/NN
are/VBP
only/RB
sequenced/VBN
before/RB
with/IN
respect/NN
to/TO
the/DT
member/NN
function/NN
call/VBP
they/PRP
are/VBP
part/NN
of/IN
./.

In/IN
particular/JJ
this/DT
impacts/VBZ
the/DT
following/JJ
calls/NNS
:/:
s.find/C
(/C
"even"/C
)/C
and/CC
:/:
s.find/C
(/C
"don't"/C
)/C
which/WDT
are/VBP
indeterminately/RB
sequenced/VBN
with/IN
respect/NN
to/TO
:/:
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C

the/DT
two/CD
find/C NA
calls/NNS
could/MD
be/VB
evaluated/VBN
before/IN
or/CC
after/IN
the/DT
replace/C NA
,/,
which/WDT
matters/VBZ
since/IN
it/PRP
has/VBZ
a/DT
side/JJ
effect/NN
on/IN
s/C NA
in/IN
a/DT
way/NN
that/WDT
would/MD
alter/VB
the/DT
result/NN
of/IN
find/C NA
,/,
it/PRP
changes/VBZ
the/DT
length/NN
of/IN
s/C NA
./.

So/RB
depending/VBG
on/IN
when/WRB
that/WDT
replace/C NA
is/VBZ
evaluated/VBN
relative/JJ
to/TO
the/DT
two/CD
find/C NA
calls/NNS
the/DT
result/NN
will/MD
differ/VB
./.

If/IN
we/PRP
look/VBP
at/IN
the/DT
chaining/VBG
expression/NN
and/CC
examine/VB
the/DT
evaluation/NN
order/NN
of/IN
some/DT
of/IN
the/DT
sub-expressions/NNS
:/.

s.replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
./C
replace/C
(/C
s/C
./C
find/C
(/C
"even"/C
)/C
,/C
4/C
,/C
"only"/C
)/C

^/C
^/C
^/C
^/C
^/C
^/C
^/C
^/C
^/C

A/C
B/C
|/C
|/C
|/C
C/C
|/C
|/C
|/C

1/C
2/C
3/C
4/C
5/C
6/C

and/CC
:/.

./C
replace/C
(/C
s/C
./C
find/C
(/C
"don't"/C
)/C
,/C
6/C
,/C
""/C
)/C
;/C

^/C
^/C
^/C
^/C

D/C
|/C
|/C
|/C

7/C
8/C
9/C

Note/VBP
,/,
we/PRP
are/VBP
ignoring/VBG
the/DT
fact/NN
that/IN
4/CD
and/CC
7/CD
can/MD
be/VB
further/RB
broken/VBN
down/RP
into/IN
more/JJR
sub-expressions/NNS
./.

So/RB
:/.

A/C NA
is/VBZ
sequenced/VBN
before/IN
B/C NA
which/WDT
is/VBZ
sequenced/VBN
before/IN
C/C NA
which/WDT
is/VBZ
sequenced/VBN
before/IN
D/C NA

1/CD
to/TO
9/CD
are/VBP
indeterminately/RB
sequenced/VBN
with/IN
respect/NN
to/TO
other/JJ
sub-expressions/NNS
with/IN
some/DT
of/IN
the/DT
exceptions/NNS
listed/VBN
below/IN

1/CD
to/TO
3/CD
are/VBP
sequenced/VBN
before/IN
B/C NA

4/CD
to/TO
6/CD
are/VBP
sequenced/VBN
before/IN
C/C NA

7/CD
to/TO
9/CD
are/VBP
sequenced/VBN
before/IN
D/C NA

The/DT
key/NN
to/TO
this/DT
issue/NN
is/VBZ
that/IN
:/.

4/CD
to/TO
9/CD
are/VBP
indeterminately/RB
sequenced/VBN
with/IN
respect/NN
to/TO
B/C NA

The/DT
potential/JJ
order/NN
of/IN
evaluation/NN
choice/NN
for/IN
4/CD
and/CC
7/CD
with/IN
respect/NN
to/TO
B/NN
explains/VBZ
the/DT
difference/NN
in/IN
results/NNS
between/IN
clang/NNP
and/CC
gcc/NNP
when/WRB
evaluating/VBG
f2/C NA
(/C NA
)/C NA
./.

In/IN
my/PRP$
tests/NNS
clang/NNP
evaluates/VBZ
B/C NA
before/IN
evaluating/VBG
4/CD
and/CC
7/CD
while/IN
gcc/NNP
evaluates/VBZ
it/PRP
after/IN
./.

We/PRP
can/MD
use/VB
the/DT
following/JJ
test/NN
program/NN
to/TO
demonstrate/VB
what/WP
is/VBZ
happening/VBG
in/IN
each/DT
case/NN
:/.

#include/C
<iostream>/C

#include/C
<string>/C

std/C
::/C
string/C
::/C
size_type/C
my_find/C
(/C
std/C
::/C
string/C
s/C
,/C
const/C
char/C
*/C
cs/C
)/C
{/C
std/C
::/C
string/C
::/C
size_type/C
pos/C
=/C
s/C
./C
find/C
(/C
cs/C
)/C
;/C
std/C
::/C
cout/C
<</C
"position"/C
<</C
cs/C
<</C
"found in complete expression: "/C
<</C
pos/C
<</C
std/C
::/C
endl/C
;/C
return/C
pos/C
;/C
}/C

int/C
main/C
(/C
)/C
{/C
std/C
::/C
string/C
s/C
=/C
"but I have heard it works even if you don't believe in it"/C
;/C
std/C
::/C
string/C
copy_s/C
=/C
s/C
;/C
std/C
::/C
cout/C
<</C
"position of even before s.replace(0, 4, \"\"): "/C
<</C
s/C
./C
find/C
(/C
"even"/C
)/C
<</C
std/C
::/C
endl/C
;/C
std/C
::/C
cout/C
<</C
"position of don't before s.replace(0 ,4 ,\"\"): "/C
<</C
s/C
./C
find/C
(/C
"don't"/C
)/C
<</C
std/C
::/C
endl/C
<</C
std/C
::/C
endl/C
;/C
copy_s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
;/C
std/C
::/C
cout/C
<</C
"position of even after s.replace(0 ,4 ,\"\" ): "/C
<</C
copy_s/C
./C
find/C
(/C
"even"/C
)/C
<</C
std/C
::/C
endl/C
;/C
std/C
::/C
cout/C
<</C
"position of don't after s.replace(0 ,4 ,\"\" ): "/C
<</C
copy_s/C
./C
find/C
(/C
" don't"/C
)/C
<</C
std/C
::/C
endl/C
<</C
std/C
::/C
endl/C
;/C
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
./C
replace/C
(/C
my_find/C
(/C
s/C
,/C
"even"/C
)/C
,/C
4/C
,/C
"only"/C
)/C
./C
replace/C
(/C
my_find/C
(/C
s/C
,/C
" don't"/C
)/C
,/C
6/C
,/C
""/C
)/C
;/C
std/C
::/C
cout/C
<</C
"Result: "/C
<</C
s/C
<</C
std/C
::/C
endl/C
;/C
}/C

Result/NN
for/IN
gcc/NNP
(/-LRB-
see/VB
it/PRP
live/JJ
)/-RRB-

position/NN
of/IN
even/RB
before/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
26/CD

position/NN
of/IN
do/VBP
n't/RB
before/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
37/CD

position/NN
of/IN
even/RB
after/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
22/CD

position/NN
of/IN
do/VBP
n't/RB
after/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
33/CD

position/NN
do/VBP
n't/RB
found/VBN
in/IN
complete/JJ
expression/NN
:/:
37/CD

position/NN
even/RB
found/VBN
in/IN
complete/JJ
expression/NN
:/:
26/CD

Result/NN
:/:
I/PRP
have/VBP
heard/VBN
it/PRP
works/VBZ
evenonlyyou/FW
donieve/FW
in/IN
it/PRP

Result/NN
for/IN
clang/NNP
(/-LRB-
see/VB
it/PRP
live/JJ
)/-RRB-
:/.

position/NN
of/IN
even/RB
before/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
26/CD

position/NN
of/IN
do/VBP
n't/RB
before/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
37/CD

position/NN
of/IN
even/RB
after/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
22/CD

position/NN
of/IN
do/VBP
n't/RB
after/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
33/CD

position/NN
even/RB
found/VBN
in/IN
complete/JJ
expression/NN
:/:
22/CD

position/NN
do/VBP
n't/RB
found/VBN
in/IN
complete/JJ
expression/NN
:/:
33/CD

Result/NN
:/:
I/PRP
have/VBP
heard/VBN
it/PRP
works/VBZ
only/RB
if/IN
you/PRP
believe/VBP
in/IN
it/PRP

Result/NN
for/IN
Visual/NNP
Studio/NNP
(/-LRB-
see/VB
it/PRP
live/JJ
)/-RRB-
:/.

position/NN
of/IN
even/RB
before/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
26/CD

position/NN
of/IN
do/VBP
n't/RB
before/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
37/CD

position/NN
of/IN
even/RB
after/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
22/CD

position/NN
of/IN
do/VBP
n't/RB
after/IN
s/C
./C
replace/C
(/C
0/C
,/C
4/C
,/C
""/C
)/C
:/:
33/CD

position/NN
do/VBP
n't/RB
found/VBN
in/IN
complete/JJ
expression/NN
:/:
37/CD

position/NN
even/RB
found/VBN
in/IN
complete/JJ
expression/NN
:/:
26/CD

Result/NN
:/:
I/PRP
have/VBP
heard/VBN
it/PRP
works/VBZ
evenonlyyou/FW
donieve/FW
in/IN
it/PRP

Details/NNS
from/IN
the/DT
standard/NN

We/PRP
know/VBP
that/IN
unless/IN
specified/VBN
the/DT
evaluations/NNS
of/IN
sub-expressions/NNS
are/VBP
unsequenced/JJ
,/,
this/DT
is/VBZ
from/IN
the/DT
draft/NN
C++/NNP
11/CD
standard/JJ
section/NN
1.9/CD
Program/NN
execution/NN
which/WDT
says/VBZ
:/.

Except/IN
where/WRB
noted/VBN
,/,
evaluations/NNS
of/IN
operands/NNS
of/IN
individual/JJ
operators/NNS
and/CC
of/IN
subexpressions/NNS
of/IN
individual/JJ
expressions/NNS
are/VBP
unsequenced/JJ
./.

[/-LRB-
.../F
]/-RRB-

and/CC
we/PRP
know/VBP
that/IN
a/DT
function/NN
call/NN
introduces/VBZ
a/DT
sequenced/VBN
before/RB
relationship/NN
of/IN
the/DT
function/NN
calls/VBZ
postfix/NN
expression/NN
and/CC
arguments/NNS
with/IN
respect/NN
to/TO
the/DT
function/NN
body/NN
,/,
from/IN
section/NN
1.9/CD
:/.

[/-LRB-
.../F
]/-RRB-
When/WRB
calling/VBG
a/DT
function/NN
(/-LRB-
whether/IN
or/CC
not/RB
the/DT
function/NN
is/VBZ
inline/NN
)/-RRB-
,/,
every/DT
value/NN
computation/NN
and/CC
side/NN
effect/NN
associated/VBN
with/IN
any/DT
argument/NN
expression/NN
,/,
or/CC
with/IN
the/DT
postfix/NN
expression/NN
designating/VBG
the/DT
called/VBN
function/NN
,/,
is/VBZ
sequenced/VBN
before/IN
execution/NN
of/IN
every/DT
expression/NN
or/CC
statement/NN
in/IN
the/DT
body/NN
of/IN
the/DT
called/VBN
function/NN
./.

[/-LRB-
.../F
]/-RRB-

We/PRP
also/RB
know/VBP
that/IN
class/C NA
member/NN
access/NN
and/CC
therefore/RB
chaining/NN
will/MD
evaluate/VB
from/IN
left/NN
to/TO
right/NN
,/,
from/IN
section/NN
5.2.5/CD
Class/C NA
member/NN
access/NN
which/WDT
says/VBZ
:/.

[/-LRB-
.../F
]/-RRB-
The/DT
postfix/NN
expression/NN
before/IN
the/DT
dot/NN
or/CC
arrow/NN
is/VBZ
evaluated/VBN
;/:
64/CD
the/DT
result/NN
of/IN
that/DT
evaluation/NN
,/,
together/RB
with/IN
the/DT
id-expression/NN
,/,
determines/VBZ
the/DT
result/NN
of/IN
the/DT
entire/JJ
postfix/NN
expression/NN
./.

Note/VB
,/,
in/IN
the/DT
case/NN
where/WRB
the/DT
id-expression/NN
ends/VBZ
up/RP
being/VBG
a/DT
non-static/JJ
member/NN
function/NN
it/PRP
does/VBZ
not/RB
specify/VB
the/DT
order/NN
of/IN
evaluation/NN
of/IN
the/DT
expression-list/NN
within/IN
the/DT
(/-LRB-
)/-RRB-
since/IN
that/DT
is/VBZ
a/DT
separate/JJ
sub-expression/NN
./.

The/DT
relevant/JJ
grammar/NN
from/IN
5.2/CD
Postfix/NN
expressions/NNS
:/.

postfix-expression/C
:/C
postfix-expression/C
(/C
expression-listopt/C
)/C
///CCM
function/NN|CCM
call/VB|CCM
postfix-expression/C
./C
templateopt/C
id-expression/C
///CCM
Class/NN|CCM
member/NN|CCM
access/NN|CCM
,/,|CCM
ends/VBZ|CCM
///CCM
up/RB
as/IN|CCM
a/DT|CCM
postfix-expression/JJ|CCM

@MattMcNabb/USR
it/PRP
is/VBZ
pity/NN
I/PRP
did/VBD
not/RB
find/VB
this/DT
code/NN
organically/RB
it/PRP
is/VBZ
bit/RB
different/JJ
when/WRB
you/PRP
know/VBP
there/EX
is/VBZ
a/DT
problem/NN
with/IN
code/NN
versus/CC
seeing/VBG
code/NN
you/PRP
have/VBP
no/DT
preconceived/JJ
notions/NNS
about/IN
./.

I/PRP
have/VBP
to/TO
say/VB
,/,
it/PRP
was/VBD
not/RB
obvious/JJ
where/WRB
the/DT
specific/JJ
issue/NN
was/VBD
even/RB
though/IN
I/PRP
knew/VBD
what/WP
I/PRP
was/VBD
looking/VBG
for/IN
,/,
so/IN
I/PRP
can/MD
see/VB
how/WRB
it/PRP
could/MD
have/VB
been/VBN
missed/VBN
./.

@Peter/USR
Bailey/USR
:/:
I/PRP
agree/VBP
./.

"/``
Use/VB
Views/NNS
"/''
is/VBZ
bad/JJ
advice/NN
./.

It/PRP
's/VBZ
more/JJR
complex/NN
./.

If/IN
a/DT
DB/NN
supports/VBZ
materialized/JJ
views/NNS
,/,
then/RB
definitely/RB
,/,
use/VB
views/NNS
./.

Use/VB
them/PRP
liberally/RB
./.

If/IN
a/DT
DB/NN
does/VBZ
not/RB
,/,
do/VBP
not/RB
use/VB
views/NNS
./.

And/CC
while/IN
MySQL/NNP
claims/VBZ
they/PRP
have/VBP
materialized/JJ
views/NNS
,/,
upon/IN
closer/JJR
examination/NN
,/,
they/PRP
do/VBP
not/RB
,/,
not/RB
in/IN
the/DT
ways/NNS
that/IN
matter/NN
,/,
not/RB
in/IN
the/DT
way/NN
Oracle/NNP
,/,
MSSQL/NNP
and/CC
PGSQL/NNP
do/VBP
./.

With/IN
#/SYM
3/CD
you/PRP
are/VBP
not/RB
being/VBG
honest/JJ
./.

There/EX
are/VBP
more/JJR
downsides/NNS
to/TO
the/DT
artificial/JJ
key/NN
than/IN
"/``
you/PRP
may/MD
not/RB
need/VB
it/PRP
./.
"/''

Specifically/RB
,/,
using/VBG
a/DT
natural/JJ
key/NN
will/MD
give/VB
you/PRP
the/DT
ability/NN
to/TO
control/VB
the/DT
order/NN
in/IN
which/WDT
data/NNS
in/IN
your/PRP$
table/NN
is/VBZ
written/VBN
to/TO
the/DT
disk/NN
./.

If/IN
you/PRP
know/VBP
how/WRB
your/PRP$
table/NN
will/MD
be/VB
queried/VBN
,/,
you/PRP
can/MD
index/VB
it/PRP
so/RB
concurrently-accessed/JJ
rows/NNS
will/MD
end-up/VB
in/IN
the/DT
same/JJ
page/NN
./.

Furthermore/RB
,/,
you/PRP
can/MD
enforce/VB
data/NN
integrity/NN
using/VBG
a/DT
unique/JJ
composite/JJ
index/NN
./.

If/IN
you/PRP
need/VBP
this/DT
you/PRP
will/MD
have/VB
to/TO
add/VB
it/PRP
in/IN
addition/NN
to/TO
your/PRP$
artificial/JJ
key/NN
index/NN
./.

If/IN
said/VBD
composite/JJ
index/NN
is/VBZ
your/PRP$
pkey/NN
it/PRP
's/VBZ
2/CD
birds/NNS
killed/VBN
with/IN
one/CD
stone/NN
./.

Not/RB
understanding/VBG
how/WRB
a/DT
DBMS/NN
works/VBZ
under/IN
the/DT
hood/NN
./.

You/PRP
can/MD
not/RB
properly/RB
drive/VB
a/DT
stick/NN
without/IN
understanding/VBG
how/WRB
a/DT
clutch/NN
works/VBZ
./.

And/CC
you/PRP
can/MD
not/RB
understand/VB
how/WRB
to/TO
use/VB
a/DT
Database/NN
without/IN
understanding/VBG
that/IN
you/PRP
are/VBP
really/RB
just/RB
writing/VBG
to/TO
a/DT
file/NN
on/IN
your/PRP$
hard/JJ
disk/NN
./.

Specifically/RB
:/.

Do/VBP
you/PRP
know/VB
what/WP
a/DT
Clustered/JJ
Index/NN
is/VBZ
?/.

Did/VBD
you/PRP
think/VBP
about/IN
it/PRP
when/WRB
you/PRP
designed/VBD
your/PRP$
schema/NN
?/.

Do/VBP
you/PRP
know/VB
how/WRB
to/TO
use/VB
indexes/NNS
properly/RB
?/.

How/WRB
to/TO
reuse/VB
an/DT
index/NN
?/.

Do/VBP
you/PRP
know/VB
what/WP
a/DT
Covering/JJ
Index/NN
is/VBZ
?/.

So/IN
great/UH
,/,
you/PRP
have/VBP
indexes/NNS
./.

How/WRB
big/JJ
is/VBZ
1/CD
row/NN
in/IN
your/PRP$
index/NN
?/.

How/WRB
big/JJ
will/MD
the/DT
index/NN
be/VB
when/WRB
you/PRP
have/VBP
a/DT
lot/NN
of/IN
data/NNS
?/.

Will/MD
that/WDT
fit/VBP
easily/RB
into/IN
memory/NN
?/.

If/IN
it/PRP
wo/MD
n't/RB
it/PRP
's/VBZ
useless/JJ
as/IN
an/DT
index/NN
./.

Have/VBP
you/PRP
ever/RB
used/VBD
EXPLAIN/C NA
in/IN
MySQL/NNP
?/.

Great/UH
./.

Now/RB
be/VB
honest/JJ
with/IN
yourself/PRP
:/:
Did/VBD
you/PRP
understand/VBP
even/RB
half/NN
of/IN
what/WP
you/PRP
saw/VBD
?/.

No/RB
,/,
you/PRP
probably/RB
did/VBD
n't/RB
./.

Fix/VB
that/DT
./.

Do/VBP
you/PRP
understand/VB
the/DT
Query/NN
Cache/NN
?/.

Do/VBP
you/PRP
know/VB
what/WP
makes/VBZ
a/DT
query/NN
un-cachable/JJ
?/.

Are/VBP
you/PRP
using/VBG
MyISAM/NNP
?/.

If/IN
you/PRP
NEED/VBP
full/JJ
text/NN
search/NN
,/,
MyISAM/NNP
's/POS
is/VBZ
crap/NN
anyway/RB
./.

Use/VB
Sphinx/NNP
./.

Then/RB
switch/VB
to/TO
Inno/NNP
./.

I/PRP
disagree/VBP
./.

I/PRP
do/VBP
n't/RB
think/VB
you/PRP
can/MD
optimally/RB
use/VB
a/DT
clutch/NN
without/IN
understanding/VBG
how/WRB
it/PRP
works/VBZ
./.

That/DT
was/VBD
a/DT
belief/NN
passed/VBD
down/RB
3/CD
generations/NNS
in/IN
my/PRP$
family/NN
and/CC
one/CD
I/PRP
have/VBP
experienced/VBN
first-hand/JJ
./.

The/DT
difference/NN
,/,
the/DT
way/NN
I/PRP
was/VBD
able/JJ
to/TO
drive/VB
the/DT
car/NN
,/,
after/IN
I/PRP
rebuilt/VBP
the/DT
clutch/NN
with/IN
my/PRP$
father/NN
,/,
was/VBD
night/NN
and/CC
day/NN
./.

Keychains/NNS
need/VBP
to/TO
be/VB
unlocked/VBN
before/IN
they/PRP
can/MD
be/VB
used/VBN
./.

You/PRP
can/MD
use/VB
security/C NA
unlock-keychain/C NA
to/TO
unlock/VB
./.

You/PRP
can/MD
do/VB
that/DT
interactively/RB
(/-LRB-
safer/JJR
)/-RRB-
or/CC
by/IN
specifying/VBG
the/DT
password/NN
on/IN
the/DT
command/NN
line/NN
(/-LRB-
unsafe/JJ
)/-RRB-
,/,
e.g./FW
:/.

security/C
unlock-keychain/C
-/C
p/C
mySecretPassword/C
.../F

Obviously/RB
,/,
putting/VBG
this/DT
into/IN
a/DT
script/NN
compromises/VBZ
the/DT
security/NN
of/IN
that/DT
keychain/NN
,/,
so/RB
often/RB
people/NNS
setup/VB
an/DT
individual/JJ
keychain/NN
with/IN
only/RB
the/DT
signing/NN
credentials/NNS
to/TO
minimize/VB
such/JJ
damage/NN
./.

Typically/RB
in/IN
Terminal/NN
the/DT
keychain/NN
is/VBZ
already/RB
unlocked/VBN
by/IN
your/PRP$
session/NN
,/,
since/IN
the/DT
default/JJ
keychain/NN
is/VBZ
unlocked/VBN
on/IN
login/VB
,/,
so/IN
you/PRP
do/VBP
n't/RB
need/VB
to/TO
do/VB
that/DT
./.

However/RB
,/,
any/DT
process/NN
not/RB
run/VB
in/IN
your/PRP$
session/NN
wo/MD
n't/RB
have/VB
unlocked/VBN
keychain/NN
even/RB
if/IN
it/PRP
has/VBZ
you/PRP
as/IN
the/DT
user/NN
(/-LRB-
most/RBS
commonly/RB
this/DT
affects/VBZ
ssh/NN
,/,
but/CC
also/RB
any/DT
other/JJ
process/NN
)/-RRB-
./.

Have/VBP
you/PRP
used/VBD
the/DT
default/JJ
keychain/NN
as/IN
in/IN
my/PRP$
example/NN
above/IN
?/.

Note/VB
that/IN
for/IN
custom/JJ
keychains/NNS
you/PRP
need/VBP
to/TO
set/VB
them/PRP
up/RP
to/TO
be/VB
on/IN
the/DT
search/NN
path/NN
first/RB
,/,
so/RB
try/VB
the/DT
default/JJ
keychain/NN
first/RB
./.

Also/RB
note/VBP
that/IN
there/EX
is/VBZ
no/JJ
-/C NA
k/C NA
argument/NN
to/TO
unlock-keychain/C NA
so/IN
whatever/WDT
you/PRP
're/VBP
trying/VBG
to/TO
do/VB
does/VBZ
n't/RB
seem/VB
right/JJ
(/-LRB-
see/VB
security/C NA
help/C NA
unlock-keychain/C NA
)/-RRB-
./.

It/PRP
's/VBZ
entirely/RB
different/JJ
from/IN
the/DT
original/JJ
question/NN
.../.

To/TO
start/VB
with/IN
,/,
you/PRP
should/MD
login/VB
as/IN
jenkins/NNP
(/-LRB-
e.g./FW
via/IN
sudo/C NA
-/C NA
u/C NA
jenkins/C NA
bash/C
)/-RRB-
and/CC
check/NN
that/IN
you/PRP
have/VBP
the/DT
permissions/NNS
on/IN
the/DT
whole/JJ
path/NN
right/NN
./.

You/PRP
did/VBD
a/DT
lot/NN
of/IN
things/NNS
you/PRP
did/VBD
n't/RB
say/VB
(/-LRB-
like/IN
using/VBG
dscl/NNP
to/TO
create/VB
the/DT
user/NN
)/-RRB-
so/IN
you/PRP
're/VBP
really/RB
on/IN
your/PRP$
own/JJ
./.

You/PRP
will/MD
also/RB
want/VB
to/TO
check/VB
the/DT
home/NN
setting/NN
(/-LRB-
depending/VBG
whether/IN
you/PRP
set/VBP
the/DT
shell/NN
or/CC
not/RB
you/PRP
can/MD
use/VB
sudo/C NA
-/C NA
u/C NA
jenkins/C NA
-/C NA
i/C NA
to/TO
get/VB
corresponding/JJ
login/NN
settings/NNS
)/-RRB-
./.

An/DT
issue/NN
not/RB
yet/RB
mentioned/VBN
in/IN
this/DT
answer/NN
's/POS
list/NN
is/VBZ
that/IN
if/IN
a/DT
computation/NN
yields/VBZ
a/DT
"/``
not/RB
a/DT
number/NN
"/''
result/NN
,/,
that/DT
answer/NN
will/MD
compare/VB
unequal/JJ
to/TO
itself/PRP
./.

That/DT
's/VBZ
not/RB
an/DT
issue/NN
when/WRB
comparing/VBG
a/DT
variable/NN
to/TO
a/DT
constant/NN
that/WDT
is/VBZ
n't/RB
a/DT
NaN/NN
,/,
but/CC
can/MD
be/VB
an/DT
issue/NN
when/WRB
e.g./FW
testing/VBG
whether/IN
a/DT
floating-point/JJ
value/NN
is/VBZ
in/IN
a/DT
table/NN
./.

@hfossli/USR
:/:
The/DT
fundamental/JJ
question/NN
floating-point/JJ
equality/NN
tests/NNS
are/VBP
intended/VBN
to/TO
answer/NN
is/VBZ
generally/RB
"/``
In/IN
the/DT
absence/NN
of/IN
rounding/NN
errors/NNS
,/,
could/MD
two/CD
calculations/NNS
have/VBP
yielded/VBN
the/DT
same/JJ
result/NN
"/''
?/.

To/TO
determine/VB
that/IN
,/,
one/PRP
must/MD
know/VB
what/WP
sorts/NNS
of/IN
rounding/NN
errors/NNS
may/MD
have/VB
occurred/VBN
./.

Any/DT
"/``
general-purpose/JJ
"/''
comparison/NN
method/NN
is/VBZ
apt/NN
to/TO
either/RB
be/VB
way/RB
too/RB
tolerant/JJ
in/IN
cases/NNS
where/WRB
rounding/NN
errors/NNS
would/MD
have/VB
been/VBN
slight/JJ
,/,
or/CC
way/NN
too/RB
strict/JJ
in/IN
cases/NNS
where/WRB
they/PRP
could/MD
have/VB
been/VBN
severe/JJ
./.

In/IN
simplest/JJS
terms/NNS
:/:
without/IN
salting/NN
,/,
each/DT
candidate/NN
password/NN
need/MD
only/RB
be/VB
hashed/VBN
once/RB
to/TO
check/VB
it/PRP
against/IN
every/DT
user/NN
,/,
anywhere/RB
in/IN
the/DT
"/``
known/JJ
universe/NN
"/''
(/-LRB-
collection/NN
of/IN
compromised/VBN
databases/NNS
)/-RRB-
,/,
whose/WP$
password/NN
is/VBZ
hashed/VBN
via/IN
the/DT
same/JJ
algorithm/NN
./.

With/IN
salting/NN
,/,
if/IN
the/DT
number/NN
of/IN
possible/JJ
salt/NN
values/NNS
substantially/RB
exceeds/VBZ
the/DT
number/NN
of/IN
users/NNS
in/IN
the/DT
"/``
known/JJ
universe/NN
"/''
,/,
each/DT
candidate/NN
password/NN
must/MD
be/VB
hashed/VBN
separately/RB
for/IN
each/DT
user/NN
against/IN
whom/WP
it/PRP
will/MD
be/VB
tested/VBN
./.

Use/VB
prepared/JJ
statements/NNS
and/CC
parameterized/JJ
queries/NNS
./.

These/DT
are/VBP
SQL/NNP
statements/NNS
that/WDT
are/VBP
sent/VBN
to/TO
and/CC
parsed/VBN
by/IN
the/DT
database/NN
server/NN
separately/RB
from/IN
any/DT
parameters/NNS
./.

This/DT
way/NN
it/PRP
is/VBZ
impossible/JJ
for/IN
an/DT
attacker/NN
to/TO
inject/VB
malicious/JJ
SQL/NNP
./.

You/PRP
basically/RB
have/VBP
two/CD
options/NNS
to/TO
achieve/VB
this/DT
:/.

Using/VBG
PDO/NN
:/.

$/C
stmt/C
=/C
$/C
pdo/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
employees/C
WHERE/C
name/C
=/C
:name/C
'/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
array/C
(/C
'name'/C
=>/C
$/C
name/C
)/C
)/C
;/C

foreach/C
(/C
$/C
stmt/C
as/C
$/C
row/C
)/C
{/C
///CCM
do/VBP|CCM
something/NN|CCM
with/IN|CCM
$/C|CCM
row/C|CCM
}/C

Using/VBG
MySQLi/NNP
:/.

$/C
stmt/C
=/C
$/C
dbConnection/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
employees/C
WHERE/C
name/C
=/C
?/C
'/C
)/C
;/C

$/C
stmt/C
->/C
bind_param/C
(/C
's'/C
,/C
$/C
name/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
)/C
;/C

$/C
result/C
=/C
$/C
stmt/C
->/C
get_result/C
(/C
)/C
;/C

while/C
(/C
$/C
row/C
=/C
$/C
result/C
->/C
fetch_assoc/C
(/C
)/C
)/C
{/C
///CCM
do/VBP|CCM
something/NN|CCM
with/IN|CCM
$/C|CCM
row/C|CCM
}/C

Correctly/RB
setting/VBG
up/RP
the/DT
connection/NN

Note/VBP
that/WDT
when/WRB
using/VBG
PDO/NN
to/TO
access/VB
a/DT
MySQL/NNP
database/NN
real/JJ
prepared/JJ
statements/NNS
are/VBP
not/RB
used/VBN
by/IN
default/NN
./.

To/TO
fix/VB
this/DT
you/PRP
have/VBP
to/TO
disable/VB
the/DT
emulation/NN
of/IN
prepared/JJ
statements/NNS
./.

An/DT
example/NN
of/IN
creating/VBG
a/DT
connection/NN
using/VBG
PDO/NN
is/VBZ
:/.

$/C
dbConnection/C
=/C
new/C
PDO/C
(/C
'/C
mysql/C
:/C
dbname/C
=/C
dbtest/C
;/C
host/C
=/C
127.0.0.1/C
;/C
charset/C
=/C
utf8/C
'/C
,/C
'user'/C
,/C
'pass'/C
)/C
;/C

$/C
dbConnection/C
->/C
setAttribute/C
(/C
PDO/C
::/C
ATTR_EMULATE_PREPARES/C
,/C
false/C
)/C
;/C

$/C
dbConnection/C
->/C
setAttribute/C
(/C
PDO/C
::/C
ATTR_ERRMODE/C
,/C
PDO/C
::/C
ERRMODE_EXCEPTION/C
)/C
;/C

In/IN
the/DT
above/JJ
example/NN
the/DT
error/NN
mode/NN
is/VBZ
n't/RB
strictly/RB
necessary/JJ
,/,
but/CC
it/PRP
is/VBZ
advised/VBN
to/TO
add/VB
it/PRP
./.

This/DT
way/NN
the/DT
script/NN
will/MD
not/RB
stop/VB
with/IN
a/DT
Fatal/JJ
Error/NN
when/WRB
something/NN
goes/VBZ
wrong/JJ
./.

And/CC
it/PRP
gives/VBZ
the/DT
developer/NN
the/DT
chance/NN
to/TO
catch/VB
any/DT
error/NN
(/-LRB-
s/NNS
)/-RRB-
which/WDT
are/VBP
thrown/VBN
as/IN
PDOExceptions/C NA
./.

What/WP
is/VBZ
mandatory/JJ
however/RB
is/VBZ
the/DT
first/JJ
setAttribute/C
(/C
)/C
line/NN
,/,
which/WDT
tells/VBZ
PDO/NN
to/TO
disable/VB
emulated/VBN
prepared/JJ
statements/NNS
and/CC
use/VB
real/JJ
prepared/JJ
statements/NNS
./.

This/DT
makes/VBZ
sure/RB
the/DT
statement/NN
and/CC
the/DT
values/NNS
are/VBP
n't/RB
parsed/VBN
by/IN
PHP/NNP
before/IN
sending/VBG
it/PRP
to/TO
the/DT
MySQL/NNP
server/NN
(/-LRB-
giving/VBG
a/DT
possible/JJ
attacker/NN
no/DT
chance/NN
to/TO
inject/VB
malicious/JJ
SQL/NNP
)/-RRB-
./.

Although/IN
you/PRP
can/MD
set/VB
the/DT
charset/NN
in/IN
the/DT
options/NNS
of/IN
the/DT
constructor/NN
,/,
it/PRP
's/VBZ
important/JJ
to/TO
note/VB
that/IN
'/``
older/JJR
'/''
versions/NNS
of/IN
PHP/NNP
(/-LRB-
</SYM
5.3.6/CD
)/-RRB-
silently/RB
ignored/VBD
the/DT
charset/NN
parameter/NN
in/IN
the/DT
DSN/NNP
./.

Explanation/NN

What/WP
happens/VBZ
is/VBZ
that/IN
the/DT
SQL/NNP
statement/NN
you/PRP
pass/VBP
to/TO
prepare/VB
is/VBZ
parsed/VBN
and/CC
compiled/VBN
by/IN
the/DT
database/NN
server/NN
./.

By/IN
specifying/VBG
parameters/NNS
(/-LRB-
either/CC
a/DT
?/C NA
or/CC
a/DT
named/VBN
parameter/NN
like/IN
:name/C NA
in/IN
the/DT
example/NN
above/IN
)/-RRB-
you/PRP
tell/VBP
the/DT
database/NN
engine/NN
where/WRB
you/PRP
want/VBP
to/TO
filter/VB
on/IN
./.

Then/RB
when/WRB
you/PRP
call/VBP
execute/C NA
,/,
the/DT
prepared/JJ
statement/NN
is/VBZ
combined/VBN
with/IN
the/DT
parameter/NN
values/NNS
you/PRP
specify/VBP
./.

The/DT
important/JJ
thing/NN
here/RB
is/VBZ
that/IN
the/DT
parameter/NN
values/NNS
are/VBP
combined/VBN
with/IN
the/DT
compiled/VBN
statement/NN
,/,
not/RB
an/DT
SQL/NNP
string/NN
./.

SQL/NNP
injection/NN
works/VBZ
by/IN
tricking/VBG
the/DT
script/NN
into/IN
including/VBG
malicious/JJ
strings/NNS
when/WRB
it/PRP
creates/VBZ
SQL/NNP
to/TO
send/VB
to/TO
the/DT
database/NN
./.

So/RB
by/IN
sending/VBG
the/DT
actual/JJ
SQL/NNP
separately/RB
from/IN
the/DT
parameters/NNS
,/,
you/PRP
limit/VBP
the/DT
risk/NN
of/IN
ending/VBG
up/RP
with/IN
something/NN
you/PRP
did/VBD
n't/RB
intend/VB
./.

Any/DT
parameters/NNS
you/PRP
send/VBP
when/WRB
using/VBG
a/DT
prepared/JJ
statement/NN
will/MD
just/RB
be/VB
treated/VBN
as/IN
strings/NNS
(/-LRB-
although/IN
the/DT
database/NN
engine/NN
may/MD
do/VB
some/DT
optimization/NN
so/IN
parameters/NNS
may/MD
end/VB
up/RP
as/IN
numbers/NNS
too/RB
,/,
of/IN
course/NN
)/-RRB-
./.

In/IN
the/DT
example/NN
above/IN
,/,
if/IN
the/DT
$/C
name/C
variable/NN
contains/VBZ
'/``
Sarah/NNP
'/''
;/:
DELETE/C NA
FROM/C NA
employees/C NA
the/DT
result/NN
would/MD
simply/RB
be/VB
a/DT
search/NN
for/IN
the/DT
string/NN
"/``
'Sarah'/C
;/C
DELETE/C
FROM/C
employees/C
"/''
,/,
and/CC
you/PRP
will/MD
not/RB
end/VB
up/RP
with/IN
an/DT
empty/JJ
table/NN
./.

Another/DT
benefit/NN
with/IN
using/VBG
prepared/JJ
statements/NNS
is/VBZ
that/IN
if/IN
you/PRP
execute/VBP
the/DT
same/JJ
statement/NN
many/JJ
times/NNS
in/IN
the/DT
same/JJ
session/NN
it/PRP
will/MD
only/RB
be/VB
parsed/VBN
and/CC
compiled/VBN
once/RB
,/,
giving/VBG
you/PRP
some/DT
speed/NN
gains/NNS
./.

Oh/UH
,/,
and/CC
since/IN
you/PRP
asked/VBD
about/IN
how/WRB
to/TO
do/VB
it/PRP
for/IN
an/DT
insert/C NA
,/,
here/RB
's/VBZ
an/DT
example/NN
(/-LRB-
using/VBG
PDO/NN
)/-RRB-
:/.

$/C
preparedStatement/C
=/C
$/C
db/C
->/C
prepare/C
(/C
'/C
INSERT/C
INTO/C
table/C
(/C
column/C
)/C
VALUES/C
(/C
:column/C
)/C
'/C
)/C
;/C

$/C
preparedStatement/C
->/C
execute/C
(/C
array/C
(/C
'column'/C
=>/C
$/C
unsafeValue/C
)/C
)/C
;/C

php.net/manual/en/pdo.installation.php/URI
PDO/NN
is/VBZ
bundled/VBN
by/IN
default/NN
since/IN
PHP/NNP
5.1/CD
./.

Not/RB
all/DT
drivers/NNS
for/IN
all/DT
databases/NNS
may/MD
be/VB
installed/VBN
,/,
but/CC
if/IN
your/PRP$
host/NN
supports/VBZ
MySQL/NNP
and/CC
PHP/NNP
later/RB
than/IN
5.1/CD
it/PRP
would/MD
be/VB
very/RB
surprising/JJ
if/IN
it/PRP
did/VBD
n't/RB
have/VB
the/DT
MySQL/NNP
PDO/NN
driver/NN
installed/VBN
./.

Create/VB
a/DT
page/NN
with/IN
phpinfo/C NA
(/C NA
)/C NA
;/C NA
and/CC
view/VB
it/PRP
in/IN
a/DT
browser/NN
,/,
look/VB
for/IN
PDO/NN
and/CC
you/PRP
will/MD
see/VB
info/NN
on/IN
which/WDT
drivers/NNS
are/VBP
installed/VBN
./.

Can/MD
you/PRP
even/RB
use/VB
bound/JJ
parameters/NNS
without/IN
using/VBG
prepared/JJ
statements/NNS
?/.

There/EX
is/VBZ
no/DT
contradiction/NN
./.

Validate/VB
input/NN
,/,
and/CC
use/VB
parameterized/JJ
queries/NNS
./.

You/PRP
do/VBP
n't/RB
have/VB
to/TO
choose/VB
either/CC
or/CC
./.

Possible/JJ
Duplicate/NN
:/.

Need/VBD
some/DT
help/NN
understanding/NN
password/NN
salt/NN

Update/VB
:/:
Please/VB
note/VBP
I/PRP
am/VBP
not/RB
asking/VBG
what/WP
a/DT
salt/NN
is/VBZ
,/,
what/WP
a/DT
rainbow/NN
table/NN
is/VBZ
,/,
what/WP
a/DT
dictionary/NN
attack/NN
is/VBZ
,/,
or/CC
what/WP
the/DT
purpose/NN
of/IN
a/DT
salt/NN
is/VBZ
./.

I/PRP
am/VBP
querying/VBG
:/:
If/IN
you/PRP
know/VBP
the/DT
users/NNS
salt/NN
and/CC
hash/NN
,/,
is/VBZ
n't/RB
it/PRP
quite/RB
easy/JJ
to/TO
calculate/VB
their/PRP$
password/NN
?/.

I/PRP
understand/VBP
the/DT
process/NN
,/,
and/CC
implement/VB
it/PRP
myself/PRP
in/IN
some/DT
of/IN
my/PRP$
projects/NNS
./.

s/C
=/C
random/C
salt/C

storedPassword/C
=/C
sha1/C
(/C
password/C
+/C
s/C
)/C

In/IN
the/DT
database/NN
you/PRP
store/VBP
:/.

username/C
|/C
hashed_password/C
|/C
salt/C

Every/DT
implementation/NN
of/IN
salting/VBG
I/PRP
have/VBP
seen/VBN
adds/VBZ
the/DT
salt/NN
either/CC
at/IN
the/DT
end/NN
of/IN
the/DT
password/NN
,/,
or/CC
beginning/NN
:/.

hashed_Password/C
=/C
sha1/C
(/C
s/C
+/C
password/C
)/C

hashed_Password/C
=/C
sha1/C
(/C
password/C
+/C
s/C
)/C

Therfore/RB
,/,
a/DT
dictionary/NN
attack/NN
from/IN
a/DT
hacker/NN
who/WP
is/VBZ
worth/JJ
his/PRP$
salt/NN
(/-LRB-
ha/UH
ha/UH
)/-RRB-
would/MD
simply/RB
run/VB
each/DT
keyword/NN
against/IN
the/DT
stored/VBN
salts/NNS
in/IN
the/DT
common/JJ
combinations/NNS
listed/VBN
above/IN
./.

Surely/RB
the/DT
implementation/NN
described/VBN
above/RB
simply/RB
adds/VBZ
another/DT
step/NN
for/IN
the/DT
hacker/NN
,/,
without/IN
actually/RB
solving/VBG
the/DT
underlying/JJ
issue/NN
?/.

What/WDT
alternatives/NNS
are/VBP
there/EX
to/TO
step/VB
around/IN
this/DT
issue/NN
,/,
or/CC
am/VBP
I/PRP
misunderstanding/VBG
the/DT
problem/NN
?/.

The/DT
only/JJ
thing/NN
I/PRP
can/MD
think/VB
to/TO
do/VB
is/VBZ
have/VB
a/DT
secret/JJ
blending/NN
algorithm/NN
that/IN
laces/VBZ
the/DT
salt/NN
and/CC
password/NN
together/RB
in/IN
a/DT
random/JJ
pattern/NN
,/,
or/CC
adds/VBZ
other/JJ
user/NN
fields/NNS
to/TO
the/DT
hashing/NN
process/NN
meaning/VBG
the/DT
hacker/NN
would/MD
have/VB
to/TO
have/VB
access/NN
to/TO
the/DT
database/NN
AND/CC
code/NN
to/TO
lace/VB
them/PRP
for/IN
a/DT
dictionary/NN
attack/NN
to/TO
prove/VB
fruitful/JJ
./.

(/-LRB-
Update/NN
,/,
as/IN
pointed/VBN
out/RP
in/IN
comments/NNS
it/PRP
's/VBZ
best/JJS
to/TO
assume/VB
the/DT
hacker/NN
has/VBZ
access/NN
to/TO
all/DT
your/PRP$
information/NN
so/IN
this/DT
probably/RB
is/VBZ
n't/RB
best/RB
)/-RRB-
./.

Let/VB
me/PRP
give/VB
an/DT
example/NN
of/IN
how/WRB
I/PRP
propose/VBP
a/DT
hacker/NN
would/MD
hack/VB
a/DT
user/NN
database/NN
with/IN
a/DT
list/NN
of/IN
passwords/NNS
and/CC
hashes/NNS
:/.

Data/NNS
from/IN
our/PRP$
hacked/VBN
database/NN
:/.

RawPassword/C
(/C
not/C
stored/C
)/C
|/C
Hashed/C
|/C
Salt/C

--------------------------------------------------------/C

letmein/C
WEFLS/C
.../F
WEFOJFOFO/C
.../F

Common/JJ
password/NN
dictionary/NN
:/.

Common/C
Password/C

--------------/C

letmein/C
12345/C
.../F

For/IN
each/DT
user/NN
record/NN
,/,
loop/VB
the/DT
common/JJ
passwords/NNS
and/CC
hash/VB
them/PRP
:/.

for/C
each/C
user/C
in/C
hacked_DB/C
salt/C
=/C
users_salt/C
hashed_pw/C
=/C
users_hashed_password/C
for/C
each/C
common_password/C
testhash/C
=/C
sha1/C
(/C
common_password/C
+/C
salt/C
)/C
if/C
testhash/C
=/C
hashed_pw/C
then/C
///CCM
Match/UH|CCM
!/.|CCM
Users/NNS|CCM
password/NN|CCM
=/SYM|CCM
common_password/C|CCM
///CCM
Lets/VBZ|CCM
visit/VB|CCM
the/DT|CCM
webpage/NN|CCM
and/CC|CCM
login/VB|CCM
now/RB|CCM
./.|CCM
end/C
if/C
next/C
next/C

I/PRP
hope/VBP
this/DT
illustrates/VBZ
my/PRP$
point/NN
a/DT
lot/NN
better/RBR
./.

Given/VBN
10,000/CD
common/JJ
passwords/NNS
,/,
and/CC
10,000/CD
user/NN
records/NNS
,/,
we/PRP
would/MD
need/VB
to/TO
calculate/VB
100,000,000/CD
hashes/NNS
to/TO
discover/VB
as/IN
many/JJ
user/NN
passwords/NNS
as/IN
possible/JJ
./.

It/PRP
might/MD
take/VB
a/DT
few/JJ
hours/NNS
,/,
but/CC
it/PRP
's/VBZ
not/RB
really/RB
an/DT
issue/NN
./.

Update/VB
on/IN
Cracking/NN
Theory/NN

We/PRP
will/MD
assume/VB
we/PRP
are/VBP
a/DT
corrupt/JJ
webhost/NN
,/,
that/WDT
has/VBZ
access/NN
to/TO
a/DT
database/NN
of/IN
SHA1/NNP
hashes/NNS
and/CC
salts/NNS
,/,
along/IN
with/IN
your/PRP$
algorithm/NN
to/TO
blend/VB
them/PRP
./.

The/DT
database/NN
has/VBZ
10,000/CD
user/NN
records/NNS
./.

This/DT
site/NN
claims/VBZ
to/TO
be/VB
able/JJ
to/TO
calculate/VB
2,300,000,000/CD
SHA1/NNP
hashes/VBZ
per/IN
second/NN
using/VBG
the/DT
GPU/NN
./.

(/-LRB-
In/IN
real/JJ
world/NN
situation/NN
probably/RB
will/MD
be/VB
slower/JJR
,/,
but/CC
for/IN
now/RB
we/PRP
will/MD
use/VB
that/IN
quoted/VBN
figure/NN
)/-RRB-
./.

(/-LRB-
(/-LRB-
(/-LRB-
95/CD
^/SYM
4/CD
)/-RRB-
//SYM
2300000000/CD
)/-RRB-
//SYM
2/CD
)/-RRB-
*/SYM
10000/CD
=/SYM
177/CD
seconds/NNS

Given/VBN
a/DT
full/JJ
range/NN
of/IN
95/CD
printable/JJ
ASCII/NNP
characters/NNS
,/,
with/IN
a/DT
maximum/JJ
length/NN
of/IN
4/CD
characters/NNS
,/,
divided/VBN
by/IN
the/DT
rate/NN
of/IN
calculation/NN
(/-LRB-
variable/NN
)/-RRB-
,/,
divided/VBN
by/IN
2/CD
(/-LRB-
assuming/VBG
the/DT
average/JJ
time/NN
to/TO
discover/VB
password/NN
will/MD
on/IN
average/NN
require/VBP
50/CD
%/SYM
of/IN
permutations/NNS
)/-RRB-
for/IN
10,000/CD
users/NNS
it/PRP
would/MD
take/VB
177/CD
seconds/NNS
to/TO
work/VB
out/RP
all/DT
users/NNS
passwords/NNS
where/WRB
the/DT
length/NN
is/VBZ
</SYM
=/SYM
4/CD
./.

Let/VBZ
's/PRP
adjust/VBP
it/PRP
a/DT
bit/NN
for/IN
realism/NN
./.

(/-LRB-
(/-LRB-
(/-LRB-
36/CD
^/SYM
7/CD
)/-RRB-
//SYM
1000000000/CD
)/-RRB-
//SYM
2/CD
)/-RRB-
*/SYM
10000/CD
=/SYM
2/CD
days/NNS

Assuming/VBG
non/JJ
case/NN
sensitivity/NN
,/,
with/IN
a/DT
password/NN
length/NN
<=/SYM
7/CD
,/,
only/RB
alphanumeric/JJ
chars/NNS
,/,
it/PRP
would/MD
take/VB
4/CD
days/NNS
to/TO
solve/VB
for/IN
10,000/CD
user/NN
records/NNS
,/,
and/CC
I/PRP
've/VBP
halved/VBN
the/DT
speed/NN
of/IN
the/DT
algorithm/NN
to/TO
reflect/VB
overhead/JJ
and/CC
non/JJ
ideal/JJ
circumstance/NN
./.

It/PRP
is/VBZ
important/JJ
to/TO
recognise/VB
that/IN
this/DT
is/VBZ
a/DT
linear/JJ
brute/JJ
force/JJ
attack/NN
,/,
all/DT
calculations/NNS
are/VBP
independant/JJ
of/IN
one/CD
another/DT
,/,
therfore/RB
it/PRP
's/VBZ
a/DT
perfect/JJ
task/NN
for/IN
multiple/JJ
systems/NNS
to/TO
solve/VB
./.

(/-LRB-
IE/FW
easy/JJ
to/TO
set/VB
up/RP
2/CD
computers/NNS
running/VBG
attack/NN
from/IN
different/JJ
ends/NNS
that/WDT
would/MD
half/PDT
the/DT
exectution/NN
time/NN
)/-RRB-
./.

Given/VBN
the/DT
case/NN
of/IN
recursively/RB
hashing/VBG
a/DT
password/NN
1,000/CD
times/NNS
to/TO
make/VB
this/DT
task/NN
more/RBR
computationally/RB
expensive/JJ
:/.

(/-LRB-
(/-LRB-
(/-LRB-
36/CD
^/SYM
7/CD
)/-RRB-
//SYM
1/CD
000/CD
000/CD
000/CD
)/-RRB-
//SYM
2/CD
)/-RRB-
*/SYM
1000/CD
seconds/NNS
=/SYM
10.8839117/CD
hours/NNS

This/DT
represents/VBZ
a/DT
maximum/JJ
length/NN
of/IN
7/CD
alpha-numeric/JJ
characters/NNS
,/,
at/IN
a/DT
less/JJR
than/IN
half/JJ
speed/NN
execution/NN
from/IN
quoted/VBN
figure/NN
for/IN
one/CD
user/NN
./.

Recursively/RB
hashing/VBG
1,000/CD
times/NNS
effectively/RB
blocks/VBZ
a/DT
blanket/NN
attack/NN
,/,
but/CC
targetted/JJ
attacks/NNS
on/IN
user/NN
data/NNS
are/VBP
still/RB
vulnerable/JJ
./.

Thanks/VBZ
@be/USR
,/,
I/PRP
suppose/VBP
the/DT
point/NN
I/PRP
am/VBP
trying/VBG
to/TO
make/VB
is/VBZ
that/IN
it/PRP
is/VBZ
presented/VBN
as/IN
an/DT
extremely/RB
secure/JJ
method/NN
when/WRB
actually/RB
it/PRP
is/VBZ
n't/RB
,/,
it/PRP
just/RB
obscures/VBZ
the/DT
data/NNS
enough/RB
to/TO
make/VB
the/DT
hackers/NNS
job/NN
a/DT
little/RB
more/RBR
irritating/JJ

If/IN
a/DT
hacker/NN
has/VBZ
access/NN
to/TO
the/DT
salt/NN
+/CC
the/DT
hashed/VBN
password/NN
,/,
they/PRP
simply/RB
run/VBP
all/PDT
the/DT
salt/NN
+/CC
dictionary/NN
password/NN
combinations/NNS
,/,
for/IN
n/NN
dictionary/NN
passwords/NNS
you/PRP
need/VBP
to/TO
perform/VB
n/C NA
hashing/NN
calculations/NNS
per/IN
user/NN
account/NN
,/,
a/DT
lot/NN
more/RBR
computationally/RB
expensive/JJ
,/,
but/CC
perfectly/RB
easy/JJ
for/IN
a/DT
laptop/NN
to/TO
perform/VB
over/RP
a/DT
few/JJ
hours/NNS
or/CC
so/RB
./.

I/PRP
'm/VBP
not/RB
sure/JJ
if/IN
my/PRP$
question/NN
is/VBZ
clear/JJ
enough/RB
?/.

Thank/VBP
you/PRP
,/,
when/WRB
in/IN
the/DT
real/JJ
world/NN
has/VBZ
a/DT
list/NN
of/IN
passwords/NNS
been/VBN
hacked/VBN
without/IN
having/VBG
access/NN
to/TO
the/DT
salt/NN
values/NNS
?/.

It/PRP
might/MD
be/VB
more/RBR
common/JJ
than/IN
I/PRP
assume/VBP
,/,
just/RB
wondering/VBG
./.

Thank/VB
you/PRP
also/RB
erickson/USR
,/,
do/VBP
you/PRP
mean/VB
rehashing/VBG
the/DT
result/NN
say/VBP
100/CD
times/NNS
to/TO
make/VB
it/PRP
computationally/RB
expensive/JJ
?/.

Or/CC
using/VBG
a/DT
heavier/JJR
hash/NN
algorithm/NN
?/.

I/PRP
could/MD
see/VB
that/IN
working/VBG
well/RB
,/,
but/CC
no/DT
article/NN
or/CC
guide/NN
I/PRP
have/VBP
read/VBN
online/NN
has/VBZ
ever/RB
suggested/VBN
that/IN
./.

Thanks/VBZ
Boris/NNP
,/,
but/CC
lots/NNS
of/IN
security/NN
is/VBZ
security/NN
through/IN
obscurity/NN
is/VBZ
n't/RB
it/PRP
?/.

That/DT
's/VBZ
essentially/RB
what/WP
a/DT
hash/NN
is/VBZ
?/.

@Erickson/USR
thanks/VBZ
for/IN
clarification/NN
,/,
you/PRP
should/MD
put/VB
it/PRP
in/IN
an/DT
answer/NN
it/PRP
's/VBZ
exactly/RB
what/WP
I/PRP
was/VBD
after/IN
./.

@Erickson/USR
,/,
excellent/JJ
article/NN
thanks/VBZ
for/IN
the/DT
link/NN

@dmckee/USR
,/,
thanks/VBZ
but/CC
I/PRP
was/VBD
under/IN
the/DT
impression/NN
the/DT
definition/NN
of/IN
security/NN
through/IN
obscurity/NN
does/VBZ
n't/RB
cover/VB
the/DT
'/``
weakness/NN
'/''
of/IN
the/DT
solution/NN
?/.

IE/FW
,/,
it/PRP
's/VBZ
not/RB
by/IN
definition/NN
necesserially/RB
weak/JJ
./.

Your/PRP$
point/NN
about/IN
it/PRP
meaning/VBG
a/DT
secret/JJ
method/NN
is/VBZ
correct/JJ
though/IN
,/,
my/PRP$
point/NN
is/VBZ
for/IN
example/NN
,/,
is/VBZ
public/JJ
key/JJ
encryption/NN
STO/NN
because/IN
you/PRP
method/NN
is/VBZ
combining/VBG
a/DT
'/``
secret/JJ
key/NN
'/''
?/.

I/PRP
've/VBP
updated/VBN
the/DT
question/NN
with/IN
some/DT
figures/NNS
on/IN
crack/NN
times/NNS
for/IN
various/JJ
scenarios/NNS
,/,
so/RB
far/RB
I/PRP
have/VBP
learnt/VBN
that/IN
recursive/JJ
hashing/NN
protects/VBZ
about/IN
blanket/NN
cracks/NNS
and/CC
I/PRP
hope/VBP
I/PRP
have/VBP
proved/VBN
that/IN
,/,
but/CC
the/DT
interesting/JJ
question/NN
now/RB
is/VBZ
how/WRB
can/MD
we/PRP
protect/VB
from/IN
targetted/JJ
attacks/NNS
?/.

This/DT
comes/VBZ
down/RP
to/TO
the/DT
user/NN
,/,
and/CC
if/IN
you/PRP
require/VBP
a/DT
9/CD
character/NN
password/NN
with/IN
a/DT
special/JJ
char/NN
,/,
and/CC
case/NN
sensitivity/NN
you/PRP
will/MD
be/VB
looking/VBG
at/IN
(/-LRB-
(/-LRB-
(/-LRB-
95/CD
^/SYM
9/CD
)/-RRB-
//SYM
1000000000/CD
)/-RRB-
//SYM
2/CD
)/-RRB-
*/SYM
1000/CD
seconds/NNS
in/IN
years/NNS
=/SYM
10,000/CD
years/NNS
to/TO
crack/VB
./.

Sorry/UH
,/,
but/CC
this/DT
question/NN
is/VBZ
not/RB
a/DT
duplicate/VB
,/,
so/IN
I/PRP
've/VBP
voted/VBN
to/TO
reopen/VB
./.

A/DT
lot/NN
of/IN
the/DT
responses/NNS
seem/VBP
to/TO
describe/VB
what/WP
a/DT
salt/NN
is/VBZ
,/,
why/WRB
it/PRP
's/VBZ
there/RB
,/,
which/WDT
does/VBZ
n't/RB
address/VB
the/DT
question/NN
./.

This/DT
question/NN
is/VBZ
more/RBR
specific/JJ
than/IN
that/DT
./.

Plus/IN
we/PRP
are/VBP
generating/VBG
interesting/JJ
discussion/NN
so/IN
it/PRP
would/MD
be/VB
nice/JJ
to/TO
keep/VB
it/PRP
open/JJ
!/.

+/SYM
1/CD
,/,
most/RBS
concise/JJ
and/CC
to/TO
the/DT
point/NN
answer/NN
so/RB
far/RB
,/,
I/PRP
was/VBD
n't/RB
aware/JJ
this/DT
was/VBD
an/DT
option/NN
./.

@Rook/USR
,/,
1,000/CD
rounds/NNS
means/VBZ
it/PRP
will/MD
take/VB
1,000/CD
times/NNS
longer/RBR
to/TO
brute/JJ
force/NN
./.

Seems/VBZ
like/IN
a/DT
good/JJ
feature/NN
to/TO
me/PRP
./.

@rmeador/USR
thanks/UH
,/,
but/CC
my/PRP$
point/NN
is/VBZ
that/IN
the/DT
salt/NN
does/VBZ
n't/RB
really/RB
solve/VB
anything/NN
because/IN
using/VBG
a/DT
password/NN
list/NN
is/VBZ
perfectly/RB
feasable/JJ

Thanks/VBZ
for/IN
your/PRP$
comments/NNS
,/,
it/PRP
's/VBZ
an/DT
interesting/JJ
topic/NN
./.

Every/DT
article/NN
and/CC
guide/NN
I/PRP
have/VBP
read/VBN
suggests/VBZ
to/TO
just/RB
md5/NNP
//CC
sha/NNP
the/DT
salt/NN
+/CC
password/NN
,/,
and/CC
leave/VB
it/PRP
at/IN
that/DT
consider/VBP
it/PRP
secure/JJ
./.

Are/VBP
these/DT
articles/NNS
just/RB
out/IN
of/IN
date/NN
or/CC
not/RB
written/VBN
by/IN
people/NNS
thinking/VBG
about/IN
the/DT
problem/NN
enough/RB
?/.

No/UH
,/,
but/CC
your/PRP$
average/JJ
Joe/NNP
developer/NN
is/VBZ
just/RB
going/VBG
to/TO
read/VB
a/DT
tutorial/NN
from/IN
any/DT
of/IN
the/DT
thousands/NNS
of/IN
developer/NN
help/NN
guides/NNS
out/RB
there/RB
./.

I/PRP
think/VBP
it/PRP
's/VBZ
unfair/JJ
to/TO
expect/VB
people/NNS
to/TO
read/VB
scientific/JJ
journals/NNS
on/IN
network/NN
security/NN
when/WRB
writing/VBG
a/DT
login/NN
script/NN
for/IN
their/PRP$
blog/NN
or/CC
whatever/WDT
small/JJ
site/NN
they/PRP
are/VBP
developing/VBG
./.

I/PRP
think/VBP
it/PRP
's/VBZ
important/JJ
to/TO
note/VB
that/IN
prebuilt/JJ
systems/NNS
are/VBP
exposed/VBN
on-mass/JJ
to/TO
discovered/VBN
flaws/NNS
in/IN
their/PRP$
architecture/NN
or/CC
supporting/NN
architecture/NN
,/,
although/IN
I/PRP
completely/RB
agree/VBP
that/IN
they/PRP
are/VBP
highly/RB
advisable/JJ
./.

I/PRP
would/MD
argue/VB
that/IN
it/PRP
does/VBZ
n't/RB
become/VB
impractical/JJ
,/,
only/RB
trivially/RB
more/RBR
difficult/JJ
,/,
as/IN
a/DT
dictionary/NN
of/IN
a/DT
size/NN
of/IN
thousands/NNS
of/IN
passwords/NNS
against/IN
tens/NNS
of/IN
thousands/NNS
user/NN
records/NNS
is/VBZ
perfectly/RB
calculable/JJ
on/IN
a/DT
normal/JJ
desktop/NN
computer/NN
./.

With/IN
proper/JJ
password/NN
choice/NN
policies/NNS
you/PRP
do/VBP
n't/RB
need/VB
a/DT
salt/NN
at/IN
all/DT
would/MD
we/VB
?/.

Maybe/RB
I/PRP
misunderstand/VBD
the/DT
problem/NN
./.

Please/VB
refer/VB
to/TO
my/PRP$
2nd/JJ
update/VBP
example/NN
,/,
is/VBZ
this/DT
relevant/JJ
?/.

Great/JJ
answer/NN
and/CC
discussion/NN
./.

Thanks/VBZ
to/TO
all/DT
answers/NNS
I/PRP
have/VBP
learnt/VBN
a/DT
lot/NN
./.

+/SYM
1/CD
great/JJ
answer/NN
thank/VB
you/PRP
./.

I/PRP
do/VBP
mean/VB
plain/JJ
english/JJ
tables/NNS
yes/UH
./.

The/DT
question/NN
aims/VBZ
to/TO
tackle/VB
the/DT
problem/NN
of/IN
how/WRB
to/TO
stop/VB
a/DT
hacker/NN
working/VBG
out/RP
all/DT
possible/JJ
combinations/NNS
of/IN
hashes/NNS
for/IN
each/DT
user/NN
account/NN

+/SYM
1/CD
I/PRP
missed/VBD
this/DT
point/NN
,/,
but/CC
it/PRP
is/VBZ
an/DT
excellent/JJ
consideration/NN

I/PRP
understand/VBP
what/WP
a/DT
rainbow/NN
table/NN
is/VBZ
,/,
but/CC
you/PRP
are/VBP
missing/VBG
the/DT
point/NN
of/IN
my/PRP$
question/NN
./.

If/IN
you/PRP
provided/VBD
me/PRP
with/IN
your/PRP$
salting/NN
algorithm/NN
,/,
a/DT
hashed/VBD
password/NN
and/CC
the/DT
salt/NN
,/,
then/RB
yes/UH
I/PRP
probably/RB
could/MD
tell/VB
you/PRP
what/WP
your/PRP$
password/NN
was/VBD
within/IN
a/DT
few/JJ
minutes/NNS
./.

Sure/UH
,/,
but/CC
you/PRP
just/RB
told/VBD
me/PRP
what/WP
the/DT
password/NN
is/VBZ
in/IN
your/PRP$
example/NN
,/,
give/VB
me/PRP
a/DT
salt/NN
,/,
hashed/VBD
password/NN
and/CC
how/WRB
you/PRP
combine/VBP
the/DT
salt/NN
+/CC
password/NN
(/-LRB-
non/JJ
recursive/JJ
)/-RRB-
and/CC
as/RB
long/RB
as/IN
the/DT
password/NN
<=/SYM
5/CD
lowercase/JJ
alphanumeric/JJ
chars/NNS
(/-LRB-
no/DT
whitespace/NN
/CC
special/JJ
chars/NNS
)/-RRB-
I/PRP
'll/MD
let/VB
you/PRP
know/VB
what/WP
it/PRP
is/VBZ
in/IN
this/DT
box/NN
./.

If/IN
you/PRP
want/VBP
me/PRP
to/TO
put/VB
money/NN
on/IN
it/PRP
as/IN
you/PRP
suggest/VBP
,/,
let/VB
me/PRP
know/VB
,/,
although/IN
my/PRP$
comment/NN
of/IN
a/DT
few/JJ
minutes/NNS
is/VBZ
probably/RB
a/DT
gross/JJ
underestimation/NN
,/,
but/CC
within/IN
hours/NNS
yes/RB
./.

Maybe/RB
seconds/NNS
actually/RB
,/,
see/VB
golubev.com/hashgpu.htm/URI
which/WDT
uses/VBZ
GPU/NN
to/TO
calculate/VB
as/IN
quoted/VBN
"/``
2300M/s/CD
SHA1/NNP
hashes/VBZ
per/IN
second/NN
"/''
./.

With/IN
a/DT
full/JJ
range/NN
of/IN
95/CD
ASCII/NNP
characters/NNS
ranging/VBG
from/IN
1-6/CD
chars/NNS
we/PRP
can/MD
crack/VB
it/PRP
in/IN
</SYM
6/CD
minutes/NNS
./.

If/IN
we/PRP
have/VBP
only/RB
lowercase/JJ
alphanumeric/JJ
chars/NNS
,/,
up/RB
to/TO
8/CD
chars/NNS
in/IN
length/NN
</SYM
25/CD
minutes/NNS
./.

With/IN
a/DT
database/NN
of/IN
10,000/CD
user/NN
records/NNS
,/,
we/PRP
could/MD
find/VB
all/DT
4/CD
char/NN
full/JJ
ASCII/NNP
passwords/NNS
in/IN
</SYM
200/CD
seconds/NNS
(/-LRB-
(/-LRB-
(/-LRB-
(/-LRB-
95/CD
^/SYM
4/CD
)/-RRB-
//SYM
2300000000/CD
)/-RRB-
//SYM
2/CD
)/-RRB-
*/SYM
10000/CD
)/-RRB-
./.

(/-LRB-
More/JJR
overhead/NN
than/IN
quoted/VBN
,/,
and/CC
quoted/VBD
GPU/NN
speeds/NNS
are/VBP
probably/RB
ideal/JJ
situations/NNS
)/-RRB-
./.

Please/VB
see/VB
update/VB
#/SYM
2/CD
,/,
you/PRP
would/MD
simply/RB
have/VB
raw/JJ
passwords/NNS
and/CC
calculate/VB
all/DT
hashes/NNS
against/IN
the/DT
salts/NNPS
for/IN
each/DT
user/NN
record/NN
./.

This/DT
is/VBZ
often/RB
used/VBN
way/NN
which/WDT
is/VBZ
not/RB
too/RB
good/JJ
./.

I/PRP
am/VBP
been/VBN
penetration/NN
tester/NN
and/CC
usually/RB
used/VBN
this/DT
to/TO
pass/VB
arguments/NNS
like/IN
999999999999999999/CD
which/WDT
go/VBP
smoothly/RB
through/IN
cast/NN
and/CC
later/JJ
cause/NN
huge/JJ
error/NN
message/NN
when/WRB
passed/VBN
to/TO
4/CD
bytes/NNS
integer/NN
storage/NN
./.

Not/RB
exactly/RB
./.

Manual/NN
says/VBZ
"/``
The/DT
maximum/NN
value/NN
depends/VBZ
on/IN
the/DT
system/NN
./.

32/CD
bit/NN
systems/NNS
have/VBP
a/DT
maximum/JJ
signed/JJ
integer/NN
range/NN
of/IN
-/SYM
2147483648/CD
to/TO
2147483647/CD
./.

So/RB
for/IN
example/NN
on/IN
such/PDT
a/DT
system/NN
,/,
intval/C NA
(/C NA
'1000000000000'/C NA
)/C NA
will/MD
return/VB
2147483647/CD
./.

The/DT
maximum/JJ
signed/JJ
integer/NN
value/NN
for/IN
64/CD
bit/NN
systems/NNS
is/VBZ
9223372036854775807/CD
./.
"/''
./.

I/PRP
think/VBP
it/PRP
is/VBZ
not/RB
clever/JJ
idea/NN
to/TO
have/VB
PHP/NNP
app/NN
which/WDT
uses/VBZ
4/CD
byte/NN
ints/NNS
in/IN
MySQL/NNP
to/TO
rely/VB
on/IN
this/DT
"/``
feature/NN
"/''
./.

It/PRP
breaks/VBZ
on/IN
64/CD
bit/NN
systems/NNS
./.

I/PRP
think/VBP
web/NN
apps/NNS
should/MD
check/VB
for/IN
values/NNS
to/TO
remain/VB
in/IN
some/DT
range/NN
to/TO
be/VB
sure/JJ
./.

No/UH
,/,
they/PRP
are/VBP
not/RB
always/RB
./.

It/PRP
depends/VBZ
on/IN
whether/IN
you/PRP
allow/VBP
user/NN
input/NN
to/TO
be/VB
placed/VBN
within/IN
the/DT
query/NN
itself/PRP
./.

For/IN
example/NN
:/.

$/C
dbh/C
=/C
new/C
PDO/C
(/C
"blahblah"/C
)/C
;/C

$/C
tableToUse/C
=/C
$/C
_GET/C
[/C
'userTable'/C
]/C
;/C

$/C
stmt/C
=/C
$/C
dbh/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
'/C
./C
$/C
tableToUse/C
./C
'/C
where/C
username/C
=/C
:/C
username/C
'/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
array/C
(/C
'/C
:/C
username/C
'/C
=>/C
$/C
_REQUEST/C
[/C
'username'/C
]/C
)/C
)/C
;/C

would/MD
be/VB
vulnerable/JJ
to/TO
SQL/NNP
injections/NNS
and/CC
using/VBG
prepared/JJ
statements/NNS
in/IN
this/DT
example/NN
wo/MD
n't/RB
work/VB
,/,
because/IN
the/DT
user/NN
input/NN
is/VBZ
used/VBN
as/IN
an/DT
identifier/NN
,/,
not/RB
as/IN
data/NNS
./.

The/DT
right/JJ
answer/NN
here/RB
would/MD
be/VB
to/TO
use/VB
some/DT
sort/NN
of/IN
filtering/NN
//CC
validation/NN
like/IN
:/.

$/C
dbh/C
=/C
new/C
PDO/C
(/C
"blahblah"/C
)/C
;/C

$/C
tableToUse/C
=/C
$/C
_GET/C
[/C
'userTable'/C
]/C
;/C

$/C
allowedTables/C
=/C
array/C
(/C
'users'/C
,/C
'admins'/C
,/C
'moderators'/C
)/C
;/C

if/C
(/C
!/C
in_array/C
(/C
$/C
tableToUse/C
,/C
$/C
allowedTables/C
)/C
)/C
$/C
tableToUse/C
=/C
'users'/C
;/C

$/C
stmt/C
=/C
$/C
dbh/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
'/C
./C
$/C
tableToUse/C
./C
'/C
where/C
username/C
=/C
:/C
username/C
'/C
)/C
;/C

$/C
stmt/C
->/C
execute/C
(/C
array/C
(/C
':username'/C
=>/C
$/C
_REQUEST/C
[/C
'username'/C
]/C
)/C
)/C
;/C

Note/NN
:/:
you/PRP
ca/MD
n't/RB
use/VB
PDO/NN
to/TO
bind/VB
data/NNS
that/WDT
goes/VBZ
outside/JJ
of/IN
DDL/NN
(/-LRB-
Data/NN
Definition/NN
Language/NN
)/-RRB-
,/,
i.e./FW
this/DT
does/VBZ
not/RB
work/VB
:/.

$/C
stmt/C
=/C
$/C
dbh/C
->/C
prepare/C
(/C
'/C
SELECT/C
*/C
FROM/C
foo/C
ORDER/C
BY/C
:/C
userSuppliedData/C
'/C
)/C
;/C

The/DT
reason/NN
why/WRB
the/DT
above/JJ
does/VBZ
not/RB
work/VB
is/VBZ
because/IN
DESC/C NA
and/CC
ASC/C NA
are/VBP
not/RB
data/NNS
./.

PDO/NN
can/MD
only/RB
escape/VB
for/IN
data/NNS
./.

Secondly/RB
,/,
you/PRP
ca/MD
n't/RB
even/RB
put/VB
'/SYM
quotes/NNS
around/IN
it/PRP
./.

The/DT
only/JJ
way/NN
to/TO
allow/VB
user/NN
chosen/JJ
sorting/NN
is/VBZ
to/TO
manually/RB
filter/VB
and/CC
check/VB
that/IN
it/PRP
's/VBZ
either/CC
DESC/C NA
or/CC
ASC/C NA
./.

@RobForrest/USR
yes/UH
you/PRP
are/VBP
missing/VBG
:)/UH
./.

The/DT
data/NNS
you/PRP
bind/VBP
only/RB
works/VBZ
for/IN
DDL/NN
(/-LRB-
Data/NN
Definition/NN
Language/NN
)/-RRB-
./.

You/PRP
need/VBP
those/DT
quotes/NNS
and/CC
proper/JJ
escaping/NN
./.

Placing/VBG
quotes/NNS
for/IN
other/JJ
parts/NNS
of/IN
the/DT
query/NN
breaks/VBZ
it/PRP
with/IN
a/DT
high/JJ
probability/NN
./.

For/IN
example/NN
,/,
SELECT/C NA
*/C NA
FROM/C NA
'table'/C NA
can/MD
be/VB
wrong/JJ
as/IN
it/PRP
should/MD
be/VB
SELECT/C NA
*/C NA
FROM/C NA
`/C NA
table/C NA
`/C NA
or/CC
without/IN
any/DT
backsticks/NNS
./.

Then/RB
some/DT
things/NNS
like/IN
ORDER/C NA
BY/C NA
DESC/C NA
where/WRB
DESC/C NA
comes/VBZ
from/IN
the/DT
user/NN
ca/MD
n't/RB
be/VB
simply/RB
escaped/VBN
./.

So/RB
,/,
practical/JJ
scenarios/NNS
are/VBP
rather/RB
unlimited/JJ
./.

regarding/IN
to/TO
optimization/NN
by/IN
prepared/JJ
statement/NN
,/,
the/DT
only/JJ
thing/NN
that/IN
SQL/NNP
server/NN
will/MD
do/VB
is/VBZ
(/-LRB-
Escaping/VBG
the/DT
string/NN
at/IN
server/NN
side/NN
)/-RRB-
nothing/NN
else/RB
,/,
in/IN
other/JJ
words/NNS
,/,
if/IN
you/PRP
can/MD
escape/VB
properly/RB
,/,
it/PRP
s/VBZ
similar/JJ
to/TO
prepared/JJ
statement/NN
but/CC
without/IN
optimization/NN
./.

Regarding/VBG
to/TO
many/JJ
useful/JJ
answers/NNS
,/,
I/PRP
hope/VBP
to/TO
add/VB
some/DT
values/NNS
to/TO
this/DT
thread/NN
./.

SQL/NNP
injection/NN
is/VBZ
type/NN
of/IN
attack/NN
that/WDT
can/MD
be/VB
done/VBN
through/IN
user/NN
inputs/NNS
(/-LRB-
Inputs/NNS
that/IN
filled/VBN
by/IN
user/NN
and/CC
then/RB
used/VBN
inside/IN
queries/NNS
)/-RRB-
,/.

The/DT
SQL/NNP
injection/NN
patterns/NNS
are/VBP
correct/JJ
query/NN
syntax/NN
while/IN
we/PRP
can/MD
call/VB
it/PRP
:/:
bad/JJ
queries/NNS
for/IN
bad/JJ
reasons/NNS
,/,
we/PRP
assume/VBP
that/IN
there/EX
might/MD
be/VB
bad/JJ
person/NN
that/WDT
try/VBP
to/TO
get/VB
secret/JJ
information/NN
(/-LRB-
by/IN
passing/VBG
access/NN
control/NN
)/-RRB-
that/WDT
affect/VBP
the/DT
three/CD
principles/NNS
of/IN
security/NN
(/-LRB-
Confidentiality/NN
,/,
Integrity/NN
,/,
Availability/NN
)/-RRB-
./.

Now/RB
,/,
our/PRP$
point/NN
is/VBZ
to/TO
prevent/VB
security/NN
threats/NNS
such/JJ
as/IN
SQL/NNP
injection/NN
attacks/NNS
,/,
the/DT
question/NN
asking/NN
(/-LRB-
How/WRB
to/TO
prevent/VB
SQL/NNP
injection/NN
attack/NN
using/VBG
PHP/NNP
)/-RRB-
,/,
be/VB
more/RBR
realistic/JJ
,/,
data/NNS
filtering/NN
or/CC
clearing/VBG
input/NN
data/NNS
is/VBZ
the/DT
case/NN
when/WRB
using/VBG
user-input/JJ
data/NNS
inside/IN
such/JJ
query/NN
,/,
using/VBG
PHP/NNP
or/CC
any/DT
other/JJ
programming/NN
language/NN
is/VBZ
not/RB
the/DT
case/NN
,/,
or/CC
as/IN
recommended/VBN
by/IN
more/JJR
people/NNS
to/TO
use/VB
modern/JJ
technology/NN
such/JJ
as/IN
prepared/JJ
statement/NN
or/CC
any/DT
other/JJ
tools/NNS
that/WDT
currently/RB
supporting/VBG
SQL/NNP
injection/NN
prevention/NN
,/,
consider/VBP
that/IN
these/DT
tools/NNS
not/RB
available/JJ
anymore/RB
?/.

how/WRB
you/PRP
secure/VBP
your/PRP$
application/NN
?/.

My/PRP$
approach/NN
against/IN
SQL/NNP
injection/NN
is/VBZ
:/:
clearing/VBG
user-input/JJ
data/NNS
before/IN
sending/VBG
it/PRP
to/TO
database/NN
(/-LRB-
before/IN
using/VBG
it/PRP
inside/IN
any/DT
query/NN
)/-RRB-
./.

Data/NNS
filtering/NN
for/IN
(/-LRB-
Converting/VBG
unsafe/JJ
data/NNS
to/TO
safe/JJ
data/NNS
)/-RRB-

Consider/VBP
that/IN
PDO/NN
and/CC
MySQLi/NNP
not/RB
available/JJ
,/,
how/WRB
can/MD
you/PRP
secure/VB
your/PRP$
application/NN
?/.

do/VB
you/PRP
force/VB
me/PRP
to/TO
use/VB
them/PRP
?/.

what/WP
about/IN
other/JJ
languages/NNS
other/JJ
than/IN
PHP/NNP
?/.

I/PRP
prefer/VBP
to/TO
provide/VB
general/JJ
ideas/NNS
as/IN
it/PRP
can/MD
be/VB
used/VBN
for/IN
wider/JJR
border/NN
not/RB
just/RB
for/IN
specific/JJ
language/NN
./.

SQL/NNP
user/NN
(/-LRB-
limiting/VBG
user/NN
privilege/NN
)/-RRB-
:/:
most/RBS
common/JJ
SQL/NNP
operations/NNS
are/VBP
(/-LRB-
SELECT/C NA
,/,
UPDATE/C NA
,/,
INSERT/C NA
)/-RRB-
,/,
then/RB
,/,
why/WRB
giving/VBG
UPDATE/C NA
privilege/NN
to/TO
a/DT
user/NN
that/WDT
not/RB
require/VB
it/PRP
?/.

for/IN
example/NN
:/:
login/NN
,/,
and/CC
search/NN
pages/NNS
are/VBP
only/RB
using/VBG
SELECT/C NA
,/,
then/RB
,/,
why/WRB
using/VBG
db/NN
users/NNS
in/IN
these/DT
pages/NNS
with/IN
high/JJ
privileges/NNS
?/.

RULE/NN
:/:
do/VBP
not/RB
create/VB
one/CD
database/NN
user/NN
for/IN
all/DT
privileges/NNS
,/.

for/IN
all/DT
SQL/NNP
operations/NNS
,/,
you/PRP
can/MD
create/VB
your/PRP$
scheme/NN
like/IN
(/-LRB-
deluser/C NA
,/,
selectuser/C NA
,/,
updateuser/C NA
)/-RRB-
as/IN
usernames/NNS
for/IN
easy/JJ
usage/NN
./.

see/VB
Principle/NN
of/IN
least/JJS
privilege/NN

Data/NN
filtering/NN
:/:
before/IN
building/VBG
any/DT
query/NN
user/NN
input/NN
should/MD
be/VB
validated/VBN
and/CC
filtered/VBN
,/.

for/IN
programmers/NNS
,/,
it/PRP
's/VBZ
important/JJ
to/TO
define/VB
some/DT
properties/NNS
for/IN
each/DT
user-input/JJ
variables/NNS
:/:
data/NNS
type/NN
,/,
data/NN
pattern/NN
,/,
and/CC
data/NNS
length/NN
./.

a/DT
field/NN
that/WDT
is/VBZ
a/DT
number/NN
between/IN
(/-LRB-
x/C NA
and/CC
y/C NA
)/-RRB-
must/MD
be/VB
exactly/RB
validated/VBN
using/VBG
exact/JJ
rule/NN
,/.

for/IN
a/DT
field/NN
that/WDT
is/VBZ
a/DT
string/NN
(/-LRB-
text/NN
)/-RRB-
:/:
pattern/NN
is/VBZ
the/DT
case/NN
,/.

for/IN
example/NN
:/:
username/NN
must/MD
contain/VB
only/RB
some/DT
characters/NNS
lets/VBZ
say/VB
[/-LRB-
a-zA-Z0-9_-./C
]/-RRB-

the/DT
length/NN
vary/VBP
between/IN
(/-LRB-
x/C NA
and/CC
n/C NA
)/-RRB-
where/WRB
x/C NA
and/CC
n/C NA
(/-LRB-
integers/NNS
,/,
x/C NA
<=/C NA
n/C NA
)/-RRB-
./.

Rule/NN
:/:
creating/VBG
exact/JJ
filters/NNS
and/CC
validation/NN
rules/NNS
are/VBP
best/JJS
practice/NN
for/IN
me/PRP
./.

Use/VBP
other/JJ
tools/NNS
:/:
Here/RB
,/,
I/PRP
will/MD
also/RB
agree/VB
with/IN
you/PRP
that/IN
prepared/JJ
statement/NN
(/-LRB-
parametrized/JJ
query/NN
)/-RRB-
and/CC
Stored/JJ
procedures/NNS
,/.

the/DT
disadvantages/NNS
here/RB
is/VBZ
these/DT
ways/NNS
requires/VBZ
advanced/JJ
skills/NNS
which/WDT
are/VBP
not/RB
exist/VBP
in/IN
most/JJS
users/NNS
,/.

the/DT
basic/JJ
idea/NN
here/RB
is/VBZ
to/TO
distinguish/VB
between/IN
SQL/NNP
query/NN
and/CC
the/DT
data/NNS
that/IN
being/VBG
used/VBN
inside/RB
,/.

both/DT
approach/NN
can/MD
be/VB
used/VBN
even/RB
with/IN
unsafe/JJ
data/NNS
,/,
because/IN
the/DT
user-input/JJ
data/NNS
here/RB
not/RB
add/VB
anything/NN
to/TO
the/DT
original/JJ
query/NN
such/JJ
as/IN
(/-LRB-
any/DT
or/CC
x/C NA
=/C NA
x/C NA
)/-RRB-
./.

for/IN
more/JJR
information/NN
please/VB
read/VBN
OWASP/NN
SQL/NNP
Injection/NN
Prevention/NN
Cheat/NN
Sheet/NN
./.

Now/RB
,/,
if/IN
you/PRP
are/VBP
an/DT
advanced/JJ
user/NN
,/,
start/NN
using/VBG
these/DT
defense/NN
as/IN
you/PRP
like/VBP
,/,
but/CC
,/,
for/IN
beginners/NNS
,/,
if/IN
they/PRP
ca/MD
n't/RB
quickly/RB
implement/VB
stored/JJ
procedure/NN
and/CC
prepared/JJ
statement/NN
,/,
it/PRP
's/VBZ
better/JJR
to/TO
filter/VB
input/NN
data/NNS
as/RB
much/RB
they/PRP
can/MD
./.

Finally/RB
,/,
let/VB
's/POS
consider/VB
that/DT
user/NN
sends/VBZ
this/DT
text/NN
below/IN
instead/RB
of/IN
entering/VBG
his/PRP$
username/NN
:/:

[/SYM
1/LS
]/SYM
UNION/C
SELECT/C
IF/C
(/C
SUBSTRING/C
(/C
Password/C
,/C
1/C
,/C
1/C
)/C
=/C
'2'/C
,/C
BENCHMARK/C
(/C
100000/C
,/C
SHA1/C
(/C
1/C
)/C
)/C
,0/C
)/C
User/C
,/C
Password/C
FROM/C
mysql/C
./C
user/C
WHERE/C
User/C
=/C
'root'/C

This/DT
input/NN
can/MD
be/VB
checked/VBN
early/RB
without/IN
any/DT
prepared/JJ
statement/NN
and/CC
stored/JJ
procedures/NNS
,/,
but/CC
to/TO
be/VB
on/IN
safe/JJ
side/NN
,/,
using/VBG
them/PRP
starts/VBZ
after/IN
user-data/NN
filtering/NN
and/CC
validation/NN
./.

Last/JJ
point/NN
is/VBZ
detecting/VBG
unexpected/JJ
behavior/NN
which/WDT
requires/VBZ
more/JJR
effort/NN
and/CC
complexity/NN
,/,
it/PRP
's/VBZ
not/RB
recommended/VBN
for/IN
normal/JJ
web/NN
applications/NNS
./.

Unexpected/JJ
behavior/NN
in/IN
above/JJ
user/NN
input/NN
is/VBZ
:/:
SELECT/C
,/,
UNION/C
,/,
IF/C
,/,
SUBSTRING/C
,/,
BENCHMARK/C
,/,
SHA/C
,/,
root/C
once/RB
these/DT
words/NNS
detected/VBD
,/,
you/PRP
can/MD
avoid/VB
the/DT
input/NN
./.

UPDATE1/NN
:/:

A/DT
user/NN
commented/VBD
that/IN
this/DT
post/NN
is/VBZ
useless/JJ
,/,
OK/UH
!/.

Here/RB
is/VBZ
what/WDT
OWASP.ORG/URI
provided/VBD
:/:

Primary/JJ
defenses/NNS
:/:

Option/NN
#/SYM
1/LS
:/:
Use/VBP
of/IN
Prepared/JJ
Statements/NN
(/-LRB-
Parameterized/JJ
Queries/NNS
)/-RRB-

Option/NN
#/SYM
2/LS
:/:
Use/VBP
of/IN
Stored/JJ
Procedures/NNS

Option/NN
#/SYM
3/LS
:/:
Escaping/VBG
all/DT
User/NN
Supplied/VBN
Input/NN

Additional/JJ
defenses/NNS
:/:

Also/RB
Enforce/VB
:/:
Least/DT
Privilege/NN

Also/RB
Perform/VB
:/:
White/JJ
List/NN
Input/NN
Validation/NN

As/IN
you/PRP
may/MD
knew/VBD
,/,
claiming/VBG
on/IN
any/DT
article/NN
should/MD
be/VB
supported/VBN
by/IN
valid/JJ
argument/NN
,/,
at/IN
least/JJS
one/CD
reference/NN
!/.

Otherwise/RB
it/PRP
's/VBZ
considered/VBN
as/IN
attack/NN
and/CC
bad/JJ
claim/NN
!/.

Update2/NN
:/.

From/IN
the/DT
PHP/NNP
manual/NN
,/,
PHP/NNP
:/:
Prepared/JJ
Statements/NNS
-/:
Manual/NN
:/.

Escaping/NN
and/CC
SQL/NNP
injection/NN

Bound/JJ
variables/NNS
will/MD
be/VB
escaped/VBN
automatically/RB
by/IN
the/DT
server/NN
./.

The/DT
server/NN
inserts/NNS
their/PRP$
escaped/VBN
values/NNS
at/IN
the/DT
appropriate/JJ
places/NNS
into/IN
the/DT
statement/NN
template/NN
before/IN
execution/NN
./.

A/DT
hint/NN
must/MD
be/VB
provided/VBN
to/TO
the/DT
server/NN
for/IN
the/DT
type/NN
of/IN
bound/VBN
variable/NN
,/,
to/TO
create/VB
an/DT
appropriate/JJ
conversion/NN
./.

See/VB
the/DT
mysqli_stmt_bind_param/C
(/C
)/C
function/NN
for/IN
more/JJR
information/NN
./.

The/DT
automatic/JJ
escaping/VBG
of/IN
values/NNS
within/IN
the/DT
server/NN
is/VBZ
sometimes/RB
considered/VBN
a/DT
security/NN
feature/NN
to/TO
prevent/VB
SQL/NNP
injection/NN
./.

The/DT
same/JJ
degree/NN
of/IN
security/NN
can/MD
be/VB
achieved/VBN
with/IN
non-prepared/JJ
statements/NNS
,/,
if/IN
input/NN
values/NNS
are/VBP
escaped/VBN
correctly/RB
./.

Update3/NN
:/:

I/PRP
created/VBD
test/NN
cases/NNS
for/IN
knowing/VBG
how/WRB
PDO/NN
and/CC
MySQLi/NNP
sends/VBZ
the/DT
query/NN
to/TO
MySQL/NNP
server/NN
when/WRB
using/VBG
prepared/JJ
statement/NN
:/.

PDO/NN
:/.

$/C
user/C
=/C
"/C
'/C
'/C
1/C
'/C
'/C
"/C
;/C
///CCM
Malicious/JJ|CCM
keyword/NN|CCM

$/C
sql/C
=/C
'/C
SELECT/C
*/C
FROM/C
awa_user/C
WHERE/C
userame/C
=:/C
username/C
'/C
;/C

$/C
sth/C
=/C
$/C
dbh/C
->/C
prepare/C
(/C
$/C
sql/C
,/C
array/C
(/C
PDO/C
::/C
ATTR_CURSOR/C
=>/C
PDO/C
::/C
CURSOR_FWDONLY/C
)/C
)/C
;/C

$/C
sth/C
->/C
execute/C
(/C
array/C
(/C
':username'/C
=>/C
$/C
user/C
)/C
)/C
;/C

Query/NN
Log/NN
:/:

189/C
Query/C
SELECT/C
*/C
FROM/C
awa_user/C
WHERE/C
userame/C
=/C
'/C
\/C
'/C
\/C
'/C
1/C
\/C
'/C
\/C
'/C
'/C

189/C
Quit/C

MySQLi/NNP
:/.

$/C
stmt/C
=/C
$/C
mysqli/C
->/C
prepare/C
(/C
"/C
SELECT/C
*/C
FROM/C
awa_user/C
WHERE/C
username/C
=/C
?/C
"/C
)/C
)/C
{/C
$/C
stmt/C
->/C
bind_param/C
(/C
"/C
s/C
"/C
,/C
$/C
user/C
)/C
;/C
$/C
user/C
=/C
"/C
'/C
'/C
1/C
'/C
'/C
"/C
;/C
$/C
stmt/C
->/C
execute/C
(/C
)/C
;/C

Query/NN
Log/NN
:/:

188/C
Prepare/C
SELECT/C
*/C
FROM/C
awa_user/C
WHERE/C
username/C
=/C
?/C

188/C
Execute/C
SELECT/C
*/C
FROM/C
awa_user/C
WHERE/C
username/C
='\/C
'/C
\/C
'/C
1/C
\/C
'/C
\/C
'/C
'/C

188/C
Quit/C

It/PRP
's/VBZ
clear/JJ
that/IN
a/DT
prepared/JJ
statement/NN
is/VBZ
also/RB
escaping/VBG
the/DT
data/NNS
,/,
nothing/NN
else/RB
./.

As/IN
also/RB
mentioned/VBN
in/IN
above/JJ
statement/NN
The/DT
automatic/JJ
escaping/VBG
of/IN
values/NNS
within/IN
the/DT
server/NN
is/VBZ
sometimes/RB
considered/VBN
a/DT
security/NN
feature/NN
to/TO
prevent/VB
SQL/NNP
injection/NN
./.

The/DT
same/JJ
degree/NN
of/IN
security/NN
can/MD
be/VB
achieved/VBN
with/IN
non-prepared/JJ
statements/NNS
,/,
if/IN
input/NN
values/NNS
are/VBP
escaped/VBN
correctly/RB
,/,
therefore/RB
,/,
this/DT
proves/VBZ
that/IN
data/NNS
validation/NN
such/JJ
as/IN
intval/C
(/C
)/C
is/VBZ
a/DT
good/JJ
idea/NN
for/IN
integer/NN
values/NNS
before/IN
sending/VBG
any/DT
query/NN
,/.

in/IN
addition/NN
,/,
preventing/VBG
malicious/JJ
user/NN
data/NNS
before/IN
sending/VBG
the/DT
query/NN
is/VBZ
correct/JJ
and/CC
valid/JJ
approach/NN
./.

Please/VB
see/VB
this/DT
question/NN
for/IN
more/JJR
detail/NN
:/:
PDO/NN
sends/VBZ
raw/JJ
query/NN
to/TO
MySQL/NNP
while/IN
Mysqli/NNP
sends/VBZ
prepared/JJ
query/NN
,/,
both/DT
produce/VBP
the/DT
same/JJ
result/NN

References/NNS
:/.

SQL/NNP
Injection/NN
Cheat/JJ
Sheet/NN

SQL/NNP
Injection/NN

Information/NN
security/NN

Security/NN
Principles/NNS

Data/NN
validation/NN

@Kobi/USR
:/:
I/PRP
am/VBP
here/RB
talking/VBG
abour/IN
prepared/JJ
statement/NN
for/IN
preventing/VBG
SQL/NNP
injection/NN
./.

After/IN
installing/VBG
the/DT
ASP.NET/NNP
MVC/NN
3/CD
security/NN
update/NN
KB2990942/C
it/PRP
appears/VBZ
the/DT
MVC/NN
version/NN
increased/VBD
from/IN
3.0.0.0/CD
to/TO
3.0.0.1/CD
./.

This/DT
causes/VBZ
Visual/NNP
Studio/NNP
to/TO
no/DT
longer/RBR
find/VB
the/DT
reference/NN
./.

Resharper/NNP
does/VBZ
not/RB
show/VB
any/DT
problems/NNS
but/CC
the/DT
build/NN
fails/VBZ
with/IN
lots/NNS
of/IN
unresolved/JJ
MVC/NN
types/NNS
and/CC
a/DT
warning/NN
:/:

Warning/ER
:/ER
Could/ER
not/ER
resolve/ER
this/ER
reference/ER
./ER
Could/ER
not/ER
locate/ER
the/ER
assembly/ER
"/ER
System/ER
./ER
Web/ER
./ER
Mvc/ER
,/ER
Version/ER
=/ER
3.0.0.0/ER
,/ER
Culture/ER
=/ER
neutral/ER
,/ER
PublicKeyToken/ER
=/ER
31bf3856ad364e35/ER
,/ER
processorArchitecture/ER
=/ER
MSIL/ER
"/ER
./ER
Check/ER
to/ER
make/ER
sure/ER
the/ER
assembly/ER
exists/ER
on/ER
disk/ER
./ER
If/ER
this/ER
reference/ER
is/ER
required/ER
by/ER
your/ER
code/ER
,/ER
you/ER
may/ER
get/ER
compilation/ER
errors/ER
./ER

This/DT
kind/NN
of/IN
makes/VBZ
sense/NN
./.

This/DT
version/NN
no/RB
longer/RB
exists/VBZ
on/IN
my/PRP$
machine/NN
./.

I/PRP
can/MD
not/RB
guarantee/VB
the/DT
exact/JJ
MVC/NN
version/NN
on/IN
dev/NN
machines/NNS
,/,
build/NN
servers/NNS
and/CC
production/NN
servers/NNS
./.

They/PRP
might/MD
have/VB
3.0.0.0/CD
or/CC
3.0.0.1/CD
and/CC
this/DT
might/MD
change/VB
at/IN
any/DT
time/NN
./.

Windows/NNP
Update/NN
might/MD
release/VB
new/JJ
MVC/NN
versions/NNS
at/IN
any/DT
time/NN
./.

Also/RB
,/,
I/PRP
do/VBP
n't/RB
want/VB
to/TO
increase/VB
the/DT
version/NN
number/NN
in/IN
all/DT
*.csproj/URI
files/NNS
whenever/WRB
an/DT
MVC/NN
update/NN
is/VBZ
released/VBN
./.

Multiple/JJ
versions/NNS
are/VBP
affected/VBN
by/IN
the/DT
update/NN
:/:

KB/NN
2993939/CD
:/:
Security/NN
Update/NN
for/IN
Microsoft/NNP
ASP.NET/NNP
MVC/NN
2/CD

KB/NN
2993937/CD
:/:
Security/NN
Update/NN
for/IN
Microsoft/NNP
ASP.NET/NNP
MVC/NN
3/CD

KB/NN
2993928/CD
:/:
Security/NN
Update/NN
for/IN
Microsoft/NNP
ASP.NET/NNP
MVC/NN
4.0/CD

KB/NN
2992080/CD
:/:
Security/NN
Update/NN
for/IN
Microsoft/NNP
ASP.NET/NNP
MVC/NN
5.0/CD

The/DT
security/NN
bulletin/NN
:/:
MS14-059/C
:/:
Vulnerability/NN
in/IN
ASP.NET/NNP
MVC/NN
Could/MD
Allow/VB
Security/NN
Feature/NN
Bypass/NN
(/-LRB-
2990942/CD
)/-RRB-

What/WP
's/VBZ
the/DT
best/JJS
way/NN
to/TO
deal/VB
with/IN
this/DT
situation/NN
?/.

How/WRB
can/MD
I/PRP
unbreak/VB
build/NN
and/CC
production/NN
and/CC
be/VB
safe/JJ
regarding/VBG
future/JJ
MVC/NN
updates/NNS
?/.

@Stijn/USR
I/PRP
plan/NN
to/TO
do/VB
that/DT
but/CC
I/PRP
can/MD
not/RB
guarantee/VB
that/IN
updates/NNS
happen/VB
at/IN
the/DT
exact/JJ
same/JJ
time/NN
./.

The/DT
development/NN
process/NN
must/MD
work/VB
on/IN
its/PRP$
own/JJ
for/IN
a/DT
few/JJ
weeks/NNS
without/IN
manual/JJ
attention/NN
./.

It/PRP
did/VBD
not/RB
break/VB
production/NN
with/IN
MVC/NN
3/CD
./.

In/IN
the/DT
GAC/NN
I/PRP
found/VBD
a/DT
"/``
System.Web.Mvc.dll.config/URI
"/''
that/WDT
has/VBZ
a/DT
binding/NN
redirect/NN
./.

Apparently/RB
,/,
this/DT
file/NN
is/VBZ
being/VBG
used/VBN
by/IN
the/DT
CLR/NN
./.

That/DT
would/MD
need/VB
to/TO
happen/VB
any/DT
time/NN
an/DT
update/NN
is/VBZ
installed/VBN
./.

I/PRP
do/VBP
n't/RB
want/VB
to/TO
increase/VB
anything/NN
./.

I/PRP
want/VBP
this/DT
fixed/VBN
once/RB
and/CC
for/IN
all/DT
./.

There/EX
might/MD
not/RB
even/RB
be/VB
a/DT
human/JJ
present/NN
at/IN
the/DT
time/NN
a/DT
build/NN
is/VBZ
failing/VBG
./.

It/PRP
might/MD
be/VB
an/DT
automated/JJ
nightly/JJ
build/NN
that/IN
stops/NNS
working/VBG
after/IN
an/DT
automatic/JJ
Windows/NNP
Update/NN
./.

Nice/JJ
!/.

Was/VBD
n't/RB
aware/JJ
of/IN
the/DT
ability/NN
to/TO
replace/VB
the/DT
Request/NN
Validator/NN
./.

Instead/RB
of/IN
just/RB
saying/VBG
"/``
ok/UH
"/''
like/IN
you/PRP
do/VBP
I/PRP
extended/VBD
this/DT
idea/NN
to/TO
not/RB
validate/VB
fields/NNS
that/WDT
end/VBP
in/IN
"/``
_NoValidation/C
"/''
as/IN
their/PRP$
name/NN
./.

Code/NN
below/IN
./.

Sel/NNP
,/,
yes/RB
in/IN
an/DT
MVC/NN
environment/NN
that/WDT
would/MD
work/VB
./.

But/CC
in/IN
a/DT
webforms/NN
application/NN
I/PRP
do/VBP
n't/RB
have/VB
a/DT
model/NN
to/TO
do/VB
that/DT
on/IN
./.
:-)/UH

As/IN
indicated/VBN
in/IN
my/PRP$
comment/NN
to/TO
http://stackoverflow.com/a/20450300/2673770/URI
this/DT
is/VBZ
our/PRP$
extension/NN
to/TO
a/DT
custom/NN
request/NN
validator/NN
./.

public/C
class/C
SkippableRequestValidator/C
:/C
RequestValidator/C
{/C
protected/C
override/C
bool/C
IsValidRequestString/C
(/C
HttpContext/C
context/C
,/C
string/C
value/C
,/C
RequestValidationSource/C
requestValidationSource/C
,/C
string/C
collectionKey/C
,/C
out/C
int/C
validationFailureIndex/C
)/C
{/C
if/C
(/C
collectionKey/C
!=/C
null/C
&&/C
collectionKey.EndsWith/C
(/C
"_NoValidation"/C
)/C
)/C
{/C
validationFailureIndex/C
=/C
0/C
;/C
return/C
true/C
;/C
}/C
return/C
base/C
./C
IsValidRequestString/C
(/C
context/C
,/C
value/C
,/C
requestValidationSource/C
,/C
collectionKey/C
,/C
out/C
validationFailureIndex/C
)/C
;/C
}/C
}/C

For/IN
those/DT
unsure/JJ
of/IN
how/WRB
to/TO
use/VB
PDO/NN
(/-LRB-
coming/VBG
from/IN
the/DT
mysql_/C
functions/NNS
)/-RRB-
,/,
I/PRP
made/VBD
a/DT
very/RB
,/,
very/RB
simple/JJ
PDO/NN
wrapper/NN
that/WDT
is/VBZ
a/DT
single/JJ
file/NN
./.

It/PRP
exists/VBZ
to/TO
show/VB
how/WRB
easy/JJ
it/PRP
is/VBZ
to/TO
do/VB
all/PDT
the/DT
common/JJ
things/NNS
applications/NNS
need/VBP
done/VBN
./.

Works/VBZ
with/IN
PostgreSQL/NNP
,/,
MySQL/NNP
,/,
and/CC
SQLite/NNP
./.

Basically/RB
,/,
read/VB
it/PRP
while/IN
you/PRP
read/VBP
the/DT
manual/NN
to/TO
see/VB
how/WRB
to/TO
put/VB
the/DT
PDO/NN
functions/NNS
to/TO
use/VB
in/IN
real/JJ
life/NN
to/TO
make/VB
it/PRP
simple/JJ
to/TO
store/VB
and/CC
retrieve/VB
values/NNS
in/IN
the/DT
format/NN
you/PRP
want/VBP
./.

I/PRP
want/VBP
a/DT
single/JJ
column/NN
$/C
count/C
=/C
DB/C
::/C
column/C
(/C
'/C
SELECT/C
COUNT/C
(/C
*/C
)/C
FROM/C
`/C
user/C
`/C
)/C
;/C

I/PRP
want/VBP
an/DT
array/NN
(/-LRB-
key/NN
=>/SYM
value/NN
)/-RRB-
results/NNS
(/-LRB-
i.e./FW
for/IN
making/VBG
a/DT
selectbox/C
)/-RRB-
$/C
pairs/C
=/C
DB/C
::/C
pairs/C
(/C
'/C
SELECT/C
`/C
id/C
`/C
,/C
`/C
username/C
`/C
FROM/C
`/C
user/C
`/C
)/C
;/C

I/PRP
want/VBP
a/DT
single/JJ
row/NN
result/VBP
$/C
user/C
=/C
DB/C
::/C
row/C
(/C
'/C
SELECT/C
*/C
FROM/C
`/C
user/C
`/C
WHERE/C
`/C
id/C
`/C
=/C
?/C
'/C
,/C
array/C
(/C
$/C
user_id/C
)/C
)/C
;/C

I/PRP
want/VBP
an/DT
array/NN
of/IN
results/NNS
$/C
banned_users/C
=/C
DB/C
::/C
fetch/C
(/C
'/C
SELECT/C
*/C
FROM/C
`/C
user/C
`/C
WHERE/C
`/C
banned/C
`/C
=/C
?/C
'/C
,/C
array/C
(/C
TRUE/C
)/C
)/C
;/C

@yes123/USR
,/,
there/EX
is/VBZ
no/RB
namespacing/NN
in/IN
my/PRP$
example/NN
./.

It/PRP
is/VBZ
simply/RB
a/DT
static/JJ
class/C NA
./.

I/PRP
think/VBP
you/PRP
're/VBP
confused/VBN
about/IN
the/DT
difference/NN
between/IN
namespaces/NNS
and/CC
proper/JJ
inheritance/NN
design/NN
./.

If/IN
it/PRP
was/VBD
named/VBN
something/NN
like/IN
Micro_DB/C
(/-LRB-
part/NN
of/IN
a/DT
Micro/NN
library/NN
)/-RRB-
then/RB
I/PRP
would/MD
need/VB
to/TO
update/VB
it/PRP
to/TO
\Micro\DB/C NA
in/IN
order/NN
to/TO
be/VB
PHP/NNP
5.3/CD
+/SYM
compliant/JJ
and/CC
maintain/VB
the/DT
correct/JJ
form/NN
of/IN
class/NN
segregation/NN
./.

However/RB
,/,
it/PRP
is/VBZ
merely/RB
a/DT
single/JJ
class/C NA
without/IN
any/DT
form/NN
of/IN
project/NN
//CC
library/NN
designation/NN
./.

Perhaps/RB
you/PRP
see/VBP
all/DT
static/JJ
classes/NNS
as/IN
a/DT
namespace/NN
of/IN
sorts/NNS
,/,
however/RB
the/DT
class/C
does/VBZ
maintain/VB
state/NN
and/CC
shared/JJ
variables/NNS
even/RB
though/IN
it/PRP
's/VBZ
not/RB
initialized/VBN
like/IN
an/DT
object/NN
,/,
which/WDT
means/VBZ
it/PRP
's/VBZ
not/RB
just/RB
a/DT
namespaced/VBD
wrapper/NN
./.

Oh/UH
yes/UH
,/,
static/JJ
methods/NNS
are/VBP
generally/RB
always/RB
a/DT
sign/NN
of/IN
bad/JJ
design/NN
./.

I/PRP
was/VBD
just/RB
saying/VBG
that/IN
it/PRP
had/VBD
nothing/NN
to/TO
do/VB
with/IN
namespacing/NN
./.

However/RB
,/,
I/PRP
believe/VBP
my/PRP$
tiny/JJ
library/NN
is/VBZ
an/DT
exception/NN
since/IN
the/DT
point/NN
was/VBD
simply/RB
an/DT
illustrative/JJ
library/NN
which/WDT
1/LS
)/-RRB-
would/MD
never/RB
be/VB
extended/VBN
and/CC
2/LS
)/-RRB-
would/MD
never/RB
have/VB
unit/NN
tests/NNS
(/-LRB-
do/VB
to/TO
the/DT
target/NN
audience/NN
and/CC
size/NN
of/IN
the/DT
codebase/NN
)/-RRB-
./.

My/PRP$
real/JJ
database/NN
//CC
ORM/NN
libraries/NNS
are/VBP
all/DT
namespace/NN
classes/NNS
which/WDT
are/VBP
to/TO
be/VB
used/VBN
as/IN
real/JJ
and/CC
extendable/JJ
objects/NNS
as/IN
they/PRP
should/MD
be/VB
./.

Do/VBP
n't/RB
you/PRP
understand/VB
that/IN
strings/NNS
has/VBZ
nothing/NN
to/TO
do/VB
with/IN
both/DT
these/DT
cases/NNS
?/.

Can/MD
you/PRP
tell/VB
a/DT
string/NN
from/IN
the/DT
identifier/NN
?/.

Do/VBP
you/PRP
realise/VB
the/DT
SQL/NNP
query/NN
structure/NN
at/IN
all/DT
?/.

And/CC
whole/JJ
your/PRP$
idea/NN
of/IN
"/``
malicious/JJ
characters/NNS
"/''
./.

The/DT
best/JJS
thing/NN
you/PRP
can/MD
do/VB
is/VBZ
to/TO
delete/VB
whole/JJ
answer/NN
,/,
or/CC
at/IN
least/JJS
parts/NNS
with/IN
explanations/NNS
./.

Because/IN
you/PRP
have/VBP
no/DT
idea/NN
how/WRB
it/PRP
actually/RB
works/VBZ
and/CC
what/WP
to/TO
explain/VB
./.

No/DT
offence/NN
,/,
mate/NN
,/,
but/CC
you/PRP
really/RB
do/VBP
./.

Every/DT
answer/NN
here/RB
covers/VBZ
only/RB
part/NN
of/IN
the/DT
problem/NN
./.

In/IN
fact/NN
,/,
there/EX
are/VBP
four/CD
different/JJ
query/NN
parts/NNS
which/WDT
we/PRP
can/MD
add/VB
to/TO
it/PRP
dynamically/RB
:/:

a/DT
string/NN
a/DT
number/NN
an/DT
identifier/NN
a/DT
syntax/NN
keyword/NN
./.

and/CC
prepared/JJ
statements/NNS
covers/VBZ
only/RB
2/CD
of/IN
them/PRP

But/CC
sometimes/RB
we/PRP
have/VBP
to/TO
make/VB
our/PRP$
query/NN
even/RB
more/RBR
dynamic/JJ
,/,
adding/VBG
operators/NNS
or/CC
identifiers/NNS
as/RB
well/RB
./.

So/RB
,/,
we/PRP
will/MD
need/VB
different/JJ
protection/NN
techniques/NNS
./.

In/IN
general/JJ
,/,
such/JJ
a/DT
protection/NN
approach/NN
is/VBZ
based/VBN
on/IN
whitelisting/NN
./.

In/IN
this/DT
case/NN
every/DT
dynamic/JJ
parameter/NN
should/MD
be/VB
hardcoded/VBN
in/IN
your/PRP$
script/NN
and/CC
chosen/VBN
from/IN
that/DT
set/NN
./.

For/IN
example/NN
,/,
to/TO
do/VB
dynamic/JJ
ordering/NN
:/:

$/C
orders/C
=/C
array/C
(/C
"name"/C
,/C
"price"/C
,/C
"qty"/C
)/C
;/C
///CCM
field/NN|CCM
names/NNS|CCM

$/C
key/C
=/C
array_search/C
(/C
$/C
_GET/C
[/C
'sort'/C
]/C
,/C
$/C
orders/C
)/C
)/C
;/C
///CCM
see/VB|CCM
if/IN|CCM
we/PRP|CCM
have/VBP|CCM
such/JJ|CCM
a/DT|CCM
name/NN|CCM

$/C
orderby/C
=/C
$/C
orders/C
[/C
$/$
key/C
]/C
;/C
///CCM
if/IN|CCM
not/RB|CCM
,/,|CCM
first/RB|CCM
one/CD|CCM
will/MD|CCM
be/VB|CCM
set/VBN|CCM
automatically/RB|CCM
./.|CCM

smart/JJ
enuf/RB
:)/UH

$/C
query/C
=/C
"/C
SELECT/C
*/C
FROM/C
`/C
table/C
`/C
ORDER/C
BY/C
$/C
orderby/C
"/C
;/C
///CCM
value/NN|CCM
is/VBZ|CCM
safe/JJ|CCM

However/RB
,/,
there/EX
is/VBZ
another/DT
way/NN
to/TO
secure/VB
identifiers/NNS
-/:
escaping/NN
./.

As/RB
long/RB
as/IN
you/PRP
have/VBP
an/DT
identifier/NN
quoted/VBN
,/,
you/PRP
can/MD
escape/VB
backticks/NNS
inside/RB
by/IN
doubling/VBG
them/PRP
./.

As/IN
a/DT
further/JJ
step/NN
we/PRP
can/MD
borrow/VB
a/DT
truly/RB
brilliant/JJ
idea/NN
of/IN
using/VBG
some/DT
placeholder/NN
(/-LRB-
a/DT
proxy/NN
to/TO
represent/VB
the/DT
actual/JJ
value/NN
in/IN
the/DT
query/NN
)/-RRB-
from/IN
the/DT
prepared/JJ
statements/NNS
and/CC
invent/VB
a/DT
placeholder/NN
of/IN
another/DT
type/NN
-/:
an/DT
identifier/NN
placeholder/NN
./.

So/RB
,/,
to/TO
make/VB
long/JJ
story/NN
short/JJ
:/:
it/PRP
's/VBZ
a/DT
placeholder/NN
,/,
not/RB
prepared/JJ
statement/NN
can/MD
be/VB
considered/VBN
as/IN
a/DT
silver/NN
bullet/NN
./.

So/RB
,/,
a/DT
general/JJ
recommendation/NN
may/MD
be/VB
phrased/VBN
as/RB
As/RB
long/RB
as/IN
you/PRP
are/VBP
adding/VBG
dynamic/JJ
parts/NNS
to/TO
the/DT
query/NN
using/VBG
placeholders/NNS
(/-LRB-
and/CC
these/DT
placeholders/NNS
properly/RB
processed/VBN
of/IN
course/NN
)/-RRB-
,/,
you/PRP
can/MD
be/VB
sure/JJ
that/IN
your/PRP$
query/NN
is/VBZ
safe/JJ
./.

Still/RB
there/EX
is/VBZ
an/DT
issue/NN
with/IN
SQL/NNP
syntax/NN
keywords/NNS
(/-LRB-
such/JJ
as/IN
AND/C NA
,/,
DESC/C NA
and/CC
such/JJ
)/-RRB-
but/CC
whitelisting/NN
seems/VBZ
the/DT
only/JJ
approach/NN
in/IN
this/DT
case/NN
./.

@Synchro/USR
Finally/RB
I/PRP
am/VBP
done/VBN
with/IN
it/PRP
,/,
and/CC
I/PRP
have/VBP
to/TO
say/VB
that/IN
I/PRP
'm/VBP
proud/JJ
of/IN
my/PRP$
work/NN
,/,
as/IN
I/PRP
've/VBP
got/VBD
it/PRP
easy/JJ
,/,
fast/JJ
and/CC
lightweight/JJ
./.

You/PRP
can/MD
find/VB
the/DT
link/NN
in/IN
my/PRP$
profile/NN
./.

Your/PRP$
two/CD
comments/NNS
contradicts/VBZ
with/IN
each/DT
other/JJ
:)/UH

@Khez/USR
as/IN
a/DT
matter/NN
of/IN
fact/NN
this/DT
hexing/VBG
solution/NN
is/VBZ
worse/JJR
than/IN
usual/JJ
quoting/VBG
//CC
escaping/VBG
./.

For/IN
the/DT
very/JJ
example/NN
provided/VBD
,/,
it/PRP
will/MD
FAIL/VB
for/IN
the/DT
legit/JJ
values/NNS
:/:
as/IN
it/PRP
was/VBD
pointed/VBN
out/RP
in/IN
the/DT
other/JJ
comment/NN
,/,
"/C
SELECT/C
title/C
FROM/C
article/C
WHERE/C
id/C
=/C
0x/C
"/C
./C
bin2hex/C
(/C
$/$
_GET/C
[/C
"id"/C
]/C
)/C
wo/MD
n't/RB
find/VB
anything/NN
for/IN
the/DT
honest/JJ
number/NN
of/IN
42/CD
./.

While/IN
quoted/VBN
//CC
escaped/VBN
value/NN
would/MD
be/VB
both/PDT
safe/JJ
and/CC
fruitful/JJ
./.

Please/VB
,/,
please/VB
please/VB
PLEASE/VB
read/VB
my/PRP$
code/NN
!/.

There/EX
is/VBZ
no/DT
0x/C
./C
$/C
_GET/C
[/C
"id"/C
]/C
there/RB
./.

But/CC
anyway/RB
,/,
it/PRP
wo/MD
n't/RB
find/VB
a/DT
number/NN
42/CD
too/RB

Neither/CC
0x3432/CD
nor/CC
0x42/CD
wo/MD
n't/RB
find/VB
a/DT
thing/NN
./.

That/DT
is/VBZ
the/DT
point/NN
./.

This/DT
is/VBZ
why/WRB
your/PRP$
"/``
solution/NN
"/''
is/VBZ
worse/JJR
than/IN
regular/JJ
formatting/NN
and/CC
thus/RB
not/RB
a/DT
solution/NN
at/IN
all/DT
./.

A/DT
note/NN
to/TO
readers/NNS
who/WP
still/RB
ca/MD
n't/RB
get/VB
the/DT
point/NN
:/:
This/DT
answer/NN
contradicts/VBZ
with/IN
itself/PRP
./.

It/PRP
can/MD
not/RB
solve/VB
the/DT
very/JJ
problem/NN
query/NN
that/WDT
posted/VBD
as/IN
a/DT
bad/JJ
example/NN
./.

This/DT
answer/NN
is/VBZ
wrong/JJ
and/CC
deceiving/JJ
./.

The/DT
approach/NN
is/VBZ
even/RB
worse/JJR
than/IN
regular/JJ
manual/JJ
formatting/NN
,/,
not/RB
to/TO
mention/VB
prepared/JJ
statements/NNS
./.

@griffin/USR
I/PRP
beg/VBP
my/PRP$
pardon/NN
,/,
did/VBD
you/PRP
try/VB
to/TO
run/VB
the/DT
very/RB
proposed/VBN
solution/NN
yourself/PRP
?/.

"/C
SELECT/C
title/C
FROM/C
article/C
WHERE/C
id/C
=/C
0x/C
"/C
./C
bin2hex/C
(/C
$/C
_GET/C
[/C
"id"/C
]/C
)/C
?/.

What/WP
is/VBZ
wrong/JJ
with/IN
representation/NN
here/RB
?/.

"/C
SELECT/C
title/C
FROM/C
article/C
WHERE/C
id/C
=/C
?/C
"/C
can/MD
do/VB
it/PRP
for/IN
either/PDT
string/NN
and/CC
number/NN
./.

And/CC
we/PRP
will/MD
have/VB
slightly/RB
unreadable/JJ
but/CC
reliable/JJ
query/NN
./.

"/C
SELECT/C
title/C
FROM/C
article/C
WHERE/C
id/C
=/C
'/C
"/C
./C
mysql_real_escape_string/C
(/C
$/C
_GET/C
[/C
"/C
id/C
"/C
]/C
)/C
./C
"/C
'/C
"/C
can/MD
do/VB
it/PRP
for/IN
either/PDT
string/NN
and/CC
number/NN
./.

And/CC
we/PRP
will/MD
have/VB
readable/JJ
and/CC
reliable/JJ
query/NN
./.

"/C
SELECT/C
title/C
FROM/C
article/C
WHERE/C
id/C
=/C
0x/C
"/C
./C
bin2hex/C
(/C
$/C
_GET/C
[/C
"id"/C
]/C
)/C
can/MD
do/VB
it/PRP
for/IN
the/DT
string/NN
only/RB
and/CC
we/PRP
will/MD
have/VB
unreadable/JJ
and/CC
unreliable/JJ
query/NN
./.

And/CC
"/``
representation/NN
"/''
has/VBZ
nothing/NN
to/TO
do/VB
here/RB
./.

Why/WRB
should/MD
I/PRP
try/VB
anything/NN
beside/IN
two/CD
conventional/JJ
approaches/NNS
I/PRP
listed/VBD
above/IN
?/.

Why/WRB
should/MD
I/PRP
fight/VB
whatever/WDT
troubles/NNS
absent/JJ
in/IN
the/DT
other/JJ
methods/NNS
?/.

@griffin/USR
what/WP
?/.

What/WP
does/VBZ
hexing/NN
to/TO
do/VB
with/IN
table/NN
size/NN
?/.

Are/VBP
you/PRP
sure/JJ
you/PRP
understand/VBP
the/DT
difference/NN
between/IN
data/NNS
and/CC
it/PRP
's/POS
representation/NN
?/.

Ah/UH
,/,
I/PRP
see/VBP
now/RB
./.

Well/RB
,/,
it/PRP
gone/VBD
too/RB
far/RB
from/IN
the/DT
initial/JJ
topic/NN
of/IN
SQL/NNP
injection/NN
./.

Too/RB
bad/JJ
,/,
none/NN
of/IN
your/PRP$
abstract/JJ
musings/NNS
proved/VBD
this/DT
method/NN
in/IN
question/NN
useful/JJ
or/CC
reliable/JJ
,/,
nor/CC
provided/VBD
any/DT
reason/NN
to/TO
prefer/VB
it/PRP
over/IN
prepared/JJ
statements/NNS
./.

This/DT
answer/NN
is/VBZ
still/RB
pointless/JJ
and/CC
rather/RB
a/DT
swindle/NN
than/IN
a/DT
solution/NN
./.

First/RB
of/IN
all/DT
,/,
proposed/VBN
method/NN
is/VBZ
just/RB
another/DT
way/NN
to/TO
format/VB
strings/NNS
./.

There/EX
is/VBZ
nothing/NN
new/JJ
or/CC
special/JJ
about/IN
this/DT
method/NN
./.

Yet/CC
it/PRP
's/VBZ
advertised/VBN
as/IN
a/DT
silver/NN
bullet/NN
./.

While/IN
it/PRP
's/VBZ
actually/RB
less/RBR
reliable/JJ
,/,
because/IN
it/PRP
requires/VBZ
special/JJ
treatment/NN
for/IN
numbers/NNS
,/,
while/IN
regular/JJ
quoting/NN
//CC
escaping/NN
does/VBZ
n't/RB
./.

Not/RB
to/TO
mention/VB
all/PDT
the/DT
widely/RB
known/VBN
flaws/NNS
of/IN
manual/JJ
formatting/NN
which/WDT
proved/VBD
the/DT
method/NN
unreliable/JJ
and/CC
unsafe/JJ
,/,
while/IN
prepared/JJ
statements/NNS
proved/VBD
to/TO
be/VB
safe/JJ
./.

It/PRP
's/VBZ
a/DT
shame/NN
this/DT
answer/NN
is/VBZ
still/RB
here/RB
,/,
advertising/VBG
wrong/JJ
practice/NN
as/IN
a/DT
silver/NN
bullet/NN
./.

-/SYM
1/CD
./.

Input/NN
validation/NN
has/VBZ
absolutely/RB
nothing/NN
to/TO
do/VB
with/IN
SQL/NNP
./.

This/DT
is/VBZ
one/CD
of/IN
many/JJ
delusions/NNS
connected/VBN
to/TO
the/DT
problem/NN
./.

You/PRP
can/MD
not/RB
validate/VB
input/NN
by/IN
the/DT
time/NN
when/WRB
SQL/NNP
query/NN
have/VBP
to/TO
be/VB
executed/VBN
./.

So/RB
,/,
you/PRP
just/RB
can/MD
not/RB
tell/VB
which/WDT
input/NN
data/NN
have/VBP
to/TO
be/VB
formatted/VBN
and/CC
which/WDT
way/NN
./.

That/DT
's/VBZ
just/RB
completely/RB
different/JJ
realms/NNS
./.

Not/RB
to/TO
mention/VB
that/DT
input/NN
validation/NN
rules/NNS
may/MD
change/VB
,/,
to/TO
reflect/VB
business/NN
logic/NN
change/NN
.../:
and/CC
thus/RB
leave/VB
SQL/NNP
open/JJ
./.

One/PRP
have/VBP
to/TO
format/NN
their/PRP$
SQL/NNP
always/RB
,/,
despite/IN
of/IN
any/DT
business/NN
or/CC
validation/NN
logic/NN

This/DT
is/VBZ
absolutely/RB
pointless/JJ
answer/NN
./.

1/LS
./SYM
SELECT-based/JJ
injection/NN
is/VBZ
a/DT
disaster/NN
alone/RB
./.

So/RB
,/,
#/SYM
1/CD
is/VBZ
quite/RB
useless/JJ
./.

2/LS
./SYM
Data/NN
filtering/NN
wo/MD
n't/RB
help/VB
for/IN
the/DT
most/JJS
of/IN
real/JJ
life/NN
usage/NN
./.

Imagine/VB
one/PRP
were/VBD
used/VBN
on/IN
Stack/NNP
Overflow/NNP
-/:
this/DT
answer/NN
just/RB
were/VBD
unable/JJ
to/TO
happen/VB
,/,
as/IN
it/PRP
's/VBZ
full/JJ
of/IN
"/``
evil/JJ
"/''
words/NNS
like/IN
SELECT/C NA
,/,
UNION/C NA
and/CC
even/RB
complete/JJ
"/``
malicious/JJ
"/''
BENCHMARK/NN
query/NN
./.

Thus/RB
,/,
#/SYM
2/CD
is/VBZ
inapplicable/JJ
too/RB
./.

3/LS
./SYM
"/``
Use/VB
other/JJ
tools/NNS
"/''
is/VBZ
not/RB
a/DT
protection/NN
measure/NN
at/IN
all/DT
./.

So/RB
,/,
#/SYM
3/CD
is/VBZ
as/RB
pointless/JJ
as/IN
other/JJ
two/CD
./.

I/PRP
really/RB
love/VBP
this/DT
kind/NN
of/IN
answers/NNS
,/,
which/WDT
become/VBP
a/DT
set/NN
of/IN
contradicting/VBG
statements/NNS
after/IN
desperate/JJ
attempt/NN
to/TO
salvage/VB
it/PRP
without/IN
having/VBG
the/DT
proper/JJ
knowledge/NN
./.

It/PRP
does/VBZ
not/RB
solve/VB
injection/NN
problem/NN
,/,
not/RB
even/RB
slightest/JJS
./.

Even/RB
only/RB
SELECT/C NA
rights/NNS
are/VBP
harmful/JJ
./.

This/DT
is/VBZ
not/RB
a/DT
solution/NN
but/CC
rather/RB
a/DT
placebo/NN
./.

One/PRP
could/MD
use/VB
it/PRP
for/IN
whatever/WDT
else/JJ
purpose/NN
but/CC
isql/NNP
injection/NN
protection/NN
./.

@CraigRinger/USR
My/PRP$
house/NN
is/VBZ
not/RB
on/IN
fire/NN
./.

I/PRP
have/VBP
no/DT
damage/NN
and/CC
thus/RB
no/DT
need/NN
to/TO
"/``
minimize/VB
"/''
it/PRP
./.

Anyway/RB
,/,
the/DT
question/NN
is/VBZ
"/``
How/WRB
to/TO
prevent/VB
a/DT
fire/NN
"/''
,/,
not/RB
"/``
How/WRB
to/TO
let/VB
my/PRP$
house/NN
in/IN
fire/NN
but/CC
minimize/VBP
the/DT
damage/NN
"/''
./.

It/PRP
fits/VBZ
for/IN
basic/JJ
CRUD/C NA
operations/NNS
only/RB
./.

@SteveMuster/USR
well/RB
,/,
that/DT
's/VBZ
good/JJ
for/IN
you/PRP
./.

Unfortunately/RB
,/,
I/PRP
have/VBP
to/TO
use/VB
full/JJ
SQL/NNP
,/,
not/RB
such/JJ
a/DT
limited/JJ
subset/NN
offered/VBN
by/IN
CI/NN
./.

Say/VB
,/,
sometimes/RB
I/PRP
have/VBP
run/VBN
not/RB
just/RB
insert-and-forget/JJ
but/CC
INSERT/C NA
IGNORE/C NA
or/CC
INSERT/C NA
DELAYED/C NA
./.

Not/RB
just/RB
selects/VBZ
but/CC
index/NN
hinting/VBG
and/CC
such/JJ
./.

And/CC
so/RB
on/IN
./.

I/PRP
am/VBP
afraid/JJ
that/IN
admin/NN
would/MD
rather/RB
just/RB
delete/VB
this/DT
answer/NN
./.

This/DT
approach/NN
is/VBZ
just/RB
impractical/JJ
./.

it/PRP
's/VBZ
impossible/JJ
to/TO
catch/VB
ALL/NN
the/DT
patterns/NNS
using/VBG
mod_rewrite/C NA
rules/NNS
./.

Not/RB
to/TO
mention/VB
that/IN
some/DT
of/IN
them/PRP
can/MD
be/VB
perfectly/RB
legit/JJ
./.

And/CC
what/WP
about/IN
POST/C NA
requests/NNS
?/.

that/DT
's/VBZ
the/DT
point/NN
./.

As/IN
PHP/NNP
the/DT
language/NN
will/MD
do/VB
the/DT
job/NN
anyway/RB
,/,
all/PDT
this/DT
mod_rewrite/C NA
unreliable/JJ
magic/NN
become/VBP
useless/JJ
./.

Also/RB
,/,
there/EX
is/VBZ
absolutely/RB
no/DT
point/NN
in/IN
checking/VBG
$/C NA
_POST/C NA
array/NN
members/NNS
with/IN
is_string/C
(/C
)/C

A/DT
hint/NN
./.

You/PRP
could/MD
use/VB
sprintf/C NA
(/C NA
)/C NA
function/NN
which/WDT
will/MD
not/RB
only/RB
parse/VB
a/DT
query/NN
for/IN
you/PRP
,/,
but/CC
also/RB
let/VB
you/PRP
choose/VB
format/NN
manually/RB
(/-LRB-
say/VB
,/,
your/PRP$
function/NN
will/MD
fail/VB
if/IN
LIMIT/C NA
clause/NN
parameter/NN
will/MD
be/VB
passed/VBN
from/IN
request/NN
query/NN
string/NN
)/-RRB-
./.

In/IN
fact/NN
,/,
you/PRP
should/MD
n't/RB
trust/VB
to/TO
variable/JJ
type/NN
./.

That/DT
's/VBZ
why/WRB
your/PRP$
approach/NN
will/MD
never/RB
get/VB
any/DT
followers/NNS
./.

So/RB
,/,
it/PRP
's/VBZ
the/DT
problem/NN
-/:
"/``
if/IN
caller/NN
casts/VBZ
"/''
./.

that/DT
's/VBZ
what/WP
I/PRP
am/VBP
talking/VBG
about/IN
-/:
what/WP
's/VBZ
the/DT
use/NN
of/IN
the/DT
function/NN
that/WDT
require/VBP
whatever/WDT
extra/JJ
actions/NNS
?/.

not/RB
everything/NN
,/,
as/IN
I/PRP
said/VBD
above/IN
./.

There/EX
's/VBZ
a/DT
different/JJ
solution/NN
to/TO
this/DT
error/NN
if/IN
you/PRP
're/VBP
using/VBG
ASP.NET/NNP
MVC/NN
:/:

ASP.NET/NNP
MVC/NN
-/--
pages/C
validateRequest/C
=/C
false/C
does/VBZ
n't/RB
work/VB
?/.

Why/WRB
is/VBZ
ValidateInput/C
(/C
False/C
)/C
not/RB
working/VBG
?/.

ASP.NET/NNP
MVC/NN
RC1/NN
,/,
VALIDATEINPUT/C
,/,
A/DT
POTENTIAL/JJ
DANGEROUS/JJ
REQUEST/NN
AND/CC
THE/DT
PITFALL/NN

Visual/NNP
Basic/NNP
sample/NN
:/:

</C
AcceptVerbs/C
(/C
HttpVerbs/C
./C
Post/C
)/C
,/C
ValidateInput/C
(/C
False/C
)/C
>/C
_/C
Function/C
Edit/C
(/C
ByVal/C
collection/C
As/C
FormCollection/C
)/C
As/C
ActionResult/C
.../F
End/C
Function/C

C#/NNP
sample/NN
:/:

[/C
HttpPost/C
,/C
ValidateInput/C
(/C
false/C
)/C
]/C
public/C
ActionResult/C
Edit/C
(/C
FormCollection/C
collection/C
)/C
{/C
///CCM
.../F|CCM
}/C

As/IN
you/PRP
can/MD
see/VB
,/,
people/NNS
suggest/VBP
you/PRP
to/TO
use/VB
prepared/JJ
statements/NNS
at/IN
the/DT
most/JJS
./.

It/PRP
's/VBZ
not/RB
wrong/JJ
,/,
but/CC
when/WRB
your/PRP$
query/NN
is/VBZ
executed/VBN
just/RB
once/RB
per/IN
process/NN
,/,
there/EX
would/MD
be/VB
a/DT
slightly/RB
performance/NN
penalty/NN
./.

I/PRP
was/VBD
facing/VBG
this/DT
issue/NN
,/,
but/CC
I/PRP
think/VBP
I/PRP
solved/VBD
it/PRP
in/IN
very/RB
sophisticated/JJ
way/NN
-/--
the/DT
way/NN
hackers/NNS
use/VBP
to/TO
avoid/VB
using/VBG
quotes/NNS
./.

I/PRP
used/VBD
this/DT
in/IN
conjuction/NN
with/IN
emulated/VBN
prepared/JJ
statements/NNS
./.

I/PRP
use/VBP
it/PRP
to/TO
prevent/VB
all/DT
kinds/NNS
of/IN
possible/JJ
SQL/NNP
injection/NN
attacks/NNS
./.

My/PRP$
approach/NN
:/:

If/IN
you/PRP
expect/VBP
input/NN
to/TO
be/VB
integer/NN
make/VBP
sure/JJ
it/PRP
's/VBZ
really/RB
integer/NN
./.

In/IN
a/DT
variable-type/JJ
language/NN
like/IN
PHP/NNP
it/PRP
is/VBZ
this/DT
very/RB
important/JJ
./.

You/PRP
can/MD
use/VB
for/IN
example/NN
this/DT
very/RB
simple/JJ
but/CC
powerful/JJ
solution/NN
:/:

sprintf/C
(/C
"/C
SELECT/C
1/C
,/C
2/C
,/C
3/C
FROM/C
table/C
WHERE/C
4/C
=/C
%/C
u/C
"/C
,/C
$/C
input/C
)/C
;/C

If/IN
you/PRP
expect/VBP
anything/NN
else/RB
from/IN
integer/NN
hex/C NA
it/PRP
./.

If/IN
you/PRP
hex/C NA
it/PRP
,/,
you/PRP
will/MD
perfectly/RB
escape/VB
all/DT
input/NN
./.

In/IN
C++/NNP
there/EX
's/VBZ
a/DT
function/NN
called/VBN
mysql_hex_string/C NA
(/C NA
)/C NA
,/,
in/IN
PHP/NNP
you/PRP
can/MD
use/VB
bin2hex/C NA
(/C NA
)/C NA
./.

Do/VBP
n't/RB
worry/VB
about/IN
that/IN
the/DT
escaped/VBN
string/NN
will/MD
have/VB
2x/JJ
size/NN
of/IN
its/PRP$
original/JJ
length/NN
because/IN
even/RB
if/IN
you/PRP
use/VBP
mysql_real_escape_string/C NA
,/,
PHP/NNP
has/VBZ
to/TO
allocate/VB
same/JJ
capacity/NN
(/C NA
(/C NA
2/C NA
*/C NA
input_length/C NA
)/C NA
+/C NA
1/C NA
)/C NA
,/,
which/WDT
is/VBZ
the/DT
same/JJ
./.

This/DT
hex/C NA
method/NN
is/VBZ
often/RB
used/VBN
when/WRB
you/PRP
transfer/VBP
binary/JJ
data/NNS
,/,
but/CC
I/PRP
see/VBP
no/DT
reason/NN
why/WRB
not/RB
use/VB
it/PRP
on/IN
all/DT
data/NNS
to/TO
prevent/VB
SQL/NNP
injection/NN
attacks/NNS
./.

Note/VB
that/IN
you/PRP
have/VBP
to/TO
prepend/VB
data/NNS
with/IN
0x/CD
or/CC
use/VB
the/DT
MySQL/NNP
function/NN
UNHEX/C NA
instead/RB
./.

So/RB
for/IN
example/NN
the/DT
query/NN
:/:
SELECT/C
password/C
FROM/C
users/C
WHERE/C
name/C
=/C
'root'/C
Will/MD
become/VB
:/:
SELECT/C
password/C
FROM/C
users/C
WHERE/C
name/C
=/C
0x726f6f74/C
or/CC
SELECT/C
password/C
FROM/C
users/C
WHERE/C
name/C
=/C
UNHEX/C
(/C
'726f6f74'/C
)/C

Hex/C NA
is/VBZ
the/DT
perfect/JJ
escape/NN
./.

No/DT
way/NN
to/TO
inject/VB
./.

Difference/NN
between/IN
UNHEX/C NA
function/NN
and/CC
0x/CD
prefix/NN

There/EX
was/VBD
some/DT
discussion/NN
in/IN
comments/NNS
,/,
so/IN
I/PRP
finally/RB
want/VBP
to/TO
make/VB
it/PRP
clear/JJ
./.

These/DT
two/CD
approaches/NNS
are/VBP
very/RB
similar/JJ
,/,
but/CC
they/PRP
are/VBP
a/DT
little/RB
different/JJ
in/IN
some/DT
ways/NNS
:/:

0x/CD
prefix/NN
can/MD
only/RB
be/VB
used/VBN
on/IN
data/NNS
columns/NNS
such/JJ
as/IN
char/C
,/,
varchar/C
,/,
text/C
,/,
block/C
,/,
binary/C
,/,
etc/FW
./.

Also/RB
its/PRP$
use/NN
is/VBZ
a/DT
little/RB
complicated/JJ
if/IN
you/PRP
are/VBP
about/IN
to/TO
insert/VB
an/DT
empty/JJ
string/NN
./.

You/PRP
'll/MD
have/VB
to/TO
entirely/RB
replace/VB
it/PRP
with/IN
'/``
,/,
or/CC
you/PRP
'll/MD
get/VB
an/DT
error/NN
./.

UNHEX/C NA
(/C NA
)/C NA
works/VBZ
on/IN
any/DT
column/NN
;/:
you/PRP
do/VBP
not/RB
have/VB
to/TO
worry/VB
about/IN
the/DT
empty/JJ
string/NN
./.

Hex/C NA
methods/NNS
are/VBP
often/RB
used/VBN
as/IN
attacks/NNS

Note/VBP
that/IN
this/DT
hex/C NA
method/NN
is/VBZ
often/RB
used/VBN
as/IN
an/DT
SQL/NNP
injection/NN
attack/NN
where/WRB
integers/NNS
are/VBP
just/RB
like/IN
strings/NNS
and/CC
escaped/VBD
just/RB
with/IN
mysql_real_escape_string/C NA
./.

Then/RB
you/PRP
can/MD
avoid/VB
use/NN
of/IN
quotes/NNS
./.

For/IN
example/NN
,/,
if/IN
you/PRP
just/RB
do/VBP
something/NN
like/IN
this/DT
:/:
"/``
SELECT/C
title/C
FROM/C
article/C
WHERE/C
id/C
=/C
"/C
./C
mysql_real_escape_string/C
(/C
$/C
_GET/C
[/C
"id"/C
]/C
)/C
an/DT
attack/NN
can/MD
inject/VB
you/PRP
very/RB
easily/RB
./.

Consider/VB
the/DT
following/VBG
injected/VBN
code/C
returned/VBD
from/IN
your/PRP$
script/NN
:/:
SELECT/C
.../C
WHERE/C
id/C
=/C
-/C
1/C
union/C
all/C
select/C
table_name/C
from/C
information_schema/C
./C
tables/C

and/CC
now/RB
just/RB
extract/VB
table/NN
structure/NN
:/:
SELECT/C
.../C
WHERE/C
id/C
=/C
-/C
1/C
union/C
all/C
select/C
column_name/C
from/C
information_schema/C
./C
column/C
where/C
table_name/C
=/C
0x61727469636c65/C

And/CC
then/RB
just/RB
select/VB
whatever/WDT
data/NNS
ones/PRP
want/VBP
./.

Cool/JJ
is/VBZ
n't/RB
it/PRP
?/.

But/CC
if/IN
the/DT
coder/NN
of/IN
injectable/JJ
site/NN
would/MD
hex/C NA
it/PRP
,/,
no/DT
injection/NN
would/MD
be/VB
possible/JJ
because/IN
the/DT
query/NN
would/MD
look/VB
like/IN
this/DT
:/:

SELECT/C
.../C
WHERE/C
id/C
=/C
UNHEX/C
(/C
'2d312075...3635'/C
)/C

@dadinck/USR
If/IN
it/PRP
is/VBZ
numeric/JJ
,/,
you/PRP
dont/VBP
need/VB
to/TO
hex/C NA
it/PRP
./.

@YourCommonSense/USR
You/PRP
are/VBP
wrong/JJ
!/.

Number/NN
42/CD
are/VBP
two/CD
bytes/NNS
4/CD
and/CC
2/CD
so/IN
the/DT
result/NN
will/MD
be/VB
0x3432/CD
./.

Also/RB
be/VB
aware/JJ
of/IN
using/VBG
it/PRP
like/IN
that/DT
because/IN
if/IN
id/C
does/VBZ
nt/RB
contain/VBP
anything/NN
you/PRP
will/MD
get/VB
id/C NA
=/C NA
0x/C NA
and/CC
end/VB
up/RP
with/IN
an/DT
error/NN
./.

@asim-ishaq/USR
No/UH
./.

Hex/C NA
is/VBZ
decoded/VBD
by/IN
mysql/NNP
./.

Its/PRP$
just/RB
transfer-encoding/JJ
./.

Data/NN
representation/NN
is/VBZ
the/DT
same/JJ
./.

You/PRP
can/MD
try/VB
it/PRP
yourself/PRP
:)/UH

@SumitGupta/USR
Yea/UH
,/,
you/PRP
did/VBD
./.

MySQL/NNP
does/VBZ
nt/RB
concatenate/VB
with/IN
+/SYM
but/CC
with/IN
CONCAT/C NA
./.

And/CC
to/TO
the/DT
performance/NN
:/:
I/PRP
dont/VBP
think/VB
it/PRP
affects/VBZ
performance/NN
because/IN
mysql/NNP
has/VBZ
to/TO
parse/VB
data/NNS
and/CC
it/PRP
does/VBZ
nt/RB
matter/NN
if/IN
origin/NN
is/VBZ
string/NN
or/CC
hex/NN

@YourCommonSense/USR
What/WDT
errors/NNS
do/VBP
you/PRP
encounter/VB
?/.

Be/VB
specific/JJ
./.

@YourCommonSense/USR
Your/PRP$
0x/C
./C
$/C
_GET/C
[/C
"id"/C
]/C
for/IN
id/C
42/CD
will/MD
result/VB
in/IN
byte/NN
with/IN
ascii/NNP
code/NN
42/CD
./.

Try/VB
SELECT/C
0x42/C
and/CC
you/PRP
'll/MD
see/VB
what/WP
you/PRP
are/VBP
at/IN
./.

@YourCommonSense/USR
You/PRP
do/VBP
nt/RB
understand/VBP
the/DT
concept/NN
.../.

If/IN
you/PRP
want/VBP
to/TO
have/VB
string/NN
in/IN
mysql/NNP
you/PRP
quote/VBP
it/PRP
like/IN
this/DT
'/``
root/NN
'/''
or/CC
you/PRP
can/MD
hex/C NA
it/PRP
0x726f6f74/C NA

BUT/CC
if/IN
you/PRP
want/VBP
a/DT
number/NN
and/CC
send/VB
it/PRP
as/IN
string/NN
you/PRP
will/MD
probably/RB
write/VB
'/``
42/CD
'/''
not/RB
CHAR/C
(/C
42/C
)/C
.../.

'/``
42/CD
'/''
in/IN
hex/C NA
would/MD
be/VB
0x3432/CD
not/RB
0x42/CD

@YourCommonSense/USR
I/PRP
have/VBP
nothing/NN
to/TO
say/VB
.../--
just/RB
lol/UH
.../.

if/IN
you/PRP
still/RB
want/VBP
to/TO
try/VB
hex/C NA
on/IN
numeric/JJ
fields/NNS
,/,
see/VBP
second/JJ
comment/NN
./.

I/PRP
bet/VBP
with/IN
you/PRP
that/IN
it/PRP
'll/MD
work/VB
./.

@YourCommonSense/USR
you/PRP
still/RB
do/VB
nt/RB
understand/VB
?/.

You/PRP
can/MD
not/RB
use/VB
0x/C NA
and/CC
concat/C NA
because/IN
if/IN
the/DT
string/NN
is/VBZ
empty/JJ
you/PRP
will/MD
end/VB
with/IN
an/DT
error/NN
./.

If/IN
you/PRP
want/VBP
simple/JJ
alternative/NN
to/TO
your/PRP$
query/NN
try/VB
this/DT
one/CD
SELECT/C
title/C
FROM/C
article/C
WHERE/C
id/C
=/C
UNHEX/C
(/C
'/C
./C
bin2hex/C
(/C
$/C
_GET/C
[/C
"id"/C
]/C
)/C
./C
'/C
)/C

@YourCommonSense/USR
If/IN
you/PRP
do/VBP
nt/RB
want/VB
to/TO
do/VB
that/IN
you/PRP
do/VBP
nt/RB
have/VB
to/TO
do/VB
that/DT
./.

I/PRP
'm/VBP
not/RB
forcing/VBG
you/PRP
:)/UH

@Cypher/USR
You/PRP
will/MD
have/VB
to/TO
check/VB
for/IN
your/PRP$
provider/NN
's/POS
documentation/NN
./.

It/PRP
's/VBZ
usually/RB
linked/VBN
with/IN
raw/JJ
binary/JJ
data/NNS
./.

what/WP
if/IN
we/PRP
have/VBP
to/TO
insert/VB
multiple/JJ
values/NNS
into/IN
table/NN
,/,
using/VBG
above/IN
prepared/JJ
statement/NN
,/,
when/WRB
we/PRP
use/VBP
$/C
stmt/C
->/C
bind_param/C
(/C
"s"/C
,/C
$/C
unsafe_variable/C
)/C
;/C
??/.

About/IN
using/VBG
auto_ptr/C NA
and/CC
relying/VBG
on/IN
the/DT
stack/NN
unwinding/NN
;/:
C++/NNP
standard/NN
leaves/VBZ
it/PRP
undefined/JJ
if/IN
your/PRP$
stack/VBP
is/VBZ
not/RB
covered/VBN
with/IN
a/DT
try-catch/C
block/NN
./.

And/CC
to/TO
my/PRP$
knowledge/NN
if/IN
you/PRP
do/VBP
n't/RB
enable/VB
compiler/NN
switches/NNS
both/CC
GCC/NNP
ans/CC
VisualC++/NNP
do/VBP
n't/RB
do/VB
stack/NN
unwinding/NN
after/IN
an/DT
exception/NN
without/IN
a/DT
try/C NA
block/NN
./.

This/DT
is/VBZ
not/RB
a/DT
problem/NN
for/IN
single/JJ
threaded/VBN
applications/NNS
(/-LRB-
there/EX
will/MD
eventually/RB
be/VB
a/DT
try/C NA
block/NN
at/IN
the/DT
main/C NA
method/NN
)/-RRB-
but/CC
after/IN
introduction/NN
of/IN
C++/NNP
11/CD
MT/NN
structures/NNS
(/-LRB-
std/C
::/C
thread/C
,/,
std/C
::/C
async/C
)/-RRB-
stack/NN
unwinding/NN
can/MD
be/VB
a/DT
problem/NN
to/TO
watch/VB
out/RP
./.

I/PRP
can/MD
imagine/VB
the/DT
horrors/NNS
that/CC
ensue/VBP
in/IN
these/DT
situations/NNS
.../.

Schemaless/JJ
databases/NNS
are/VBP
a/DT
much/RB
better/JJR
fit/NN
for/IN
rapid/JJ
prototyping/NN
and/CC
iterative/JJ
development/NN
,/,
but/CC
like/IN
everything/NN
else/RB
,/,
such/JJ
flexibility/NN
comes/VBZ
with/IN
various/JJ
trade-offs/NNS
./.

I/PRP
am/VBP
sad/JJ
I/PRP
can/MD
only/RB
give/VB
one/CD
upvote/NN
to/TO
this/DT
concise/JJ
and/CC
complete/JJ
question-with-answers-edited-in/NN
:)/UH

Suppose/VB
you/PRP
also/RB
want/VBP
to/TO
do/VB
ad/FW
hoc/FW
distribution/NN
through/IN
Jenkins/NNP
,/,
this/DT
necessitates/VBZ
that/IN
Jenkins/NNP
has/VBZ
access/NN
to/TO
a/DT
Distribution/NN
certificate/NN
,/,
and/CC
the/DT
team/NN
admin/NN
identity/NN
,/,
in/IN
addition/NN
to/TO
the/DT
provisioning/VBG
profiles/NNS
./.

Using/VBG
an/DT
exported/VBN
identity/NN
in/IN
a/DT
.cer/URI
file/NN
,/,
you/PRP
can/MD
programmatically/RB
import/VB
it/PRP
like/IN
so/RB
,/,
the/DT
-/C NA
A/C NA
switch/NN
is/VBZ
to/TO
allow/VB
all/DT
programs/NNS
access/NN
to/TO
this/DT
entry/NN
./.

Alternatively/RB
,/,
you/PRP
could/MD
use/VB
several/JJ
-/C NA
T/C NA
/path/to/program/URI
switches/VBZ
to/TO
allow/VB
codesign/NN
and/CC
xcodebuild/C NA
access/NN
./.
:/.

$/C
security/C
import/C
devcertificate/C
./C
cer/C
-/C
k/C
jenkins/C
./C
keychain/C
-/C
A/C

Of/IN
course/NN
,/,
we/PRP
should/MD
also/RB
have/VB
the/DT
Apple/NNP
WWDCRA/NNP
certificate/NN
,/,
imported/VBN
in/IN
pretty/RB
much/RB
the/DT
same/JJ
way/NN
:/.

$/C
security/C
import/C
AppleWWDRCA/C
./C
cer/C
-/C
k/C
jenkins/C
./C
keychain/C
-/C
A/C

However/RB
,/,
we/PRP
also/RB
need/VBP
the/DT
private/JJ
key/NN
for/IN
the/DT
devcertificate.cer/URI
./.

To/TO
do/VB
this/DT
,/,
you/PRP
need/VBP
to/TO
export/VB
the/DT
corresponding/JJ
private/JJ
key/NN
as/IN
a/DT
.p12/URI
key/NN
and/CC
set/VB
a/DT
password/NN
./.

Put/VB
it/PRP
somewhere/RB
you/PRP
can/MD
access/VB
it/PRP
from/IN
your/PRP$
Jenkins/NNP
shell/NN
,/,
unlock/VB
the/DT
keychain/NN
,/,
and/CC
import/VB
it/PRP
:/.

$/C
security/C
unlock-keychain/C
-/C
p/C
YourKeychainPass/C
jenkins/C
./C
keychain/C
$/C
security/C
import/C
devprivatekey/C
./C
p12/C
-/C
k/C
login/C
./C
keychain/C
-/C
P/C
ThePasswordYouSetWhenExporting/C
-/C
A/C

Importing/VBG
the/DT
distribution/NN
certificate/NN
works/VBZ
the/DT
same/JJ
way/NN
./.

I/PRP
do/VBP
n't/RB
know/VB
why/WRB
you/PRP
need/VBP
to/TO
unlock/VB
the/DT
keychain/NN
for/IN
importing/VBG
a/DT
.p12/URI
and/CC
not/RB
for/IN
a/DT
.cer/URI
,/,
but/CC
well/RB
./.

You/PRP
will/MD
also/RB
need/VB
access/NN
to/TO
the/DT
provisioning/VBG
profiles/NNS
,/,
I/PRP
will/MD
edit/VB
those/DT
instructions/NNS
into/IN
this/DT
post/NN
shortly/RB
./.

